!function(e){function t(t){for(var i,s,o=t[0],n=t[1],c=t[2],u=0,f=[];u<o.length;u++)s=o[u],l[s]&&f.push(l[s][0]),l[s]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);for(d&&d(t);f.length;)f.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,s=1;s<a.length;s++){var n=a[s];0!==l[n]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},s={websiteco:0},l={websiteco:0},r=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[];s[e]?t.push(s[e]):0!==s[e]&&{"website-bundle":1}[e]&&t.push(s[e]=new Promise(function(t,a){for(var i="css/"+({"website-bundle":"website-bundle"}[e]||e)+"."+{"website-bundle":"632aad23"}[e]+".css",l=o.p+i,r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var c=(d=r[n]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===i||c===l))return t()}var u=document.getElementsByTagName("style");for(n=0;n<u.length;n++){var d;if((c=(d=u[n]).getAttribute("data-href"))===i||c===l)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var i=t&&t.target&&t.target.src||l,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.request=i,delete s[e],f.parentNode.removeChild(f),a(r)},f.href=l,document.getElementsByTagName("head")[0].appendChild(f)}).then(function(){s[e]=0}));var a=l[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(function(t,i){a=l[e]=[t,i]});t.push(a[2]=i);var r,n=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(e){return o.p+"js/"+({"website-bundle":"website-bundle"}[e]||e)+"."+{"website-bundle":"f2a0f12b"}[e]+".js"}(e),r=function(t){c.onerror=c.onload=null,clearTimeout(u);var a=l[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src,r=new Error("Loading chunk "+e+" failed.\n("+i+": "+s+")");r.type=i,r.request=s,a[1](r)}l[e]=void 0}};var u=setTimeout(function(){r({type:"timeout",target:c})},12e4);c.onerror=c.onload=r,n.appendChild(c)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/bqt/",o.oe=function(e){throw e};var n=window.webpackJsonp=window.webpackJsonp||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var u=0;u<n.length;u++)t(n[u]);var d=c;r.push([1,"chunk-vendors","chunk-common"]),a()}({"00e8":function(e,t,a){},"037a":function(e,t,a){"use strict";var i=a("00e8");a.n(i).a},"044e":function(e,t,a){"use strict";var i=a("1ad1");a.n(i).a},"07c3":function(e,t,a){},"08e7":function(e,t,a){"use strict";var i=a("8d40");a.n(i).a},"09d3":function(e,t,a){},"0de6":function(e,t,a){"use strict";var i=a("3623");a.n(i).a},"0efc":function(e,t,a){},1:function(e,t,a){e.exports=a("8bcf")},"11d5":function(e,t,a){"use strict";var i=a("eb9c");a.n(i).a},"11fa":function(e,t,a){},1491:function(e,t,a){},"1ad1":function(e,t,a){},"1d4a":function(e,t,a){},"1f92":function(e,t,a){},2053:function(e,t,a){},"20c1":function(e,t,a){"use strict";var i=a("5e45");a.n(i).a},"20ef":function(e,t,a){"use strict";var i=a("297c");a.n(i).a},"21b0":function(e,t,a){"use strict";var i=a("9ad1");a.n(i).a},2243:function(e,t,a){},"224f":function(e,t,a){"use strict";var i=a("d294");a.n(i).a},2461:function(e,t,a){"use strict";var i=a("496c");a.n(i).a},2472:function(e,t,a){},2626:function(e,t,a){},2697:function(e,t,a){"use strict";var i=a("ffdb");a.n(i).a},2848:function(e,t,a){"use strict";var i=a("cf53");a.n(i).a},"297c":function(e,t,a){},"2a73":function(e,t,a){},"2c0c":function(e,t,a){},"2e54":function(e,t,a){"use strict";var i=a("5176");a.n(i).a},"307d":function(e,t,a){},3241:function(e,t,a){"use strict";var i=a("07c3");a.n(i).a},"326d":function(e,t,a){"use strict";var i=a("2a73");a.n(i).a},3337:function(e,t,a){"use strict";var i=a("f9f0");a.n(i).a},3348:function(e,t,a){},3482:function(e,t,a){"use strict";var i=a("7d8c");a.n(i).a},"35e2":function(e,t,a){"use strict";var i=a("d47f");a.n(i).a},3623:function(e,t,a){},"36c6":function(e,t,a){},"38bb":function(e,t,a){},"3abb":function(e,t,a){},"3abc":function(e,t,a){"use strict";a("6762"),a("2fdb"),a("f751"),a("386d"),a("28a5"),a("a481"),a("96cf");var i,s=a("1da1"),l=a("1119"),r=(a("f559"),a("c5f6"),a("ac6a"),a("7f7f"),a("be94")),o=a("d4ec"),n=a("bee2"),c=a("99de"),u=a("7e84"),d=a("45eb"),f=a("262e"),p=a("257e"),h=a("ade3"),m=a("c641"),v=a.n(m),b=a("3eea"),y=a.n(b),g=a("91ff"),_=a("bc3a"),O=a.n(_),C=a("7fd1"),D=function(e){function t(){var e,a;Object(o.a)(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s))),Object(h.a)(Object(p.a)(Object(p.a)(a)),"title",""),Object(h.a)(Object(p.a)(Object(p.a)(a)),"tableKeys","tuStr"),Object(h.a)(Object(p.a)(Object(p.a)(a)),"tableSelectable",!0),Object(h.a)(Object(p.a)(Object(p.a)(a)),"axioss",O.a.create({responseType:"arraybuffer"})),Object(h.a)(Object(p.a)(Object(p.a)(a)),"filter",Object(r.a)({},y()(a.filter,"timeRange"),{orderBy:"createTime",orderBys:"createTime",flowType:"",labelName:"",statusBqt:"",adType:"",income:"",keyword:"",search:""})),Object(h.a)(Object(p.a)(Object(p.a)(a)),"allTags",[]),Object(h.a)(Object(p.a)(Object(p.a)(a)),"filterRule",[]),Object(h.a)(Object(p.a)(Object(p.a)(a)),"canCopy",0),Object(h.a)(Object(p.a)(Object(p.a)(a)),"copyNames",""),Object(h.a)(Object(p.a)(Object(p.a)(a)),"LU",{pc:"//cpro.baidustatic.com/cpro/ui/c.js",floated:"//cpro.baidustatic.com/cpro/ui/f.js",mobile:"//cpro.baidustatic.com/cpro/ui/cm.js",sideSlip:"//cpro.baidustatic.com/cpro/ui/s.js"}),Object(h.a)(Object(p.a)(Object(p.a)(a)),"IMG",{pc:"//cpro.baidustatic.com/cpro/ui/i.js",mobile:"//cpro.baidustatic.com/cpro/ui/mi.js"}),Object(h.a)(Object(p.a)(Object(p.a)(a)),"PS",{pcEmbed:"//su.bdimg.com/static/dspui/js/ue.js",pcFloat:"//su.bdimg.com/static/dspui/js/f.js",mobileEmbed:"//su.bdimg.com/static/dspui/js/um.js",mobileFloat:"//su.bdimg.com/static/dspui/js/umf.js"}),Object(h.a)(Object(p.a)(Object(p.a)(a)),"PATCH_SHAPE",["startPatch","midPatch","endPatch","pausePatch"]),a}return Object(f.a)(t,e),Object(n.a)(t,[{key:"init",value:function(){Object(d.a)(Object(u.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getWebSlotList,this.deleteWebSlotList=this.api.deleteWebSlotList,this.openWebSlotList=this.api.openWebSlotList,this.closeWebSlotList=this.api.closeWebSlotList,this.getAdpTags=this.api.getAdpTags,this.getFilter=this.api.getFilter,this.setFilter=this.api.setFilter,this.canCopyCode=this.api.canCopyCode,this.copyCode=this.api.copyCode,this.getCodeRelation=this.api.getCodeRelation,this.getCodeRescueStrategy=this.api.getCodeRescueStrategy,this.matchRescueStrategy=this.api.matchRescueStrategy,this.getWebSlotDetail=this.api.getWebSlotDetail,this.getWebSlotDup=this.api.getWebSlotDup,this.prepareFilter();var e=Object(d.a)(Object(u.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(r.a)({},this.filter,e)}},{key:"prepareFilter",value:function(){var e=this;this.canCopyCode().then(function(t){e.canCopy=t.canBatchCopy}),this.getFilter({appId:1}).then(function(t){var a=t.results.map(function(e){return{label:e.name,value:e.id}});e.filterRule=[{label:"不限制",value:""}].concat(a)}),this.getAdpTags().then(function(t){t.forEach(function(t){e.allTags.push({label:t,value:t})})})}},{key:"fillFilterFromQuery",value:function(){var e=this;v()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),this.filter.labelName.length&&(this.filter.labelName=this.filter.labelName.split(","))}},{key:"adaptData",value:function(e){return{pageNo:e.page.pageNo,pageSize:e.page.pageSize,totalCount:e.page.totalCount,result:e.page.result,order:this.filter.order,orderBy:this.filter.orderBy}}},{key:"prepareParams",value:function(e){return delete e.orderBy,e}},{key:"getCodeParams",value:function(e){return this.getWebSlotDetail({tuIdList:e})}},{key:"otherScript",value:function(e){return e.psHeight?"var cpro_psheight = "+e.psHeight:e.psWidth?"var cpro_pswidth = "+e.psWidth:""}},{key:"getScript",value:function(e){var t=this.LU,a=this.IMG,i=this.PS,s=this.PATCH_SHAPE,l=e.tu,r=JSON.parse(e.extra),o=JSON.parse(e.basic),n=JSON.parse(e.container),c=JSON.parse(e.fillStyle),u=r.shape,d=Number(o.flowType),f=c.styleType,p=Number(n.anchoredType),h=n.floated||{},m={},v=d===C.g.PCDOMAIN?"pc":"mobile",b=n.width,y=n.height;if(m.tu=l,f!==C.l.CUSTOMIZATION)return u&&s.includes(u)||(d===C.g.PCDOMAIN?p===C.c.QIANRU||p===C.c.XUANFU&&h.trigger||"bottomSearch"===u?m.script=t[v]:"sideSlip"===u?m.script="//cpro.baidustatic.com/cpro/ui/s.js":"topSearch"===u?m.script="//cpro.baidustatic.com/cpro/ui/z.js":"neiwen"===u?m.script="//cpro.baidustatic.com/cpro/ui/cnw.js":"searchRecom"===u?(m.script="//su.bdimg.com/static/dspui/js/f.js",m.psid=l):"imagePlus"===u?(m.tips="建议投放在200*300以上的图片",m.script="//cpro.baidustatic.com/cpro/ui/i.js"):p===C.c.XUANFU&&(m.script="//cpro.baidustatic.com/cpro/ui/f.js"):d===C.g.MBLWAP&&("imagePlus"===u?m.script="//cpro.baidustatic.com/cpro/ui/mi.js":"searchRecom"===u?(m.script="//su.bdimg.com/static/dspui/js/umf.js",m.psid=l):p!==C.c.QIANRU&&p!==C.c.XUANFU||(m.script="//cpro.baidustatic.com/cpro/ui/cm.js"))),m;var g=c.styleTemplateId[0]+"";switch(0===g.indexOf(C.f.LU)||g.startsWith("5")?C.f.LU:0===g.indexOf(C.f.PS_NEW)?C.f.PS_NEW:+"".substr.call(g,0,2)){case C.f.LU:"pc"==v&&p===C.c.XUANFU?m.script=t.floated:m.script="sideSlip"===u?t.sideSlip:t[v];break;case C.f.IMG:m.script=a[v];break;case C.f.PS_NEW:if(c){if(c.lu&&151===c.lu.stid){m.script=t.pc;break}if(c.lu&&4073===c.lu.stid){m.script=t.mobile;break}}m.psid=l,"pc"==v?p===C.c.QIANRU?(m.script=i.pcEmbed,m.psHeight=y,m.psWidth=0===b?"auto":b):p===C.c.XUANFU&&(m.script=i.pcFloat):"mobile"==v&&(p===C.c.QIANRU?(m.script=i.mobileEmbed,m.psHeight=y,m.psWidth=0===b?"auto":b):p===C.c.XUANFU&&(m.script=i.mobileFloat));break;case C.f.PS:m.psid=l,m.script=i.pcFloat}return m}}]),t}(g.a),w=a("94c6"),j=a("927d"),k=a("3a6d"),S=a("7898"),x=a("c9ac"),R=a("5e6e"),T=a("af34"),I=a("6235"),F=a("e469"),N=a("9434"),A=a("dd9a"),M=a("5b30"),Y=a("ab80"),L=a("4681"),E=a("543b"),P=a("5c5a"),V=a("8631"),B=a("9a9a"),$=a("b8c7"),z=a("f64b"),q=Object(w.a)(l.a,D,{name:"slotList",components:{"veui-fieldset":k.a,"veui-field":j.a,"veui-table-column":T.a,"veui-searchbox":R.a,"veui-button":S.a,"veui-select":x.a,"veui-icon":I.a,"veui-selecthor":$.a,"veui-dialog":F.a,"veui-overlay":N.a,"veui-dropdown":A.a,"veui-link":M.a,"veui-textarea":Y.a,"veui-tooltip":L.a,"veui-checkbox":E.a,"veui-input":V.a,"veui-alert-box":P.a,ListFilters:z.a},data:function(){return{statusObj:C.q,AdType:C.a,AdTypeObj:C.b,Status:C.k,AsyncOptions:C.d,selectStrategy:null,selectMultipleStrategy:null,modalVisible:!1,openFilters:!1,codeAsync:"async",rescueVisible:!1,checkedRescue:!1,noScriptVisible:!1,mip:"",adInfo:{},filterOptions:[{label:"所属平台",name:"flowType",items:C.h,selected:this.store.filter.flowType},{label:"标签",name:"labelName",items:this.store.allTags,selected:this.store.filter.labelName,hasInput:!0,multi:!0,place:"搜索标签"},{label:"状态",name:"statusBqt",items:C.k,selected:this.store.filter.statusBqt},{label:"类型",name:"adType",items:C.a,selected:this.store.filter.adType},{label:"收入",name:"income",items:C.j,selected:this.store.filter.income}],errorDeleteArr:[],errorDeleteOpen:!1,copyVisible:!1,deleteVisible:!1,batchDeleteVisible:!1,strategyVisible:!1,multipleStrategyVisible:!1,codeSeveralVisible:!1,deleteId:"",strategyId:"",copyCodeId:"",canRescue:!1,jsUrl:"",dupPath:"",setId:"",edit:{type:"",id:""},operations:[{label:"删除",value:"delete"},{label:"过滤设置",value:"set"},{label:"下载",value:"download"}]}},directives:{autosubmit:B.a},computed:{},methods:{search:function(){this.store.filter.labelName.length&&(this.store.filter.labelName=this.store.filter.labelName.join()),this.global.searchList(this)},goToEdit:function(e){this.global.router.push({path:"/union/slot/".concat(e,"/edit")})},goToCreate:function(){this.global.router.push({path:"/union/slot/create"})},getCodeParams:(i=Object(s.a)(regeneratorRuntime.mark(function e(t,a){var i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.getCodeParams(t);case 2:i=e.sent,s=this.store.getScript(i[0].adPosDetail),this.adInfo={tuId:i[0].adPosDetail.tuStr,tu:s.tu,psid:s.psid||"",psWidth:s.psWidth||"",psHeight:s.psHeight||"",script:s.script||""},this.adInfo.script?(this.rescueVisible=!1,this.modalVisible=!0,this.canRescue=!1,this.createCode(),this.getRescueParam(a)):this.noScriptVisible=!0;case 6:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)}),createCode:function(){var e=this.adInfo.tu,t=this.adInfo.script,a="";if("sync"===this.codeAsync){var i=this.adInfo.psid?"cpro_psid":"cpro_id";a='<script type="text/javascript">\n        var '.concat(i,' = "').concat(e,'";\n        ')+this.store.otherScript(this.adInfo)+'\n<\/script>\n<script type="text/javascript" src="'.concat(t,'"><\/script>')}else a='<script type="text/javascript">\n        (function() {\n            var s = "_" + Math.random().toString(36).slice(2);\n            document.write(\'<div style="" id="\' + s + \'"></div>\');\n            (window.slotbydup = window.slotbydup || []).push({\n                id: "'.concat(e,'",\n                container: s\n            });\n        })();\n<\/script>\n\x3c!-- 多条广告如下脚本只需引入一次 --\x3e\n<script type="text/javascript" src="').concat(t,'" async="async" defer="defer" >\n<\/script>');document.getElementById("code").value=a},copyCode:function(){document.getElementById("code").select(),document.execCommand("copy")&&document.execCommand("copy")},deleteCode:function(e){this.deleteId=[e],this.deleteVisible=!0},confirmDelete:function(){var e=this;this.store.deleteWebSlotList({tuIdList:this.deleteId}).then(function(t){e.batchDeleteVisible=!1,e.store.submitSearch(),t.length?(e.errorDeleteArr=t,e.errorDeleteOpen=!0):e.showToast("删除成功",{type:"success"})}),this.deleteVisible=!1},operate:function(e){switch(e){case"stop":this.batchClose(this.store.tableSelected);break;case"start":this.batchOpen(this.store.tableSelected);break;case"delete":this.deleteId=this.store.tableSelected,this.batchDeleteVisible=!0;break;case"set":this.multipleStrategyVisible=!0,this.selectMultipleStrategy=null;break;case"download":this.downloadCode()}},batchOpen:function(e){var t=this;this.store.openWebSlotList({tuIdList:e}).then(function(e){t.store.submitSearch(),t.showToast("启用成功",{type:"success"})})},batchClose:function(e){var t=this;this.store.closeWebSlotList({tuIdList:e}).then(function(e){t.store.submitSearch(),t.showToast("停用成功",{type:"success"})})},setStrategy:function(e,t){this.selectStrategy=t,this.strategyId=e,this.strategyVisible=!0},confirmStrategy:function(){var e=this;null!==this.selectStrategy?(this.store.setFilter({adPositionIds:[this.strategyId],appId:1,ruleId:this.selectStrategy}).then(function(t){e.showToast("设置成功",{type:"success"}),e.store.submitSearch()}),this.strategyVisible=!1):this.showToast("请选择过滤策略",{type:"warn"})},confirmMultipleStrategy:function(){var e=this;null!==this.selectMultipleStrategy?(this.store.setFilter({adPositionIds:this.store.tableSelected,appId:1,ruleId:this.selectMultipleStrategy}).then(function(t){e.showToast("设置成功",{type:"success"}),e.store.submitSearch()}),this.multipleStrategyVisible=!1):this.showToast("请选择过滤策略",{type:"warn"})},goToServiceList:function(e){this.store.copyNames="",this.copyVisible=!0,this.copyCodeId=e},confirmCopy:function(){var e=this,t=this.store.copyNames.replace(/[\n\r]/g,",").split(",").filter(function(e){return e}),a={sourceTu:this.copyCodeId,names:t};this.store.copyCode(a).then(function(t){e.copyVisible=!1,e.showToast("复制成功",{type:"success"}),e.store.submitSearch()})},refreshPageList:function(e){"edit"===e?(this.store.submitSearch(),this.store.prepareFilter()):"create"===e&&this.store.submitSearch()},toggleFilters:function(){this.openFilters=!0!==this.openFilters},requestAfterFilter:function(e){this.store.filter.search&&(this.store.filter.keyword=this.store.filter.search),this.store.filter.search="",Array.isArray(e.labelName)&&(e.labelName=e.labelName.join()),this.store.filter=Object.assign(this.store.filter,e),this.openFilters=!1,this.store.submitSearch(),this.$forceUpdate()},formatSize:function(e){var t=e.split(/[*:.]/g);return""!==t[1]&&"0"!==t[1]||(e="自适应"),""!==t[0]&&"0"!==t[0]||"0"===t[1]||""===t[1]||(e="通栏"),e},downloadCode:function(){var e=this.store.tableSelected.join();window.open("/v2/client/adpos/adpos/download?tuIdList=".concat(e))},gotoReport:function(e){var t=this.global.router.resolve({path:"/report/bidding",query:{adPositionId:e,dimensions:"adPositionName",filterFields:"rtbTypeId,sellTypeId,getAdType,adPositionId",filterValues:"0|1|1|".concat(e)}});window.open(t.href,"_blank")},toRescueCode:function(){this.createRescueCode(),this.rescueVisible=!0},getRescueParam:function(e){var t=this;this.jsUrl="",this.store.getCodeRescueStrategy({},{showLoading:!1}).then(function(a){var i=a[0];t.jsUrl=i.jsUrl,t.setId=i.id,t.store.getWebSlotDup({shotId:e,posUrl:i.posUrl},{showLoading:!1}).then(function(e){var a=JSON.parse(e);t.dupPath=a.code,t.mip=a.mip,t.canRescue=!0})}),this.store.getCodeRelation({tu:this.adInfo.tuId},{showLoading:!1}).then(function(e){t.checkedRescue=Boolean(e&&e.rescueStrategy)})},createRescueCode:function(){var e=this.jsUrl,t=this.dupPath;t.includes(".js?")||(t="".concat(t,".js"));var a='<script type="text/javascript" src="//'.concat(e,"/").concat(t,'"><\/script>');document.getElementById("rescueCode").value=a},copyRescueCode:function(){document.getElementById("rescueCode").select(),document.execCommand("copy")&&document.execCommand("copy")},setRescueStatus:function(e){var t={id:this.setId,tu:this.adInfo.tuId,type:e?1:0};this.store.matchRescueStrategy(t).then()},getStatusColor:function(e){var t="#666";return"无效"===e?t="#999999":"停用"===e&&(t="#FE9700"),t}}}),U=(a("840c"),a("2877")),W=Object(U.a)(q,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"web-slot-list-view"},[a("template",{slot:"filterContent"},[a("veui-field",[a("veui-button",{attrs:{ui:"primary"},on:{click:e.goToCreate}},[e._v("新建代码位")])],1),a("veui-field",{staticClass:"batch-field"},[a("veui-dropdown",{staticClass:"batch-btn",attrs:{label:"批量操作",options:e.operations,disabled:!this.store.tableSelected.length},on:{click:e.operate}})],1),a("veui-button",{staticClass:"filters",on:{click:e.toggleFilters}},[e._v("\n            筛选\n            "),a("veui-icon",{staticClass:"filters-angle",class:{open:e.openFilters},attrs:{name:"angle-down"}})],1),a("veui-field",{staticClass:"message-search",attrs:{field:"key"}},[a("veui-searchbox",{attrs:{placeholder:"搜索代码位名称或ID"},on:{search:e.search},model:{value:e.store.filter.search,callback:function(t){e.$set(e.store.filter,"search","string"==typeof t?t.trim():t)},expression:"store.filter.search"}})],1),a("list-filters",{attrs:{"init-filter":e.store.filter,"filter-options":e.filterOptions,"show-filters":e.openFilters},on:{filterChange:e.requestAfterFilter,closeFilter:e.toggleFilters}})],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"name",width:"152",title:"代码位名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{attrs:{title:t.name}},[e._v(e._s(t.name))]),a("div",{staticClass:"tableID filter-cell"},[e._v("ID:"+e._s(t.tu))])]}}])}),a("veui-table-column",{attrs:{field:"cname",width:"150",title:"计费名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.cname))])]}}])}),a("veui-table-column",{attrs:{field:"size",width:"100",title:"尺寸"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatSize(t.size)))])]}}])}),a("veui-table-column",{attrs:{field:"settingName",width:"100",title:"过滤策略"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.settingName?a("div",{ref:"settingName"+t.tuStr,staticClass:"filter-cell",attrs:{title:t.settingName}},[e._v("\n                    "+e._s(t.settingName)+"\n                ")]):e._e(),t.settingName?a("veui-tooltip",{attrs:{position:"top-start",trigger:"hover",target:"settingName"+t.tuStr,"overlay-class":"filter-hover-overlay"}},[a("span",[e._v("\n                        "+e._s(t.settingName)+"\n                    ")])]):a("div",[e._v("--")])]}}])}),a("veui-table-column",{attrs:{field:"adType",width:"80",title:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.AdTypeObj[t.adType]))])]}}])}),a("veui-table-column",{attrs:{field:"createTime",width:"120",title:"创建时间",sortable:""}}),a("veui-table-column",{attrs:{field:"status",width:"90",title:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:e.getStatusColor(e.statusObj[t.status])}},[e._v(e._s(e.statusObj[t.status]))])]}}])}),a("veui-table-column",{attrs:{field:"op",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"op"},[t.isAutoAdpos?e._e():a("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.getCodeParams(t.tuStr,t.tu)}}},[e._v("\n                        获取代码\n                    ")]),t.isAutoAdpos?e._e():a("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.goToEdit(t.tuStr)}}},[e._v("\n                        修改\n                    ")]),e.store.canCopy?a("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.goToServiceList(t.tu)}}},[e._v("\n                        复制代码位\n                    ")]):e._e(),a("veui-button",{ref:"strategy"+t.tuStr,staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.setStrategy(t.tuStr,t.settingId)}}},[e._v("\n                        过滤设置\n                    ")]),t.isAutoAdpos?e._e():a("veui-button",{ref:"delete"+t.tuStr,staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.deleteCode(t.tuStr)}}},[e._v("\n                        删除\n                    ")]),t.isAutoAdpos?e._e():a("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.gotoReport(t.tu)}}},[e._v("\n                        查看报告\n                    ")])],1)]}}])})],1),a("veui-dialog",{attrs:{"overlay-class":"no-script-dialog",open:e.noScriptVisible,title:"获取代码位"},on:{"update:open":function(t){e.noScriptVisible=t}}},[a("template",{slot:"title"},[a("h3",[e._v("获取代码位")])]),a("p",[e._v("以下是代码位Id，具体投放代码及说明请点击\n            "),a("a",{staticClass:"blue-text",attrs:{href:"http://union.baidu.com/un-cms/docs/%E7%99%BE%E5%BA%A6%E8%81%94%E7%9B%9F%E8%A7%86%E9%A2%91%E6%B5%81%E9%87%8F%E8%B4%B4%E7%89%87%E5%B9%BF%E5%91%8A%E6%8A%95%E6%94%BE%E8%AF%B4%E6%98%8E.pdf",target:"_blank"}},[e._v("投放说明文档\n            ")]),e._v("。\n        ")]),a("veui-input",{staticClass:"input-tu",attrs:{readonly:"readonly"},model:{value:e.adInfo.tu,callback:function(t){e.$set(e.adInfo,"tu",t)},expression:"adInfo.tu"}}),a("template",{slot:"foot"},[a("veui-button",{on:{click:function(t){e.noScriptVisible=!1}}},[e._v("关闭")])],1)],2),a("veui-dialog",{attrs:{"overlay-class":"web-code-dialog",open:e.modalVisible,title:"获取代码位"},on:{"update:open":function(t){e.modalVisible=t}}},[a("template",{slot:"title"},[a("h3",[e._v("获取代码位")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:!e.rescueVisible,expression:"!rescueVisible"}]},[a("p",[e._v("以下是代码位Id，具体投放代码及说明请点击\n                "),a("a",{attrs:{href:"http://union.baidu.com/un-cms/docs/%E7%99%BE%E5%BA%A6%E8%81%94%E7%9B%9F%E8%A7%86%E9%A2%91%E6%B5%81%E9%87%8F%E8%B4%B4%E7%89%87%E5%B9%BF%E5%91%8A%E6%8A%95%E6%94%BE%E8%AF%B4%E6%98%8E.pdf",target:"_blank"}},[e._v("投放说明文档")]),e._v("。\n            ")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:!e.rescueVisible,expression:"!rescueVisible"}]},[a("section",[e._v("\n                投放方式：\n                "),a("veui-select",{attrs:{options:e.AsyncOptions},on:{change:e.createCode},model:{value:e.codeAsync,callback:function(t){e.codeAsync=t},expression:"codeAsync"}}),a("veui-icon",{ref:"async-info",staticClass:"async-code-icon",attrs:{name:"question-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"async-info",trigger:"hover","overlay-class":"notice-tooltip"}},[a("p",[e._v("异步投放是广告代码的异步版本，它有助于改善网络延迟，为网站的访问者提供更佳的用户体验。")]),a("p",[e._v("异步代码的优势在于能够确保绝不会妨碍网页的其他部分进行加载。")]),a("p",[e._v("建议切换时同一网页上的所有代码位都进行替换。")]),a("p",[e._v("同步广告代码是原有的投放方式。")])])],1),a("p",{staticClass:"sub-title"},[e._v("请将此段代码粘贴到投放广告的区域中,注意保证加载顺序。")]),a("p",{staticClass:"sub-title"},[e._v("注：建议将代码位埋放在body中，避免低版本浏览器导致广告无法展现")]),a("textarea",{ref:"code",staticClass:"code",attrs:{id:"code",readonly:"readonly"}})]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.rescueVisible,expression:"rescueVisible"}]},[a("p",[e._v("\n                设置反屏蔽：\n                "),a("veui-checkbox",{on:{change:e.setRescueStatus},model:{value:e.checkedRescue,callback:function(t){e.checkedRescue=t},expression:"checkedRescue"}}),e._v("\n                (设置后可获取投放代码)\n            ")],1),a("p",[e._v("反屏蔽投放代码："),a("span",{staticClass:"rescue-notice"},[e._v("（注：请完整粘贴如下代码，不要做修改。）")])]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:e.checkedRescue,expression:"checkedRescue"}],staticClass:"code",attrs:{id:"rescueCode",readonly:"readonly"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:e.checkedRescue,expression:"checkedRescue"}]},[e._v("说明：请使用此JS代码投放至页面上以完成广告反屏蔽功能。")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.checkedRescue,expression:"checkedRescue"}]},[e._v("MIP反屏蔽token："+e._s(e.mip)),a("span",{staticClass:"rescue-notice"},[e._v("（注：非MIP站点无需关注。）")])])]),a("template",{slot:"foot"},[a("veui-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescueVisible,expression:"!rescueVisible"}],attrs:{ui:"primary"},on:{click:e.copyCode}},[e._v("复制")]),a("veui-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescueVisible,expression:"!rescueVisible"}],attrs:{disabled:!e.canRescue,ui:"primary",id:"rescue-code-btn"},on:{click:e.toRescueCode}},[e._v("生成反屏蔽代码\n            ")]),a("veui-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescueVisible,expression:"!rescueVisible"}],on:{click:function(t){e.modalVisible=!1}}},[e._v("关闭")]),a("veui-button",{directives:[{name:"show",rawName:"v-show",value:e.rescueVisible&&e.checkedRescue,expression:"rescueVisible && checkedRescue"}],attrs:{ui:"primary"},on:{click:e.copyRescueCode}},[e._v("复制\n            ")]),a("veui-button",{directives:[{name:"show",rawName:"v-show",value:e.rescueVisible,expression:"rescueVisible"}],on:{click:function(t){e.rescueVisible=!1}}},[e._v("返回")])],1)],2),a("veui-overlay",{attrs:{target:"delete"+e.deleteId,options:{attachment:"bottom right",targetAttachment:"top right"},open:e.deleteVisible,"overlay-class":"overlay-code-delete"},on:{"update:open":function(t){e.deleteVisible=t}}},[a("div",{staticClass:"deleteCodeInner"},[a("p",[e._v("确认删除么")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small primary"},on:{click:e.confirmDelete}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:function(t){e.deleteVisible=!1}}},[e._v("取消")])],1)]),a("veui-overlay",{attrs:{target:"strategy"+e.strategyId,options:{attachment:"bottom right",targetAttachment:"top right"},open:e.strategyVisible,"overlay-class":"overlay-code-delete"},on:{"update:open":function(t){e.strategyVisible=t}}},[e.strategyVisible?a("div",{staticClass:"deleteCodeInner"},[a("div",[a("span",[e._v("设置：")]),a("veui-select",{attrs:{placeholder:"规则名称",options:this.store.filterRule},model:{value:e.selectStrategy,callback:function(t){e.selectStrategy=t},expression:"selectStrategy"}})],1),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small primary"},on:{click:e.confirmStrategy}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:function(t){e.strategyVisible=!1}}},[e._v("取消")])],1):e._e()]),a("veui-dialog",{attrs:{open:e.copyVisible,"overlay-class":"overlay-code-copy",title:"复制代码位"},on:{"update:open":function(t){e.copyVisible=t}}},[e.copyVisible?a("div",{staticClass:"copyCodeInner"},[a("div",{staticClass:"name"},[e._v("名称")]),a("veui-textarea",{attrs:{"line-number":""},model:{value:e.store.copyNames,callback:function(t){e.$set(e.store,"copyNames",t)},expression:"store.copyNames"}})],1):e._e(),a("div",{staticClass:"tip"},[e._v("提示：名称数量最多不超过50个")]),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.confirmCopy}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:function(t){e.copyVisible=!1}}},[e._v("取消")])],1)],2),a("veui-dialog",{attrs:{open:e.multipleStrategyVisible,"overlay-class":"overlay-filter-set",title:"过滤设置"},on:{"update:open":function(t){e.multipleStrategyVisible=t}}},[a("div",{staticClass:"copyCodeInner"},[a("div",[a("span",[e._v("设置：")]),a("veui-select",{attrs:{placeholder:"规则名称",options:this.store.filterRule},model:{value:e.selectMultipleStrategy,callback:function(t){e.selectMultipleStrategy=t},expression:"selectMultipleStrategy"}})],1)]),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.confirmMultipleStrategy}},[e._v("\n                确认\n            ")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:function(t){e.multipleStrategyVisible=!1}}},[e._v("\n                取消\n            ")])],1)],2),a("veui-dialog",{attrs:{open:e.batchDeleteVisible,"overlay-class":"overlay-batch-delete"},on:{"update:open":function(t){e.batchDeleteVisible=t}}},[a("p",{staticStyle:{"text-align":"center"}},[e._v("确认批量删除么?")]),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.confirmDelete}},[e._v("\n                确认\n            ")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:function(t){e.batchDeleteVisible=!1}}},[e._v("\n                取消\n            ")])],1)],2),a("veui-alert-box",{attrs:{type:"error","overlay-class":"alert__delete-err",open:e.errorDeleteOpen},on:{"update:open":function(t){e.errorDeleteOpen=t}}},e._l(e.errorDeleteArr,function(t){return a("div",{key:t.tuId},[e._v("\n            ID："+e._s(t.tuId)+"删除失败！原因："+e._s(t.error)+"\n        ")])}))],2)},[],!1,null,null,null);W.options.__file="SlotListView.vue",t.a=W.exports},"3b60":function(e,t,a){"use strict";var i=a("5356");a.n(i).a},"3dd0":function(e,t,a){"use strict";var i=a("6e26");a.n(i).a},"3e02":function(e,t,a){"use strict";var i=a("582b");a.n(i).a},"438f":function(e,t,a){"use strict";var i=a("2c0c");a.n(i).a},"43cf":function(e,t,a){},"45c3":function(e,t,a){"use strict";var i=a("ea70");a.n(i).a},"45ec":function(e,t,a){"use strict";var i=a("50a3");a.n(i).a},"46db":function(e,t,a){},"48f4":function(e,t,a){"use strict";var i=a("9830");a.n(i).a},"496c":function(e,t,a){},"4b6b":function(e,t,a){"use strict";var i=a("a600");a.n(i).a},"4bcc":function(e,t,a){"use strict";var i=a("5096");a.n(i).a},"4d53":function(e,t,a){"use strict";var i=a("56a4");a.n(i).a},"4d5d":function(e,t,a){},"4d80":function(e,t,a){},5096:function(e,t,a){},"50a3":function(e,t,a){},5176:function(e,t,a){},5356:function(e,t,a){},"53dd":function(e,t,a){},"56a4":function(e,t,a){},"582b":function(e,t,a){},"584f":function(e,t,a){"use strict";var i=a("9833");a.n(i).a},"599a":function(e,t,a){"use strict";var i=a("3348");a.n(i).a},"5b56":function(e,t,a){},"5ba4":function(e,t,a){"use strict";var i=a("c687");a.n(i).a},"5d5a":function(e,t,a){"use strict";var i=a("a78a");a.n(i).a},"5d7b":function(e,t,a){"use strict";var i=a("e35e");a.n(i).a},"5e45":function(e,t,a){},6193:function(e,t,a){},6459:function(e,t,a){},6546:function(e,t,a){"use strict";var i=a("2626");a.n(i).a},"67f0":function(e,t,a){"use strict";var i=a("9c5b");a.n(i).a},"685d":function(e,t,a){"use strict";var i=a("f3c4");a.n(i).a},"6a19":function(e,t,a){"use strict";var i=a("6193");a.n(i).a},"6c32":function(e,t,a){},"6d23":function(e,t,a){"use strict";var i=a("38bb");a.n(i).a},"6d7a":function(e,t,a){},"6d88":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAABQCAYAAACK5CKQAAAAAXNSR0IArs4c6QAACFZJREFUeAHtXWloFjkYjvVEXYq0nuvd1lvRrfeBQqUqgr+ssqwKXniBVkRFRBSPH/pDkP5QQUR/FEHZQhFBRamCItpawbWr1PXoel941Hos2uz7Tpu3k+kciZ1v+n02L+SbJO8xeZ/JZJL5kgxj9ak5ZP0O4U8IFRD+g8CbcKgE3/+GkAchE4IS/QZSZRCaMnB+vlcDNvkQfoHgSdnAqYLgZ8jwavD5C3BKsSPZrDaRDscSCMmCmZaWxmbOnMlGjBjB2rVrJ7Kb3PHp06espKSEFRQUsE+fPtn9L4JEFgSsXESFEKPatnbtWv7582duqA6Bu3fv8jFjxhBGtXj9QQhCJM0O4ty5c+u0TUxC4NWrV7xTp052MEvtQOYKIJOSkvjLly8lZZOQEThw4IAdSIz/imAmQcjACNKAAQNYx44daxLm1xWBiRMnOvPx+WIBmSo4CKQhfwQGDhzoFLDwawG54snNmjfHvrhMULHZhg0b2JkzZ9j3798tJspNmzaN7dmzhzVrRuoW7/Hjx2z58uXswYMHZKh9+/Zs8+bNbNasWZSXqBFo/pxFp4zjwLHu+5ycHLlBgFRRUZGzTaA08py0YsUK4gu7eExNTXWKJmza7hfEcyBYtzYePalbt26sRQusuDJhHvKc1LNnT2eWlfbKdxVOwMz6CDmc6NevH7t48SI7f/68dGtnZWUx5Dlp/fr1FsD3798nFt7a8+bNo/TPGAkEEp0eP368FVQAwPZzwYIFKqI/lQw1lD+VV43gjAEyJNANkAbIkBAIyYz0sCkuLmZz5swJyXTTMiMB+fDhQ4bBkD4Cpo3Ux8xVQ6qRvXv3ZqNGjXIVNJl1CJw4caIuURuTgEQQjx/HobchPwScL2pQ1tzafohp8AyQGmD5iRog/dDR4BkgNcDyEzVA+qGjwTNAaoDlJ2qA9ENHg2eA1ADLT9QA6YeOBi8hgPz27Rs7fPgwy8/PZ/DXo4Z70YlKQ8ToTqt3pu3bt7MdO3ZYSq9fv2Zr1qzRMxCBdELUyJMnTxIU9+7do3g8ReIeSJheyG7dukWYDR8+nOLxFIl7IEtLSxm2kYJGjx4tonF1jHsgr127RoDhRINBgwZROp4ikQJ548YNtmTJEnbkyBFlDK5evUqymZmZzGUSk8WvrKxkGzdutML79+9JJ8qI7ySqsGY6Xb58mUONoglW8Eebkum+ffuSDkyH8dSBGXMkB4DzN2/eeMo2lAEXh84FcbVJVGFcUaxVM2bMYB8/ftQyh10d+xwi1fbx+vXrDOcmoX6UFNMaCSsCeHJysv0K8k2bNilVilOnTkl6FRUVnnpwO3MAWpIfOnQof/HihafOjzLg4tjPY9VIvGAxAxLaRN6hQwf7Sfm6deuUy79161bS7dKlS6Aegjlu3DjSQYfh4cSfPXsWqKsjECmQN2/e5CkpKZJTq1ev1ikvh+aA9GG2r5IuPHT4pEmTSA+d7t+/P3/y5ImSvopQZECWlZVxmNQvObNy5UqVMkoyOMtXFHrnzp0Szy8BbTGfMmUK6aKN9PR0/ujRIz81ZZ4oU+0xNrf2nTt3eOfOnSUnli5dyqurq5ULioIwFJRsnD17VksfVmnxqVOnSjb69OnDYSaJlh034ZgDWV5ezmE6tFT4hQsXaoOIhT927BjZgf+R+du3b9188s3D1WvTp08nOwhAr169OPQEfPWCmDEFEh3t0aOHVOj58+dzWAkRVC5Xfm5uLtmCKdauMiqZX7584bCmkmwhCNjPbAi5ARnayObKlSsM2iA4Rw3BU5YdPHjQcyQi5LyO9qGhav/RzVbr1q0ZLAuUWNCNktJhJEIDEueZw21DZXr+/DmbPXs2+/r1K+WpRvAlBQ4nBcFiShHVPuKq1kWLFpEeDjH37dtH6TAjofUjse2BiVjSbZSdnc2x4dcheOMj2YCRkY46yRYWFvKWLVuSLWxrDx06RPwfjQD4ZBPisXlq4+jDPj7Gk8JwjVdVVSmX275wslWrVhzbOV3CURHqCqcRxP379+uacZUXNmuPsQESz4z9tYyMDHICTzh58mSO/TsVgluRdGGGnIqKJHP69GkObSPZwPPn5eVJMg1JRAYkFhJW3nNYJCo5AytL+YcPHwJ9GDJkCOmtWrUqUN4ucO7cOd6mTRvSR6f37t1rF2lwPFIgsbTwwOGDBw+WnBo7dix/9+6dpzM4xMN146KwR48e9ZR1Mi5cuMDbtm1LumgDFp46xRqcFmWrPcbu1raXFBfSDxs2THIOtzSAp7ldjOLORaS3b98mnl8EH1Cw94Z0nl27dvmp/DCvUYDE0sJ7QQ6bjEhOYjvmRrt37yY5fP2mOrRcvHgx6aGj27ZtczMfSp4bkKH1I8G4J8FbIGtRqJifDgAxeFfoKm/viI8cObLeenBXJcicMGECsbZs2cLgFRylo4hENkEA3kuyS5cuMbh1LRDdliijw3YgdTriMKani4MXIGqKDEh0DPp11s4DXk7iaMg+zNQdGjYGgMKXSG5tcbKgo702oqwukEH2Y8mPWyC7d+/OunbtGkvfQ7UdV0DCfyvkHPQ3KZ4IkbgCctmyZQx2erIC7uySSBTpwyYIGGwT4e9Taw6k2+qqIP3G5MdVjRRAJBqIWO64BFIAmkhHA2RIV8sAaYAMCYGQzJgaGSKQ+PrJIrEbn0ibY30E4LWeM9PKwBpJkwhhuolTyKQdCMCLZkdODX4IZLngIJCwj6xImqMLAvgq0EH/iLTZrFjxvXnQZsUIqNk+OwDMoO2zxb6uuGFxMQSzoTtWKxvpbuiOquYTA/CnGeCgEup9YsCGvRU1H73wBxK7OoEfvRCg4tbP+BmWAgj/QjCfYVH4DMv/nZ61FFHGkR0AAAAASUVORK5CYII="},"6e26":function(e,t,a){},"70d1":function(e,t,a){"use strict";var i=a("6d7a");a.n(i).a},7622:function(e,t,a){"use strict";var i=a("307d");a.n(i).a},7701:function(e,t,a){},7720:function(e,t,a){"use strict";var i=a("9ef5");a.n(i).a},"7a7b":function(e,t,a){},"7b2b":function(e,t,a){},"7d8c":function(e,t,a){},"7ebc":function(e,t,a){"use strict";var i=a("c99a");a.n(i).a},"7f3d":function(e,t,a){"use strict";var i=a("b2f1");a.n(i).a},"7fd1":function(e,t,a){"use strict";a.d(t,"h",function(){return s}),a.d(t,"k",function(){return l}),a.d(t,"q",function(){return r}),a.d(t,"a",function(){return o}),a.d(t,"b",function(){return n}),a.d(t,"j",function(){return c}),a.d(t,"d",function(){return u}),a.d(t,"g",function(){return d}),a.d(t,"c",function(){return f}),a.d(t,"l",function(){return p}),a.d(t,"f",function(){return h}),a.d(t,"e",function(){return m}),a.d(t,"i",function(){return v}),a.d(t,"o",function(){return b}),a.d(t,"n",function(){return y}),a.d(t,"m",function(){return g}),a.d(t,"p",function(){return _});var i=a("90c0"),s=[{label:"PC",value:1},{label:"WAP",value:2}],l=[{label:"有效+新创建",value:"1,2"},{label:"无效",value:"3"},{label:"停用",value:"4"}],r={1:"新创建",2:"有效",3:"无效",4:"停用"},o=[{label:"信息流",value:"107,204"},{label:"嵌入",value:"101,201"},{label:"悬浮",value:"102,202"},{label:"悬停",value:"103"},{label:"搜索推荐",value:"301,302"},{label:"搜索框",value:"-1"},{label:"视频贴片",value:"106"},{label:"图加",value:"104,203"}],n={101:"嵌入",102:"悬浮",103:"悬停",104:"图加",106:"视频贴片",201:"嵌入",202:"悬浮",203:"图加",301:"搜索推荐",302:"搜索推荐",204:"信息流",107:"信息流",105:"内文"},c=[{label:"近30天",value:1},{label:"其他",value:2}],u=[{label:"同步",value:"sync"},{label:"异步",value:"async"}],d=new i.a({alias:"PCDOMAIN",text:"PC",value:1},{alias:"MBLWAP",text:"移动网页",value:2},{alias:"MBLAPP",text:"APP",value:3},{alias:"F_VIDEO",text:"视频",value:4}),f=new i.a({alias:"QIANRU",text:"嵌入",value:1},{alias:"XUANTING",text:"悬停",value:2},{alias:"XUANFU",text:"悬浮",value:3},{alias:"GUANLIAN_SHIPIN",text:"视频贴片",value:4},{alias:"GUANLIAN_WENZI",text:"内文",value:5},{alias:"GUANLIAN_TUPIAN",text:"图加",value:6},{alias:"TANCHUANG",text:"弹窗",value:7},{alias:"QUANPING",text:"全屏",value:8},{alias:"QIANRUANNIU",text:"嵌入按钮",value:9},{alias:"XUANFUANNIU",text:"悬浮按钮",value:10},{alias:"YINCANG",text:"内文",value:11},{alias:"FEED",text:"信息流",value:12}),p=new i.a({alias:"RTB",text:"标准RTB",value:1},{alias:"NON_CUSTOMIZATION",text:"非定制样式",value:2},{alias:"CUSTOMIZATION",text:"定制化样式",value:3}),h=new i.a({alias:"NOVA",text:"nova",value:11},{alias:"NOVA_PC",text:"novaPC",value:111},{alias:"NOVA_MOBILE",text:"novaMobile",value:112},{alias:"LU",text:"lu",value:6},{alias:"LU_PC",text:"luPC",value:61},{alias:"LU_MOBILE",text:"luMobile",value:62},{alias:"IMG",text:"图加",value:13},{alias:"IMG_PC",text:"图加PC",value:131},{alias:"IMG_MOBILE",text:"图加Mobile",value:132},{alias:"PS",text:"大搜",value:14},{alias:"PS_PC",text:"大搜PC",value:141},{alias:"PS_MOBILE",text:"大搜Mobile",value:142},{alias:"PS_NEW",text:"大搜",value:7}),m=[{label:"百度公益",value:2},{label:"自定义链接",value:1},{label:"空白",value:3},{label:"自动收起",value:7}],v=[{label:"宋体",value:"宋体"},{label:"微软雅黑",value:"微软雅黑"}],b=["336*280","360*300","300*250","200*200","250*250"],y=["300*250","300*300","250*250","200*200","336*280"],g=["180*150","300*250","336*280","360*300","125*125","200*200","250*250","1000*90","120*600","160*600","250*200","300*100","300*50","300*600","360*50","360*90","460*60","468*60","480*100","480*70","500*200","580*90","610*100","640*100","640*60","640*90","640*96","728*90","760*90","950*180","950*90","960*60","960*90","970*90"],_={"640*60":3,"728*90":3,"580*90":3,"468*60":2,"760*90":3,"960*60":3,"500*200":3,"160*600":4,"120*600":4,"120*240":2,"300*250":3,"250*250":3,"200*200":2,"336*280":3,"360*300":3,"125*125":1,"180*150":1,"234*60":1,"480*160":2,"460*60":2}},8091:function(e,t,a){},8195:function(e,t,a){"use strict";var i=a("ac74");a.n(i).a},"840c":function(e,t,a){"use strict";var i=a("5b56");a.n(i).a},"85b0":function(e,t,a){"use strict";var i=a("e2a4");a.n(i).a},8672:function(e,t,a){"use strict";var i=a("f1c6");a.n(i).a},"87b8":function(e,t,a){"use strict";var i=a("7b2b");a.n(i).a},"87e9":function(e,t,a){},"888d":function(e,t,a){},"8bcf":function(e,t,a){"use strict";a.r(t),a("cadf"),a("551c"),a("097d");var i=a("d4ec"),s=a("bee2"),l=a("99de"),r=a("7e84"),o=a("45eb"),n=a("262e"),c=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this)}}]),t}(a("3df3").a),u=a("94c6"),d=a("0347"),f=Object(u.a)(d.a,c,{name:"app",components:{MusesCoView:d.a},created:function(){this.global.unReadMess={total:null},this.global.hideHeader=this.hideHeader,this.global.hideNav=this.hideNav,this.global.scrollNav=this.scrollNav},mounted:function(){this.global.scrollNav()},methods:{handleReady:function(e){},hideHeader:function(){document.getElementsByClassName("header")[0].style.display="none"},hideNav:function(){document.getElementsByClassName("ria-sidebar")[0].style.display="none"},scrollNav:function(){var e=document.getElementsByClassName("ria-sidebar sidebar")[0],t=document.getElementsByClassName("header")[0],a=document.getElementsByClassName("ssp-modules-small-header")[0],i=document.documentElement.scrollTop||document.body.scrollTop;window.addEventListener("scroll",function(){i=document.documentElement.scrollTop||document.body.scrollTop,e&&(e.style.top=80<=i?0:80-i+"px"),t&&a&&(t.style.top=35-i+"px"),t&&!a&&(t.style.top=0-i+"px"),a&&(a.style.top=0-i+"px")},!1)}}}),p=(a("4d53"),a("2877")),h=Object(p.a)(f,function(){var e=this.$createElement;return(this._self._c||e)("muses-co-view",{on:{ready:this.handleReady}})},[],!1,null,null,null);h.options.__file="AppView.vue";var m=h.exports,v=a("be94"),b=a("3228"),y=(a("f916f"),a("6235"));y.a.register({"tool-advertise-icon":{raw:'<title>&#x5DE5;&#x5177;&#x680F;&#x63A8;&#x5E7F;</title><g fill="none" fill-rule="evenodd"><path d="M.6 3.5v9a.9.9 0 0 0 .9.9h11a.9.9 0 0 0 .9-.9v-9a.9.9 0 0 0-.9-.9h-11a.9.9 0 0 0-.9.9z" stroke="#333" stroke-width="1.2"/><path d="M.824 7.2C.369 7.2 0 6.931 0 6.6c0-.331.369-.6.824-.6h12.352c.455 0 .824.269.824.6 0 .331-.369.6-.824.6H.824z" fill="#333" fill-rule="nonzero"/><path d="M7 9a2 2 0 0 0 2-2c-.277-.69-3.993-.624-4 0a2 2 0 0 0 2 2z" stroke="#333"/><path d="M4.6 2.599h4.8V1A.4.4 0 0 0 9 .6H5a.4.4 0 0 0-.4.4v1.599z" stroke="#333" stroke-width="1.2"/></g>',width:14,height:14}}),y.a.register({"search-advertise":{raw:'<title>&#x641C;&#x7D22;&#x63A8;&#x5E7F;</title><g stroke="#333" stroke-width="1.2" fill="none" fill-rule="evenodd"><path d="M5.874 3.341a.4.4 0 0 0-.274.38v6.558a.4.4 0 0 0 .274.38l7 2.333a.4.4 0 0 0 .526-.38V1.388a.4.4 0 0 0-.526-.379l-7 2.333z"/><rect x=".6" y="3.6" width="2.8" height="6.8" rx="1"/></g>',width:14,height:14}}),y.a.register({"ssp-advertise-icon":{raw:'<title>&#x76F4;&#x6295;&#x7BA1;&#x7406;</title><g stroke="#333" stroke-width="1.2" fill="none" fill-rule="evenodd"><path d="M1.118 7.213l11.535-6.187c.166-.084.369.048.345.228l-.894 10.706c-.012.168-.178.264-.333.204l-3.718-1.57-2.038 2.326a.236.236 0 0 1-.405-.096L4.645 9.13 1.142 7.644c-.179-.072-.19-.336-.024-.431z" fill-rule="nonzero"/><path d="M7 8.689l2.152-2.461" stroke-linecap="round" stroke-linejoin="round"/></g>',width:14,height:14}}),a("0a4c"),a("31dc"),a("4aaa"),a("a5c7"),a("1b39"),y.a.register({"report-search-icon":{raw:'<title>&#x641C;&#x7D22;&#x63A8;&#x5E7F;&#x62A5;&#x544A;</title><g fill="#333" fill-rule="nonzero"><path d="M14 2.352a.592.592 0 1 1-1.183 0v-.775a.394.394 0 0 0-.394-.394H1.577a.394.394 0 0 0-.394.394v10.846c0 .217.177.394.394.394h10.846a.394.394 0 0 0 .394-.394v-.775a.592.592 0 0 1 1.183 0v.775c0 .87-.706 1.577-1.577 1.577H1.577A1.577 1.577 0 0 1 0 12.423V1.577C0 .707.706 0 1.577 0h10.846C13.293 0 14 .706 14 1.577v.775z"/><path d="M2.963 11.121a.6.6 0 0 1-.726-.955l4-3.043a.6.6 0 0 1 .864.148l1.65 2.51 3.489-2.617a.6.6 0 0 1 .72.96l-4 3a.6.6 0 0 1-.861-.15L6.452 8.466 2.963 11.12zM2.6 5.2a.6.6 0 1 1 0-1.2h9a.6.6 0 0 1 0 1.2h-9z"/></g>',width:14,height:14}}),y.a.register({"tool-report-icon":{raw:'<title>&#x5DE5;&#x5177;&#x680F;&#x62A5;&#x544A;</title><g fill-rule="nonzero" fill="none"><path d="M.6 3.5v9a.9.9 0 0 0 .9.9h11a.9.9 0 0 0 .9-.9v-9a.9.9 0 0 0-.9-.9h-11a.9.9 0 0 0-.9.9z" stroke="#333" stroke-width="1.2"/><path d="M3.482 10.2C3.216 10.2 3 9.931 3 9.6c0-.331.216-.6.482-.6h7.236c.266 0 .482.269.482.6 0 .331-.216.6-.482.6H3.482zM3.482 7.2C3.216 7.2 3 6.931 3 6.6c0-.331.216-.6.482-.6h7.236c.266 0 .482.269.482.6 0 .331-.216.6-.482.6H3.482z" fill="#333"/><path d="M4.6 2.599h4.8V1.5a.9.9 0 0 0-.9-.9h-3a.9.9 0 0 0-.9.9v1.099z" stroke="#333" stroke-width="1.2"/></g>',width:14,height:14}}),y.a.register({"hao123-report-icon":{raw:'<title>hao123&#x62A5;&#x544A;</title><g fill="#333" fill-rule="evenodd"><path d="M10.333 7H3.667C3.298 7 3 7.269 3 7.6c0 .331.298.6.667.6h6.666c.369 0 .667-.269.667-.6 0-.331-.298-.6-.667-.6zm0 3.4H3.667c-.369 0-.667.269-.667.6 0 .331.298.6.667.6h6.666c.369 0 .667-.269.667-.6 0-.331-.298-.6-.667-.6z" fill-rule="nonzero"/><path d="M14 13.77c0 .679-.57 1.23-1.273 1.23H1.273C.57 15 0 14.449 0 13.77V1.23C0 .552.57 0 1.273 0h6.52a.5.5 0 0 1 .353.146l1.157 1.157L13.85 5.85a.5.5 0 0 1 .146.353L14 13.77zM9.303 6h2.907a.5.5 0 0 1 .5.499l.016 6.769a.5.5 0 0 1-.5.501H1.773a.5.5 0 0 1-.5-.5V1.731a.5.5 0 0 1 .5-.5H7.5a.5.5 0 0 1 .5.5v2.966C8 5.417 8.583 6 9.303 6zm0-2.612a.1.1 0 0 1 .17-.07l1.21 1.208a.1.1 0 0 1-.071.171h-1.21a.1.1 0 0 1-.1-.1V3.388z"/></g>',width:14,height:15}}),a("80be"),y.a.register({desktop:{raw:'<title>hardware/pc</title><g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path class="fillColor" stroke="#000" stroke-width="4" d="M2 6h44v28H2z"/><path class="innerStrokeColor" d="M10 14h28M10 22h14" stroke="#000" stroke-width="4"/><path d="M11 42h26M19 42v-8M29 42v-8" stroke="#000" stroke-width="4"/></g>',width:48,height:48}});var g=a("f030"),_=(a("ac6a"),a("5df3"),a("28a5"),a("7f7f"),a("386d"),a("257e")),O=a("ade3"),C=a("ef51"),D=a("c1df"),w=a.n(D),j=a("39d0"),k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"unionBizType",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contentBizType",1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"mediumtype",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"readyRender",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"authMsspCoopControl",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"authMediumNew",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"authAdNet",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"expList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"authSspExpLib",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"today",w()().format("YYYYMMDD")),Object(O.a)(Object(_.a)(Object(_.a)(a)),"yesterday",w()(w()().valueOf()-864e5).format("YYYYMMDD")),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dayBeforeYesterday",w()(w()().valueOf()-1728e5).format("YYYYMMDD")),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastSeven",w()(w()().valueOf()-6048e5).format("YYYYMMDD")),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastMonthStartDate",w()().month(w()().month()-1).startOf("month").format("YYYYMMDD")),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastMonthEndDate",w()().month(w()().month()-1).endOf("month").format("YYYYMMDD")),Object(O.a)(Object(_.a)(Object(_.a)(a)),"thisMonthStartDate",w()().month(w()().month()).startOf("month").format("YYYYMMDD")),Object(O.a)(Object(_.a)(Object(_.a)(a)),"thisMonthEndDate",w()().month(w()().month()).endOf("month").format("YYYYMMDD")),Object(O.a)(Object(_.a)(Object(_.a)(a)),"applyStatus",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"totalCount",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"totalAdd",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"unionCount",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"unionAdd",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contentCount",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contentAdd",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"searchCount",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"searchAdd",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"softwareCount",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"softwareAdd",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123Count",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123Add",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123IPCount",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123IPAdd",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123CPACount",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123CPAAdd",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"unionByDayData",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contentByDayData",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"searchByDayData",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"softwareByDayData",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123ByDayData",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123IPByDayData",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123CPAByDayData",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"bizModules",{cpro:[],search:[],hao123:[],hao123IP:[],hao123CPA:[]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"unionChartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contentChartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"searchChartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"softwareChartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123ChartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123IPChartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hao123CPAChartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"bizTabs",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[new Date((new Date).valueOf()-6048e5),new Date((new Date).valueOf()-864e5)]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"begin","".concat(a.yesterday,",").concat(a.lastSeven,",")+"".concat(a.lastMonthStartDate,",").concat(a.thisMonthStartDate,",").concat(a.dayBeforeYesterday)),Object(O.a)(Object(_.a)(Object(_.a)(a)),"end","".concat(a.yesterday,",").concat(a.yesterday,",")+"".concat(a.lastMonthEndDate,",").concat(a.thisMonthEndDate,",").concat(a.dayBeforeYesterday)),Object(O.a)(Object(_.a)(Object(_.a)(a)),"bizCommonConfig",{unionConfig:{config:{filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1"},name:"union"},contentConfig:{config:{filterFields:"rtbTypeId,sellTypeId",filterValues:"1|1"},name:"content"},searchConfig:{config:{filterFields:"rtbTypeId,unionBizTypeId",filterValues:"2|3"},name:"search"},softwareConfig:{config:{filterFields:"rtbTypeId,unionBizTypeId",filterValues:"2|6"},name:"software"},hao123Config:{config:{filterFields:"rtbTypeId,unionBizTypeId,hao123ReportTypeId",filterValues:"2|8|2"},name:"hao123"},hao123IPConfig:{config:{filterFields:"rtbTypeId,unionBizTypeId,hao123ReportTypeId",filterValues:"2|8|1",metrics:"income,ip,ipEcpm"},name:"hao123IP"},hao123CPAConfig:{config:{filterFields:"rtbTypeId,unionBizTypeId,hao123ReportTypeId",filterValues:"2|8|3",metrics:"income,installs,activates,actives"},name:"hao123CPA"}}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getIncome=this.api.getIncome,this.getDomainBizStatus=this.api.getDomainBizStatus,this.getIncomeByDay=this.api.getIncomeByDay,this.getBizIncomeByDay=this.api.getBizIncomeByDay,this.getWarningText=this.api.getWarningText,this.getOptimalExpAdp=this.api.getOptimalExpAdp,this.getAuthRight(),this.getDomainBizStatus().then(function(t){e.applyStatus=t,e.getTotalIncome(),t.cpro&&(e.bizTabs.push({label:"网盟业务",value:"union"},{label:"内容联盟",value:"content"}),e.bizModules.cpro.push("union","content"),e.getBizIncomeFromConfig(e.bizCommonConfig.unionConfig),e.getBizIncomeFromConfig(e.bizCommonConfig.contentConfig)),t.search&&(e.bizTabs.push({label:"搜索推广",value:"search"}),e.bizModules.search.push("search"),e.getBizIncomeFromConfig(e.bizCommonConfig.searchConfig)),t.software&&(e.bizTabs.push({label:"工具栏推广",value:"software"}),e.bizModules.search.push("software"),e.getBizIncomeFromConfig(e.bizCommonConfig.softwareConfig)),t.hao123&&(e.bizTabs.push({label:"hao123搜索合作",value:"hao123"},{label:"hao123千次IP合作",value:"hao123IP"},{label:"hao123 CPA合作",value:"hao123CPA"}),e.bizModules.hao123.push("hao123"),e.bizModules.hao123IP.push("hao123IP"),e.bizModules.hao123CPA.push("hao123CPA"),e.getBizIncomeFromConfig(e.bizCommonConfig.hao123Config),e.getBizIncomeFromConfig(e.bizCommonConfig.hao123IPConfig),e.getBizIncomeFromConfig(e.bizCommonConfig.hao123CPAConfig)),e.getChart()})}},{key:"getAuthRight",value:function(){this.authMsspCoopControl=this.global.user.authMap&&"editable"===this.global.user.authMap["mssp.coop.control"],this.authAdNet=this.global.user.authMap&&"editable"===this.global.user.authMap["mssp.coop.cpro"],this.authSspExpLib=this.global.user.authMap&&"editable"===this.global.user.authMap["ssp.exp.lib"],this.authSspExpLib&&this.getOptimalExpAdpList(),this.authMediumNew=this.global.user.authMap&&"editable"===this.global.user.authMap["mssp.medium.new"]}},{key:"getTotalIncome",value:function(){var e=this,t={begin:this.begin,end:this.end,timeGranularity:"sum",metrics:"income,income,income,income,income",filterFields:"domainBizTypeId",filterValues:1};this.getIncome(t).then(function(t){for(var a=t.batchResults,i=0;i<a.length;i++)a[i].results[0].income||(a[i].results[0].income=0),e.totalCount.push(a[i].results[0].income);e.totalAdd=e.totalCount[4]&&"0.00"!==e.totalCount[4]?(e.totalCount[0]-e.totalCount[4])/e.totalCount[4]:null,1*e.totalCount[0]==0&&1*e.totalCount[4]==0?e.totalAdd=0:e.totalAdd=e.totalAdd.toFixed(4)}).catch(function(e){})}},{key:"getBizIncomeFromConfig",value:function(e){var t=this,a=e.name,i=Object(v.a)({begin:this.yesterday,end:this.yesterday,contrastBegin:this.dayBeforeYesterday,contrastEnd:this.dayBeforeYesterday,timeGranularity:"sum",metrics:"income,view,clickRatio,ecpm",filterFields:"",filterValues:""},e.config);this.getIncomeByDay(i).then(function(e){if(0===e.results.length)for(var s in e.results.push({}),i.metrics.split(","))e.results[0][s]=null;if(t[a+"Count"]=e.results[0],0===e.contrastResults.length)for(var l in e.contrastResults.push({}),i.metrics.split(","))e.contrastResults[0][l]=null;var r=e.contrastResults[0];for(var o in r)1*r[o]==0&&1*t[a+"Count"][o]!=0?t[a+"Add"][o]=100:1*r[o]==0?t[a+"Add"][o]=null:t[a+"Add"][o]=(1*e.results[0][o]-1*r[o])/r[o]*1*100}).catch(function(e){})}},{key:"getOptimalExpAdpList",value:function(){var e=this;this.getOptimalExpAdp({pageNo:1,pageSize:4,order:"desc",status:1,orderBy:"deltaRatio",onlyFirstExp:1}).then(function(t){e.expList=t})}},{key:"getChart",value:function(){var e=this,t={begin:w()(this.range[0]).format("YYYYMMDD"),end:w()(this.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"income,view,click,clickRatio,ecpm,cpc"},a=this,i=[],s=[],l=this.bizCommonConfig;this.applyStatus.cpro&&(i.push(this.getIncomeByDay(Object(v.a)({},t,l.unionConfig.config)),this.getIncomeByDay(Object(v.a)({},t,l.contentConfig.config))),s.push(l.unionConfig.name,l.contentConfig.name)),this.applyStatus.search&&(i.push(this.getIncomeByDay(Object(v.a)({},t,l.searchConfig.config))),s.push(l.searchConfig.name)),this.applyStatus.software&&(i.push(this.getIncomeByDay(Object(v.a)({},t,l.softwareConfig.config))),s.push(l.softwareConfig.name)),this.applyStatus.hao123&&(i.push(this.getIncomeByDay(Object(v.a)({},t,l.hao123Config.config)),this.getIncomeByDay(Object(v.a)({},t,l.hao123IPConfig.config)),this.getIncomeByDay(Object(v.a)({},t,l.hao123CPAConfig.config))),s.push(l.hao123Config.name,l.hao123IPConfig.name,l.hao123CPAConfig.name)),Promise.all(i.map(function(e){return e.catch(function(e){return e})})).then(function(t){t.map(function(t,i){if(Array.isArray(t.results)){var l=s[i];a[l+"ByDayData"]=t.results;var r=[];-1<e.bizModules.cpro.indexOf(l)?r=["view","income","ecpm","click","clickRatio","cpc"]:-1<e.bizModules.search.indexOf(l)?r=["checkView","income","ecpm","click","clickRatio"]:-1<e.bizModules.hao123.indexOf(l)?r=["checkView","income","ecpm","click","clickRatio"]:-1<e.bizModules.hao123IP.indexOf(l)?r=["income","ip","ipEcpm"]:-1<e.bizModules.hao123CPA.indexOf(l)&&(r=["installs","income","actives","activates"]),a[l+"ChartData"]=Object(j.a)(a[l+"ByDayData"],r,!1,{title:!1})}return t})}).catch(function(e){})}}]),t}(C.a),S=a("7898"),x=a("7b37"),R=a("376c"),T=a("9c1c"),I=a("4681"),F=a("6bab"),N=a("c9ac"),A=(a("833b"),a("2651")),M=a.n(A),Y=(a("ef97"),a("007d"),a("627c"),a("d28f"),a("af24"),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this)}}]),t}(C.a)),L=Object(u.a)(g.a,Y,{name:"trend-data",props:{data:Object,type:String}}),E=(a("326d"),Object(p.a)(L,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"trend-data-view"},[i("span",[0<e.data[e.type]?i("img",{staticClass:"trend",attrs:{src:a("38b2")}}):e.data[e.type]<0?i("img",{staticClass:"trend",attrs:{src:a("3ad7")}}):e._e(),i("span",{class:{add:0<e.data[e.type],reduce:e.data[e.type]<0}},[e._v(e._s(Math.abs(e.data[e.type]).toFixed(2)+"%"))])])])},[],!1,null,"6d56243a",null));E.options.__file="TrendData.vue";var P=E.exports,V=a("7f85"),B=Object(u.a)(g.a,k,{name:"union2",components:{"veui-grid-container":x.a,"veui-grid-row":R.a,"veui-grid-column":T.a,"veui-icon":y.a,"veui-button":S.a,"v-chart":M.a,"veui-tooltip":I.a,"trend-data":P,"veui-tab":F.a,"veui-select":N.a},data:function(){return{chartIndex:0,chartActive:"union",lastClickLeName:""}},computed:{chartOptions:function(){return this.store[this.chartActive+"ChartData"]}},methods:{formatDate:function(e){return Object(V.a)(e)},clickTabs:function(e){this.chartActive=e,this.lastClickLeName=""},changeTabs:function(){this.lastClickLeName=""},toCreateSlot:function(){this.global.router.push({path:"/union/slot/create"})},toCreateContent:function(){this.global.router.push({path:"/union/content/access/create"})},toCreateApp:function(){this.global.router.push({path:"/union/media/create"})},toReport:function(e){var t="";switch(e){case"union":t="/report/whole";break;case"content":t="/report/content";break;case"search":t="/report/search/cname";break;case"software":t="/report/tool-cn";break;case"hao123":case"hao123IP":case"hao123CPA":t="/report/hao123"}this.global.router.push({path:t})},transNumber:function(e){return e||0===e?(1*e).toLocaleString():"--"},legendChange:function(e){var t=Object(j.b)(e,this.store[this.chartActive+"ChartData"],this.store.lastClickLeName);this.store[this.chartActive+"ChartData"]=t.chartOp,this.lastClickLeName=t.lastClickLeName},ToSuperExp:function(e){this.global.router.push({path:"/superExp/todo?slot=".concat(e)})}}}),$=(a("2697"),Object(p.a)(B,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("base-view",{staticClass:"index-view"},[e.store.authSspExpLib?i("div",{staticClass:"index-view-set2"},[i("div",{staticClass:"set-header"},[i("span",{staticClass:"title"},[e._v("启优实验室")]),i("veui-icon",{ref:"sup-exp",staticClass:"title-notice-icon",attrs:{name:"question-circle-o"}}),i("span",{staticClass:"sub-title"},[e._v("您的账户下有 "),i("span",{staticClass:"red"},[e._v(e._s(e.store.expList.totalCount||"0"))]),e._v(" 个从未开启优化的代码位收益偏低。")]),i("a",{attrs:{href:"./websiteco.html#/superExp/todo"}},[e._v("去优化 >")])],1),i("veui-tooltip",{attrs:{position:"top-start",target:"sup-exp",trigger:"hover","overlay-class":"notice-tooltip multi-lines"}},[e._v("\n            启优实验室产品启动联盟流量变现的智能优化，适配联盟媒体行业，智能挖掘高变现样式，赋能媒体提升流量变现能力。\n            "),i("a",{attrs:{href:"./index.html#/laboratory"}},[e._v("了解更多 >")])]),e.store.expList.expList&&0<e.store.expList.expList.length?i("div",{staticClass:"set-horizontal-card"},[e._l(e.store.expList.expList,function(t){return i("div",{key:t.userDefineAdp.tuid,staticClass:"h-card"},[i("div",{staticClass:"h-card-title"},[i("span",{staticClass:"label"},[e._v(e._s(t.userDefineAdp.name))]),i("span",{staticClass:"value"},[e._v(e._s(t.userDefineAdp.tuid))])]),i("div",{staticClass:"h-card-content"},[i("span",{staticClass:"label"},[e._v("近七日CPM比同行业")]),i("span",{staticClass:"value",class:{add:0<t.maxGapRatio,decrease:t.maxGapRatio<0}},[e._v(e._s(Math.abs(t.maxGapRatio).toFixed(1))+"%")])]),i("div",{staticClass:"h-card-button"},[i("veui-button",{on:{click:function(a){e.ToSuperExp(t.userDefineAdp.tuid)}}},[e._v("去优化")])],1)])}),i("div",{staticClass:"h-card more"},[i("ul",{staticClass:"dots"},[i("li",{staticClass:"dot"}),i("li",{staticClass:"dot"}),i("li",{staticClass:"dot"})]),i("a",{attrs:{href:"./websiteco.html#/superExp/todo"}},[e._v("更多待优化代码位 >")])])],2):e._e()],1):e._e(),i("div",{staticClass:"index-view-set first-card"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"card-title"},[e._v("总体数据")]),i("th",[e._v("昨日预估收入")]),i("th",[e._v("近7日预估收入")]),i("th",[e._v("上月预估收入")]),i("th",[e._v("本月预估收入")])])]),i("tbody",{staticClass:"content"},[i("tr",[i("td"),i("td",[i("div",[i("span",[e._v(e._s(e.transNumber(e.store.totalCount[0])))]),0<e.store.totalAdd?i("img",{staticClass:"trend",attrs:{src:a("38b2")}}):e.store.totalAdd<0?i("img",{staticClass:"trend",attrs:{src:a("3ad7")}}):e._e(),e.store.totalAdd?i("span",{class:{add:e.store.totalAdd&&0<e.store.totalAdd,reduce:e.store.totalAdd&&e.store.totalAdd<0}},[e._v("\n                            "+e._s((100*Math.abs(e.store.totalAdd)).toFixed(2)+"%")+"\n                        ")]):e._e()])]),i("td",[e._v(e._s(e.transNumber(e.store.totalCount[1])))]),i("td",[e._v(e._s(e.transNumber(e.store.totalCount[2])))]),i("td",[e._v(e._s(e.transNumber(e.store.totalCount[3])))])])])])]),e.store.applyStatus.cpro?i("div",{staticClass:"index-view-set sec"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"card-title"},[e._v("网盟业务")]),i("th",[e._v("昨日预估收入")]),i("th",[e._v("昨日展现量")]),i("th",[e._v("昨日点击率")]),i("th",[e._v("昨日eCPM")])])]),i("tbody",{staticClass:"content"},e._l(e.store.bizModules.cpro,function(t,a){return i("tr",{staticClass:"content-line",on:{click:function(a){e.toReport(t)}}},[i("td",[i("div",{staticClass:"line-title"},["union"==t?i("span",[e._v("网盟推广")]):"content"==t?i("span",[e._v("内容联盟")]):e._e()])]),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].income)))]),e.store[t+"Add"].income?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"income"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].view)))]),e.store[t+"Add"].view?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"view"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].clickRatio))+e._s(e.store[t+"Count"].clickRatio?"%":""))]),e.store[t+"Add"].clickRatio?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"clickRatio"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].ecpm)))]),e.store[t+"Add"].ecpm?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"ecpm"}}):e._e()],1)])}))])]):e._e(),e.store.applyStatus.search||e.store.applyStatus.software?i("div",{staticClass:"index-view-set sec"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"card-title"},[e._v("搜索业务")]),i("th",[e._v("昨日预估收入")]),i("th",[e._v("昨日检索量")]),i("th",[e._v("昨日点击率")]),i("th",[e._v("昨日eCPM")])])]),i("tbody",{staticClass:"content"},e._l(e.store.bizModules.search,function(t){return i("tr",{key:t,staticClass:"content-line",on:{click:function(a){e.toReport(t)}}},[i("td",[i("div",{staticClass:"line-title"},["search"==t?i("span",[e._v("搜索推广")]):"software"==t?i("span",[e._v("工具栏推广")]):e._e()])]),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].income)))]),e.store[t+"Add"].income?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"income"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].view)))]),e.store[t+"Add"].view?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"view"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].clickRatio))+e._s(e.store[t+"Count"].clickRatio?"%":""))]),e.store[t+"Add"].clickRatio?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"clickRatio"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].ecpm)))]),e.store[t+"Add"].ecpm?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"ecpm"}}):e._e()],1)])}))])]):e._e(),e.store.applyStatus.hao123?i("div",{staticClass:"index-view-set sec"},[i("table",{staticClass:"table"},[i("thead",[i("tr",[i("th",{staticClass:"card-title"},[e._v("hao123业务")]),i("th",[e._v("昨日预估收入")]),i("th",[e._v("昨日检索量")]),i("th",[e._v("昨日点击率")]),i("th",[e._v("昨日eCPM")])])]),i("tbody",{staticClass:"content"},[e._l(e.store.bizModules.hao123,function(t){return i("tr",{key:t,staticClass:"content-line split-line",on:{click:function(a){e.toReport(t)}}},[i("td",[i("div",{staticClass:"line-title"},["hao123"==t?i("span",[e._v("hao123搜索合作")]):e._e()])]),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].income)))]),e.store[t+"Add"].income?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"income"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].view)))]),e.store[t+"Add"].view?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"view"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].clickRatio))+e._s(e.store[t+"Count"].clickRatio?"%":""))]),e.store[t+"Add"].clickRatio?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"clickRatio"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].ecpm)))]),e.store[t+"Add"].ecpm?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"ecpm"}}):e._e()],1)])}),i("tr",[i("th"),i("th",[e._v("昨日预估收入")]),i("th",[e._v("昨日IP量")]),i("th",[e._v("千次IP收入")]),i("th")]),e._l(e.store.bizModules.hao123IP,function(t){return i("tr",{key:t,staticClass:"content-line split-line",on:{click:function(a){e.toReport(t)}}},[i("td",["hao123IP"==t?i("div",{staticClass:"line-title"},[e._v("hao123千次IP")]):e._e()]),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].income)))]),e.store[t+"Add"].income?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"income"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].ip)))]),e.store[t+"Add"].ip?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"ip"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].ipEcpm)))]),e.store[t+"Add"].ipEcpm?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"ipEcpm"}}):e._e()],1),i("td")])}),i("tr",[i("th"),i("th",[e._v("昨日预估收入")]),i("th",[e._v("昨日安装量")]),i("th",[e._v("昨日活跃量")]),i("th",[e._v("昨日激活量")])]),e._l(e.store.bizModules.hao123CPA,function(t){return i("tr",{key:t,staticClass:"content-line",on:{click:function(a){e.toReport(t)}}},[i("td",["hao123CPA"==t?i("div",{staticClass:"line-title"},[e._v("hao123 CPA合作")]):e._e()]),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].income)))]),e.store[t+"Add"].income?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"income"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].installs)))]),e.store[t+"Add"].installs?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"installs"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].actives)))]),e.store[t+"Add"].actives?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"actives"}}):e._e()],1),i("td",[i("span",[e._v(e._s(e.transNumber(e.store[t+"Count"].activates)))]),e.store[t+"Add"].activates?i("trend-data",{attrs:{data:e.store[t+"Add"],type:"activates"}}):e._e()],1)])})],2)])]):e._e(),i("div",{staticClass:"chart-card"},[i("span",{staticClass:"chart-title"},[e._v("数据趋势"),i("span",{staticClass:"time"},[e._v(e._s(e.formatDate(e.store.range[0])+" ~ "+e.formatDate(e.store.range[1])))])]),e.store.bizTabs.length<5?i("ul",{staticClass:"chart-quick-tabs"},e._l(e.store.bizTabs,function(t){return i("li",{key:t.value,class:{active:e.chartActive==t.value},on:{click:function(a){e.clickTabs(t.value)}}},[e._v(e._s(t.label))])})):i("veui-select",{staticClass:"chart-quick-tabs select-tabs",attrs:{options:e.store.bizTabs},on:{change:e.changeTabs},model:{value:e.chartActive,callback:function(t){e.chartActive=t},expression:"chartActive"}}),i("v-chart",{staticClass:"appco-chart",attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),i("div",{staticClass:"index-quick-buttons website"},[e.store.authAdNet?i("div",{staticClass:"button-new ad",on:{click:e.toCreateSlot}},[i("img",{attrs:{src:a("923b")}}),i("div",{staticClass:"button-title"},[e._v("新建广告位")]),i("div",{staticClass:"button-info"},[e._v("在您的网站下快速创建广告位")])]):e._e(),e.store.authMediumNew?i("div",{staticClass:"button-new app",on:{click:e.toCreateApp}},[i("img",{attrs:{src:a("6d88")}}),i("div",{staticClass:"button-title"},[e._v("新建媒体")]),i("div",{staticClass:"button-info"},[e._v("快速添加您的网站域名到平台中")])]):e._e(),e.store.authAdNet?i("div",{staticClass:"button-new cpu",on:{click:e.toCreateContent}},[i("img",{attrs:{src:a("0eaf")}}),i("div",{staticClass:"button-title"},[e._v("新建内容联盟")]),i("div",{staticClass:"button-info"},[e._v("快速接入内容联盟到您的网站中")])]):e._e()])])},[],!1,null,null,null));$.options.__file="UnionView.vue";var z=$.exports,q=(a("96cf"),a("1da1")),U=a("2769"),W=a.n(U),G=a("1119"),H=(a("ac4d"),a("8a81"),a("3eea")),Q=a.n(H),J=a("91ff"),K=a("90c0"),Z=(new K.a({alias:"NORMAL",text:"正常",value:0},{alias:"PAUSE",text:"停用",value:1},{alias:"DELETE",text:"删除",value:2}),new K.a({alias:"MOBILE",text:"手机",value:1},{alias:"PAD",text:"平板",value:2}),new K.a({alias:"CHANNEL",text:"栏目",value:1},{alias:"BLOCK",text:"区块",value:2})),X=new K.a({alias:"ONE",text:"1",value:1},{alias:"TWO",text:"2",value:2},{alias:"THREE",text:"3",value:3},{alias:"FOUR",text:"4",value:4},{alias:"FIVE",text:"5",value:5},{alias:"NONE",text:"无间隔",value:0}),ee=new K.a({alias:"NO_SHOW",text:"不展示"},{alias:"SHOW",text:"展示"}),te=new K.a({alias:"JS",text:"JS",value:1},{alias:"API",text:"API",value:3}),ae=(new K.a({alias:"ADOPTED",text:"已通过",value:0},{alias:"AUDIT",text:"审核中",value:1},{alias:"REJECTED",text:"未通过",value:2}),new K.a({alias:"ADOPTED",text:"已通过"},{alias:"AUDIT",text:"审核中"},{alias:"REJECTED",text:"未通过"},{alias:"REMOVED",text:"已删除"})),ie=new K.a({alias:"AUTO",text:"自适应",value:1},{alias:"FIXED",text:"固定尺寸",value:2}),se=(new K.a({alias:"NO",text:"无"},{alias:"YES",text:"有"}),new K.a({alias:"COLOR",text:"背景颜色",value:"COLOR"},{alias:"PIC",text:"背景图片",value:"PIC"})),le=new K.a({alias:"INFORMATION",text:"资讯",value:1},{alias:"VIDEO",text:"视频",value:2},{alias:"IMG",text:"图片",value:3}),re=new K.a({alias:"FLOAT_PICTURE_WORD",text:"悬浮图文",value:101},{alias:"FLOAT_WORD",text:"悬浮文字",value:102},{alias:"EMBED_WORD_PICTURE",text:"内嵌左文右图",value:103},{alias:"EMBED_PICTURE_WORD",text:"内嵌左图右文",value:104},{alias:"EMBED_WORD",text:"内嵌纯文",value:105},{alias:"BLOCK_PC",text:"PC-弹窗",value:106},{alias:"PC_INLAY_480_160",text:"PC-内嵌-480",value:107},{alias:"PC-460*60",text:"PC-内嵌-460",value:108},{alias:"PC-234*60",text:"PC-内嵌-234",value:109},{alias:"PC-300*100",text:"PC-内嵌-300",value:110},{alias:"PC-360",text:"PC-内嵌-360",value:111},{alias:"BLOCK_INFINITY",text:"wap-无限下拉",value:112},{alias:"IPAD_INFINITY",text:"PC-无限加载-600",value:115},{alias:"BLOCK_INFINITY_750",text:"Block-无限加载-750",value:116},{alias:"PC_BLOCK_WINDOW_5_PERLINE",text:"PC-block-橱窗5个1行",value:119},{alias:"PC_BLOCK_WINDOW_4_PERLINE",text:"PC-block-橱窗4个1行",value:120},{alias:"PC_BLOCK_SIDEBAR_DOUBLE",text:"PC-Block-侧边栏双栏",value:121},{alias:"PC_BLOCK_SIDEBAR_WORD_PICTURE",text:"PC-侧边栏-左文右图",value:122},{alias:"PC_BLOCK_SINGLE_FOUR",text:"PC-单图+四图",value:123},{alias:"PC_BLOCK_SINGLE_BIG_THREE",text:"PC-单图+大图三图",value:124},{alias:"PC_BLOCK_SINGLE_THREE_660",text:"PC-单图3+三图660",value:126},{alias:"PC_BLOCK_SINGLE_BIG_THREE_660",text:"PC-文字链+单图三图660",value:127},{alias:"PC_BLOCK_SINGLE_BIG_THREE_760",text:"PC-文字链+单图三图760",value:128},{alias:"PC_BLOCK_TOP_TEXT_BOTTOM_INFLOW",text:"PC-上2个文字链+下信息流",value:129},{alias:"PC_BLOCK_TEXT_IMG_130",text:"PC-侧边栏-左图右文",value:130}),oe=new K.a({alias:"EMBED_WORD_PICTURE",text:"内嵌左文右图",value:103},{alias:"EMBED_PICTURE_WORD",text:"内嵌左图右文",value:104},{alias:"EMBED_WORD",text:"内嵌纯文",value:105},{alias:"BLOCK_INFINITY",text:"block-无限加载",value:112}),ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","内容联盟接入"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contentVisible",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"channels",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"blockTypes",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"blockWapTypes",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"categorys",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"HAS_AD_INTERVAL_ARRAY",[re.EMBED_WORD_PICTURE,re.EMBED_PICTURE_WORD,re.EMBED_WORD,re.BLOCK_INFINITY,re.BLOCK_INFINITY_750,re.IPAD_INFINITY,re.PC_BLOCK_SINGLE_BIG_THREE_660,re.PC_BLOCK_SINGLE_BIG_THREE_760]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"HAS_DISPLAY_COUNT",[re.EMBED_WORD_PICTURE,re.EMBED_PICTURE_WORD,re.EMBED_WORD]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ContentType",le.toOptions()),Object(O.a)(Object(_.a)(Object(_.a)(a)),"BlocksWap",oe.toOptions().map(function(e){return e.value})),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getContentList,this.getChannel=this.api.getChannel,this.getCategory=this.api.getCategory,this.getBlockType=this.api.getBlockType,this.getAgreement=this.api.getAgreement,this.signAgreement=this.api.signAgreement,this.getAgreement().then(function(t){e.contentVisible=0===t}).catch(function(e){}),this.getChannel().then(function(t){var a=!0,i=!1,s=void 0;try{for(var l,r=t.results[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var o=l.value;e.channels.push({value:o.channelId,label:o.channelName,previewImageHeight:o.previewImageHeight,previewImageUrl:o.previewImageUrl,previewImageWidth:o.previewImageWidth})}}catch(t){i=!0,s=t}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}}).catch(function(e){}),this.getBlockType().then(function(t){var a=!0,i=!1,s=void 0;try{for(var l,r=t.results[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var o=l.value;e.blockTypes.push({value:o.blockStyleTypeId,label:o.name,previewImageHeight:o.previewImageHeight,previewImageUrl:o.previewImageUrl,previewImageWidth:o.previewImageWidth,isBlockWap:-1<e.BlocksWap.indexOf(1*o.blockStyleTypeId)})}}catch(t){i=!0,s=t}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}}).catch(function(e){}),this.getCategory().then(function(t){var a=!0,i=!1,s=void 0;try{for(var l,r=t.results[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var o=l.value;e.categorys.push({value:o.categoryId,label:o.categoryName})}}catch(t){i=!0,s=t}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}}).catch(function(e){}),Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this)}},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),ce=(a("1d78"),a("927d")),ue=a("3a6d"),de=a("af34"),fe=a("9434"),pe=a("e469"),he=a("543b"),me=(a("6762"),a("2fdb"),a("3835")),ve=a("ef78"),be=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","新建内容联盟"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"Type",Z.toOptions()),Object(O.a)(Object(_.a)(Object(_.a)(a)),"AccType",te.toOptions()),Object(O.a)(Object(_.a)(Object(_.a)(a)),"BackgroundType",se.toOptions()),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contentTypes",le.toOptions("INFORMATION","VIDEO")),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ALL_TYPE_ARRAY",[re.BLOCK_INFINITY,re.IPAD_INFINITY]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"HAS_AD_INTERVAL_ARRAY",[re.EMBED_WORD_PICTURE,re.EMBED_PICTURE_WORD,re.EMBED_WORD,re.BLOCK_INFINITY,re.BLOCK_INFINITY_750,re.IPAD_INFINITY,re.PC_BLOCK_SINGLE_BIG_THREE_660,re.PC_BLOCK_SINGLE_BIG_THREE_760]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"HAS_DISPLAY_COUNT",[re.EMBED_WORD_PICTURE,re.EMBED_PICTURE_WORD,re.EMBED_WORD]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"IPAD_INFINITY",re.IPAD_INFINITY),Object(O.a)(Object(_.a)(Object(_.a)(a)),"PC_INLAY_480_160",re.PC_INLAY_480_160),Object(O.a)(Object(_.a)(Object(_.a)(a)),"BLOCK_INFINITY_750",re.BLOCK_INFINITY_750),Object(O.a)(Object(_.a)(Object(_.a)(a)),"HAS_CONTENT_COUNT",[re.BLOCK_INFINITY,re.IPAD_INFINITY,re.BLOCK_INFINITY_750,re.PC_BLOCK_SINGLE_BIG_THREE_660,re.PC_BLOCK_SINGLE_BIG_THREE_760]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{app:"",type:1,cooType:1,proType:null,channel:"",mediaTitle:null,titleColor:{hex:"#000000"},BackgroundType:"COLOR",backgroundColor:{hex:"#FFFFFF",alpha:100},menuColor:{hex:"#000000"},backgroundImg:"",logoImg:"",logoURL:"",menuURL:"",searchBox:!0,hasDetail:!1,useSlideList:0,blockType:0,buttonType:1,category:[],contentCount:3,displayCount:1,adInterval:1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"apps",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"channels",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"categorys",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"blockTypes",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"proImg",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"blockImg",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"id",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allCategories",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allCategoriesLength",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"infoCategories",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"infoCategoriesLength",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formSetting",{validators:[{fields:["category"],validate:function(e){if(e)return a.formData.cooType,!(2===a.formData.cooType&&(void 0===e||Array.isArray(e)&&!e.length))||{category:"接入类目不能为空，请选择"}}}]}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"buildCategoryTree",value:function(e){var t=this,a=this.contentTypes.map(function(a,i){var s=a.label,l=a.value,r={value:l,label:s,children:e.map(function(e){var t=e.categoryId,a=e.categoryName;return{value:l+"-"+t,label:a}})};return t.allCategoriesLength+=e.length,r});this.allCategories=a,this.infoCategories=a.filter(function(e){return e.value===le.INFORMATION}),this.infoCategoriesLength=this.infoCategories[0].children.length}},{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getChannel=this.api.getChannel,this.getCategory=this.api.getCategory,this.getBlockType=this.api.getBlockType,this.getContentWebsites=this.api.getContentWebsites,this.createRequester=this.api.createContentAccess,this.getContentWebsites().then(function(t){e.formData.app=t.results[0].id;var a=!0,i=!1,s=void 0;try{for(var l,r=t.results[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var o=l.value;e.apps.push({value:o.id,label:o.domain})}}catch(t){i=!0,s=t}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}}),this.getChannel().then(function(t){e.formData.proType=t.results[0].channelId,e.proImg=t.results[0].previewImageUrl;var a=!0,i=!1,s=void 0;try{for(var l,r=t.results[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var o=l.value;e.channels.push({value:o.channelId,label:o.channelName,previewImageHeight:o.previewImageHeight,previewImageUrl:o.previewImageUrl,previewImageWidth:o.previewImageWidth})}}catch(t){i=!0,s=t}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}}),this.getCategory().then(function(t){var a=t.results;e.buildCategoryTree(a)}),this.getBlockType().then(function(t){e.formData.blockType=t.results[0].blockStyleTypeId,e.blockImg=t.results[0].previewImageUrl;var a=!0,i=!1,s=void 0;try{for(var l,r=t.results[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var o=l.value;e.blockTypes.push({value:o.blockStyleTypeId,label:o.name,previewImageHeight:o.previewImageHeight,previewImageUrl:o.previewImageUrl,previewImageWidth:o.previewImageWidth})}}catch(t){i=!0,s=t}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}})}},{key:"submit",value:function(){if("create"===this.pageType&&this.createRequester){var e=this.formData,t={};if(3===e.type)t.siteId=e.app,t.type=3,t.subChannelName=e.channel;else if(1===e.cooType)t.siteId=e.app,t.type=1,t.channelId=e.proType,t.showSearchBox=e.searchBox?1:0,t.useSlideList=e.useSlideList,t.contentTypeCategory={"":[]},t.subChannelName=e.channel,!0===e.hasDetail&&(t.hasDetail=e.hasDetail,t.mediaTitle=e.mediaTitle,t.titleColor={hex:e.titleColor.hex.slice(1)},t.backgroundColor={hex:e.backgroundColor.hex.slice(1)},t.logoImg=e.logoImg,t.logoURL=e.logoURL,t.menuURL=e.menuURL,t.menuColor={hex:e.menuColor.hex.slice(1)});else{t.siteId=e.app,t.type=2,t.blockStyleTypeId=e.blockType;var a={};e.category.map(function(e,t){var i=e.split("-"),s=Object(me.a)(i,2),l=s[0],r=s[1];a[l]=a[l]||[],r&&a[l].push(r)}),t.contentTypeCategory=a,t.useSlideList=e.useSlideList?1:0,t.adInterval=e.adInterval,t.contentCount=e.contentCount}return this.requestCreate(t)}throw new Error("unknown form page type: ".concat(this.pageType,"!"))}},{key:"invalid",value:function(e){}}]),t}(ve.a),ye=a("c881"),ge=a("8631"),_e=a("ab16"),Oe=a("fad3"),Ce=a("2e97"),De=a("db73"),we=a("0db3"),je=a("de74"),ke=a("27a9"),Se=a("b143"),xe=(a("e41f"),a("0020"),a("a670")),Re=a("7a32"),Te=Object(u.a)(ye.a,be,{name:"ContentAccessFormView",components:{"veui-fieldset":ue.a,"veui-field":ce.a,"veui-input":ge.a,"veui-transfer":Se.a,"veui-button":S.a,"veui-radio":je.a,"veui-radio-group":Ce.a,"veui-tooltip":I.a,"veui-select":N.a,"veui-radio-button-group":De.a,"veui-switch":we.a,"veui-number-input":_e.a,"veui-progress":ke.a,"veui-slider":Oe.a,"veui-icon":y.a,colorpicker:Re.a},data:function(){return{AdInterval:X,dsp:0,TYPEButton:this.store.AccType,COOButton:this.store.Type,BackgroundType:this.store.BackgroundType,rule:[{name:"required",value:!0,triggers:"blur,input"},{name:"maxLength",value:40,triggers:"blur,input"}],mediaTitleRule:[{name:"required",value:!0,triggers:"blur,input"},{triggers:"change,blur,input",name:"maxLength",value:20,message:function(e,t){return"字符长度不能多于".concat(e,"，当前长度").concat(t)},priority:100}],mediaLogo:[{name:"required",value:!0,triggers:"blur,input"},{name:"pattern",value:/^(?:https?):\/\/.*\..+$/,message:function(e,t){return"请输入正确的url格式"}}]}},computed:{category:function(){var e=this.store.infoCategories;return this.store.ALL_TYPE_ARRAY.includes(this.store.formData.blockType)&&(e=this.store.allCategories),e},categoriesLength:function(){var e=this.store.infoCategoriesLength;return this.store.ALL_TYPE_ARRAY.includes(this.store.formData.blockType)&&(e=this.store.allCategoriesLength),e},backgroundColor:function(){return this.store.formData.backgroundColor.hex},backgroundColorAlpha:function(){return this.store.formData.backgroundColor.alpha},backgroundImg:function(){return this.store.formData.backgroundImg},titleColor:function(){return this.store.formData.titleColor.hex},mediaTitle:function(){return this.store.formData.mediaTitle},menuColor:function(){return this.store.formData.menuColor.hex},logoImg:function(){return this.store.formData.logoImg}},created:function(){},methods:{redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},goBack:function(){this.redirectTo("/union/content/access")},blockTypeChange:function(e){var t=W()(this.store.blockTypes,function(t){return t.value==e});this.store.blockImg=t.previewImageUrl,this.store.formData.category=[]},proTypeChange:function(e){var t=W()(this.store.channels,function(t){return t.value==e});this.store.proImg=t.previewImageUrl}},mounted:function(){xe.a.hideHeaderDom()},beforeDestroy:function(){xe.a.addHeaderDom()}}),Ie=(a("a01b"),Object(p.a)(Te,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common content-access-form",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("div",{staticClass:"coo-img"},[a("p",[e._v("效果预览")]),e.store.formData.hasDetail?a("div",{staticClass:"cpu-preview-wrapper"},[a("div",{staticClass:"cpu-preview-detail"},[a("div",{staticClass:"cpu-preview-logo",style:{backgroundImage:"url("+e.logoImg+")"}}),a("div",{staticClass:"cpu-preview-title",style:{color:e.titleColor}},[e._v(e._s(e.mediaTitle))]),a("div",{staticClass:"cpu-preview-menu"},[a("div",{staticClass:"cpu-menu-line",style:{backgroundColor:e.menuColor}}),a("div",{staticClass:"cpu-menu-line",style:{backgroundColor:e.menuColor}}),a("div",{staticClass:"cpu-menu-line",style:{backgroundColor:e.menuColor}})])])]):e._e(),2===e.store.formData.cooType&&3!==e.store.formData.type?a("img",{staticClass:"coo-adv",attrs:{src:e.store.blockImg}}):e._e(),1===e.store.formData.cooType&&3!==e.store.formData.type?a("img",{staticClass:"coo-adv-pro",attrs:{src:e.store.proImg}}):e._e()]),a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title"},[a("veui-field",{attrs:{label:"接入站点:",name:"app",field:"app"}},[a("div",{staticClass:"card-right"},[a("veui-select",{attrs:{options:e.store.apps,"overlay-class":"select-items"},model:{value:e.store.formData.app,callback:function(t){e.$set(e.store.formData,"app",t)},expression:"store.formData.app"}})],1)]),a("veui-field",{attrs:{label:"接入方式:",name:"type",field:"type"}},[a("div",{staticClass:"card-right"},[a("veui-radio-button-group",{attrs:{items:e.TYPEButton},model:{value:e.store.formData.type,callback:function(t){e.$set(e.store.formData,"type",t)},expression:"store.formData.type"}})],1)])],1),3!==e.store.formData.type?a("div",{staticClass:"edit-form-card has-no-card-title"},[a("veui-field",{staticClass:"has-sub-card",attrs:{label:"合作样式:",name:"cooType",field:"cooType"}},[a("div",{staticClass:"card-right"},[a("veui-radio-button-group",{attrs:{items:e.COOButton},model:{value:e.store.formData.cooType,callback:function(t){e.$set(e.store.formData,"cooType",t)},expression:"store.formData.cooType"}})],1)]),1===e.store.formData.cooType?a("div",{staticClass:"sub-card"},[a("veui-field",{attrs:{label:"栏目类型:",name:"proType",field:"proType"}},[a("div",{staticClass:"card-right"},[a("veui-select",{attrs:{options:e.store.channels,"overlay-class":"select-items"},on:{change:e.proTypeChange},model:{value:e.store.formData.proType,callback:function(t){e.$set(e.store.formData,"proType",t)},expression:"store.formData.proType"}})],1)]),a("div",{staticClass:"half"},[a("veui-field",{attrs:{label:"渠道:",name:"channel",field:"channel",rules:e.rule,tip:"用于单栏目多渠道投放时做区分"}},[a("div",{staticClass:"card-right"},[a("veui-input",{attrs:{placeholder:"请填写渠道备注"},model:{value:e.store.formData.channel,callback:function(t){e.$set(e.store.formData,"channel",t)},expression:"store.formData.channel"}})],1)]),a("veui-field",{attrs:{label:"搜索框:",name:"searchBox",field:"searchBox"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-switch",{model:{value:e.store.formData.searchBox,callback:function(t){e.$set(e.store.formData,"searchBox",t)},expression:"store.formData.searchBox"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.store.formData.searchBox,expression:"store.formData.searchBox"}],staticClass:"field-text"},[e._v("显示百度搜索")])],1)])]),a("veui-field",{attrs:{label:"是否特殊详情页:",name:"hasDetail",field:"hasDetail"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-switch",{model:{value:e.store.formData.hasDetail,callback:function(t){e.$set(e.store.formData,"hasDetail",t)},expression:"store.formData.hasDetail"}})],1)])]),e.store.formData.hasDetail?a("veui-field",{attrs:{label:"",name:"",field:""}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("div",{staticClass:"field-text"},[a("veui-field",{attrs:{label:"媒体标题:",name:"mediaTitle",field:"mediaTitle",rules:e.mediaTitleRule,tip:"最多可输入20个字符"}},[a("div",{staticClass:"card-right"},[a("veui-input",{attrs:{placeholder:"请填写媒体标题"},model:{value:e.store.formData.mediaTitle,callback:function(t){e.$set(e.store.formData,"mediaTitle",t)},expression:"store.formData.mediaTitle"}})],1)]),a("veui-field",{attrs:{label:"标题颜色"}},[a("div",{staticClass:"card-right"},[a("colorpicker",{attrs:{color:e.store.formData.titleColor.hex},model:{value:e.store.formData.titleColor.hex,callback:function(t){e.$set(e.store.formData.titleColor,"hex",t)},expression:"store.formData.titleColor.hex"}})],1)]),a("veui-field",{attrs:{label:"背景图"}},[a("div",{staticClass:"card-right"},[a("veui-radio-group",{attrs:{items:e.BackgroundType},model:{value:e.store.formData.BackgroundType,callback:function(t){e.$set(e.store.formData,"BackgroundType",t)},expression:"store.formData.BackgroundType"}}),"COLOR"===e.store.formData.BackgroundType?a("div",[a("colorpicker",{attrs:{color:e.store.formData.backgroundColor.hex},model:{value:e.store.formData.backgroundColor.hex,callback:function(t){e.$set(e.store.formData.backgroundColor,"hex",t)},expression:"store.formData.backgroundColor.hex"}}),a("veui-field",{staticClass:"backgroundColor-opacity"},[a("veui-input",{staticClass:"input110",model:{value:e.store.formData.backgroundColor.alpha,callback:function(t){e.$set(e.store.formData.backgroundColor,"alpha",t)},expression:"store.formData.backgroundColor.alpha"}}),[a("div",{staticClass:"unit"},[e._v("%")])]],2)],1):e._e(),"PIC"===e.store.formData.BackgroundType?a("div",[a("veui-field",{staticClass:"backgroundImg-tip",attrs:{name:"backgroundImg",field:"backgroundImg",rules:e.mediaTitleRule,tip:"若网站链接为https格式，此链接也需https格式。最佳显示尺寸宽*高=414*42"}},[a("div",{},[a("veui-input",{attrs:{placeholder:"请输入图片链接url"},model:{value:e.store.formData.backgroundImg,callback:function(t){e.$set(e.store.formData,"backgroundImg",t)},expression:"store.formData.backgroundImg"}})],1)])],1):e._e()],1)]),a("veui-field",{staticClass:"logoImg-tip",attrs:{label:"媒体logo:",name:"logoImg",field:"logoImg",tip:"若网站链接为https格式，此链接也需https格式。最佳显示比例宽*高=5:2"}},[a("div",{staticClass:"card-right"},[a("veui-input",{attrs:{placeholder:"请填写媒体LOGO"},model:{value:e.store.formData.logoImg,callback:function(t){e.$set(e.store.formData,"logoImg",t)},expression:"store.formData.logoImg"}})],1)]),a("veui-field",{attrs:{label:"logo跳转URL:",name:"logoURL",field:"logoURL",rules:e.mediaLogo,tip:"请提供点击后要去的网页地址，例：http://www.baidu.com"}},[a("div",{staticClass:"card-right"},[a("veui-input",{attrs:{placeholder:"请填写logo跳转URL"},model:{value:e.store.formData.logoURL,callback:function(t){e.$set(e.store.formData,"logoURL",t)},expression:"store.formData.logoURL"}})],1)]),a("veui-field",{attrs:{label:"导航菜单跳转URL:",name:"menuURL",field:"menuURL",rules:e.mediaLogo,tip:"请提供点击后要去的网页地址，例：http://www.baidu.com"}},[a("div",{staticClass:"card-right"},[a("veui-input",{attrs:{placeholder:"请填写导航菜单跳转URL"},model:{value:e.store.formData.menuURL,callback:function(t){e.$set(e.store.formData,"menuURL",t)},expression:"store.formData.menuURL"}})],1)]),a("veui-field",{attrs:{label:"菜单颜色"}},[a("div",{staticClass:"card-right"},[a("colorpicker",{attrs:{color:e.store.formData.menuColor.hex},model:{value:e.store.formData.menuColor.hex,callback:function(t){e.$set(e.store.formData.menuColor,"hex",t)},expression:"store.formData.menuColor.hex"}})],1)])],1)])])]):e._e()],1)],1):e._e(),2===e.store.formData.cooType?a("div",{staticClass:"sub-card"},[a("veui-field",{attrs:{label:"区块样式:",name:"blockType",field:"blockType"}},[a("div",{staticClass:"blockType-card-right"},[a("veui-radio-group",{attrs:{items:e.store.blockTypes},on:{change:e.blockTypeChange},model:{value:e.store.formData.blockType,callback:function(t){e.$set(e.store.formData,"blockType",t)},expression:"store.formData.blockType"}})],1)]),a("veui-field",{attrs:{label:"接入类目:",name:"category",field:"category"}},[a("div",{staticClass:"card-right"},[a("veui-transfer",{attrs:{datasource:e.category},model:{value:e.store.formData.category,callback:function(t){e.$set(e.store.formData,"category",t)},expression:"store.formData.category"}},[a("template",{slot:"candidate-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                        全部接入类目\n                                        "),a("span",{staticClass:"number"},[e._v(e._s(e.categoriesLength))])])]),a("template",{slot:"selected-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                        已选列表\n                                        "),a("span",{staticClass:"number"},[e._v(e._s(e.store.formData.category.length+"/"+e.categoriesLength))])])])],2)],1)]),e.store.formData.blockType===e.store.BLOCK_INFINITY_750?a("veui-field",{attrs:{label:"轮播图:",name:"useSlideList",field:"useSlideList"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-switch",{model:{value:e.store.formData.useSlideList,callback:function(t){e.$set(e.store.formData,"useSlideList",t)},expression:"store.formData.useSlideList"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.store.formData.useSlideList,expression:"store.formData.useSlideList"}],staticClass:"field-text"},[e._v("显示轮播图")])],1)])]):e._e(),e.store.HAS_DISPLAY_COUNT.includes(e.store.formData.blockType)?a("veui-field",{attrs:{label:"显示条数:",name:"displayCount",field:"displayCount"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-slider",{attrs:{min:1,max:15,step:1},model:{value:e.store.formData.displayCount,callback:function(t){e.$set(e.store.formData,"displayCount",t)},expression:"store.formData.displayCount"}}),a("veui-number-input",{staticClass:"number-show",attrs:{min:1,max:15},model:{value:e.store.formData.displayCount,callback:function(t){e.$set(e.store.formData,"displayCount",t)},expression:"store.formData.displayCount"}})],1)])]):e._e(),e.store.formData.blockType>=e.store.PC_INLAY_480_160&&!e.store.HAS_CONTENT_COUNT.includes(e.store.formData.blockType)||!e.store.formData.blockType===e.store.IPAD_INFINITY?a("veui-field",{attrs:{label:"显示总条数:",name:"contentCount",field:"contentCount"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-slider",{attrs:{min:1,max:30,step:1},model:{value:e.store.formData.contentCount,callback:function(t){e.$set(e.store.formData,"contentCount",t)},expression:"store.formData.contentCount"}}),a("veui-number-input",{staticClass:"number-show",attrs:{min:1,max:30},model:{value:e.store.formData.contentCount,callback:function(t){e.$set(e.store.formData,"contentCount",t)},expression:"store.formData.contentCount"}})],1)])]):e._e(),e.store.HAS_CONTENT_COUNT.includes(e.store.formData.blockType)?a("veui-field",{attrs:{label:"露出条数:",name:"contentCount",field:"contentCount"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-slider",{attrs:{min:1,max:30,step:1},model:{value:e.store.formData.contentCount,callback:function(t){e.$set(e.store.formData,"contentCount",t)},expression:"store.formData.contentCount"}}),a("veui-number-input",{staticClass:"number-show",attrs:{min:1,max:30},model:{value:e.store.formData.contentCount,callback:function(t){e.$set(e.store.formData,"contentCount",t)},expression:"store.formData.contentCount"}})],1)])]):e._e(),e.store.HAS_AD_INTERVAL_ARRAY.includes(e.store.formData.blockType)?a("veui-field",{attrs:{label:"广告间隔:",name:"adInterval",field:"adInterval"}},[a("div",{staticClass:"card-right"},[a("veui-select",{attrs:{placeholder:"选择间隔",options:e.AdInterval.toOptions(),"overlay-class":"select-items"},model:{value:e.store.formData.adInterval,callback:function(t){e.$set(e.store.formData,"adInterval",t)},expression:"store.formData.adInterval"}})],1)]):e._e()],1):e._e()],1):e._e(),3===e.store.formData.type?a("div",{staticClass:"edit-form-card has-no-card-title"},[a("veui-field",{attrs:{label:"渠道:",name:"channel",field:"channel",tip:"用于多渠道投放时做区分"}},[a("div",{staticClass:"card-right"},[a("veui-input",{attrs:{placeholder:"请填写渠道备注"},model:{value:e.store.formData.channel,callback:function(t){e.$set(e.store.formData,"channel",t)},expression:"store.formData.channel"}})],1)])],1):e._e()])]),a("template",{slot:"operation"},[a("veui-button",{attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,null,null));Ie.options.__file="ContentAccessFormView.vue";var Fe,Ne=Ie.exports,Ae=Object(u.a)(G.a,ne,{name:"contentAccessList",components:{"veui-fieldset":ue.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-select":N.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-overlay":fe.a,"veui-dialog":pe.a,"veui-checkbox":he.a,FilterForm:Ne},data:function(){return{Type:Z,AdInterval:X,ShowSearchBox:ee,AccType:te,SiteStatus:ae,checked:!1,modalVisible:!1,SizeType:ie}},methods:{redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},findChannel:function(e){var t=W()(this.store.channels,function(t){return t.value==e});return t?t.label:""},findBlock:function(e){var t=W()(this.store.blockTypes,function(t){return t.value==e});return t?t.label:""},findBlockPc:function(e){var t=W()(this.store.blockTypes,function(t){return t.value==e&&!t.isBlockWap});return t?t.label:""},getCategoryTitle:function(e){return W()(this.store.ContentType,function(t){return String(t.value)===e}).label+"："},findCategory:function(e,t){var a=this,i=[];i.push({title:this.getCategoryTitle(t),detail:e.map(function(e){var t=W()(a.store.categorys,function(t){return t.value==e});return t?t.label:"--"}).join(",")});for(var s="",l=0;l<i.length;l++)s=i[l].title+i[l].detail;return s},goToCreate:function(){this.redirectTo("/union/content/access/create")},toAPI:function(){this.global.router.push({path:"/union/download/api"})},toSDK:function(){this.global.router.push({path:"/union/download/sdk"})},dateFormat:function(e){return w()(e).format("YYYY-MM-DD")},sureAgreement:(Fe=Object(q.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.signAgreement();case 2:0!==(t=e.sent)&&1!==t||(this.store.contentVisible=!1);case 4:case"end":return e.stop()}},e,this)})),function(){return Fe.apply(this,arguments)}),copyCode:function(e){document.getElementById("code").select(),document.execCommand("copy")&&document.execCommand("copy")},getCode:function(e,t,a,i){var s=arguments.length<=3?void 0:i,l=s.siteId,r=s.blockId,o=s.siteName,n=s.siteDomain,c=s.channelId,u=s.subChannelId,d="";d=(this.modalVisible=!0)===t?a?'\x3c!-- cpu feeds block --\x3e\n    <div class="cpu-feeds-block" data-site-id="'.concat(l,'" data-block-id="').concat(r,'"></div>\n    <script>\n        (function(){var url="//cpu.baidu.com";var getEntry=function(){var script=document.createElement("script");script.id="cpu-block-entry";script.src=url+"/js/cb_pc.js";var scriptTag=document.getElementsByTagName("script")[0];scriptTag.parentNode.insertBefore(script,scriptTag)};var sentMsg=function(e){var msg={msg:e.toString()||"no err msg",line:e.lineno||-1};var img=document.createElement("img");if(JSON){msg=encodeURIComponent(JSON.stringify(msg))}else{msg="&line="+msg.line+"&msg="+msg.msg}img.src=url+"/msg?m=block&e="+msg};try{window.feedsbycpu=window.feedsbycpu||[];window.feedsbycpu.push({siteId:"').concat(l,'",blockId:"').concat(r,'",display:"auto"});document.getElementById("cpu-block-entry")||getEntry()}catch(e){sentMsg(e)}})();\n    <\/script>\n\x3c!-- cpu feeds block end--\x3e'):'\x3c!-- cpu feeds block --\x3e\n    <div class="cpu-feeds-block" data-site-id="'.concat(l,'" data-block-id="').concat(r,'"></div>\n    <script>\n        (function(){var url="//cpu.baidu.com";var getEntry=function(){var script=document.createElement("script");script.id="cpu-block-entry";script.src=url+"/js/cb.js";var scriptTag=document.getElementsByTagName("script")[0];scriptTag.parentNode.insertBefore(script,scriptTag)};var sentMsg=function(e){var msg={msg:e.toString()||"no err msg",line:e.lineno||-1};var img=document.createElement("img");img.src=url+"/msg?m=block&e="+encodeURIComponent(JSON.stringify(msg))};try{window.feedsbycpu=window.feedsbycpu||[];window.feedsbycpu.push({siteId:"').concat(l,'",blockId:"').concat(r,'",display:"auto"});document.getElementById("cpu-block-entry")||getEntry()}catch(e){sentMsg(e)}})();\n    <\/script>\n\x3c!-- cpu feeds block end--\x3e'):"\x3c!-- 接入站点：".concat(o,"(").concat(n,") 接入频道：").concat(e,"(ID: ").concat(c,") --\x3e\n<script>\n(function() {\n   var s = \"_\" + Math.random().toString(36).slice(2);\n   document.write('<div id=\"' + s + '\"></div>');\n   (window.slotbycpu=window.slotbycpu || []).push({\n       siteId: '").concat(l,"',\n       channelId: '").concat(c,"',\n       subChannelId: '").concat(u,"',\n       container: s,\n       display: 'auto'\n   });\n})();\n<\/script>\n<script src=\"//cpu.baidu.com/js/ci.js\"><\/script>"),document.getElementById("code").value=d}}}),Me=(a("2461"),Object(p.a)(Ae,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"content-list-view"},[a("template",{slot:"summaryContent"},[a("veui-dialog",{attrs:{open:e.store.contentVisible,"overlay-class":"content-center-overlay",closable:!1},on:{"update:open":function(t){e.$set(e.store,"contentVisible",t)}}},[a("div",[a("div",{staticClass:"title"},[e._v("亲爱的内容联盟用户")]),a("p",{staticClass:"des"},[e._v("为更好服务流量合作伙伴，提供优质稳定的内容和广告服务，请您确认新版合作协议")]),a("veui-checkbox",{attrs:{ui:"small"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[a("div",[e._v("我已阅读并同意"),a("a",{staticClass:"href",attrs:{href:"https://baidu-ssp.gz.bcebos.com/mssp/cpu/内容联盟接入服务协议.pdf",target:"_blank"}},[a("span",{staticClass:"blue"},[e._v("《内容联盟接入服务协议》")])])])])],1),a("template",{slot:"foot"},[a("veui-button",{attrs:{ui:"small primary",disabled:!e.checked},on:{click:e.sureAgreement}},[e._v("确定")])],1)],2)],1),a("template",{slot:"filterContent"},[a("veui-field",[a("veui-button",{attrs:{ui:"primary"},on:{click:e.goToCreate}},[e._v("新建内容联盟")])],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"siteName",width:"150",title:"接入站点"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"filter-cell",attrs:{title:t.siteName}},[e._v(e._s(t.siteName))]),a("div",{staticClass:"tableID filter-cell"},[e._v("域名:"+e._s(t.siteDomain))])]}}])}),a("veui-table-column",{attrs:{field:"siteState",width:"120",title:"网站状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.siteFraudulent?a("div",[e._v("被封禁")]):e._e(),t.siteFraudulent?e._e():a("div",[e._v(e._s(e.SiteStatus.getTextFromValue(t.siteState)))])]}}])}),a("veui-table-column",{attrs:{field:"subChannelName",title:"渠道",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"filter-cell autowidth",attrs:{title:t.appName}},[e._v(e._s(t.item.subChannelName))]),a("div",{staticClass:"tableID filter-cell"},[e._v("ID:"+e._s(t.item.subChannelId))])]}}])}),a("veui-table-column",{attrs:{field:"type",width:"100",title:"接入方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.type==e.AccType.API?a("div",[e._v("API")]):a("div",[e._v("JS")])]}}])}),a("veui-table-column",{attrs:{field:"cooType",width:"100",title:"合作样式"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.type==e.AccType.API?a("div",[e._v("--")]):a("div",[e._v(e._s(e.Type.getTextFromValue(t.type)))])]}}])}),a("veui-table-column",{attrs:{field:"token",width:"100",title:"secret"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.type==e.AccType.API||""===t.token?a("div",{ref:"secret"+t.siteId,staticClass:"filter-cell"},[e._v(e._s(t.token))]):a("div",[e._v("--")]),a("veui-tooltip",{attrs:{position:"bottom-start",target:"secret"+t.siteId,trigger:"hover","overlay-class":"hover-overlay"}},[a("div",[e._v(e._s(t.token))])])]}}])}),a("veui-table-column",{attrs:{field:"category",width:"150",title:"接入类目"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.type==e.AccType.API?a("div",[e._v("--")]):t.type===e.Type.CHANNEL?a("div",[t.subChannelName?a("div",{staticClass:"filter-cell autowidth"},[e._v(e._s(e.findChannel(t.channelId)+"("+t.subChannelName+")"))]):e._e(),t.subChannelName?e._e():a("div",{staticClass:"filter-cell autowidth"},[e._v(e._s(e.findChannel(t.channelId)))]),a("div",{staticClass:"tableID filter-cell"},[e._v("ID:"+e._s(t.subChannelId))])]):t.type===e.Type.BLOCK?a("div",[t.blockId?a("div",[a("div",{ref:"blockId"+t.siteId,staticClass:"blockId"},[a("veui-icon",{attrs:{name:"plus-circle-o"}}),a("span",[e._v(e._s(e.findBlock(t.blockStyleTypeId)))])],1),a("div",{staticClass:"tableID filter-cell"},[e._v("ID:"+e._s(t.blockId))])]):e._e(),t.blockId?a("veui-tooltip",{attrs:{position:"auto",target:"blockId"+t.siteId,trigger:"hover","overlay-class":"hover-overlay"}},[a("div",[e._v("接入类目")]),e._l(t.contentTypeCategory,function(t,i){return a("span",{key:i},[e._v("\n                            "+e._s(e.findCategory(t,i))+"\n                        ")])}),e.store.HAS_DISPLAY_COUNT.includes(t.blockStyleTypeId)?a("div",[e._v("显示条数："+e._s(t.displayCount)+"条")]):e._e(),e.store.HAS_AD_INTERVAL_ARRAY.includes(t.blockStyleTypeId)?a("div",[e._v("广告间隔："+e._s(e.AdInterval.getTextFromValue(t.adInterval)))]):e._e()],2):e._e()],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"sizeType",width:"120",title:"尺寸"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.sizeType===e.SizeType.FIXED?a("div",[e._v(e._s(e.SizeType.getTextFromValue(t.sizeType))+" "+e._s(t.width)+" * "+e._s(t.height)+" ")]):a("div",[e._v(e._s(e.SizeType.getTextFromValue(t.sizeType)))])]}}])}),a("veui-table-column",{attrs:{field:"createTime",title:"创建时间",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.dateFormat(t.item.createTime))+"\n            ")]}}])}),a("veui-table-column",{attrs:{field:"hasAdApiAuth",width:"150",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.showUrl?a("div",[a("a",{attrs:{href:"props.showUrl"}},[e._v("所在网址")])]):e._e(),a("div",{staticClass:"op-column"},[null===t.channelId?a("div",[e._v("\n                        --\n                    ")]):a("veui-button",{staticClass:"opbutton",attrs:{ui:"link"},on:{click:function(a){e.getCode.apply(void 0,[e.findChannel(t.channelId),t.type===e.Type.BLOCK,e.findBlockPc(t.blockStyleTypeId)].concat(t))}}},[e._v("\n                        获取代码\n                    ")])],1)]}}])})],1),a("veui-dialog",{attrs:{"overlay-class":"codePopup",open:e.modalVisible,title:"获取代码位"},on:{"update:open":function(t){e.modalVisible=t}}},[a("template",{slot:"title"},[a("h3",[e._v("获取代码位")]),a("p",{staticClass:"sub-title"},[a("span",[e._v("直接投放，请将代码粘贴到内容位所在的位置。通过JS调用，请在JS文件中使用document.write()方法写入代码，")])])]),a("textarea",{ref:"code",staticClass:"code",attrs:{id:"code",readonly:"readonly"}}),a("template",{slot:"foot"},[a("veui-button",{attrs:{ui:"primary"},on:{click:e.copyCode}},[e._v("复制")]),a("veui-button",{on:{click:function(t){e.modalVisible=!1}}},[e._v("关闭")])],1)],2)],2)},[],!1,null,null,null));Me.options.__file="ContentAccessListView.vue";var Ye=Me.exports,Le=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},a.filter,{order:"desc",pageSize:30,orderBy:"createTime",keyword:""})),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.contentProtectList,this.deleteRequester=this.api.deleteContentProtect}},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),Ee=a("9a9a"),Pe=a("5e6e"),Ve=(a("26cd"),a("4f7f"),a("2909")),Be=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","新建内容屏蔽规则"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ruleTypes",[{label:"不限",value:!1},{label:"屏蔽",value:!0}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{id:"",siteIds:[],name:"",vulgar:!1,hasKeywords:!1,keywords:"",hasUrls:!1,urls:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formSetting",{validators:[{fields:["urls"],validate:function(e){if(!e)return!0;for(var t=e.split(/[\s\n]/),a=0;a<t.length;a++)if(!/^http[s]?:\/\/cpu.baidu.com/.test(t[a])||!/\/detail\/?[0-9]{1,}/.test(t[a]))return{urls:"第".concat(a+1,"行请输入正确的url")};return!0}},{fields:["vulgar"],validate:function(e){return!!(e||a.formData.keywords&&a.formData.hasKeywords||a.formData.urls&&a.formData.hasUrls)||{vulgar:"请至少选择一种屏蔽规则"}}}]}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.title=("create"===this.pageType?"新建":"edit"===this.pageType?"编辑":"查看")+"内容屏蔽规则",this.meterialsForAppDirect=this.api.meterialsForAppDirect,this.updateRequester=this.api.updateContentProtect,this.createRequester=this.api.createContentProtect,this.contentSiteList=this.api.contentSiteList,this.detailRequester=this.api.contentProtectDetail}},{key:"initFormData",value:function(e){this.detailRequester&&this.id&&this.requestDetail({},{initialData:e})}},{key:"prepareData",value:function(e){var t={name:e.name,vulgar:e.vulgar?1:0,keywords:e.hasKeywords&&e.keywords?Object(Ve.a)(new Set(e.keywords.split(/\n/).filter(function(e){return e}))):[],urls:e.hasUrls&&e.hasUrls?Object(Ve.a)(new Set(e.urls.split(/[\s\n]/))):[],siteIds:e.siteIds||[]};return e.id&&(t.id=e.id),t}},{key:"adaptData",value:function(e){return e.siteIds=e.siteIds?e.siteIds:[],e.urls=0<e.urls.length?e.urls.join("\n"):"",e.hasUrls=!!e.urls,e.vulgar=Boolean(e.vulgar),e.keywords=0<e.keywords.length?e.keywords.join("\n"):"",e.hasKeywords=!!e.keywords,e}},{key:"submit",value:function(){var e=this.formData;if("create"===this.pageType&&this.createRequester)return this.requestCreate(e);if("edit"===this.pageType&&this.updateRequester)return this.requestUpdate(e);throw new Error("unknown form page type: ".concat(this.pageType,"!"))}}]),t}(ve.a),$e=a("ab80"),ze=Object(u.a)(ye.a,Be,{name:"EditDirectAdView",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-tab":F.a,"veui-transfer":Se.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-textarea":$e.a,"veui-button":S.a,"veui-switch":we.a},props:["editProp"],data:function(){return{isDetail:!1,isEdit:!1,siteNamesDatasource:[],requiredRule:[{name:"required",value:!0},{name:"pattern",value:/^(?!(\s+$))/,triggers:"submit",message:"不能为全空格"}]}},methods:{goBack:function(){this.global.redirect({url:{path:"/union/content/protect"},type:"push"})},getDetail:function(){this.store.detailRequester({id:this.store.id}).then(function(e){})},getSiteList:function(){var e=this;this.store.contentSiteList().then(function(t){e.siteNamesDatasource=t.results.map(function(e){return{label:e.domain,value:e.siteId}})})}},mounted:function(){xe.a.hideHeaderDom(),this.getSiteList(),"detail"===this.store.pageType?this.isDetail=!0:"edit"===this.store.pageType&&(this.isEdit=!0)},beforeDestroy:function(){xe.a.addHeaderDom()}}),qe=Object(p.a)(ze,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common edit-form-content-protect",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card"},[a("veui-field",{attrs:{label:"规则名称：",name:"name",field:"name",rules:e.requiredRule}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"input300",attrs:{placeholder:"为它起个名字吧",clearable:!0,maxLength:"20",disabled:e.isDetail},model:{value:e.store.formData.name,callback:function(t){e.$set(e.store.formData,"name",t)},expression:"store.formData.name"}})],1)])],1),a("div",{staticClass:"edit-form-card"},[a("h3",{staticClass:"card-title"},[e._v("屏蔽规则")]),a("veui-field",{attrs:{label:"低俗内容屏蔽：",name:"vulgar",field:"vulgar"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-switch",{staticClass:"filed-switcher",attrs:{disabled:e.isDetail},model:{value:e.store.formData.vulgar,callback:function(t){e.$set(e.store.formData,"vulgar",t)},expression:"store.formData.vulgar"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.store.formData.vulgar,expression:"store.formData.vulgar"}],staticClass:"field-text"},[e._v("已开启屏蔽")])],1)])]),a("veui-field",{class:{"has-sub-card":e.store.formData.hasKeywords},attrs:{label:"关键词屏蔽：",name:"keywords",field:"keywords"}},[a("div",{staticClass:"card-right black-button-tabs"},e._l(e.store.ruleTypes,function(t){return a("veui-button",{key:t.value,class:{active:e.store.formData.hasKeywords===t.value},attrs:{disabled:e.isDetail},on:{click:function(a){e.store.formData.hasKeywords=t.value}}},[e._v("\n                            "+e._s(t.label)+"\n                        ")])}))]),e.store.formData.hasKeywords?a("div",{staticClass:"sub-card has-sub-card"},[a("veui-field",{attrs:{name:"keywords",field:"keywords"}},[a("div",{staticClass:"card-right"},[a("veui-textarea",{staticClass:"edit-textarea-large",attrs:{autoresize:"","line-number":"",disabled:e.isDetail},model:{value:e.store.formData.keywords,callback:function(t){e.$set(e.store.formData,"keywords",t)},expression:"store.formData.keywords"}})],1)])],1):e._e(),a("veui-field",{class:{"has-sub-card":e.store.formData.hasUrls},attrs:{label:"URL：",name:"url",field:"url"}},[a("div",{staticClass:"card-right black-button-tabs"},e._l(e.store.ruleTypes,function(t){return a("veui-button",{key:t.value,class:{active:e.store.formData.hasUrls===t.value},attrs:{disabled:e.isDetail},on:{click:function(a){e.store.formData.hasUrls=t.value}}},[e._v("\n                            "+e._s(t.label)+"\n                        ")])}))]),e.store.formData.hasUrls?a("div",{staticClass:"sub-card has-sub-card"},[e.store.formData.hasUrls?a("veui-field",{attrs:{name:"urls",field:"urls"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-textarea",{staticClass:"edit-textarea-large",attrs:{autoresize:"","line-number":"",disabled:e.isDetail,placeholder:"例如http://cpu.baidu.com/detail/1"},model:{value:e.store.formData.urls,callback:function(t){e.$set(e.store.formData,"urls",t)},expression:"store.formData.urls"}}),a("div",{staticClass:"field-add-text multi-lines"},[a("div",[e._v("提示：")]),a("p",[e._v("请填写您需要屏蔽的具体文章URL（注：域名需为cpu.baidu.com且匹配格式：/detail/数字/ 的链接）。不支持.com或abc.html等主域信息不完整的URL片段。")])])],1)])]):e._e()],1):e._e()],1),a("div",{staticClass:"edit-form-card"},[a("h3",{staticClass:"card-title"},[e._v("关联域名")]),a("veui-field",{attrs:{label:"关联域名：",name:"siteIds",field:"siteIds"}},[a("div",{staticClass:"card-right"},[a("veui-transfer",{staticClass:"transfer-userdefined",attrs:{datasource:e.siteNamesDatasource,"candidate-placeholder":"请输入域名名称","selected-placeholder":"请输入域名名称",disabled:e.isDetail},scopedSlots:e._u([{key:"candidate-item-label",fn:function(t){return[a("div",{staticClass:"candidate-item-left"},[e._v(e._s(t.item.label))])]}}]),model:{value:e.store.formData.siteIds,callback:function(t){e.$set(e.store.formData,"siteIds",t)},expression:"store.formData.siteIds"}},[a("template",{slot:"candidate-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                    所有域名\n                                    "),a("span",{staticClass:"number"},[e._v(e._s(e.siteNamesDatasource.length))])])]),a("template",{slot:"selected-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                    已选域名\n                                    "),a("span",{staticClass:"number"},[e._v(e._s(e.store.formData.siteIds.length+"/"+e.siteNamesDatasource.length))])])])],2)],1)])],1)])]),e.isDetail?e._e():a("template",{slot:"operation"},[a("veui-button",{attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,null,null);qe.options.__file="ContentProtectFormView.vue";var Ue=qe.exports,We=Object(u.a)(G.a,Le,{name:"ContentProtectListView",components:{"veui-icon":y.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-button":S.a,"veui-searchbox":Pe.a,"veui-table-column":de.a,"veui-tooltip":I.a,"veui-overlay":fe.a,"edit-content-protect-view":Ue},directives:{autosubmit:Ee.a},data:function(){return{}},methods:{setItemStatus:function(e,t){var a=this;this.store.deleteRequester({ids:[e.id],status:t}).then(function(e){a.store.submitSearch()})},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},createNew:function(){this.redirectTo("/union/content/protect/create")},checkDetail:function(e){this.redirectTo("/union/content/protect/detail?id=".concat(e))},eidtDetail:function(e){this.redirectTo("/union/content/protect/edit?id=".concat(e))}}}),Ge=(a("70d1"),Object(p.a)(We,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"direct-ad-list-view"},[[a("h3",{staticClass:"selfdefined-title"},[e._v("内容屏蔽")]),a("veui-icon",{ref:"time-ratio",staticClass:"title-notice-icon",attrs:{name:"question-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"time-ratio",trigger:"hover","overlay-class":"notice-tooltip"}},[e._v("\n                只有成功接入内容联盟的网站，内容屏蔽策略才会生效。\n        ")])],a("template",{slot:"filterContent"},[a("veui-fieldset",[a("veui-button",{staticClass:"create-new",attrs:{ui:"primary"},on:{click:e.createNew}},[e._v("新建内容屏蔽规则")])],1),a("veui-fieldset",{staticClass:"filter-right"},[a("veui-field",[a("veui-searchbox",{directives:[{name:"autosubmit",rawName:"v-autosubmit.search",modifiers:{search:!0}}],attrs:{placeholder:"搜索规则名称",filed:"keyword"},model:{value:e.store.filter.keyword,callback:function(t){e.$set(e.store.filter,"keyword",t)},expression:"store.filter.keyword"}})],1)],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"name",title:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{ref:"name"+t.item.id,staticClass:"table-multi-line"},[e._v(e._s(t.item.name))]),10<t.item.name.length?a("veui-tooltip",{attrs:{position:"bottom-start",target:"name"+t.item.id,trigger:"hover","overlay-class":"hover-overlay","hide-delay":100}},[e._v("\n                    "+e._s(t.item.name)+"\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"vulgar",title:"低俗内容设置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[t.item.config&&t.item.config.includes("低俗")?a("span",[e._v("屏蔽")]):a("span",[e._v("不限")])])]}}])}),a("veui-table-column",{attrs:{field:"keywords",title:"关键词设置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{ref:"keywords"+t.item.id,staticClass:"table-multi-line"},[e._v(e._s(t.item.keywords.join("/")||"--"))]),8<t.item.keywords.join("/").length?a("veui-tooltip",{attrs:{position:"bottom-start",target:"keywords"+t.item.id,trigger:"hover","overlay-class":"hover-overlay","hide-delay":100}},[e._v("\n                    "+e._s(t.item.keywords.join("/")||"--")+"\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"url",title:"URL设置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{ref:"url"+t.item.id,staticClass:"table-multi-line"},[e._v(e._s(t.item.urls.join(";")||"--"))]),8<t.item.urls.join(";").length?a("veui-tooltip",{attrs:{position:"bottom-start",target:"url"+t.item.id,trigger:"hover","overlay-class":"hover-overlay large-overlay","hide-delay":100}},e._l(t.item.urls,function(t){return a("div",{key:t},[e._v("\n                        "+e._s(t)+"\n                    ")])})):e._e()]}}])}),a("veui-table-column",{attrs:{field:"siteNames",title:"关联域名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{ref:"siteNames"+t.item.id,staticClass:"table-multi-line"},[e._v(e._s(t.item.siteNames.join(";")||"--"))]),8<t.item.siteNames.join(";").length?a("veui-tooltip",{attrs:{position:"bottom-start",target:"siteNames"+t.item.id,trigger:"hover","overlay-class":"hover-overlay","hide-delay":100}},e._l(t.item.siteNames,function(t){return a("div",{key:t},[e._v("\n                        "+e._s(t)+"\n                    ")])})):e._e()]}}])}),a("veui-table-column",{attrs:{field:"createTime",title:"创建日期",sortable:"",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v(e._s(t.item.createTime))])]}}])}),a("veui-table-column",{attrs:{field:"operation",title:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"op-column"},[a("veui-button",{attrs:{ui:"link"},on:{click:function(a){e.checkDetail(t.item.id)}}},[e._v("查看")]),a("veui-button",{attrs:{ui:"link"},on:{click:function(a){e.eidtDetail(t.item.id)}}},[e._v("编辑")]),a("veui-button",{ref:"relative"+t.item.id,attrs:{ui:"link"},on:{click:function(e){t.item.visible=!t.item.visible}}},[e._v("删除")]),a("span",[a("veui-tooltip",{staticClass:"del-tooltip",attrs:{position:"top",target:"relative"+t.item.id,trigger:"click","overlay-class":"del-overlay",open:t.item.openDelOverlay},on:{"update:open":function(a){e.$set(t.item,"openDelOverlay",a)}}},[a("veui-icon",{staticClass:"message-icon",attrs:{name:"exclamation-circle-o"}}),e._v("\n                                您确定要删除该屏蔽规则吗？\n                                "),a("div",{staticClass:"btn-group"},[a("veui-button",{attrs:{ui:"primary"},on:{click:function(a){e.setItemStatus(t.item,0)}}},[e._v("确定")]),a("veui-button",{staticClass:"cancel",on:{click:function(e){t.item.openDelOverlay=!1}}},[e._v("取消")])],1)],1)],1)],1)]}}])})],1)],2)},[],!1,null,"166a234f",null));Ge.options.__file="ContentProtectListView.vue";var He=Ge.exports,Qe=a("dce5"),Je=a.n(Qe),Ke=a("1350"),Ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageType","detail"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{monitorAds:[],accountThreshold:"",adMonitorType:"",adMonitorViews:"",adThreshold:"",bizType:1,customerId:"",status:""}),a}var a;return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.detailRequester=this.api.getWarningSettings,this.adPositionsRequest=this.api.adPostiionsDetails}},{key:"initFormData",value:function(e){this.detailRequester&&this.requestDetail({bizType:1},{initialData:e})}},{key:"adaptData",value:function(e){return e.status=1===e.status,e.monitorAds||(e.monitorAds=[]),e}},{key:"requestDetail",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a,i,s,l,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<r.length&&void 0!==r[0]?r[0]:{},a=1<r.length&&void 0!==r[1]?r[1]:{},e.next=4,a.initialData||this.detailRequester(Object(Ke.b)(Je()({},this.getDefaultArgs(),t)),a);case 4:if(i=(i=e.sent).result,0<(s=i.monitorAds||[]).length)return e.next=10,this.adPositionsRequest({tuIdList:s.join(",")});e.next=12;break;case 10:l=e.sent,i.monitorAds=l?l.map(function(e){return e.adPosDetail}):[];case 12:return Je()(this.formData,this.adaptData(i)),e.abrupt("return",i);case 14:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})}]),t}(ve.a),Xe=a("9894"),et=(a("4047"),Object(u.a)(ye.a,Ze,{name:"WarningReportView",components:{"veui-button":S.a,"veui-field":ce.a,"veui-select":N.a,"veui-icon":y.a,"veui-transfer":Xe.a},data:function(){return{}},methods:{redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},billionFormat:function(e){return xe.a.billionFormat(e)},setWarningReport:function(){this.redirectTo("/report/warning/edit")}}})),tt=(a("08e7"),Object(p.a)(et,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common",attrs:{id:"warn-report-setting"}},[a("template",{slot:"field"},[a("div",{staticClass:"edit-form-card warn-report-title"},[a("h3",{staticClass:"title"},[e._v("预警设置")]),a("span",{staticClass:"adhere-text"},[e._v("预警开启后，可监控展现量、收入两个指标的波动情况，并为媒体生成预警报告，供媒体查询")])]),a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title"},[a("veui-field",{staticClass:"theme-card",attrs:{label:"预警状态:",name:"status",field:"status"}},[a("div",{staticClass:"card-right"},[a("div",[a("span",{staticClass:"status-text"},[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.store.formData.status,expression:"store.formData.status == 1"}]},[a("veui-icon",{attrs:{name:"check"}}),e._v("已开启")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.store.formData.status,expression:"store.formData.status == 0"}]},[e._v("已关闭")])]),a("veui-button",{attrs:{ui:"primary"},on:{click:function(t){e.setWarningReport()}}},[e._v("修改设置")])],1),a("div",{staticClass:"adhere-text"},[e._v("如开启预警，则同时监控业务波动以及竞价代码位波动数据，并生成账户以及竞价代码位预警报告。")])])]),a("veui-field",{staticClass:"other-card",attrs:{label:"业务波动监控:",name:"account",field:"account"}},[a("div",{staticClass:"card-right"},[e._v("\n                    阈值+/-"),a("span",{staticClass:"value-text"},[e._v(e._s(e.store.formData.accountThreshold)+"%")]),e._v("时预警\n                ")])]),a("veui-field",{staticClass:"other-card",attrs:{label:"竞价代码位波动监控:",name:"adpos",field:"adpos"}},[a("div",{staticClass:"card-right"},[e._v("\n                    阈值+/-"),a("span",{staticClass:"value-text"},[e._v(e._s(e.store.formData.adThreshold)+"%")]),e._v("时预警\n                ")])]),a("veui-field",{staticClass:"other-card",attrs:{label:"竞价代码位监控方式:",name:"adpos-type",field:"adpos-type"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.store.formData.adMonitorType,expression:"store.formData.adMonitorType == 0"}],staticClass:"card-right"},[a("div",[e._v("全部代码位监控")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.store.formData.adMonitorType,expression:"store.formData.adMonitorType == 1"}],staticClass:"card-right"},[a("div",{attrs:{calss:"card-line"}},[a("span",[e._v("按量级监控")]),a("span",[e._v("\n                            展现量 >= "+e._s(e.billionFormat(e.store.formData.adMonitorViews))+"\n                        ")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.store.formData.adMonitorType,expression:"store.formData.adMonitorType == 2"}],staticClass:"card-right"},[a("div",[e._v("按代码位监控")]),a("div",{staticClass:"self-transfer-table right-table"},[a("div",{staticClass:"self-transfer-header"},[a("span",{staticClass:"transfer-title"},[e._v("已选代码位"),a("span",{staticClass:"number"},[e._v(e._s(e.store.formData.monitorAds.length))])])]),a("div",{staticClass:"table-list right-table-list"},[a("table",[a("tbody",e._l(e.store.formData.monitorAds,function(t){return a("tr",{key:t.tu},[a("td",[e._v(" "+e._s(t.name||"--")+" ")]),a("td",[e._v(" ID: "+e._s(t.tu)+" ")])])}))])])])])])],1)])])],2)},[],!1,null,null,null));tt.options.__file="WarningReportView.vue";var at=tt.exports,it=a("0644"),st=a.n(it),lt=a("9e86"),rt=a.n(lt),ot=a("4cfe"),nt=a.n(ot),ct=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","预警设置"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageType","detail"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"selectedAdpsList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"thresholdType",[{label:"5",value:"5"},{label:"10",value:"10"},{label:"20",value:"20"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{monitorAds:[],accountThreshold:5,adMonitorType:0,adMonitorViews:0,adThreshold:5,bizType:1,customerId:0,status:1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"rules",{accountThreshold:[{name:"required",value:!0}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adposListFilter",{pageNo:1,pageSize:50,order:"desc",orderBy:"createTime",keyword:null}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adposListConfig",{pageSizes:[30,50,100],totalCount:0,pageTo:"?pageNo=:page"}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adposList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formSetting",{validators:[{fields:["selectedAdpsList"],validate:function(e){if(2===a.formData.adMonitorType)return a.selectedAdpsList.length<1?{selectedAdpsList:"请选择代码位"}:void 0}},{fields:["adMonitorViews"],validate:function(e){return!!nt()(e)||(e<1e3||1e8<e?{adMonitorViews:"展现量需介于1000-100000000"}:void 0)}}]}),a}var a;return Object(n.a)(t,e),Object(s.a)(t,[{key:"generatePageTo",value:function(){this.adposListConfig.pageTo="#".concat(this.getRoutePath(),"?pageNo=:page")}},{key:"getAdposList",value:function(){var e=this;this.getSlotList(Object(v.a)({},this.adposListFilter,{keyword:this.adposListFilter.keyword?this.adposListFilter.keyword:null})).then(function(t){e.adposListConfig.totalCount=t.page.totalCount,e.adposList=t.page.result})}},{key:"pageNoChange",value:function(e){this.adposListFilter.pageNo=e,this.getAdposList()}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.adposListFilter.pageNo=1*this.getRouteQuery().pageNo||1,this.detailRequester=this.api.getWarningSettings,this.adPositionsRequest=this.api.adPostiionsDetails,this.getSlotList=this.api.getWebSlotNewList,this.updateRequester=this.api.setWarningSettings,this.getAdposList()}},{key:"initFormData",value:function(e){this.detailRequester&&this.requestDetail({bizType:1},{initialData:e})}},{key:"adaptData",value:function(e){return e.status=1===e.status,e.monitorAds||(e.monitorAds=[]),e}},{key:"requestDetail",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a,i,s,l,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<r.length&&void 0!==r[0]?r[0]:{},a=1<r.length&&void 0!==r[1]?r[1]:{},e.next=4,a.initialData||this.detailRequester(Object(Ke.b)(Je()({},this.getDefaultArgs(),t)),a);case 4:if(i=(i=e.sent).result,0<(s=i.monitorAds||[]).length)return e.next=10,this.adPositionsRequest({tuIdList:s.join(",")});e.next=12;break;case 10:l=e.sent,this.selectedAdpsList=l?l.map(function(e){return e.adPosDetail}):[];case 12:return Je()(this.formData,this.adaptData(i)),e.abrupt("return",i);case 14:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"prepareData",value:function(e){return e.status=e.status?1:0,e.bizType=1,e.monitorAds=this.selectedAdpsList.map(function(e){return e.tuStr}),e}},{key:"submit",value:function(){var e=this.formData;if("edit"===this.pageType&&this.updateRequester)return 1!==e.adMonitorType&&(e.adMonitorViews=1e3),this.requestUpdate(e);throw new Error("unknown form page type: ".concat(this.pageType,"!"))}}]),t}(ve.a),ut=a("8243"),dt=a("076f"),ft=Object(u.a)(ye.a,ct,{name:"EditWarningReportView",components:{"veui-button":S.a,"veui-field":ce.a,"veui-radio":je.a,"veui-select":N.a,"veui-icon":y.a,"veui-switch":we.a,"veui-input":ge.a,"veui-searchbox":Pe.a,"veui-table":ut.a,"veui-table-column":de.a,"veui-pagination":dt.a},watch:{"$route.query.pageNo":function(e){this.store.pageNoChange(parseInt(e,10)||1)}},data:function(){return{requiredRule:[{name:"required",value:!0},{name:"pattern",value:/^\+?[1-9][0-9]*$/,message:function(e,t){return"请输入正整数"}}]}},methods:{redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},billionFormat:function(e){e=xe.a.billionFormat(e)},goBack:function(){this.redirectTo("/report/warning")},selectItem:function(e){this.getState(e.tuStr)||this.store.selectedAdpsList.push(e)},deleletItem:function(e){this.store.selectedAdpsList=this.store.selectedAdpsList.filter(function(t){return t.tuStr!==e})},getState:function(e){return this.store.selectedAdpsList.some(function(t){return t.tuStr==e})},selectAll:function(){var e=this,t=this.store.selectedAdpsList.map(function(e){return e.tuStr});this.store.adposList.map(function(a){t.indexOf(a.tuStr)<0&&e.store.selectedAdpsList.push(st()(a))})},getAdposList:function(){this.store.getAdposList()}},mounted:function(){xe.a.hideHeaderDom()},beforeDestroy:function(){xe.a.addHeaderDom()}}),pt=(a("95ee"),Object(p.a)(ft,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common",attrs:{id:"warn-report-edit"},on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title"},[a("veui-field",{staticClass:"theme-card",attrs:{label:"预警状态:",name:"status",field:"status"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-switch",{staticClass:"filed-switcher",model:{value:e.store.formData.status,callback:function(t){e.$set(e.store.formData,"status",t)},expression:"store.formData.status"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.store.formData.status,expression:"store.formData.status"}],staticClass:"field-text"},[e._v("已开启预警")])],1),a("div",{staticClass:"adhere-text"},[e._v("如开启预警，则同时监控业务波动以及竞价代码位波动数据，并生成账户以及竞价代码位预警报告。")])])]),a("veui-field",{staticClass:"other-card",attrs:{label:"业务波动监控:",name:"accountThreshold",field:"accountThreshold",rules:e.store.rules.accountThreshold}},[a("div",{staticClass:"card-right"},[a("div",{attrs:{calss:"card-line"}},[a("div",{staticClass:"field-text"},[e._v("阈值+/-")]),a("veui-select",{staticClass:"filed-select",attrs:{options:e.store.thresholdType},model:{value:e.store.formData.accountThreshold,callback:function(t){e.$set(e.store.formData,"accountThreshold",t)},expression:"store.formData.accountThreshold"}}),a("span",{staticClass:"unit"},[e._v("%")])],1)])]),a("veui-field",{staticClass:"other-card",attrs:{label:"竞价代码位波动监控:",name:"adThreshold",field:"adThreshold",rules:e.store.rules.accountThreshold}},[a("div",{staticClass:"card-right"},[a("div",{attrs:{calss:"card-line"}},[a("div",{staticClass:"field-text"},[e._v("阈值+/-")]),a("veui-select",{staticClass:"filed-select",attrs:{options:e.store.thresholdType},model:{value:e.store.formData.adThreshold,callback:function(t){e.$set(e.store.formData,"adThreshold",t)},expression:"store.formData.adThreshold"}}),a("span",{staticClass:"unit"},[e._v("%")])],1)])]),a("veui-field",{staticClass:"other-card",attrs:{label:"竞价代码位监控方式:",name:"adMonitorType",field:"adMonitorType"}},[a("div",{staticClass:"card-right multi-ratio"},[a("veui-radio",{attrs:{name:"adpos-type",value:0},model:{value:e.store.formData.adMonitorType,callback:function(t){e.$set(e.store.formData,"adMonitorType",t)},expression:"store.formData.adMonitorType"}},[e._v("全部代码位监控")]),a("div",{staticClass:"card-line"},[a("veui-radio",{attrs:{name:"adpos-type",value:1},model:{value:e.store.formData.adMonitorType,callback:function(t){e.$set(e.store.formData,"adMonitorType",t)},expression:"store.formData.adMonitorType"}},[e._v("按量级监控\n                        ")]),1==e.store.formData.adMonitorType?a("div",{staticClass:"center-views"},[a("div",{staticClass:"disp-title"},[e._v("展现量 >= ")]),a("veui-field",{staticClass:"admonitor-views",attrs:{name:"adMonitorViews",field:"adMonitorViews",rules:e.requiredRule}},[a("veui-input",{staticClass:"disp-views",on:{change:function(t){e.billionFormat(e.store.formData.adMonitorViews)}},model:{value:e.store.formData.adMonitorViews,callback:function(t){e.$set(e.store.formData,"adMonitorViews",t)},expression:"store.formData.adMonitorViews"}})],1)],1):e._e()],1),a("veui-radio",{staticClass:"last-radio",attrs:{name:"adpos-type",value:2},model:{value:e.store.formData.adMonitorType,callback:function(t){e.$set(e.store.formData,"adMonitorType",t)},expression:"store.formData.adMonitorType"}},[e._v("按代码位监控")]),2==e.store.formData.adMonitorType?a("div",[a("veui-searchbox",{attrs:{placeholder:"请输入代码位名称",filed:"search"},on:{search:e.getAdposList},model:{value:e.store.adposListFilter.keyword,callback:function(t){e.$set(e.store.adposListFilter,"keyword",t)},expression:"store.adposListFilter.keyword"}}),a("veui-field",{staticClass:"transfer-views",attrs:{name:"selectedAdpsList",field:"selectedAdpsList"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.store.selectedAdpsList,expression:"store.selectedAdpsList"}],attrs:{type:"hidden"},domProps:{value:e.store.selectedAdpsList},on:{input:function(t){t.target.composing||e.$set(e.store,"selectedAdpsList",t.target.value)}}}),a("div",{staticClass:"self-transfer"},[a("div",{staticClass:"self-transfer-table left-table"},[a("div",{staticClass:"self-transfer-header"},[a("span",{staticClass:"transfer-title"},[e._v("代码位列表"),a("span",{staticClass:"number"},[e._v(e._s(e.store.adposListConfig.totalCount))])]),a("span",{staticClass:"op",on:{click:function(t){e.selectAll()}}},[e._v("全部添加")])]),a("div",{staticClass:"table-list left-table-list"},[a("table",[a("thead",[a("tr",[a("th",[e._v("代码位名称")]),a("th",[e._v("代码位ID")])])]),a("tbody",e._l(e.store.adposList,function(t){return a("tr",{key:t.tuStr,class:{disabled:e.getState(t.tuStr)},on:{click:function(a){e.selectItem(t)}}},[a("td",[e._v(" "+e._s(t.name||"--")+" ")]),a("td",[e._v(" "+e._s(t.tu)+" ")])])}))])]),a("div",{staticClass:"transfer-page"},[a("veui-pagination",{attrs:{page:e.store.adposListFilter.pageNo,"page-size":e.store.adposListFilter.pageSize,total:e.store.adposListConfig.totalCount,to:e.store.adposListConfig.pageTo}})],1)]),a("div",{staticClass:"self-transfer-table right-table"},[a("div",{staticClass:"self-transfer-header"},[a("span",{staticClass:"transfer-title"},[e._v("已选代码位"),a("span",{staticClass:"number"},[e._v(e._s(e.store.selectedAdpsList.length))])]),a("span",{staticClass:"op",on:{click:function(t){e.store.selectedAdpsList=[]}}},[e._v("全部删除")])]),a("div",{staticClass:"table-list right-table-list"},[a("table",[a("tbody",e._l(e.store.selectedAdpsList,function(t){return a("tr",{key:t.tuStr,on:{click:function(a){e.deleletItem(t.tuStr)}}},[a("td",[e._v(" "+e._s(t.name||"--")+" ")]),a("td",[e._v(" ID: "+e._s(t.tu)+" ")])])}))])])])])])],1):e._e()],1)])],1)])]),a("template",{slot:"operation"},[a("veui-button",{attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,null,null));pt.options.__file="EditWarningReportView.vue";var ht=pt.exports,mt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"DomainShieldStatusType",{0:{alias:"INVALID",text:"未生效"},1:{alias:"VALID",text:"生效"},2:{alias:"ILLEGAL",text:"非法"},3:{alias:"PARTIAL",text:"请检查检索域名"}}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"REASON_MAP",{"Cname Not Configed":"请设置反屏蔽域名CNAME指向","Zone Violation":"反屏蔽域名存在违规内容，无法使用","Zone No ICP":"反屏蔽域名未备案，无法使用","Zone Not Active":"请联系客服解决","Zone TXT Record Illegal":"请在百度云加速获取txt记录，完成反屏蔽域名激活","Zone DELETED":"域名在百度云加速被删除，请在union重新添加","No Such Zone":"请联系客服解决"}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getDomainMgList,this.deleteRequester=this.api.deleteContentProtect}},{key:"adaptData",value:function(e){return{result:e}}}]),t}(J.a),vt=(a("d0006"),Object(u.a)(G.a,mt,{name:"DomainMgListView",components:{"veui-icon":y.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-button":S.a,"veui-searchbox":Pe.a,"veui-table-column":de.a,"veui-tooltip":I.a,"veui-overlay":fe.a},directives:{autosubmit:Ee.a},data:function(){return{}},methods:{format:function(e){return w()(e).format("YYYY-MM-DD")},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},createNew:function(){this.redirectTo("/union/domainMg/create")},eidtDetail:function(e){this.redirectTo("/union/domainMg/edit?id=".concat(e))}}})),bt=(a("7ebc"),Object(p.a)(vt,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"domain-mng-list-view"},[[a("h3",{staticClass:"selfdefined-title"},[e._v("反屏蔽设置")]),a("div",{staticClass:"help-center"},[a("a",{attrs:{target:"_blank",href:"http://yingxiao.baidu.com/new/home/help/details/id/15198?ly=search&castk=a1fefaj71b25baa1cd970"}},[e._v("帮助中心")])])],a("template",{slot:"filterContent"},[a("veui-fieldset",[a("veui-button",{staticClass:"create-new",attrs:{ui:"primary",disabled:0<e.store.tableData.length},on:{click:e.createNew}},[e._v("新建域名")])],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"name",title:"域名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v("\n                    脚本： "+e._s(t.item.jsUrl||"-")),a("br"),e._v("\n                    检索： "+e._s(t.item.posUrl||"-")+"\n                ")])]}}])}),a("veui-table-column",{attrs:{field:"vulgar",title:"映射域名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v("\n                    "+e._s(t.item.yunJsUrl||"-")),a("br"),e._v("\n                    "+e._s(t.item.yunPosUrl||"-")+"\n                ")])]}}])}),a("veui-table-column",{attrs:{field:"keywords",title:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-multi-line"},[1==t.item.status?a("div",[e._v("生效")]):a("div",[e._v("未生效\n                        "),t.item.reason?a("div",[a("veui-icon",{ref:"status"+t.item.id,attrs:{name:"question-circle-o"}}),a("veui-tooltip",{attrs:{position:"bottom-start",target:"status"+t.item.id,trigger:"hover","overlay-class":"hover-overlay"}},[e._v("\n                                    "+e._s(e.store.REASON_MAP[t.item.reason])+"\n                            ")])],1):e._e()])])]}}])}),a("veui-table-column",{attrs:{field:"modifytime",title:"修改时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v("\n                    "+e._s(e.format(t.item.modifytime))+"\n                ")])]}}])}),a("veui-table-column",{attrs:{field:"operation",title:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"op-column"},[a("veui-button",{attrs:{ui:"link"},on:{click:function(a){e.eidtDetail(t.item.id)}}},[e._v("修改")])],1)]}}])})],1),a("template",{slot:"pager"},[a("div")])],2)},[],!1,null,null,null));bt.options.__file="DomainMgListView.vue";var yt=bt.exports,gt=(a("3b2b"),function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","新建反屏蔽域名"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{id:"",jsUrl:"",posUrl:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formSetting",{validators:[{fields:["jsUrl"],validate:function(e){return e?a.getDomainLevel(e)<2?{jsUrl:"脚本域名需至少为二级域名！"}:void 0:{jsUrl:"请填写脚本域名！"}}},{fields:["posUrl"],validate:function(e){var t=a.formData.jsUrl;return e?e===t?{posUrl:"检索域名和代码域名不能相同！"}:a.getDomainLevel(e)<2?{posUrl:"检索域名需至少为二级域名！"}:a.getMainDomain(e)!==a.getMainDomain(t)?{posUrl:"检索域名和代码域名需要拥有相同一级域名！"}:void 0:{posUrl:"请填写检索域名！"}}}]}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.title="create"===this.pageType?"新建反屏蔽域名":"修改反屏蔽域名",this.updateRequester=this.api.updateDomainMg,this.createRequester=this.api.createDomainMg,this.detailRequester=this.api.getDomainMgList}},{key:"initFormData",value:function(e){this.detailRequester&&this.id&&this.requestDetail({},{initialData:e})}},{key:"getMainDomain",value:function(e){return/[^.]+\.(.+)$/g.test(e)?RegExp.$1:""}},{key:"getDomainLevel",value:function(e){return e.split("").filter(function(e){return"."===e}).length}},{key:"adaptData",value:function(e){return e[0]}},{key:"prepareData",value:function(e){var t={jsUrl:e.jsUrl,posUrl:e.posUrl};return"edit"===this.pageType&&(t.id=this.id),t}},{key:"submit",value:function(){var e=this.formData;if("create"===this.pageType&&this.createRequester)return this.requestCreate(e);if("edit"===this.pageType&&this.updateRequester)return this.requestUpdate(e);throw new Error("unknown form page type: ".concat(this.pageType,"!"))}}]),t}(ve.a)),_t=Object(u.a)(ye.a,gt,{name:"EditDomainMgView",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-tab":F.a,"veui-transfer":Se.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-button":S.a},props:["editProp"],data:function(){return{isDetail:!1,isEdit:!1,appNamesDatasource:[],requiredRule:[{name:"required",value:!0}]}},methods:{goBack:function(){this.global.redirect({url:{path:"/union/domainMg"},type:"push"})}},mounted:function(){xe.a.hideHeaderDom(),"detail"===this.store.pageType?this.isDetail=!0:"edit"===this.store.pageType&&(this.isEdit=!0)},beforeDestroy:function(){xe.a.addHeaderDom()}}),Ot=(a("4b6b"),Object(p.a)(_t,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common edit-domain-mng-view",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card"},[a("veui-field",{attrs:{label:"代码域名：",name:"jsUrl",field:"jsUrl",rules:e.requiredRule}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-input",{staticClass:"input300",attrs:{placeholder:"为它起个名字吧",clearable:!0,maxLength:"20",disabled:e.isDetail},model:{value:e.store.formData.jsUrl,callback:function(t){e.$set(e.store.formData,"jsUrl",t)},expression:"store.formData.jsUrl"}}),a("span",{staticClass:"field-add-text"},[e._v("此域名体现在JS代码中，完成后请使用特殊JS代码")])],1)])]),a("veui-field",{attrs:{label:"检索域名：",name:"posUrl",field:"posUrl",rules:e.requiredRule}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-input",{staticClass:"input300",attrs:{placeholder:"为它起个名字吧",clearable:!0,maxLength:"20",disabled:e.isDetail},model:{value:e.store.formData.posUrl,callback:function(t){e.$set(e.store.formData,"posUrl",t)},expression:"store.formData.posUrl"}}),a("span",{staticClass:"field-add-text"},[e._v("此域名为广告检索域名，完成后无需更多设置")])],1)])]),a("div",{staticClass:"edit-form-subfield desc"},[a("ul",{staticClass:"desc-list"},[a("li",[e._v("1. 反屏蔽需要两个未使用过且主域相同的二级域名（未使用过指未曾使用该域名设置反屏蔽）")]),a("li",[e._v("2. 反屏蔽域名的主域不必和站点一致")]),a("li",[e._v("3. 保证反屏蔽域名在使用期间有ICP 备案，且无色情、暴力等违规内容")]),a("li",[e._v("4. 反屏蔽域名中不能包含bank、test、pay、union、ad等敏感词")])])])],1)])]),e.isDetail?e._e():a("template",{slot:"operation"},[a("veui-button",{attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,null,null));Ot.options.__file="EditDomainMgView.vue";var Ct=Ot.exports,Dt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","网站渠道"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cmpDatas",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"selectedCmp","请选择计费名"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{cid:""}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getChannelMgList,this.deleteRequester=this.api.deleteChannelMg,this.getCnListRequester=this.api.getCnListRequester}},{key:"initListData",value:function(e){var t=this;0<this.cmpDatas.length||this.getCnListRequester().then(function(a){t.cmpDatas=a.map(function(e){return{label:e.cname,value:e.cid}}),t.filter.cid=t.cmpDatas[0]?t.cmpDatas[0].value:"",t.selectedCmp=t.cmpDatas[0]?"计费名："+t.cmpDatas[0].label:"请选择计费名",t.requestList({cid:t.filter.cid},{initialData:e})})}},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.currentChannelVo.urlChannelList,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),wt=a("dd9a"),jt=a("3c9a"),kt=Object(u.a)(G.a,Dt,{name:"DomainMgListView",components:{"veui-icon":y.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-button":S.a,"veui-searchbox":Pe.a,"veui-table-column":de.a,"veui-tooltip":I.a,"veui-overlay":fe.a,"veui-dropdown":wt.a,"veui-option":jt.a},directives:{autosubmit:Ee.a},data:function(){return{}},methods:{gotoReport:function(e){var t=this.global.router.resolve({path:"/report/channel",query:{cId:this.store.filter.cid,cproChannelId:e,dimensions:"cproChannelName",filterFields:"rtbTypeId,sellTypeId,getCproChannel,cId,cproChannelId",filterValues:"0|1|1|".concat(this.store.filter.cid,"|").concat(e)}});window.open(t.href,"_blank")},choseCmp:function(e){this.store.filter.cid=e.value,this.store.selectedCmp="计费名："+e.label,this.$forceUpdate(),this.store.submitSearch()},setItemStatus:function(e){var t=this;this.store.deleteRequester({chid:e.chid,cid:e.cid}).then(function(e){t.store.submitSearch()})},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},createNew:function(){this.redirectTo("/union/channelMg/create")},checkDetail:function(e){this.redirectTo("/union/channelMg/detail?id=".concat(e))},eidtDetail:function(e){this.redirectTo("/union/channelMg/edit?id=".concat(e))}}}),St=(a("20ef"),Object(p.a)(kt,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",[a("template",{slot:"filterContent"},[a("veui-fieldset",[a("veui-button",{staticClass:"create-new",attrs:{ui:"primary"},on:{click:e.createNew}},[e._v("新建渠道")]),a("veui-dropdown",{staticClass:"input300",attrs:{label:e.store.selectedCmp}},e._l(e.store.cmpDatas,function(t){return a("veui-option",{key:t.value,attrs:{value:t.value,label:t.label},on:{click:function(a){e.choseCmp(t)}}})}))],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"name",title:"渠道id"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v("\n                    "+e._s(t.item.chid)+"\n                ")])]}}])}),a("veui-table-column",{attrs:{field:"vulgar",title:"渠道名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v("\n                    "+e._s(t.item.chName)+"\n                ")])]}}])}),a("veui-table-column",{attrs:{field:"operation",title:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"op-column"},[a("veui-button",{ref:"relative"+t.item.id,attrs:{ui:"link"},on:{click:function(e){t.item.visible=!t.item.visible}}},[e._v("删除")]),a("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.gotoReport(t.item.chid)}}},[e._v("\n                        查看报告\n                    ")]),a("span",[a("veui-tooltip",{staticClass:"del-tooltip",attrs:{position:"top",target:"relative"+t.item.id,trigger:"click","overlay-class":"del-overlay",open:t.item.openDelOverlay},on:{"update:open":function(a){e.$set(t.item,"openDelOverlay",a)}}},[a("veui-icon",{staticClass:"message-icon",attrs:{name:"exclamation-circle-o"}}),e._v("\n                                您确定要删除该渠道吗？\n                                "),a("div",{staticClass:"btn-group"},[a("veui-button",{attrs:{ui:"primary"},on:{click:function(a){e.setItemStatus(t.item)}}},[e._v("确定")]),a("veui-button",{staticClass:"cancel",on:{click:function(e){t.item.openDelOverlay=!1}}},[e._v("取消")])],1)],1)],1)],1)]}}])})],1),a("template",{slot:"pager"},[a("div")])],2)},[],!1,null,null,null));St.options.__file="ChannelMgListView.vue";var xt=St.exports,Rt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","新建网站渠道"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cnListDatasource",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cproJoinedUrlList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{chName:"",cid:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formSetting",{validators:[{fields:["chName"],validate:function(e){return!e||!!a.cproJoinedUrlList.some(function(t){return t&&-1<e.indexOf(t)})||{chName:"url的主域名必须是该计费名已经配置的cpro参加域名"}}}]}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getChannelMgList,this.createRequester=this.api.createChannelMg,this.getCnListRequester=this.api.getCnListRequester,this.getCnListRequester().then(function(t){t.map(function(t){return e.cnListDatasource.push({label:t.cname,value:t.cid}),t}),e.formData.cid=e.cnListDatasource[0].value,e.getCproJoinedUrlList(e.formData.cid)})}},{key:"getCproJoinedUrlList",value:function(e){var t=this;this.listRequester({cid:e}).then(function(e){t.cproJoinedUrlList=e.cproJoinedUrlList})}},{key:"initFormData",value:function(e){this.detailRequester&&this.id&&this.requestDetail({},{initialData:e})}},{key:"submit",value:function(){var e=this.formData;if("create"===this.pageType&&this.createRequester)return this.requestCreate(e);if("edit"===this.pageType&&this.updateRequester)return this.requestUpdate(e);throw new Error("unknown form page type: ".concat(this.pageType,"!"))}}]),t}(ve.a),Tt=Object(u.a)(ye.a,Rt,{name:"EditChannelMgView",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-tab":F.a,"veui-transfer":Se.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-button":S.a,"veui-select":N.a},props:["editProp"],data:function(){return{requiredRule:[{name:"required",value:!0}],requiredRule2:[{name:"required",value:!0},{name:"maxLength",value:32}]}},methods:{goBack:function(){this.global.redirect({url:{path:"/union/channelMg"},type:"push"})}},mounted:function(){xe.a.hideHeaderDom()},beforeDestroy:function(){xe.a.addHeaderDom()}}),It=(a("8e77"),Object(p.a)(Tt,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card"},[a("veui-field",{attrs:{label:"计费名：",name:"cid",field:"cid",rules:e.requiredRule}},[a("div",{staticClass:"card-right"},[a("veui-select",{staticClass:"input300",attrs:{options:e.store.cnListDatasource},on:{change:function(t){e.store.getCproJoinedUrlList(e.store.formData.cid)}},model:{value:e.store.formData.cid,callback:function(t){e.$set(e.store.formData,"cid",t)},expression:"store.formData.cid"}})],1)]),a("veui-field",{attrs:{label:"渠道名称：",name:"chName",field:"chName",rules:e.requiredRule2}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"input300",attrs:{placeholder:"填写计费名对应主域的url",clearable:!0},model:{value:e.store.formData.chName,callback:function(t){e.$set(e.store.formData,"chName",t)},expression:"store.formData.chName"}})],1)])],1)])]),a("template",{slot:"operation"},[a("veui-button",{attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,null,null));It.options.__file="EditChannelMgView.vue";var Ft=It.exports,Nt=(a("c5f6"),a("13ea")),At=a.n(Nt),Mt=a("9b02"),Yt=a.n(Mt),Lt=a("c641"),Et=a.n(Lt),Pt=(a("a481"),a("bc3a")),Vt=a.n(Pt),Bt=a("4328"),$t=a.n(Bt),zt=a("c68d"),qt=a("3b1b"),Ut=new Date((new Date).setHours(0,0,0,0)),Wt=new Date(Ut-864e5),Gt=new Date(Ut-0-1e3),Ht=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","内容联盟报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[Wt,Gt]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"appList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allWebsite",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"websiteIdFilter",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"openFilters",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"showAppColumn",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"oneDayTime",864e5),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterOptions",[{label:"媒体",name:"websiteId",selected:[],datasource:a.allWebsite}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{order:"desc",orderBy:"time",timeGranularity:"day",websiteId:"",metrics:"income,view,cpuVisitPV,ecpm,cpuDetailPV,click,clickRatio,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"1|1",begin:a.range?w()(a.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:a.range?w()(a.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD"),dimensions:""})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"内容联盟报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"内容联盟报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"axioss",Vt.a.create({responseType:"arraybuffer",paramsSerializer:function(e){return $t.a.stringify(e,{encode:!0})}})),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"formatDate",value:function(e){return e?w()(e).format("YYYYMMDD"):w()().format("YYYYMMDD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getReportAllQuery,this.getGeneralDataRequester=this.api.getReportSum,this.getChatDataRequester=this.api.getReportSum,this.save=this.api.saveReport,this.getMediaSiteList=this.api.getContentWebsites,this.initPramsFromQuery(),this.getWebSiteList()}},{key:"initListData",value:function(){}},{key:"initPramsFromQuery",value:function(){var e=this.getRouteQuery(),t=this.filter.begin,a=this.filter.end;e.begin&&(this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:Gt],t=e.begin,a=e.end||w()(this.range[1]).format("YYYYMMDD")),e.end&&!e.begin&&(this.range=[Wt,w()(e.end)._d],t=w()(this.range[0]).format("YYYYMMDD"),a=e.end);var i=[],s=w()(a).valueOf()-w()(t).valueOf();this.dateRange=s/864e5,i[1]=w()(t).valueOf()-864e5,i[0]=w()(i[1]).valueOf()-s,i[0]=w()(i[0]).format("YYYYMMDD"),i[1]=w()(i[1]).format("YYYYMMDD"),e.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(i[0])._d,w()(i[1])._d]),this.filter=Object(v.a)({},this.filter,{filterFields:e.filterFields||"rtbTypeId,sellTypeId",filterValues:e.filterValues||"1|1",websiteId:e.websiteId,dimensions:e.websiteId?"webDomain":null}),e.websiteId&&(this.websiteIdFilter=e.websiteId.split(",").map(function(e){return 1*e})),this.refreshTableByFilter(e.websiteId)}},{key:"getWebSiteList",value:function(){var e=this,t=this.getRouteQuery(),a=t.filterValues&&t.filterValues.split("|")[2]?t.filterValues.split("|")[2].split(","):"";this.getMediaSiteList().then(function(t){if(t.results){var i=!0,s=!1,l=void 0;try{for(var r,o=t.results[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var n=r.value,c={label:n.domain,value:n.id};-1<a.indexOf(n.id+"")&&(c.selected=!0),e.allWebsite.push(c)}}catch(t){s=!0,l=t}finally{try{i||null==o.return||o.return()}finally{if(s)throw l}}}e.fillFilterResult()}).catch(function(e){})}},{key:"renderCompareDate",value:function(e,t){var a=[],i=w()(t).valueOf()-w()(e).valueOf();this.dateRange=i/this.oneDayTime,a[1]=this.formatDate(w()(e).valueOf()-this.oneDayTime),a[0]=this.formatDate(w()(a[1]).valueOf()-i),this.canCompareRange=!0,this.compareRange=[w()(a[0])._d,w()(a[1])._d]}},{key:"refreshTableByFilter",value:function(e){var t={begin:w()(this.range[0]).format("YYYYMMDD"),end:w()(this.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"cpuVisitPV,cpuDetailPV,income,view,click,ecpm,clickRatio",filterFields:"rtbTypeId,sellTypeId",filterValues:"1|1",pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,websiteId:null,dimensions:null};this.showAppColumn=!1,e&&0<e.length&&(t.filterFields="rtbTypeId,sellTypeId,websiteId",t.filterValues="1|1|"+e,t.dimensions="webDomain",t.websiteId=e,this.showAppColumn=!0),this.filter=t,this.submitSearch()}},{key:"fillFilterResult",value:function(){var e=this;this.filterOptions=this.filterOptions.map(function(t){return"websiteId"===t.name&&(t.selected=t.datasource.filter(function(t){return-1<e.websiteIdFilter.indexOf(t.value)})),t})}},{key:"adaptData",value:function(e){return{result:e.results,totalCount:e.totalCount,pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,order:this.filter.order,orderBy:this.filter.orderBy}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"submit",value:function(e){var t=st()(this.filter);delete t.contrastBegin,delete t.contrastEnd,delete t.websiteId,delete t.orders,delete t.orderBys,delete t.pageNo,delete t.pageSize,t.dimensions||delete t.dimensions,t.emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"cpuunion"});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a),Qt=a("68f6"),Jt=a("7921"),Kt=a("0090"),Zt=a("90af"),Xt=(a("8cdd"),a("5954"),a("7fa9"),a("e4ed"),a("2223")),ea=a("3a37");Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var ta,aa=Object(u.a)(G.a,Ht,{name:"ContentReportView",components:{"v-chart":M.a,"veui-button":S.a,"veui-icon":y.a,"veui-table":ut.a,"veui-table-column":de.a,"veui-select":N.a,"veui-dropdown":wt.a,"veui-option":jt.a,"veui-checkbox-group":Qt.a,"veui-checkbox":he.a,"veui-radio":je.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-date-picker":Jt.a,"veui-field":ce.a,"veui-textarea":$e.a,"veui-form":Kt.a,"select-self":ea.a,"veui-searchbox":Pe.a,"veui-tooltip":I.a},data:function(){var e=this;return{websiteId:[],wesiteKey:"",websiteFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.wesiteKey.toLowerCase())},subscribeVisible:!1,downloadVisible:!1,cpuVisitPV:"--",cpuDetailPV:"--",income:"--",click:"--",ecpm:"--",view:"--",cpc:"--",cpuVisitPVRatio:null,cpuDetailPVRatio:null,incomeRatio:null,clickRatio:null,ecpmRatio:null,viewRatio:null,cpcRatio:null,chartData:{},readyRender:!1,accountQualityList:[],status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}],downloadData:{type:"csv",name:"内容联盟报告"}}},computed:{options:function(){return this.chartData}},beforeDestroy:function(){delete this.global.reportfilterSelectItems},mounted:function(){var e=this.global.reportfilterSelectItems,t={};if(e){var a=e.filterValues[2]||[],i=e.filterValues[2]?"|"+e.filterValues[2].join(","):"";t={filterFields:e.filterFields.join(","),filterValues:"1|1"+i,websiteId:a.join(",")},this.store.websiteIdFilter=a.map(function(e){return Number(e)}),this.store.filter=Object(v.a)({},this.store.filter,t,{dimensions:""}),this.store.refreshTableByFilter(a.join(","))}this.getGeneralData(t),this.getChartData(t)},methods:{searchAfterFilter:function(){this.store.fillFilterResult(),this.requestAfterFilter()},delSingleFilter:function(e){this.delFilter(e),this.requestAfterFilter()},delFilter:function(e){var t=this;this.store.filterOptions[e].selected=[],this.store.filterOptions[e].datasource=this.store.filterOptions[e].datasource.map(function(a){return"websiteId"===t.store.filterOptions[e].name&&(a.selected=!1,t.store.websiteIdFilter=[],t.store.filter.websiteId=""),a})},delAllFilter:function(){var e=this;this.store.websiteIdFilter=[],this.store.filter.websiteId="",this.store.filterOptions=this.store.filterOptions.map(function(t,a){return e.delFilter(a),t}),this.requestAfterFilter()},formatLocal:function(e){return xe.a.billionFormat(e)},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]},legendChange:function(e){var t=Object(j.b)(e,this.chartData,this.store.lastClickLeName);this.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},getChartData:function(e){var t=this;this.store.lastClickLeName="";var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"income,view,cpuVisitPV,ecpm,cpuDetailPV,click,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"1|1"};this.store.getChatDataRequester(Object(v.a)({},a,e)).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","cpuVisitPV","ecpm","cpuDetailPV","click","cpc"]),t.readyRender=!0})},getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"cpuVisitPV,cpuDetailPV,income,view,click,ecpm,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"1|1"};this.store.getGeneralDataRequester(Object(v.a)({},a,e)).then(function(e){var a=e.results[0];t.cpuVisitPV=a.cpuVisitPV||0,t.cpuDetailPV=a.cpuDetailPV||0,t.view=a.view||0,t.income=a.income||0,t.click=a.click||0,t.ecpm=a.ecpm||0,t.cpc=a.cpc||0;var i=e.diffResults[0];t.cpuVisitPVRatio=t.getFixedNumber(i.cpuVisitPV),t.cpuDetailPVRatio=t.getFixedNumber(i.cpuDetailPV),t.viewRatio=t.getFixedNumber(i.view),t.incomeRatio=t.getFixedNumber(i.income),t.clickRatio=t.getFixedNumber(i.click),t.ecpmRatio=t.getFixedNumber(i.ecpm),t.cpcRatio=t.getFixedNumber(i.ecpm)})},getFixedNumber:function(e){return Number(e||0).toFixed(2)},refreshChartByFilter:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"cpuVisitPV,cpuDetailPV,income,view,click,ecpm,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"1|1"};e&&(a.filterFields="rtbTypeId,sellTypeId,websiteId",a.filterValues="1|1|"+e),this.store.lastClickLeName="",this.store.getChatDataRequester(a).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","cpuVisitPV","ecpm","cpuDetailPV","click","cpc"])})},refreshGeneralDataByFilter:function(e){var t={};e&&(t.filterFields="rtbTypeId,sellTypeId,websiteId",t.filterValues="1|1|"+e),this.getGeneralData(t)},requestAfterFilter:function(){this.store.filter.websiteId=0<this.store.websiteIdFilter.length?this.store.websiteIdFilter.join(","):"";var e=0<this.store.filter.websiteId.length?this.store.filter.websiteId:null;this.refreshGeneralDataByFilter(e),this.refreshChartByFilter(e),this.store.refreshTableByFilter(e)},getRatio:function(e){return/^[0-9]+.?[0-9]*$/.test(e)?e+"%":e||"--"},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return!1},choseDate:function(e){var t=this;if(e){var a=e[1].valueOf()-e[0].valueOf();a/=this.store.oneDayTime,this.store.dateRange=0===a?1:a;var i={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),metrics:"income,view,cpuVisitPV,ecpm,cpuDetailPV,click,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"1|1"},s=Object(v.a)({},i,{contrastBegin:w()(this.store.range[0].valueOf()-(this.store.dateRange+1)*this.store.oneDayTime).format("YYYYMMDD"),contrastEnd:w()(this.store.range[1].valueOf()-(this.store.dateRange+1)*this.store.oneDayTime).format("YYYYMMDD"),timeGranularity:"sum"});this.getGeneralData(s);var l=Object(v.a)({},i,{timeGranularity:"day",metrics:i.metrics+",clickRatio"});this.store.lastClickLeName="",this.store.getChatDataRequester(l).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","cpuVisitPV","ecpm","cpuDetailPV","click","cpc"])}),this.store.filter=Object(v.a)({},i,{timeGranularity:"day",orderBys:"time",orders:"desc",order:"desc",orderBy:"time",metrics:i.metrics+",clickRatio",pageSize:this.store.filter.pageSize,pageNo:this.store.filter.pageNo}),this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)],this.store.submitSearch()}},compareDate:function(e){var t=[];if(e){t[0]=e,t[1]=new Date(e.valueOf()+24*this.store.dateRange*3600*1e3),this.store.canCompareRange=!0,this.store.compareRange=t;var a={contrastBegin:w()(t[0]).format("YYYYMMDD"),contrastEnd:w()(t[1]).format("YYYYMMDD")};this.getGeneralData(a)}},clickCompare:function(){this.$refs.compare.expanded?(this.store.canCompareRange=!1,this.store.compareRange=this.store.compareRange[0]):this.store.canCompareRange=!0},iscompare:function(e){e||(this.store.renderCompareDate(this.store.range[0],this.store.range[1]),this.getGeneralData({}))},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"内容联盟报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(ta=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return ta.apply(this,arguments)}),handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e)},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.store.fail(e),this.$emit("submitfail",e)},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"内容联盟报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},format:function(e){return w()(e).format("YYYY-MM-DD")}}}),ia=(a("037a"),Object(p.a)(aa,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"content-report"},[a("template",{slot:"title"},[a("span",[e._v("内容联盟报告")])]),a("template",{slot:"filterContent"},[a("veui-field",[a("select-self",{attrs:{placeholder:"媒体",options:e.store.allWebsite,filter:e.websiteFilter,multi:!0},model:{value:e.store.websiteIdFilter,callback:function(t){e.$set(e.store,"websiteIdFilter",t)},expression:"store.websiteIdFilter"}},[e.store.allWebsite&&8<e.store.allWebsite.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-searchbox",{staticClass:"select-filter",attrs:{placeholder:"搜索",ui:"tiny"},model:{value:e.wesiteKey,callback:function(t){e.wesiteKey=t},expression:"wesiteKey"}})],1):e._e()])],1),a("veui-field",{staticClass:"veui-date-picker"},[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比")])],1),"CONFIRMED"===e.store.status?a("veui-field",[a("div",{on:{click:e.clickCompare}},[a("veui-date-picker",{ref:"compare",attrs:{range:e.store.canCompareRange,clearable:"","disabled-date":e.disabledCompareDate},on:{select:e.compareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}})],1)]):e._e(),a("veui-button",{staticClass:"submit-btn",attrs:{ui:"primary"},on:{click:e.searchAfterFilter}},[e._v("查询")]),a("div",{staticClass:"btn-wrapper"},[a("veui-button",{staticClass:"subscribe-btn",attrs:{ui:"alt"},on:{click:e.subClick}},[a("veui-icon",{staticClass:"btn-icon",attrs:{name:"subscribe"}}),e._v("订阅")],1),a("veui-button",{staticClass:"downloadBtn",attrs:{ui:"alt"},on:{click:e.downClick}},[a("veui-icon",{staticClass:"btn-icon",attrs:{name:"download"}}),e._v("下载")],1)],1),e.store.filterOptions.some(function(e){return 0<e.selected.length})?a("div",{staticClass:"dropdown-list-filter"},[a("div",{staticClass:"filter-result"},[e._l(e.store.filterOptions,function(t,i){return a("veui-button",{key:i,staticClass:"selected-filter"},[a("span",{staticClass:"selected-title"},[e._v(e._s(t.label+":"))]),a("span",{staticClass:"selected-content"},[e._v(e._s(t.selected.map(function(e){return e.label}).join("，")))]),a("span",{on:{click:function(t){e.delSingleFilter(i)}}},[a("veui-icon",{staticClass:"del-filter",attrs:{name:"cross"}})],1)])}),a("span",{staticClass:"clear-all",on:{click:e.delAllFilter}},[e._v("清空全部条件")])],2)]):e._e()],1),a("template",{slot:"batchContent"},[a("table",{staticClass:"general-table"},[a("tr",[a("th",[e._v("总到访PV")]),a("th",[e._v("总详情页PV")]),a("th",[e._v("总展现量")]),a("th",[e._v("预计总收入（元）")]),a("th",[e._v("总点击量")]),a("th",[e._v("eCPM（元）")]),a("th",[e._v("CPC（元）")])]),a("tr",[a("td",[e._v(e._s(e.formatLocal(this.cpuVisitPV)))]),a("td",[e._v(e._s(e.formatLocal(this.cpuDetailPV)))]),a("td",[e._v(e._s(e.formatLocal(this.view)))]),a("td",[e._v(e._s(e.formatLocal(this.income)))]),a("td",[e._v(e._s(e.formatLocal(this.click)))]),a("td",[e._v(e._s(e.formatLocal(this.ecpm)))]),a("td",[e._v(e._s(e.formatLocal(this.cpc)))])]),a("tr",[0<this.cpuVisitPVRatio?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.cpuVisitPVRatio)+"%\n                    ")])],1):0==this.cpuVisitPVRatio?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.cpuVisitPVRatio).toFixed(2))+"%\n                    ")])],1),0<this.cpuDetailPVRatio?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.cpuDetailPVRatio)+"%\n                    ")])],1):0==this.cpuDetailPVRatio?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.cpuDetailPVRatio).toFixed(2))+"%\n                    ")])],1),0<this.viewRatio?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.viewRatio)+"%\n                    ")])],1):0==this.viewRatio?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.viewRatio).toFixed(2))+"%\n                    ")])],1),0<this.incomeRatio?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.incomeRatio)+"%\n                    ")])],1):0==this.incomeRatio?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.incomeRatio).toFixed(2))+"%\n                    ")])],1),0<this.clickRatio?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.clickRatio)+"%\n                    ")])],1):0==this.clickRatio?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.clickRatio).toFixed(2))+"%\n                    ")])],1),0<this.ecpmRatio?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.ecpmRatio)+"%\n                    ")])],1):0==this.ecpmRatio?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.ecpmRatio).toFixed(2))+"%\n                    ")])],1),0<this.cpcRatio?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.cpcRatio)+"%\n                    ")])],1):0==this.cpcRatio?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.cpcRatio).toFixed(2))+"%\n                    ")])],1)])]),a("div",{staticClass:"v-chart-assession"},[e.readyRender?a("v-chart",{attrs:{options:e.options},on:{legendselectchanged:e.legendChange}}):e._e()],1)]),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"time",title:"日期",sortable:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v(e._s(e.formatTime(t.item.time)))])]}}])}),e.store.showAppColumn?a("veui-table-column",{attrs:{field:"appname",title:"媒体",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.item.webDomain))]}}])}):e._e(),a("veui-table-column",{attrs:{field:"view",title:"广告展现量",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.view)))]}}])}),a("veui-table-column",{attrs:{field:"income",title:"预计收入",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.income)))]}}])}),a("veui-table-column",{attrs:{field:"cpuVisitPV",title:"到访PV",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.cpuVisitPV)))]}}])}),a("veui-table-column",{attrs:{field:"cpuDetailPV",title:"详情页PV",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.cpuDetailPV)))]}}])}),a("veui-table-column",{attrs:{field:"click",title:"点击量",sortable:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.click)))]}}])}),a("veui-table-column",{attrs:{field:"ecpm",title:"eCPM",sortable:"",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.ecpm)))]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",title:"点击率",sortable:"",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.getRatio(t.item.clickRatio)))]}}])}),a("veui-table-column",{attrs:{field:"cpc",title:"CPC",sortable:"",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.cpc)))]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"内容联盟报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.end)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s))])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"整体报告_"+this.format(this.store.filter.start)+"~"+this.format(this.store.filter.start)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s))])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));ia.options.__file="ContentReportView.vue";var sa=ia.exports,la=a("8a30"),ra=a.n(la),oa=a("2593"),na=a.n(oa),ca=new Date((new Date).setHours(0,0,0,0)),ua=new Date(ca-864e5),da=new Date(ca-0-1e3),fa=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","媒体报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[20,50,100]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[ua,da]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"commonMetrics","view,pageview,income,click,clickRatio,ecpm,cpc"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{pageSize:20,order:"desc",orderBy:"income",orders:"desc",orderBys:"income",websiteId:[],begin:a.formatDate(a.range[0]),end:a.formatDate(a.range[1]),timeGranularity:"day",metrics:a.commonMetrics,filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1",dimensions:"webDomain,websiteId"})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"网盟推广报告_媒体报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"网盟推广报告_媒体报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allApp",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"websiteName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"formatDate",value:function(e){return e=e||"",w()(e).format("YYYYMMDD")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getReportAllQuery,this.getMedia=this.api.getAllMedia,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport,this.initQueryParms(),this.getMediaList()}},{key:"initQueryParms",value:function(){var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin?this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:da]:e.end&&!e.begin&&(this.range=[ua,w()(e.end)._d]),e.contrastBegin&&(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d]);var a={filterFields:e.filterFields||this.filter.filterFields,filterValues:e.filterValues||this.filter.filterValues,dimensions:e.dimensions};this.filter=Object(v.a)({},this.filter,a)}},{key:"calContrastDate",value:function(){var e=[],t=w()(this.formatDate(this.range[1])).valueOf()-w()(this.range[0]).valueOf();this.dateRange=t/864e5,e[1]=w()(this.range[0]).valueOf()-864e5,e[0]=w()(e[1]).valueOf()-t,e[0]=this.formatDate(e[0]),e[1]=this.formatDate(e[1]),this.compareRange=[w()(e[0])._d,w()(e[1])._d]}},{key:"getMediaList",value:function(){var e=this;this.getMedia().then(function(t){t.results&&t.results.map(function(t){return e.allApp.push({label:t.domain,value:t.id+""}),t})}).catch(function(e){})}},{key:"initListData",value:function(){}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.websiteId)&&(t.websiteId=a.websiteId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.websiteId&&"all"!==this.filter.websiteId&&(this.filter.websiteId=this.filter.websiteId?this.filter.websiteId.split(","):[]),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["slotview","income","pageview","click","clickRatio","ecpm","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(){var e=st()(this.filter);(e=na()(e,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,e.name=this.subData.name,e.attachmentType=this.subData.type,e.typeInfo=JSON.stringify({reportType:"media-report",websiteId:this.filter.websiteId});var t=this.subData.email.replace(/\n/g,"");return t=t.split(";"),t=this.dealTextArea(t),e.emails=t.join(";"),this.save(e)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a),pa=a("71e5"),ha=a("bd39"),ma=(a("d08a"),a("e989")),va=a("4e3b"),ba=a("6458"),ya=a("c59e");Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var ga,_a=Object(u.a)(G.a,fa,{name:"UnionReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,ListFilters:pa.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"datepicker-self":ba.a,"select-self":ea.a,"small-card":ya.a},data:function(){var e=this;return{moment:w.a,dayCount:1,isCompared:!1,websiteIdKey:"",websiteIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.websiteIdKey.toLowerCase())},labelForTag:{websiteId:"媒体"},filterItem:{websiteId:this.store.allApp},noemail:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},compareRange:!1,rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},created:function(){},mounted:function(){var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i={},s=0;s<e.filterValues.length;s++)a+=e.filterValues[s].join(",")+"|",i[e.filterFields[s]]=e.filterValues[s];t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),metrics:e.metrics.join(",")},e.begin&&(this.store.range=[w()(e.begin)._d,w()(e.end)._d]);var l=e.typeInfo?st()(JSON.parse(e.typeInfo)):{};l.websiteId&&(this.store.filter.websiteId=l.websiteId);var r=Object(v.a)({},this.store.filter,t,i);this.store.filter=st()(r)}this.refreshTable(),this.getGeneralData(t),this.getChartData(t)},computed:{chartOptions:function(){return this.store.chartData},startDate:function(){return this.store.formatDate(this.store.range[0])},endDate:function(){return this.store.formatDate(this.store.range[1])},ConStartDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[0]):null},ConEndDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[1]):null}},methods:{toDetail:function(e,t){this.global.router.push({path:"/report/media/detail/".concat(e,"/").concat(t),query:{websiteId:e,begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterFields:"rtbTypeId,sellTypeId,websiteId",filterValues:"0|1|".concat(e)}})},formatLocal:function(e,t){return xe.a.formatLocal(e,t)},toPercent:function(e){return xe.a.toPercent(e)},format:function(e){return w()(e).format("YYYY-MM-DD")},getGeneralData:function(e){var t=this,a=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"sum",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.diffResults&&e.diffResults.length||(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getChartData:function(e){var t=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"day",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getChart(Object(v.a)({},t,e))},deleteFilters:function(e){"all"===e?this.store.filter.websiteId=[]:this.store.filter[e]=[],this.getGeneralData(),this.getChartData(),this.refreshTable()},getContrastDate:function(){var e={contrastBegin:null,contrastEnd:null};return"CONFIRMED"===this.store.status&&(e.contrastBegin=this.ConStartDate,e.contrastEnd=this.ConEndDate),e},getFilterFields:function(){var e=st()(this.store.filter.websiteId);"string"==typeof e&&"all"!==e&&(e=e?e.split(","):[]);var t={filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1"};return e&&"all"!==e&&0!==e.length&&(t.filterFields+=",websiteId",t.filterValues+="|"+e.join(",")),t},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"网盟推广报告_媒体报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"网盟推广报告_媒体报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,e.websiteId&&delete e.websiteId,e.dimensions="webDomain",delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},refreshTable:function(){var e=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"sum",metrics:this.store.commonMetrics,filterFields:"",filterValues:"",pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize},this.getFilterFields(),this.getContrastDate());this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.getGeneralData(),this.getChartData(),this.refreshTable()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},iscompare:function(e){e&&this.store.calContrastDate()},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(ga=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return ga.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e)},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.store.fail(e),this.$emit("submitfail",e)}}}),Oa=(a("eb15"),Object(p.a)(_a,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view media-report",class:{"compare-report":!e.isCompared}},[a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("select-self",{attrs:{placeholder:"媒体",options:e.store.allApp,filter:e.websiteIdFilter,multi:!0},model:{value:e.store.filter.websiteId,callback:function(t){e.$set(e.store.filter,"websiteId",t)},expression:"store.filter.websiteId"}},[8<e.store.allApp.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-searchbox",{staticClass:"select-filter",attrs:{placeholder:"搜索",ui:"tiny"},model:{value:e.websiteIdKey,callback:function(t){e.websiteIdKey=t},expression:"websiteIdKey"}})],1):e._e()]),a("div",{class:{"inline-block":"CONFIRMED"!==e.store.status,block:"CONFIRMED"==e.store.status}},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                    ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1)],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("\n                订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("\n                下载\n            ")],1)],1),a("filter-tags",{attrs:{"init-filter":e.store.tagFilter,"filter-options":e.filterItem,label:e.labelForTag},on:{deleteFilter:e.deleteFilters}})],1),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,isWebsite:!0,hasPageView:!0,compareData:e.store.compareData}}),a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"websiteName",width:"190",title:"域名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition",on:{click:function(a){e.toDetail(t.websiteId,t.webDomain)}}},[a("div",[a("a",{staticClass:"app-name-text"},[e._v(e._s(t.webDomain))])])]),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.range[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.range[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    变化率\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"150",title:"代码位展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):a("div",[e._v(e._s(e.formatLocal(t.view)))])]}}])}),a("veui-table-column",{attrs:{field:"pageview",width:"130",title:"页面展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.pageview),ago:e.formatLocal(t.contrastResults.pageview),diff:e.formatLocal(t.diffResults.pageview)}})],1):a("div",[e._v(e._s(e.formatLocal(t.pageview)))])]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income,2),ago:e.formatLocal(t.contrastResults.income,2),diff:e.formatLocal(t.diffResults.income,2)}})],1):a("div",[e._v(e._s(e.formatLocal(t.income,2)))])]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):a("div",[e._v(e._s(e.formatLocal(t.click)))])]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm,2),ago:e.formatLocal(t.contrastResults.ecpm,2),diff:e.formatLocal(t.diffResults.ecpm,2)}})],1):a("div",[e._v(e._s(e.formatLocal(t.ecpm,2)))])]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio,2),ago:e.toPercent(t.contrastResults.clickRatio,2),diff:e.formatLocal(t.diffResults.clickRatio,2)}})],1):a("div",[e._v(e._s(e.toPercent(t.clickRatio,2)))])]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc,2),ago:e.formatLocal(t.contrastResults.cpc,2),diff:e.formatLocal(t.diffResults.cpc,2)}})],1):a("div",[e._v(e._s(e.formatLocal(t.cpc,2)))])]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"网盟推广报告_媒体报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s)+"\n                            ")])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:function(t){e.subscribeVisible=!1}}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"网盟推广报告_媒体报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s)+"\n                ")])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));Oa.options.__file="MediaReportView.vue";var Ca=Oa.exports,Da=new Date((new Date).setHours(0,0,0,0)),wa=new Date(Da-864e5),ja=new Date(Da-0-1e3),ka=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[20,50,100]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"websiteId",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"websiteName",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[wa,ja]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"commonMetrics","view,pageview,income,click,clickRatio,ecpm,cpc"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{pageSize:20,order:"desc",orderBy:"income",orders:"desc",orderBys:"income",websiteId:[],begin:a.formatDate(a.range[0]),end:a.formatDate(a.range[1]),timeGranularity:"day",metrics:a.commonMetrics,filterFields:"rtbTypeId,sellTypeId,websiteId",filterValues:"0|1|"})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"网盟推广报告_媒体报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"网盟推广报告_媒体报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"formatDate",value:function(e){return e=e||"",w()(e).format("YYYYMMDD")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.initQueryParms(),this.listRequester=this.api.getReportAllQuery,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport}},{key:"initQueryParms",value:function(){var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin?this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:ja]:e.end&&!e.begin&&(this.range=[wa,w()(e.end)._d]),e.contrastBegin&&(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d]);var a={filterFields:e.filterFields||this.filter.filterFields,filterValues:e.filterValues||this.filter.filterValues+this.websiteId,dimensions:e.dimensions};this.filter=Object(v.a)({},this.filter,a)}},{key:"calContrastDate",value:function(){var e=[],t=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=t/864e5,e[1]=w()(this.filter.begin).valueOf()-864e5,e[0]=w()(e[1]).valueOf()-t,e[0]=this.formatDate(e[0]),e[1]=this.formatDate(e[1]),this.compareRange=[w()(e[0])._d,w()(e[1])._d]}},{key:"initListData",value:function(){}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.websiteId)&&(t.websiteId=a.websiteId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.websiteId&&"all"!==this.filter.websiteId&&(this.filter.websiteId=this.filter.websiteId?this.filter.websiteId.split(","):[]),this.tagFilter=st()(this.filter)}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["slotview","income","pageview","click","clickRatio","ecpm","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify(Object(v.a)({reportType:"media-detail",websiteId:this.filter.websiteId,websiteName:this.websiteName},this.filterSelAll));var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a),Sa=a("2e2d"),xa=a("c509"),Ra=a("f2a8");Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var Ta,Ia=["view","pageview","income","click","ecpm","clickRatio","cpc"],Fa=Object(u.a)(G.a,ka,{name:"UnionReport",components:{"v-chart":M.a,"veui-table":ut.a,"veui-tabs":Sa.a,"veui-tab":F.a,"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,ListFilters:pa.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"select-self":ea.a,"select-vitual":xa.a,"datepicker-self":ba.a,"small-card":ya.a},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},data:function(){return{moment:w.a,dayCount:1,websiteId:"",websiteName:"",columnFilter:["time"].concat(Ia),index:0,isCompared:!1,noemail:!1,openFilters:!0,openEditPage:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},compareRange:!1,rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},computed:{chartOptions:function(){return this.store.chartData},startDate:function(){return this.store.formatDate(this.store.range[0])},endDate:function(){return this.store.formatDate(this.store.range[1])},ConStartDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[0]):null},ConEndDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[1]):null}},beforeDestroy:function(){delete this.global.reportfilterSelectItems},created:function(){this.store.websiteId=this.$route.params.id,this.store.websiteName=this.$route.params.name},mounted:function(){this.store.filter.websiteId=[this.store.websiteId];var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i=0;i<e.filterValues.length;i++)a+=e.filterValues[i].join(",")+"|";t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),metrics:e.metrics.join(",")},e.begin&&(this.store.range=[w()(e.begin)._d,w()(e.end)._d]);var s=e.typeInfo?st()(JSON.parse(e.typeInfo)):{};s.websiteId&&(this.store.filter.websiteId=s.websiteId);var l=Object(v.a)({},this.store.filter,t,{});this.store.filter=st()(l)}this.refreshTable(),this.getGeneralData(t),this.getChartData(t)},methods:{tableSort:function(){var e;(e=this.store).tableSort.apply(e,arguments)},getContrastDate:function(){var e={contrastBegin:null,contrastEnd:null};return"CONFIRMED"===this.store.status&&(e.contrastBegin=this.ConStartDate,e.contrastEnd=this.ConEndDate),e},getFilterFields:function(){var e=st()(this.store.filter.websiteId);"string"==typeof e&&"all"!==e&&(e=e?e.split(","):[]);var t={filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1"};return e&&"all"!==e&&0!==e.length&&(t.filterFields+=",websiteId",t.filterValues+="|"+e.join(",")),t},getGeneralData:function(e){var t=this,a=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"sum",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.diffResults&&e.diffResults.length||(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getState:function(e){return this.store.selectedSlot.some(function(t){return t.id===e})},formatLocal:function(e,t){return xe.a.formatLocal(e,t)},toPercent:function(e){return xe.a.toPercent(e)},formatTime:function(e){return xe.a.formatWeek(e)},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"网盟推广报告_媒体详情报告_".concat(this.store.format(this.store.filter.begin),"~").concat(this.store.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"网盟推广报告_媒体详情报告_".concat(this.store.format(this.store.filter.begin),"~").concat(this.store.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.adPositionId&&0<e.adPositionId.length&&(e.dimensions+=",adPositionId"),e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},getChartData:function(e){var t=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"day",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getChart(Object(v.a)({},t,e))},refreshTable:function(){var e=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"day",metrics:this.store.commonMetrics,pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize},this.getFilterFields(),this.getContrastDate());this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.getGeneralData(),this.getChartData(),this.refreshTable()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},iscompare:function(e){e&&this.store.calContrastDate()},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(Ta=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return Ta.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e)},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.store.fail(e),this.$emit("submitfail",e)}}}),Na=(a("ad22"),a("599a"),Object(p.a)(Fa,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view",class:{"compare-report":!e.isCompared}},[a("h3",{staticClass:"title"},[e._v("媒体报告 > "+e._s(e.store.websiteName))]),a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("\n                订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("\n                下载\n            ")],1)],1)]),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,isWebsite:!0,hasPageView:!0,compareData:e.store.compareData}}),a("veui-tabs",{attrs:{ui:"block",index:e.index},on:{"update:index":function(t){e.index=t}}},[a("veui-tab",{attrs:{label:"分日",name:"day"}},[a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1)],1)],1),a("template",{staticClass:"table-container",slot:"table"},[a("veui-table",{attrs:{data:e.store.tableData,"order-by":e.store.filter.orderBy,columnFilter:e.columnFilter,order:e.store.filter.order},on:{sort:e.tableSort}},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition"},[e._v(e._s(e.formatTime(t.time)))]),t.contrastResults?a("div",[e._v(e._s(e.formatTime(t.contrastResults.time)))]):e._e(),t.contrastResults?a("div",[e._v("变化率")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"130",title:"代码位展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"pageview",width:"130",title:"页面展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.pageview)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.pageview),ago:e.formatLocal(t.contrastResults.pageview),diff:e.formatLocal(t.diffResults.pageview)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income,2),ago:e.formatLocal(t.contrastResults.income,2),diff:e.formatLocal(t.diffResults.income,2)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm,2),ago:e.formatLocal(t.contrastResults.ecpm,2),diff:e.formatLocal(t.diffResults.ecpm,2)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio,2),ago:e.toPercent(t.contrastResults.clickRatio,2),diff:e.formatLocal(t.diffResults.clickRatio,2)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.cpc,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc,2),ago:e.formatLocal(t.contrastResults.cpc,2),diff:e.formatLocal(t.diffResults.cpc,2)}})],1):e._e()]}}])})],1)],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"网盟推广报告_媒体详情报告_"+e.store.format(this.store.filter.begin)+"~"+e.store.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s)+"\n                            ")])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"网盟推广报告_媒体详情报告_"+e.store.format(this.store.filter.begin)+"~"+e.store.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s)+"\n                ")])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,"112b3fb9",null));Na.options.__file="MediaReportDetailView.vue";var Aa=Na.exports,Ma=(a("456d"),a("9934")),Ya=a.n(Ma),La=a("dd61"),Ea=a.n(La),Pa=new Date((new Date).setHours(0,0,0,0)),Va=new Date(Pa-864e5),Ba=new Date(Pa-0-1e3),$a=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","计费名报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[Va,Ba]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{order:"desc",orderBy:"income",orders:"desc",orderBys:"income",keyword:"",cId:[],dimensions:"cId,cName",timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",begin:a.range?w()(a.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:a.range?w()(a.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"网盟推广报告_计费名报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"网盟推广报告_计费名报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterSelAll",{cName:!1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cnList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sLotTotalCount",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chart",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getAuctionReportAllQuery,this.getAdpCnlist=this.api.getAdpCnlist,this.getSlotList=this.api.getWebSlotNewList,this.getReportSum=this.api.getAuctionReportSum,this.save=this.api.saveAuctionReport;var a=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,a),a.begin&&(this.range=[w()(a.begin)._d,a.end?w()(a.end)._d:Ba]),a.end&&!a.begin&&(this.range=[Va,w()(a.end)._d]);var i=[],s=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=s/864e5,i[1]=w()(this.filter.begin).valueOf()-864e5,i[0]=w()(i[1]).valueOf()-s,i[0]=w()(i[0]).format("YYYYMMDD"),i[1]=w()(i[1]).format("YYYYMMDD"),a.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(a.contrastBegin)._d,w()(a.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(i[0])._d,w()(i[1])._d]),this.getAdpCnlist().then(function(t){t.cnList&&t.cnList.length&&t.cnList.forEach(function(t){e.cnList.push({label:t.cname,value:t.cid})})}).catch(function(e){})}},{key:"initListData",value:function(){}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.cId)&&(t.cId=a.cId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;this.getRouteQuery({}),Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.cId&&(this.filter.cId=this.filter.cId?this.filter.cId.split(","):[],this.filter.cId=Ea()(this.filter.cId,function(e){return Number(e)})),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){if(this.fillFilterFromQuery(),e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];if(0<(e={pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}).result.length){var i=e.result[0],s=Ya()(i);this.cName=s.includes("cName")}return e}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["slotview","income","pageview","click","clickRatio","ecpm","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify(Object(v.a)({reportType:"cName",cId:this.filter.cId},this.filterSelAll));var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var za,qa=Object(u.a)(G.a,$a,{name:"UnionReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,ListFilters:pa.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"select-self":ea.a,"select-vitual":xa.a,"datepicker-self":ba.a,"small-card":ya.a},data:function(){var e=this;return{moment:w.a,dayCount:1,isCompared:!1,cIdKey:"",cIdFilter:function(t){return t.label.toLowerCase().includes(e.cIdKey.toLowerCase())},filterItem:{cId:this.store.cnList},labelForTag:{cId:"计费名"},noemail:!1,openFilters:!0,openEditPage:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},dateShortCut:qt.a.dateShortCut,freRule:qt.a.freRule,saveFormType:qt.a.saveFormType,formType:qt.a.saveFormType,compareRange:!1,rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a,outside:Ra.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getAuctionReportAllQuery}},created:function(){},mounted:function(){var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i={dimensions:""},s=0;s<e.filterValues.length;s++)a+=e.filterValues[s].join(",")+"|",i[e.filterFields[s]]=e.filterValues[s];t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),dimensions:i.dimensions.slice(0,-1),metrics:e.metrics.join(",")},e.begin&&(this.store.range=[w()(e.begin)._d,w()(e.end)._d]);var l=e.typeInfo?st()(JSON.parse(e.typeInfo)):{};delete l.reportType;var r=Object(v.a)({},this.store.filter,t,i);this.store.filter=st()(r),l.cId&&(this.store.filter.cId=l.cId),this.refreshTableByFilter()}else{var o=this.store.getRouteQuery();t={filterFields:o.filterFields?o.filterFields:"rtbTypeId,sellTypeId",filterValues:o.filterValues?o.filterValues:"0|1",dimensions:o.dimensions},this.store.filter=Object(v.a)({},this.store.filter,t),this.refreshTableByFilter()}this.getGeneralData(t),this.getChartData(t)},computed:{chartOptions:function(){return this.store.chartData}},methods:{toDetail:function(e,t){this.global.router.push({path:"/report/cname/detail/".concat(t,"/").concat(e),query:{begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterValues:"0|1|".concat(e)}})},getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:this.store.filterFields,filterValues:this.store.filterValues};"CONFIRMED"===this.store.status&&(a.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),a.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")),delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.diffResults&&e.diffResults.length||(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getChartData:function(e){var t={};"CONFIRMED"===this.store.status&&(t={contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD")});var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc"};delete e.dimensions,this.store.getChart(Object(v.a)({},a,t,e))},refreshChartByFilter:function(){var e=st()(this.store.filter.cId),t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1"};"CONFIRMED"===this.store.status&&(t.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),t.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")),e.length&&!this.store.filterSelAll.cName&&(t.filterFields+=",cId",t.filterValues+="|"+e.join(",")),this.getChartData(t)},formatLocal:function(e,t){return xe.a.formatLocal(e,t)},toPercent:function(e){return xe.a.toPercent(e)},format:function(e){return w()(e).format("YYYY-MM-DD")},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"网盟推广报告_计费名报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"网盟推广报告_计费名报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,e.cId&&delete e.cId,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},refreshGeneralDataByFilter:function(){var e=st()(this.store.filter.cId),t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1"};e.length&&!this.store.filterSelAll.cName&&(t.filterFields+=",cId",t.filterValues+="|"+e.join(",")),"CONFIRMED"===this.store.status&&(t.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),t.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")),this.getGeneralData(t)},deleteFilters:function(e){this.store.filter.cId=[],this.store.filterSelAll.cName=!1,this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},refreshTableByFilter:function(){var e=st()(this.store.filter.cId),t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1"};e.length&&!this.store.filterSelAll.cName&&(t.filterFields+=",cId",t.filterValues+="|"+e.join(",")),this.store.filter=Object(v.a)({},this.store.filter,t),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(za=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return za.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),Ua=(a("85b0"),Object(p.a)(qa,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view"},[a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("select-self",{attrs:{placeholder:"计费名",isall:e.store.filterSelAll.cName,options:e.store.cnList,filter:e.cIdFilter,multi:!0},on:{"update:isall":function(t){e.$set(e.store.filterSelAll,"cName",t)}},model:{value:e.store.filter.cId,callback:function(t){e.$set(e.store.filter,"cId",t)},expression:"store.filter.cId"}},[8<e.store.cnList.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-input",{staticClass:"select-filter",attrs:{ui:"tiny"},model:{value:e.cIdKey,callback:function(t){e.cIdKey=t},expression:"cIdKey"}})],1):e._e()]),a("div",{class:{"inline-block":"CONFIRMED"!==e.store.status,block:"CONFIRMED"==e.store.status}},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                    ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1)],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("\n                订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("\n                下载\n            ")],1)],1),a("filter-tags",{attrs:{"init-filter":e.store.tagFilter,"filter-options":e.filterItem,label:e.labelForTag},on:{deleteFilter:e.deleteFilters}})],1),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,isWebsite:!0,hasPageView:!0,compareData:e.store.compareData}}),a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),a("template",{staticClass:"table-container",slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"cName",width:"190",title:"计费名",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition",on:{click:function(a){e.toDetail(t.cId,t.cName)}}},[a("div",[a("a",{staticClass:"cname-text"},[e._v(e._s(t.cName))])])]),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.range[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.range[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    变化率\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"130",title:"代码位展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"pageview",width:"130",title:"页面展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.pageview)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.pageview),ago:e.formatLocal(t.contrastResults.pageview),diff:e.formatLocal(t.diffResults.pageview)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income),ago:e.formatLocal(t.contrastResults.income),diff:e.formatLocal(t.diffResults.income)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm),ago:e.formatLocal(t.contrastResults.ecpm),diff:e.formatLocal(t.diffResults.ecpm)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio),ago:e.toPercent(t.contrastResults.clickRatio),diff:e.formatLocal(t.diffResults.clickRatio)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.cpc)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc),ago:e.formatLocal(t.contrastResults.cpc),diff:e.formatLocal(t.diffResults.cpc)}})],1):e._e()]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"网盟推广报告_计费名报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(this.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s)+"\n                            ")])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"网盟推广报告_计费名报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(this.formType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s)+"\n                ")])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,"5b487456",null));Ua.options.__file="CNameReportView.vue";var Wa=Ua.exports,Ga=new Date((new Date).setHours(0,0,0,0)),Ha=new Date(Ga-864e5),Qa=new Date(Ga-0-1e3),Ja=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[Ha,Qa]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"axioss",Vt.a.create({responseType:"arraybuffer",paramsSerializer:function(e){return $t.a.stringify(e,{encode:!0})}})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{order:"desc",orderBy:"time",orders:"desc",orderBys:"time",cId:"",dimensions:"",timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",begin:a.range?w()(a.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:a.range?w()(a.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD"),filterFields:"rtbTypeId,sellTypeId,cId"})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"网盟推广报告_计费名报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"网盟推广报告_计费名报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allApp",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"selectedSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sLotTotalCount",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"activeTab","day"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cName",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chart",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"typeOptions",[{label:"分日",value:"day"},{label:"分媒体",value:"media"},{label:"分代码位",value:"slot"}]),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getReportAllQuery,this.adPositionsRequest=this.api.adPositionsRequest,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport;var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),this.initActiveTab(this.filter.orderBy),e.begin&&(this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:Qa]),e.end&&!e.begin&&(this.range=[Ha,w()(e.end)._d]);var a=[],i=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=i/864e5,a[1]=w()(this.filter.begin).valueOf()-864e5,a[0]=w()(a[1]).valueOf()-i,a[0]=w()(a[0]).format("YYYYMMDD"),a[1]=w()(a[1]).format("YYYYMMDD"),e.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(a[0])._d,w()(a[1])._d])}},{key:"initActiveTab",value:function(e){switch(e){case"time":this.activeTab="day";break;case"webDomain":this.activeTab="media";break;case"adPositionId":this.activeTab="slot"}}},{key:"initListData",value:function(){}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter;return st()(t),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;this.getRouteQuery({}),Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["slotview","income","pageview","click","clickRatio","ecpm","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"cNameDetail",cId:this.filter.cId,cName:this.cName});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var Ka,Za=["view","income","click","ecpm","clickRatio","cpc"],Xa=Object(u.a)(G.a,Ja,{name:"UnionReport",components:{"v-chart":M.a,"veui-table":ut.a,"veui-tabs":Sa.a,"veui-tab":F.a,"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,ListFilters:pa.a,FilterTags:va.a,"veui-radio-button-group":De.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"select-self":ea.a,"select-vitual":xa.a,"datepicker-self":ba.a,"small-card":ya.a},watch:{"store.activeTab":function(){"day"===this.store.activeTab&&(this.columnFilter=["time","pageview"].concat(Za),this.store.tableSort("time","desc")),"media"===this.store.activeTab&&(this.columnFilter=["webDomain","pageview"].concat(Za),this.store.tableSort("income","desc")),"slot"===this.store.activeTab&&(this.columnFilter=["adPositionName"].concat(Za),this.store.tableSort("income","desc")),this.refreshTableByFilter()},"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},data:function(){return{moment:w.a,dayCount:1,cId:"",cName:"",columnFilter:["time"].concat(Za),isCompared:!1,legendSelect:["预计收入（元）","eCPM（元）"],noemail:!1,openFilters:!0,openEditPage:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},dateShortCut:qt.a.dateShortCut,freRule:qt.a.freRule,saveFormType:qt.a.saveFormType,formType:qt.a.saveFormType,compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a,outside:Ra.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},created:function(){this.cName=this.$route.params.cName,this.store.cName=this.cName,this.cId=this.$route.params.cId,window.addEventListener("hashchange",function(){this.history.replaceState("hasHash","","")},!1),window.addEventListener("popstate",function(e){e.state&&this.location.reload()},!1)},mounted:function(){this.store.filter.cId=this.cId;var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i={dimensions:""},s=0;s<e.filterValues.length;s++)a+=e.filterValues[s].join(",")+"|",i[e.filterFields[s]]=e.filterValues[s];t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),dimensions:i.dimensions.slice(0,-1),metrics:e.metrics.join(",")},e.begin&&(this.store.range=[w()(e.begin)._d,w()(e.end)._d]),delete(e.typeInfo?st()(JSON.parse(e.typeInfo)):{}).reportType;var l=Object(v.a)({},this.store.filter,t,i);this.store.filter=st()(l),this.refreshTableByFilter()}else{var r=this.store.getRouteQuery();t={filterFields:r.filterFields?r.filterFields:"rtbTypeId,sellTypeId",filterValues:r.filterValues?r.filterValues:"0|1",dimensions:r.dimensions},this.store.filter=Object(v.a)({},this.store.filter,t),this.refreshTableByFilter()}this.getGeneralData(),this.getChartData()},computed:{chartOptions:function(){return this.store.chartData}},methods:{tableSort:function(){var e;(e=this.store).tableSort.apply(e,arguments)},toMedia:function(e,t){this.global.router.push({path:"/report/media/detail/".concat(e,"/").concat(t),query:{begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",websiteId:e,filterValues:"0|1|".concat(e)}})},toSlot:function(e){this.global.router.push({path:"/report/adPosition/".concat(e),query:{begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterValues:"0|1|1|".concat(e)}})},getGeneralData:function(){var e=this,t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:"rtbTypeId,sellTypeId,cId",filterValues:"0|1|".concat(this.cId)};"CONFIRMED"===this.store.status&&(t.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),t.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")),this.store.getReportSum(t).then(function(t){e.isCompared="CONFIRMED"===e.store.status,e.dayCount=w()(e.store.range[1]).diff(w()(e.store.range[0]),"day")+1,0===t.results.length&&(t.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.diffResults&&t.diffResults.length||(t.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.contrastResults&&t.contrastResults.length||(t.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.store.cardData=t.results[0],e.store.diffCardData=t.diffResults[0],e.store.compareData=t.contrastResults[0]})},getState:function(e){return this.store.selectedSlot.some(function(t){return t.id===e})},formatLocal:function(e,t){return xe.a.formatLocal(e,t)},toPercent:function(e){return xe.a.toPercent(e)},formatTime:function(e){return xe.a.formatWeek(e)},format:function(e){return w()(e).format("YYYY-MM-DD")},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"网盟推广报告_计费名报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"网盟推广报告_计费名报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.adPositionId&&0<e.adPositionId.length&&(e.dimensions+=",adPositionId"),e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},getChartData:function(){var e={};"CONFIRMED"===this.store.status&&(e={contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD")});var t=Object(v.a)({begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:"rtbTypeId,sellTypeId,cId",filterValues:"0|1|".concat(this.cId)},e);this.store.getChart(t)},refreshGeneralDataByFilter:function(){this.getGeneralData()},refreshTableByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:"rtbTypeId,sellTypeId,cId",filterValues:"0|1|".concat(this.cId),dimensions:"",pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};"media"===this.store.activeTab&&(e.timeGranularity="sum",e.dimensions="websiteId,webDomain"),"slot"===this.store.activeTab&&(e.timeGranularity="sum",e.dimensions="adPositionId,adPositionName"),"CONFIRMED"===this.store.status?(e.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),e.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")):(e.contrastBegin="",e.contrastEnd=""),this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.refreshGeneralDataByFilter(),this.getChartData(),this.refreshTableByFilter()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(Ka=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return Ka.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),ei=(a("8672"),Object(p.a)(Xa,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view"},[a("h3",{staticClass:"title"},[e._v("计费名报告 > "+e._s(e.cName))]),a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("\n                订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("\n                下载\n            ")],1)],1)]),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,isWebsite:!0,hasPageView:!0,compareData:e.store.compareData}}),a("veui-radio-button-group",{staticClass:"report-table-button-group",attrs:{items:e.store.typeOptions},model:{value:e.store.activeTab,callback:function(t){e.$set(e.store,"activeTab",t)},expression:"store.activeTab"}}),a("div",{staticClass:"button-group-line"}),"day"===e.store.activeTab?a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}}):e._e()],1),a("template",{staticClass:"table-container",slot:"table"},[a("veui-table",{attrs:{data:e.store.tableData,"order-by":e.store.filter.orderBy,columnFilter:e.columnFilter,order:e.store.filter.order},on:{sort:e.tableSort}},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"adposition"},[e._v(e._s(e.formatTime(t.time)))]):e._e(),t.contrastResults?e._e():a("div",[e._v(e._s(e.formatTime(t.time)))]),t.contrastResults?a("div",[e._v(e._s(e.formatTime(t.contrastResults.time)))]):e._e(),t.contrastResults?a("div",[e._v("变化率")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"webDomain",width:"190",sortable:"",title:"媒体"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition",on:{click:function(a){e.toMedia(t.websiteId,t.webDomain)}}},[a("div",[a("a",{staticClass:"app-name-text"},[e._v(e._s(t.webDomain))])])]),t.contrastResults?a("div",[e._v("\n                        "+e._s(e.moment(e.store.range[0]).format("YYYY-MM-DD"))+"~\n                        "+e._s(e.moment(e.store.range[1]).format("YYYY-MM-DD"))+"\n                    ")]):e._e(),t.contrastResults?a("div",[e._v("\n                        "+e._s(e.moment(e.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                        "+e._s(e.moment(e.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                    ")]):e._e(),t.contrastResults?a("div",[e._v("\n                        变化率\n                    ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"adPositionName",width:"190",sortable:"",title:"代码位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition",on:{click:function(a){e.toSlot(t.adPositionId)}}},[a("div",[a("a",{staticClass:"app-name-text"},[e._v(e._s(t.adPositionName))])]),a("div",[a("a",{staticClass:"app-name-text"},[e._v("ID: "+e._s(t.adPositionId))])])]),t.contrastResults?a("div",[e._v("\n                        "+e._s(e.moment(e.store.range[0]).format("YYYY-MM-DD"))+"~\n                        "+e._s(e.moment(e.store.range[1]).format("YYYY-MM-DD"))+"\n                    ")]):e._e(),t.contrastResults?a("div",[e._v("\n                        "+e._s(e.moment(e.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                        "+e._s(e.moment(e.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                    ")]):e._e(),t.contrastResults?a("div",[e._v("\n                        变化率\n                    ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"130",title:"代码位展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"pageview",width:"130",title:"页面展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.pageview)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.pageview),ago:e.formatLocal(t.contrastResults.pageview),diff:e.formatLocal(t.diffResults.pageview)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income),ago:e.formatLocal(t.contrastResults.income),diff:e.formatLocal(t.diffResults.income)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm),ago:e.formatLocal(t.contrastResults.ecpm),diff:e.formatLocal(t.diffResults.ecpm)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio),ago:e.toPercent(t.contrastResults.clickRatio),diff:e.formatLocal(t.diffResults.clickRatio)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.cpc)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc),ago:e.formatLocal(t.contrastResults.cpc),diff:e.formatLocal(t.diffResults.cpc)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"fillRatio",width:"120",title:"填充率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.fillRatio)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.fillRatio),ago:e.toPercent(t.contrastResults.fillRatio),diff:e.formatLocal(t.diffResults.fillRatio)}})],1):e._e()]}}])})],1)],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"网盟推广报告_计费名报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(this.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s)+"\n                            ")])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"网盟推广报告_计费名报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(this.formType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s)+"\n                ")])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,"c99526a6",null));ei.options.__file="CNameReportDetailView.vue";var ti=ei.exports,ai=new Date((new Date).setHours(0,0,0,0)),ii=new Date(ai-864e5),si=new Date(ai-0-1e3),li=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","整体报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[ii,si]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"axioss",Vt.a.create({responseType:"arraybuffer",paramsSerializer:function(e){return $t.a.stringify(e,{encode:!0})}})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{order:"desc",orderBy:"time",orders:"desc",orderBys:"time",keyword:"",dimensions:"",timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",begin:a.range?w()(a.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:a.range?w()(a.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"网盟推广报告_整体报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"网盟推广报告_整体报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"selectedSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sLotTotalCount",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chart",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getAuctionReportAllQuery,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport;var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin&&(this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:si]),e.end&&!e.begin&&(this.range=[ii,w()(e.end)._d]);var a=[],i=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=i/864e5,a[1]=w()(this.filter.begin).valueOf()-864e5,a[0]=w()(a[1]).valueOf()-i,a[0]=w()(a[0]).format("YYYYMMDD"),a[1]=w()(a[1]).format("YYYYMMDD"),e.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(a[0])._d,w()(a[1])._d])}},{key:"initListData",value:function(){}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter;return st()(t),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;this.getRouteQuery({}),Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["slotview","income","pageview","click","clickRatio","ecpm","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"whole"});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var ri,oi=Object(u.a)(G.a,li,{name:"UnionReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,ListFilters:pa.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"select-self":ea.a,"select-vitual":xa.a,"datepicker-self":ba.a,"small-card":ya.a},data:function(){return{moment:w.a,dayCount:1,isCompared:!1,legendSelect:["预计收入（元）","eCPM（元）"],noemail:!1,subscribeVisible:!1,downloadVisible:!1,dateShortCut:qt.a.dateShortCut,freRule:qt.a.freRule,saveFormType:qt.a.saveFormType,formType:qt.a.saveFormType,compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a,outside:Ra.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getAuctionReportAllQuery}},created:function(){},mounted:function(){var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i={dimensions:""},s=0;s<e.filterValues.length;s++)a+=e.filterValues[s].join(",")+"|",i[e.filterFields[s]]=e.filterValues[s];t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),dimensions:i.dimensions.slice(0,-1),metrics:e.metrics.join(",")},e.begin&&(this.store.range=[w()(e.begin)._d,w()(e.end)._d]),delete(e.typeInfo?st()(JSON.parse(e.typeInfo)):{}).reportType;var l=Object(v.a)({},this.store.filter,t,i);this.store.filter=st()(l),this.refreshTableByFilter()}else{var r=this.store.getRouteQuery();t={filterFields:r.filterFields?r.filterFields:"rtbTypeId,sellTypeId",filterValues:r.filterValues?r.filterValues:"0|1",dimensions:r.dimensions},this.store.filter=Object(v.a)({},this.store.filter,t),this.refreshTableByFilter()}this.getGeneralData(t),this.getChartData(t)},computed:{chartOptions:function(){return this.store.chartData}},methods:{getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:this.store.filterFields,filterValues:this.store.filterValues};"CONFIRMED"===this.store.status&&(a.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),a.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")),delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.diffResults&&e.diffResults.length||(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getChartData:function(e){var t={};"CONFIRMED"===this.store.status&&(t={contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD")});var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc"};delete e.dimensions,this.store.getChart(Object(v.a)({},a,t,e))},refreshChartByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1"};this.getChartData(e),this.legendSelect=["预计收入（元）","eCPM（元）"]},formatLocal:function(e,t){return xe.a.formatLocal(e,t)},toPercent:function(e){return xe.a.toPercent(e)},formatTime:function(e){return xe.a.formatWeek(e)},format:function(e){return w()(e).format("YYYY-MM-DD")},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"网盟推广报告_整体报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"网盟推广报告_整体报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.adPositionId&&0<e.adPositionId.length&&(e.dimensions+=",adPositionId"),e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},refreshGeneralDataByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1"};"CONFIRMED"===this.store.status&&(e.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),e.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")),this.getGeneralData(e)},refreshTableByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,pageview,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1",pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};"CONFIRMED"===this.store.status?(e.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),e.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")):(e.contrastBegin="",e.contrastEnd=""),this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.adpListDisable&&(this.store.filter.adPositionId="all"),this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(ri=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return ri.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),ni=Object(p.a)(oi,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view"},[a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("\n                订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("\n                下载\n            ")],1)],1)]),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,isWebsite:!0,hasPageView:!0,compareData:e.store.compareData}}),a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),a("template",{staticClass:"table-container",slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"adposition"},[e._v(e._s(e.formatTime(t.time)))]):e._e(),t.contrastResults?e._e():a("div",[e._v(e._s(e.formatTime(t.time)))]),t.contrastResults?a("div",[e._v(e._s(e.formatTime(t.contrastResults.time)))]):e._e(),t.contrastResults?a("div",[e._v("变化率")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"130",title:"代码位展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"pageview",width:"130",title:"页面展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.pageview)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.pageview),ago:e.formatLocal(t.contrastResults.pageview),diff:e.formatLocal(t.diffResults.pageview)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income),ago:e.formatLocal(t.contrastResults.income),diff:e.formatLocal(t.diffResults.income)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm),ago:e.formatLocal(t.contrastResults.ecpm),diff:e.formatLocal(t.diffResults.ecpm)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio),ago:e.toPercent(t.contrastResults.clickRatio),diff:e.formatLocal(t.diffResults.clickRatio)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.cpc)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc),ago:e.formatLocal(t.contrastResults.cpc),diff:e.formatLocal(t.diffResults.cpc)}})],1):e._e()]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"网盟推广报告_整体报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(this.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s)+"\n                            ")])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"网盟推广报告_整体报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(this.formType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s)+"\n                ")])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null);ni.options.__file="WholeReportView.vue";var ci=ni.exports,ui=new K.a({alias:"IOS",text:"iOS",value:1},{alias:"ANDROID",text:"Android",value:2}),di=new K.a({alias:"MOBILE",text:"手机",value:1},{alias:"PAD",text:"平板",value:2}),fi=new K.a({alias:"ALL_ALL",text:"全部",value:""},{alias:"ANDROID_ALL",text:"Android 全部",value:1},{alias:"ANDROID_MOBILE",text:"Android 手机",value:2},{alias:"ANDROID_PAD",text:"Android 平板",value:3},{alias:"IOS_ALL",text:"iOS 全部",value:4},{alias:"IOS_MOBILE",text:"ios iphone",value:5},{alias:"IOS_PAD",text:"ios ipad",value:6});fi.getValueFromSystemAndDevice=function(e,t){var a=ui.valueIdx[e].alias,i=di.valueIdx[t].alias;return this.aliasIdx["".concat(a,"_").concat(i)].value},fi.getSystemAndDeviceFromValue=function(e){var t=this.valueIdx[e].alias.split("_");return{system:ui.aliasIdx[t[0]].value,device:di.aliasIdx[t[1]].value}},fi.toOptions=function(){var e=this.entities.map(function(e){return{value:e.value,label:e.text}});return e.splice(0,1),e},new K.a({alias:"SDK",text:"SDK",value:0},{alias:"API",text:"API",value:1}),new K.a({alias:"PHONE",text:"手机应用",value:0},{alias:"S_PROGRAM",text:"小程序应用",value:1}),new K.a({alias:"REMOVED",text:"删除",value:0},{alias:"NORMAL",text:"正常",value:1},{alias:"PAUSED",text:"暂停",value:2}),new K.a({alias:"BANNER",text:"横幅",value:32},{alias:"SPLASH",text:"开屏",value:33},{alias:"INTERSTITIAL",text:"插屏",value:34},{alias:"OFFERWALL",text:"积分墙",value:35},{alias:"FEED",text:"信息流",value:36},{alias:"SPREADWALL",text:"推广墙",value:37},{alias:"APPWALL",text:"应用推荐墙",value:38},{alias:"WHEEL",text:"轮盘",value:39},{alias:"VIDEO",text:"视频贴片",value:40},{alias:"REWARD_VIDEO",text:"激励视频",value:44}),new K.a({alias:"BANNER",text:"横幅",value:32},{alias:"SPLASH",text:"开屏",value:33},{alias:"INTERSTITIAL",text:"插屏",value:34},{alias:"INFO_FLOW",text:"信息流",value:36},{alias:"PROMOTION_WALL",text:"推广墙",value:37},{alias:"APP_PROMOTION_WALL",text:"应用推荐墙",value:38},{alias:"ROTATION_PLATE",text:"轮盘",value:39},{alias:"VIDEO",text:"视频贴片",value:40},{alias:"FRONT_LINK",text:"悬浮前链",value:41},{alias:"MID_PAGE",text:"垂类中间页",value:42},{alias:"REWARD_VIDEO",text:"激励视频",value:44});var pi=new K.a({alias:"BANNER",text:"横幅",value:32},{alias:"SPLASH",text:"开屏",value:33},{alias:"INTERSTITIAL",text:"插屏",value:34},{alias:"INFO_FLOW",text:"信息流",value:36},{alias:"VIDEO",text:"视频贴片",value:40},{alias:"REWARD_VIDEO",text:"激励视频",value:44}),hi=(new K.a({alias:"NOT_FILTER",text:"不过滤",value:0},{alias:"FILTER",text:"过滤",value:1}),new K.a({alias:"MONTH",text:"近30天有收入",value:1},{alias:"NOT_MONTH",text:"其他",value:0}),new K.a({alias:"INFO_FLOW_LEFT_PIC",text:"左图右文",value:28},{alias:"INFO_FLOW_RIGHT_PIC",text:"左文右图",value:27},{alias:"INFO_FLOW_GROUP_PIC",text:"三图",value:26},{alias:"INFO_FLOW_GROUP_PIC_LOGO",text:"三图＋logo",value:31},{alias:"INFO_FLOW_PIC_BOTTOM_TITLE",text:"大图＋底部文字",value:22},{alias:"INFO_FLOW_PIC_TOP_TITLE",text:"大图上部文字",value:21},{alias:"INFO_FLOW_PIC_LOGO",text:"大图上部文字+logo",value:30},{alias:"CAROUSEL_IMAGE_TITLE",text:"大图两行文字",value:11},{alias:"CAROUSEL_IMAGE",text:"大图无文字",value:10},{alias:"INFO_FLOW_VIDEO_TOP_TITLE",text:"视频＋文字",value:32}),new K.a({alias:"NATIVE_TITLE",text:"标题",value:1},{alias:"NATIVE_DESC",text:"描述",value:2},{alias:"NATIVE_IMAGE",text:"大图",value:4},{alias:"NATIVE_ICON",text:"图标",value:8},{alias:"NATIVE_APPSIZE",text:"App大小",value:16},{alias:"NATIVE_ACTIONTYPE",text:"跳转动作",value:32},{alias:"NATIVE_VIDEO",text:"视频",value:64},{alias:"NATIVE_INVENTORYTYPE",text:"视频+尾帧",value:256}),new K.a({alias:"APP应用",text:"手机应用",value:0},{alias:"小程序",text:"小程序",value:1}),new Date((new Date).setHours(0,0,0,0))),mi=new Date(hi-864e5),vi=new Date(hi-0-1e3),bi=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","代码位报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[mi,vi]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{order:"desc",orderBy:"income",orders:"desc",orderBys:"income",appId:[],adTypeId:[],appTypeId:[],adPositionId:[],keyword:"",dimensions:"",timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,cpc",begin:a.range?w()(a.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:a.range?w()(a.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"网盟推广报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"网盟推广报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allApp",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"selectedSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sLotTotalCount",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterSelAll",{adTypeName:!1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"appTypeName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adPositionName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adTypeName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"appName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chart",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getReportAllQuery,this.getApp=this.api.getApp,this.adPositionsRequest=this.api.adPostiionsDetails,this.getSlotList=this.api.getWebSlotNewList,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport;var a=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,a),a.begin&&(this.range=[w()(a.begin)._d,a.end?w()(a.end)._d:vi]),a.end&&!a.begin&&(this.range=[mi,w()(a.end)._d]);var i=[],s=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=s/864e5,i[1]=w()(this.filter.begin).valueOf()-864e5,i[0]=w()(i[1]).valueOf()-s,i[0]=w()(i[0]).format("YYYYMMDD"),i[1]=w()(i[1]).format("YYYYMMDD"),a.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(a.contrastBegin)._d,w()(a.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(i[0])._d,w()(i[1])._d]),this.getSlotList(this.slotFliter).then(function(t){t.page&&t.page.result&&(e.allSlot=st()(t.page.result),e.sLotTotalCount=t.page.totalCount)})}},{key:"initListData",value:function(){}},{key:"getSlot",value:function(e,t){var a=this,i={};i=t?{pageNo:e,pageSize:30,keyword:t}:{pageNo:e,pageSize:30},this.getSlotList(i).then(function(i){i.page&&(a.allSlot=st()(i.page.result),a.sLotTotalCount=i.page.totalCount,a.slotFliter={pageNo:e,keyword:t})})}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.adTypeId)&&(t.adTypeId=a.adTypeId.join()),Array.isArray(a.adPositionId)&&(t.adPositionId=a.adPositionId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;this.getRouteQuery({}),Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.adTypeId&&(this.filter.adTypeId=this.filter.adTypeId?this.filter.adTypeId.split(","):[],this.filter.adTypeId=Ea()(this.filter.adTypeId,function(e){return Number(e)})),"string"==typeof this.filter.adPositionId&&"all"!==this.filter.adPositionId&&(this.filter.adPositionId=this.filter.adPositionId?this.filter.adPositionId.split(","):[]),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];if(0<(e={pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}).result.length){var i=e.result[0],s=Ya()(i);-1<s.indexOf("adPositionName")?this.adPositionName=!0:this.adPositionName=!1,-1<s.indexOf("adTypeName")?this.adTypeName=!0:this.adTypeName=!1}return e}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"prepareData",value:function(e){return e}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","ecpm","click","clickRatio","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify(Object(v.a)({reportType:"adpreport",adTypeId:this.filter.adTypeId,adPositionId:"all"===this.filter.adPositionId?"all":""},this.filterSelAll));var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a),yi={name:"select-trans",components:{pag:ma.a,"veui-button":S.a},props:{leftOp:Object,rightOp:Object,leftData:Array,itemKey:String,value:Array,idValue:[Array,String],pagOp:Object,pageCount:Number,isSelectedAll:Boolean},data:function(){return{localValue:this.value,localIdValue:this.idValue}},watch:{leftData:{handler:function(e){},immediate:!0,deep:!0},pagOp:{handler:function(e){},immediate:!0,deep:!0},value:function(e){this.localValue=e},localValue:function(e){this.$emit("input",e)},idvalue:function(e){this.localIdValue=e},localIdValue:function(e){this.$emit("idInput",e)}},methods:{getState:function(e){var t=this;return this.localValue.some(function(a){return a[t.itemKey]==e})},selectItem:function(e){this.getState(e[this.itemKey])||(this.localValue.push(e),this.localIdValue.push(e[this.itemKey]))},deleletItem:function(e){var t=this;this.localValue=this.localValue.filter(function(a){return a[t.itemKey]!==e}),this.localIdValue=this.localIdValue.filter(function(t){return t!==e})},selectAll:function(){this.isSelectedAll=!0,this.localValue=[],this.localIdValue="all"},delAllAdp:function(){this.isSelectedAll=!1,this.localValue=[],this.localIdValue=[]},slotTo:function(e,t){this.pagOp.keyword?this.$emit("slotTo",e,this.store.slotFliter.keyword):this.$emit("slotTo",e)},subCancelAdp:function(){this.$emit("subCancelAdp")}}},gi=(a("3337"),Object(p.a)(yi,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"self-transfer"},[a("div",{staticClass:"self-transfer-table left-table"},[a("div",{staticClass:"self-transfer-header"},[a("span",{staticClass:"transfer-title"},[e._v(e._s(e.leftOp.name)),a("span",{staticClass:"number"},[e._v(e._s(e.leftOp.length))])]),a("span",{staticClass:"op",on:{click:function(t){e.selectAll()}}},[e._v("全部添加")])]),a("div",{staticClass:"table-list left-table-list"},[a("table",[a("thead",[a("tr",e._l(Object.keys(e.leftOp.option),function(t){return a("th",{key:t},[e._v("\n                                "+e._s(t)+"\n                            ")])}))]),a("tbody",{class:{disabled:e.isSelectedAll}},e._l(e.leftData,function(t){return a("tr",{key:t[e.itemKey],class:{disabled:e.getState(t[e.itemKey])},on:{click:function(a){e.selectItem(t)}}},e._l(Object.keys(e.leftOp.option),function(i){return a("td",{key:i},[e._v("\n                                "+e._s(t[e.leftOp.option[i]])+"\n                            ")])}))}))])]),a("div",{staticClass:"transfer-page"},[a("pag",{attrs:{page:e.pagOp.pageNo,"page-size":e.pagOp.pageSize,total:e.pageCount},on:{redirect:e.slotTo}})],1)]),a("div",{staticClass:"self-transfer-table right-table"},[a("div",{staticClass:"self-transfer-header"},[a("span",{staticClass:"transfer-title"},[e._v("已选代码位\n                    "),e.isSelectedAll?e._e():a("span",{staticClass:"number"},[e._v(e._s(e.localValue.length))]),e.isSelectedAll?a("span",{staticClass:"number"},[e._v("全部")]):e._e()]),a("span",{staticClass:"op",on:{click:e.delAllAdp}},[e._v("全部删除")])]),a("div",{staticClass:"table-list right-table-list"},[a("table",[a("tbody",[e.isSelectedAll?a("tr",[e._v("已选全部代码位")]):e._e(),e._l(e.localValue,function(t){return e.isSelectedAll?e._e():a("tr",{key:t[e.itemKey],on:{click:function(a){e.deleletItem(t[e.itemKey])}}},e._l(Object.keys(e.leftOp.option),function(i){return a("td",{key:i},[e._v("\n                                "+e._s(t[e.leftOp.option[i]])+"\n                            ")])}))})],2)])])])]),a("veui-button",{staticClass:"slot-button",attrs:{ui:"primary small"},on:{click:e.subCancelAdp}},[e._v("确定")])],1)},[],!1,null,null,null));gi.options.__file="SelectTrans.vue";var _i=gi.exports;Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var Oi,Ci,Di=Object(u.a)(G.a,bi,{name:"AdpWebsiteReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"select-self":ea.a,"select-trans":_i,"datepicker-self":ba.a,"small-card":ya.a},data:function(){var e=this;return{dayCount:1,isCompared:!1,moment:w.a,defaultDimensions:"cName,cId,websiteId,webDomain,adPositionName,adPositionId,",id2name:{adTypeId:"adTypeName"},adTypeIdKey:"",adTypeIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.adTypeIdKey.toLowerCase())},field:"rtbTypeId,sellTypeId,getAdType,",value:"0|1|1|",labelForTag:{adTypeId:"代码位类型"},filterItem:{adTypeId:pi.toOptions(),adPositionId:this.store.selectedSlot},adTypeId:pi,adpListDisable:!1,relativeVisible:!1,noemail:!1,openFilters:!0,openEditPage:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},compareRange:!1,rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a,outside:Ra.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},created:function(){},mounted:function(){"all"===this.store.filter.adPositionId&&(this.adpListDisable=!0);var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i={dimensions:""},s=0;s<e.filterValues.length;s++)a+=e.filterValues[s].join(",")+"|",i[e.filterFields[s]]=e.filterValues[s];i.dimensions+=this.defaultDimensions,t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),dimensions:i.dimensions.slice(0,-1),metrics:e.metrics.join(",")};var l=e.typeInfo?st()(JSON.parse(e.typeInfo)):{};delete l.reportType,delete i.rtbTypeId,delete i.sellTypeId,delete i.getAdType,l.adTypeId&&(this.store.filter.adTypeId=l.adTypeId),"all"===l.adPositionId&&(this.store.filter.adPositionId="all",this.adpListDisable=!0),this.store.filterSelAll.adTypeName=l.adTypeName;var r=Object(v.a)({},this.store.filter,t,i);this.store.filter=st()(r),i.adPositionId&&0<i.adPositionId.length?(this.renderSelectedSlot(i),this.refreshTableByFilter(i.adPositionId)):this.refreshTableByFilter()}else{var o=this.store.getRouteQuery();(t={filterFields:o.filterFields?o.filterFields+"|":this.field,filterValues:o.filterValues?o.filterValues+"|":this.value,dimensions:o.dimensions}).filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,t);var n={};n.adPositionId=st()(this.store.filter.adPositionId),Array.isArray(n.adPositionId)&&0<n.adPositionId.length&&this.renderSelectedSlot(n),this.refreshTableByFilter()}this.getGeneralData(t),this.getChartData(t)},computed:{chartOptions:function(){return this.store.chartData}},methods:{closeRelative:function(e){e&&e.target&&e.target.className&&-1<e.target.className.indexOf("filters")&&-1<e.target.className.indexOf("report")||(this.relativeVisible=!1)},renderSelectedSlot:(Ci=Object(q.a)(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0<t.adPositionId.length)return(a=st()(t)).adPositionId=a.adPositionId.map(function(e,t){return"92233720"+(Number(e.substring(1))+32559808512)}),e.next=5,this.store.adPositionsRequest({tuIdList:a.adPositionId.join(",")});e.next=8;break;case 5:i=e.sent,this.store.selectedSlot=i.map(function(e,t){return e.adPosDetail});case 8:case"end":return e.stop()}},e,this)})),function(e){return Ci.apply(this,arguments)}),getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,cpc",filterFields:this.store.filterFields,filterValues:this.store.filterValues};delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.diffResults&&e.diffResults.length||(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getChartData:function(e){var t={};"CONFIRMED"===this.store.status&&(t={contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD")});var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,cpc"};delete e.dimensions,this.store.getChart(Object(v.a)({},a,t,e))},refreshChartByFilter:function(){var e=[],t=st()(this.store.filter.adTypeId);st()(this.store.filter.appTypeId),st()(this.store.filter.appId),0<this.store.selectedSlot.length&&(e=this.store.selectedSlot.map(function(e){return e.tu}));var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,cpc",filterFields:this.field,filterValues:this.value};t&&0!==t.length&&!this.store.filterSelAll.adTypeName&&(a.filterFields+="adTypeId,",a.filterValues+=t.join(",")+"|"),e&&0!==e.length&&(a.filterFields+="adPositionId,",a.filterValues+=e.join(",")+"|"),a.filterFields=a.filterFields.slice(0,-1),a.filterValues=a.filterValues.slice(0,-1),this.getChartData(a)},searchSlot:function(e,t){this.store.getSlot(1,e)},slotTo:function(e,t){this.store.slotFliter.keyword?this.store.getSlot(e,this.store.slotFliter.keyword):this.store.getSlot(e)},selectItem:function(e){this.getState(e.tu)||(this.store.selectedSlot.push(e),this.store.filter.adPositionId.push(e.tu))},deleletItem:function(e){this.store.selectedSlot=this.store.selectedSlot.filter(function(t){return t.tu!==e}),this.store.filter.adPositionId=this.store.filter.adPositionId.filter(function(t){return t!==e})},getState:function(e){return this.store.selectedSlot.some(function(t){return t.tu==e})},selectAll:function(){this.adpListDisable=!0,this.store.selectedSlot=[],this.store.filter.adPositionId="all"},formatLocal:function(e){return null===e?0:"number"==typeof e||"string"==typeof e?e.toLocaleString():e},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]},format:function(e){return w()(e).format("YYYY-MM-DD")},toPercent:function(e){var t=Number(e);return(t=t.toFixed(2))+"%"},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"网盟推广代码位报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"网盟推广代码位报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},subCancelAdp:function(){this.relativeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,e.appId&&delete e.appId,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},delAllAdp:function(){this.adpListDisable=!1,this.store.selectedSlot=[],this.store.filter.adPositionId=[]},deleteFilters:function(e){var t=this;if("all"===e)return this.store.filter.adTypeId=[],this.store.filter.adPositionId=[],this.adpListDisable=!1,Object.keys(this.store.filterSelAll).forEach(function(e){t.store.filterSelAll[e]=!1}),this.store.selectedSlot=[],this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),void this.refreshTableByFilter();"adPositionId"===e?(this.store.filter.adPositionId=[],this.adpListDisable=!1,this.store.selectedSlot=[]):(this.store.filter[e]=[],this.store.filterSelAll[this.id2name[e]]=!1),this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},refreshGeneralDataByFilter:function(){var e=[],t=st()(this.store.filter.adTypeId);0<this.store.selectedSlot.length&&(e=this.store.selectedSlot.map(function(e){return e.tu}));var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,cpc",filterFields:this.field,filterValues:this.value};0===t.length||this.store.filterSelAll.adTypeName||(a.filterFields+="adTypeId,",a.filterValues+=t.join(",")+"|"),0!==e.length&&(a.filterFields+="adPositionId,",a.filterValues+=e.join(",")+"|"),a.filterFields=a.filterFields.slice(0,-1),a.filterValues=a.filterValues.slice(0,-1),this.getGeneralData(a)},refreshTableByFilter:function(e){var t=[],a=st()(this.store.filter.adPositionId);0<this.store.selectedSlot.length?t=this.store.selectedSlot.map(function(e){return e.tu}):Array.isArray(a)&&0<a.length&&(t=a),e&&(t=st()(e));var i=st()(this.store.filter.adTypeId)||[],s={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,cpc",filterFields:this.field,filterValues:this.value,dimensions:"",pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};i&&0!==i.length&&!this.store.filterSelAll.adTypeName&&(s.filterFields+="adTypeId,",s.filterValues+=i.join(",")+"|"),t&&0!==t.length&&(s.filterFields+="adPositionId,",s.filterValues+=t.join(",")+"|"),"CONFIRMED"===this.store.status?(s.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),s.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")):(s.contrastBegin="",s.contrastEnd=""),s.dimensions+=this.defaultDimensions,s.filterFields=s.filterFields.slice(0,-1),s.filterValues=s.filterValues.slice(0,-1),s.dimensions=s.dimensions.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,s),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.adpListDisable&&(this.store.filter.adPositionId="all"),this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},compareDate:function(e){},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},toWebReport:function(e,t){this.global.router.push({path:"/report/media/detail/".concat(e,"/").concat(t),query:{begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterValues:"0|1|".concat(e)}})},toCIdReport:function(e,t){this.global.router.push({path:"/report/cname/detail/".concat(t,"/").concat(e),query:{begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterValues:"0|1|".concat(e)}})},toAdpReport:function(e){this.global.router.push({path:"/report/adPosition/".concat(e),query:{begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterValues:"0|1|1|".concat(e)}})},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(Oi=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return Oi.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),wi=(a("e6e4"),Object(p.a)(Di,function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("list-view",{staticClass:"adp-report-view"},[i("template",{slot:"filterContent"},[i("div",{staticClass:"left",attrs:{id:"12333"}},[i("veui-button",{ref:"slot",staticClass:"filters report",style:{marginTop:"0px"},on:{click:function(e){t.relativeVisible=!t.relativeVisible}}},[t._v("代码位\n                "),i("veui-icon",{staticClass:"filters-angle",class:{open:t.relativeVisible},attrs:{name:"angle-down"}})],1),i("div",{class:{"inline-block":"CONFIRMED"!==t.store.status,block:"CONFIRMED"==t.store.status}},[i("veui-field",[i("veui-date-picker",{attrs:{range:"","disabled-date":t.disabledDate,shortcuts:t.store.dateShortCut},on:{select:t.choseDate},model:{value:t.store.range,callback:function(e){t.$set(t.store,"range",e)},expression:"store.range"}})],1),i("veui-field",[i("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:t.iscompare},model:{value:t.store.status,callback:function(e){t.$set(t.store,"status",e)},expression:"store.status"}},[t._v("对比")])],1),i("veui-field",["CONFIRMED"===t.store.status?i("datepicker-self",{ref:"compare",attrs:{range:"",compare:t.store.dateRange,"disabled-date":t.disabledCompareDate},on:{select:t.compareDate},model:{value:t.store.compareRange,callback:function(e){t.$set(t.store,"compareRange",e)},expression:"store.compareRange"}}):t._e()],1),i("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:t.requestSearch}},[t._v("查询")])],1)],1),i("div",{staticClass:"right"},[i("veui-button",{staticClass:"report-button-right",on:{click:t.subClick}},[i("veui-icon",{attrs:{name:"subscribe"}}),t._v("订阅\n            ")],1),i("veui-button",{staticClass:"report-button-right",on:{click:t.downClick}},[i("veui-icon",{attrs:{name:"download"}}),t._v("下载\n            ")],1)],1),i("filter-tags",{attrs:{"init-filter":t.store.tagFilter,"filter-options":t.filterItem,label:t.labelForTag},on:{deleteFilter:t.deleteFilters}})],1),i("template",{slot:"batchContent"},[i("report-cards",{attrs:{compared:t.isCompared,cardData:t.store.cardData,diffCardData:t.store.diffCardData,dayCount:t.dayCount,isWebsite:!0,compareData:t.store.compareData}}),i("v-chart",{attrs:{options:t.chartOptions},on:{legendselectchanged:t.legendChange}})],1),i("template",{slot:"tableColumns"},[i("veui-table-column",{attrs:{field:"adPositionName",width:"190",title:"代码位"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"adposition",on:{click:function(a){t.toAdpReport(e.adPositionId)}}},[i("div",[t._v(t._s(e.adPositionName))]),i("div",[t._v("ID: "+t._s(e.adPositionId))])]),e.contrastResults?i("div",[t._v("\n                    "+t._s(t.moment(t.store.range[0]).format("YYYY-MM-DD"))+"~\n                    "+t._s(t.moment(t.store.range[1]).format("YYYY-MM-DD"))+"\n                ")]):t._e(),e.contrastResults?i("div",[t._v("\n                    "+t._s(t.moment(t.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                    "+t._s(t.moment(t.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                ")]):t._e(),e.contrastResults?i("div",[t._v("\n                    变化率\n                ")]):t._e()]}}])}),i("veui-table-column",{attrs:{field:"webDomain",width:"150",title:"媒体"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"app",on:{click:function(a){t.toWebReport(e.websiteId,e.webDomain)}}},[i("div",[t._v(t._s(e.webDomain))])])]}}])}),i("veui-table-column",{attrs:{field:"cName",width:"180",title:"计费名"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"app",on:{click:function(a){t.toCIdReport(e.cId,e.cName)}}},[i("div",[t._v(t._s(e.cName))])])]}}])}),i("veui-table-column",{attrs:{field:"view",width:"130",title:"广告展现量",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.contrastResults?t._e():i("div",[t._v(t._s(t.formatLocal(e.view)))]),e.contrastResults?i("div",{staticClass:"table-cell"},[i("small-card",{attrs:{now:t.formatLocal(e.view),ago:t.formatLocal(e.contrastResults.view),diff:t.formatLocal(e.diffResults.view)}})],1):t._e()]}}])}),i("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.contrastResults?t._e():i("div",[t._v(t._s(t.formatLocal(e.income)))]),e.contrastResults?i("div",{staticClass:"table-cell"},[i("small-card",{attrs:{now:t.formatLocal(e.income),ago:t.formatLocal(e.contrastResults.income),diff:t.formatLocal(e.diffResults.income)}})],1):t._e()]}}])}),i("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.contrastResults?t._e():i("div",[t._v(t._s(t.formatLocal(e.click)))]),e.contrastResults?i("div",{staticClass:"table-cell"},[i("small-card",{attrs:{now:t.formatLocal(e.click),ago:t.formatLocal(e.contrastResults.click),diff:t.formatLocal(e.diffResults.click)}})],1):t._e()]}}])}),i("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.contrastResults?t._e():i("div",[t._v(t._s(t.formatLocal(e.ecpm)))]),e.contrastResults?i("div",{staticClass:"table-cell"},[i("small-card",{attrs:{now:t.formatLocal(e.ecpm),ago:t.formatLocal(e.contrastResults.ecpm),diff:t.formatLocal(e.diffResults.ecpm)}})],1):t._e()]}}])}),i("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.contrastResults?t._e():i("div",[t._v(t._s(t.toPercent(e.clickRatio)))]),e.contrastResults?i("div",{staticClass:"table-cell"},[i("small-card",{attrs:{now:t.toPercent(e.clickRatio),ago:t.toPercent(e.contrastResults.clickRatio),diff:t.formatLocal(e.diffResults.clickRatio)}})],1):t._e()]}}])}),i("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.contrastResults?t._e():i("div",[t._v(t._s(t.formatLocal(e.cpc)))]),e.contrastResults?i("div",{staticClass:"table-cell"},[i("small-card",{attrs:{now:t.formatLocal(e.cpc),ago:t.formatLocal(e.contrastResults.cpc),diff:t.formatLocal(e.diffResults.cpc)}})],1):t._e()]}}])})],1),i("veui-dialog",{attrs:{open:t.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(e){t.subscribeVisible=e}}},[t.subscribeVisible?i("div",{staticClass:"inner"},[i("div",{staticClass:"gray-line"}),i("veui-form",{ref:"form",attrs:{data:t.store.subData},on:{submit:t.handleSubmit,invalid:t.handleInvalid}},[i("div",{staticClass:"name"},[i("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:t.rule}},[i("veui-input",{attrs:{placeholder:"网盟推广代码位报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:t.store.subData.name,callback:function(e){t.$set(t.store.subData,"name",e)},expression:"store.subData.name"}})],1)],1),i("div",[i("div",{staticClass:"name"},[i("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:t.rule}},[i("veui-select",{attrs:{options:t.store.freRule},model:{value:t.store.subData.fre,callback:function(e){t.$set(t.store.subData,"fre",e)},expression:"store.subData.fre"}})],1)],1),i("div",{staticClass:"name small"},[i("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:t.rule}},t._l(t.store.saveFormType,function(e){var a=e.value,s=e.label;return i("veui-radio",{key:a,attrs:{value:a},model:{value:t.store.subData.type,callback:function(e){t.$set(t.store.subData,"type",e)},expression:"store.subData.type"}},[t._v(t._s(s))])}))],1),i("div",{staticClass:"text"},[i("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:t.emailRule}},[i("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:t.store.subData.email,callback:function(e){t.$set(t.store.subData,"email",e)},expression:"store.subData.email"}})],1)],1)]),i("div",{staticClass:"form-operation"},[i("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[t._v("确认")]),i("veui-button",{staticClass:"overlay-button",on:{click:t.subCancel}},[t._v("取消")])],1)])],1):t._e(),i("template",{slot:"foot"},[i("div")])],2),i("veui-overlay",{attrs:{target:"slot",options:{attachment:"top left",targetAttachment:"top left",offset:"-40px 0px"},open:t.relativeVisible,"overlay-class":"slot-filter-overlay"},on:{"update:open":function(e){t.relativeVisible=e}}},[i("div",{directives:[{name:"outside",rawName:"v-outside:toggle",value:t.closeRelative,expression:"closeRelative",arg:"toggle"}],attrs:{tabindex:"-1"}},[i("veui-searchbox",{attrs:{placeholder:"请输入代码位ID"},on:{search:t.searchSlot},model:{value:t.store.slotFliter.keyword,callback:function(e){t.$set(t.store.slotFliter,"keyword",e)},expression:"store.slotFliter.keyword"}}),i("select-trans",{attrs:{leftOp:{name:"代码位列表",length:t.store.sLotTotalCount,option:{"代码位名称":"name","代码位ID":"tu"}},rightOp:{name:"已选代码位",option:{"代码位名称":"name","代码位ID":"tu"}},leftData:t.store.allSlot,itemKey:"tu",idValue:t.store.filter.adPositionId,pagOp:t.store.slotFliter,pageCount:t.store.sLotTotalCount,isSelectedAll:t.adpListDisable},on:{slotTo:t.slotTo,subCancelAdp:t.subCancelAdp,idInput:function(t){return e.store.filter.adPositionId=t}},model:{value:t.store.selectedSlot,callback:function(e){t.$set(t.store,"selectedSlot",e)},expression:"store.selectedSlot"}})],1)]),i("veui-dialog",{attrs:{open:t.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(e){t.downloadVisible=e}}},[t.downloadVisible?i("div",{staticClass:"inner"},[i("div",{staticClass:"gray-line"}),i("div",{staticClass:"name"},[i("span",{staticClass:"label"},[t._v("名称：")]),i("veui-input",{attrs:{placeholder:"网盟推广代码位报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:t.store.downloadData.fileName,callback:function(e){t.$set(t.store.downloadData,"fileName",e)},expression:"store.downloadData.fileName"}})],1),i("div",{staticClass:"name small"},[i("span",{staticClass:"label"},[t._v("附件类型：")]),t._l(t.store.saveFormType,function(e){var a=e.value,s=e.label;return i("veui-radio",{key:a,attrs:{value:a},model:{value:t.store.downloadData.type,callback:function(e){t.$set(t.store.downloadData,"type",e)},expression:"store.downloadData.type"}},[t._v(t._s(s))])})],2)]):t._e(),i("template",{slot:"foot"},[i("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:t.downloadReport}},[t._v("保存")]),i("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:t.cancelDownload}},[t._v("取消")])],1)],2)],2)},[],!1,null,null,null));wi.options.__file="AdpReportView.vue";var ji=wi.exports,ki=new Date((new Date).setHours(0,0,0,0)),Si=new Date(ki-864e5),xi=new Date(ki-0-1e3),Ri=function(e){function t(){var e,a,s;Object(i.a)(this,t);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return s=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(n))),Object(O.a)(Object(_.a)(Object(_.a)(s)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"range",[Si,xi]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(s)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(s)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(s)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filter",Object(v.a)({},Q()(s.filter,"timeRange"),(a={order:"desc",orderBy:"time",orders:"desc",orderBys:"time",keyword:"",dimensions:"",timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,cpc",begin:s.range?w()(s.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:s.range?w()(s.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")},Object(O.a)(a,"dimensions","cName,cId,websiteId,webDomain,adPositionName,adPositionId"),Object(O.a)(a,"filterFields","rtbTypeId,sellTypeId,getAdType,adPositionId"),a))),Object(O.a)(Object(_.a)(Object(_.a)(s)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"subData",{name:"网盟推广报告_".concat(s.format(s.filter.begin),"~").concat(s.format(s.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"downloadData",{fileName:"网盟推广报告_".concat(s.format(s.filter.begin),"~").concat(s.format(s.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(s)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(s)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"selectedSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"sLotTotalCount",0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"id",""),Object(O.a)(Object(_.a)(Object(_.a)(s)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"chart",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"lastClickLeName",""),s}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getReportAllQuery,this.getApp=this.api.getApp,this.slotDetail=this.api.adPostiionsDetails,this.getSlotList=this.api.getAppcoSlotList,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport;var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin&&(this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:xi]),e.end&&!e.begin&&(this.range=[Si,w()(e.end)._d]);var a=[],i=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=i/864e5,a[1]=w()(this.filter.begin).valueOf()-864e5,a[0]=w()(a[1]).valueOf()-i,a[0]=w()(a[0]).format("YYYYMMDD"),a[1]=w()(a[1]).format("YYYYMMDD"),e.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(a[0])._d,w()(a[1])._d])}},{key:"initListData",value:function(){}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"prepareData",value:function(e){return e}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","ecpm","click","clickRatio","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"adpsinglereport",adpId:this.id});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var Ti,Ii=Object(u.a)(G.a,Ri,{name:"AdpWebsiteReportAd",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"datepicker-self":ba.a,"veui-tabs":Sa.a,"veui-tab":F.a,"small-card":ya.a},data:function(){return{dayCount:1,isCompared:!1,adpName:"",index:0,defaultDimensions:"cName,cId,websiteId,webDomain,adPositionName,adPositionId",adpListDisable:!1,relativeVisible:!1,legendSelect:["预计收入（元）","eCPM（元）"],noemail:!1,openFilters:!0,openEditPage:!1,subscribeVisible:!1,downloadVisible:!1,field:"rtbTypeId,sellTypeId,getAdType,",value:"0|1|1|",edit:{type:"",id:""},compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a,outside:Ra.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},created:function(){},mounted:function(){var e=this;this.store.id=this.$route.params.id;var t={tuIdList:"92233720"+(Number(this.$route.params.id.substring(1))+32559808512)};this.store.slotDetail(t).then(function(t){e.adpName=t[0].adPosDetail.name}).catch(function(e){});var a={filterFields:this.field+"adPositionId",filterValues:this.value+this.store.id,dimensions:this.defaultDimensions};this.store.filter=Object(v.a)({},this.store.filter,a),this.refreshTableByFilter(),this.getGeneralData(a),this.getChartData(a)},computed:{chartOptions:function(){return this.store.chartData}},methods:{toWebReport:function(e,t){this.global.router.push({path:"/report/media/detail/".concat(e,"/").concat(t),query:{websiteId:e,begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterValues:"0|1|".concat(e)}})},toCIdReport:function(e,t){this.global.router.push({path:"/report/cname/detail/".concat(t,"/").concat(e),query:{begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterValues:"0|1|".concat(e)}})},closeRelative:function(e){e&&e.target&&e.target.className&&-1<e.target.className.indexOf("filters")&&-1<e.target.className.indexOf("report")||(this.relativeVisible=!1)},getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,cpc",filterFields:this.store.filterFields,filterValues:this.store.filterValues};delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),0===e.diffResults.length&&(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getChartData:function(e){var t={};"CONFIRMED"===this.store.status&&(t={contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD")});var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,cpc"};delete e.dimensions,this.store.getChart(Object(v.a)({},a,t,e))},refreshChartByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,cpc",filterFields:this.field+"adPositionId",filterValues:this.value+this.store.id};this.getChartData(e)},formatLocal:function(e){return null===e?0:"number"==typeof e||"string"==typeof e?e.toLocaleString():e},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]},format:function(e){return w()(e).format("YYYY-MM-DD")},toPercent:function(e){if(null===e)return"0%";var t=Number(e);return(t=t.toFixed(2))+"%"},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"网盟推广报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"网盟推广报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},subCancelAdp:function(){this.relativeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,e.appId&&delete e.appId,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},refreshGeneralDataByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm,cpc",filterFields:this.field+"adPositionId",filterValues:this.value+this.store.id};this.getGeneralData(e)},refreshTableByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,cpc",filterFields:this.field+"adPositionId",filterValues:this.value+this.store.id,dimensions:this.defaultDimensions,pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};"CONFIRMED"===this.store.status?(e.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),e.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")):(e.contrastBegin="",e.contrastEnd=""),this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},compareDate:function(e){},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(Ti=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return Ti.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),Fi=(a("11d5"),Object(p.a)(Ii,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view"},[a("h3",{staticClass:"title"},[e._v("代码位报告 > "+e._s(e.adpName)+"（ID: "+e._s(e.$route.params.id)+"）")]),a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                    ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},on:{select:e.compareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("订阅\n                ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("下载\n                ")],1)],1)]),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,isWebsite:!0,compareData:e.store.compareData}}),a("veui-tabs",{attrs:{ui:"block",index:e.index},on:{"update:index":function(t){e.index=t}}},[a("veui-tab",{attrs:{label:"分日",name:"day"}},[a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1)],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"adposition"},[e._v(e._s(e.formatTime(t.time)))]):e._e(),t.contrastResults?e._e():a("div",[e._v(e._s(e.formatTime(t.time)))]),t.contrastResults?a("div",[e._v(e._s(e.formatTime(t.contrastResults.time)))]):e._e(),t.contrastResults?a("div",[e._v("变化率")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"webDomain",width:"150",title:"媒体"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"app",on:{click:function(a){e.toWebReport(t.websiteId,t.webDomain)}}},[a("div",[e._v(e._s(t.webDomain))])])]}}])}),a("veui-table-column",{attrs:{field:"cName",width:"180",title:"计费名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"app",on:{click:function(a){e.toCIdReport(t.cId,t.cName)}}},[a("div",[e._v(e._s(t.cName))])])]}}])}),a("veui-table-column",{attrs:{field:"view",width:"130",title:"广告展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income),ago:e.formatLocal(t.contrastResults.income),diff:e.formatLocal(t.diffResults.income)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm),ago:e.formatLocal(t.contrastResults.ecpm),diff:e.formatLocal(t.diffResults.ecpm)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio),ago:e.toPercent(t.contrastResults.clickRatio),diff:e.formatLocal(t.diffResults.clickRatio)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.cpc)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc),ago:e.formatLocal(t.contrastResults.cpc),diff:e.formatLocal(t.diffResults.cpc)}})],1):e._e()]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"网盟推广报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s))])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"网盟推广报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s))])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));Fi.options.__file="AdpReportAdView.vue";var Ni=Fi.exports,Ai=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","过滤策略"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tableSelectable",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{keyword:"",appId:1,orderBy:"createTime"})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{name:"",dsp:[],industry:[],adurlSelect:"",vulgar:!1,isBeauty:!1,packageShield:"",keywordShield:"",price:0,regionSelect:[],scheduleSelect:{}}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"buttonType",{dsp:0,industry:0,adurl:0,material:0,package:0,keyword:0,region:0,schedule:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dspList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"industryList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"detail",{}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getRouteQuery({}).keyword,this.scrollNav(),this.listRequester=this.api.getProList,this.createFilter=this.api.createFilter,this.filterDitail=this.api.filterDitail,this.editFilter=this.api.editFilter,this.deleteFilter=this.api.deleteFilter;var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e)}},{key:"scrollNav",value:function(){var e=document.getElementsByClassName("ria-sidebar sidebar")[0],t=document.documentElement.scrollTop||document.body.scrollTop;window.addEventListener("scroll",function(){t=document.documentElement.scrollTop||document.body.scrollTop,e.style.top=80<=t?0:80-t+"px"},!1)}},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),Mi=(a("6b54"),a("9a36")),Yi=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"type",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"authDSP",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{name:"",dsp:[],industry:[],advertiser:"",vulgar:!1,beauty:!1,actionType:[],packageName:"",keyword:"",price:null,region:[],weektime:{}}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"buttonType",{dsp:0,industry:0,advertiser:0,material:0,package:0,keyword:0,region:0,weektime:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dspList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"industryList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"id",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"detail",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"regionsOp",[]),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;this.regionsOp=Mi.a.REGION_LIST,this.processData(this.regionsOp),Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getAuth(),this.createRequester=this.api.createFilter,this.detailRequester=this.api.filterDitail,this.updateRequester=this.api.editFilter,this.getDsp=this.api.getDsp,this.getIndustry=this.api.getIndustry,this.authDSP&&this.getDsp().then(function(t){e.dspList=t,e.processData(e.dspList)}),this.getIndustry().then(function(t){e.industryList=t,e.processData(e.industryList)})}},{key:"initFormData",value:function(e){this.detailRequester&&this.id&&this.requestDetail({},{initialData:e})}},{key:"getAuth",value:function(){this.authDSP=this.global.user.authMap["mssp.protect.dsp.modify"]&&"editable"===this.global.user.authMap["mssp.protect.dsp.modify"]}},{key:"adaptData",value:function(e){this.detail=st()(e),this.detail.advertiser=this.detail.advertiser.join("\n"),this.detail.packageName=this.detail.packageName.join("\n"),this.detail.keyword&&(this.detail.keyword=this.detail.keyword.join("\n"));var t=[];this.detail.weektime&&(t=st()(this.detail.weektime));for(var a={},i=0;i<t.length;i++)if((i+1)%2==0){var s=Number(t[i].substr(0,1));t[i-1]=t[i-1].slice(1),t[i]=t[i].slice(1);var l=[];l.push(Number(t[i-1])),l.push(Number(t[i])-1),a[s]||(a[s]=[]),a[s].push(l)}return a[7]&&(a[0]=st()(a[7]),delete a[7]),this.detail.weektime=a,this.detail.dsp=this.detail.dspDetail||[],this.detail.industry=this.detail.industryDetail||[],this.detail.vulgar=!!this.detail.vulgar,this.detail.beauty=!!this.detail.beauty,this.formData=Object(v.a)({},this.formData,this.detail),this.buttonType={dsp:0,industry:0,advertiser:0,material:0,package:0,keyword:0,region:0,weektime:0},this.detail.dsp&&0<this.detail.dsp.length&&(this.buttonType.dsp=1),this.detail.industry&&0<this.detail.industry.length&&(this.buttonType.industry=1),e.advertiser&&0<e.advertiser.length&&(this.buttonType.advertiser=1),(e.vulgar||e.beauty||e.actionType&&0<e.actionType.length)&&(this.buttonType.material=1),e.packageName&&0<e.packageName.length&&(this.buttonType.package=1),e.keyword&&0<e.keyword.length&&(this.buttonType.keyword=1),e.region&&0<e.region.length&&(this.buttonType.region=1),e.weektime&&0<e.weektime.length&&(this.buttonType.weektime=1),rt()(this.formData,function(t,a){return nt()(e[a])?t:e[a]})}},{key:"processData",value:function(e){var t=this;Array.isArray(e)&&e.length&&e.forEach(function(e){e.label=e.text,e.value=e.id,t.processData(e.children)})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"submit",value:function(e){if("create"===this.pageType&&this.createRequester){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});var t=st()(this.formData);t.advertiser&&this.buttonType.advertiser?(t.advertiser=t.advertiser.replace(/\n/g,"-"),t.advertiser=t.advertiser.split("-"),t.advertiser=this.dealTextArea(t.advertiser)):t.advertiser=[],t.packageName&&this.buttonType.package?(t.packageName=t.packageName.replace(/\n/g,"-"),t.packageName=t.packageName.split("-"),t.packageName=this.dealTextArea(t.packageName)):t.packageName=[],t.keyword&&this.buttonType.keyword?(t.keyword=t.keyword.replace(/\n/g,"-"),t.keyword=t.keyword.split("-"),t.keyword=this.dealTextArea(t.keyword)):t.keyword=[],this.buttonType.dsp||(t.dsp=[]),this.buttonType.industry||(t.industry=[]),this.buttonType.region||(t.region=[]),this.buttonType.material||(t.vulgar=0,t.beauty=0,t.actionType=[]),this.buttonType.weektime||(t.weektime=[]),t.vulgar=t.vulgar?1:0,t.beauty=t.beauty?1:0;var a=[];return t.weektime[0]&&(t.weektime[7]=st()(t.weektime[0]),delete t.weektime[0]),Object.keys(t.weektime).forEach(function(e){for(var i in t.weektime[e]){t.weektime[e][i]=st()(t.weektime[e][i]),t.weektime[e][i][0]<10&&(t.weektime[e][i][0]="0"+t.weektime[e][i][0]),t.weektime[e][i][1]+=1,t.weektime[e][i][1]<10&&(t.weektime[e][i][1]="0"+t.weektime[e][i][1]);var s=parseInt(e,10).toString();a.push(s+t.weektime[e][i][0]),a.push(s+t.weektime[e][i][1])}}),t.weektime=a,t.appId=1,this.requestCreate(t)}if("edit"===this.pageType&&this.updateRequester){var i=st()(this.formData);i.advertiser&&this.buttonType.advertiser?(i.advertiser=i.advertiser.replace(/\n/g,"-"),i.advertiser=i.advertiser.split("-"),i.advertiser=this.dealTextArea(i.advertiser)):i.advertiser=[],i.packageName&&this.buttonType.package?(i.packageName=i.packageName.replace(/\n/g,"-"),i.packageName=i.packageName.split("-"),i.packageName=this.dealTextArea(i.packageName)):i.packageName=[],i.keyword&&this.buttonType.keyword?(i.keyword=i.keyword.replace(/\n/g,"-"),i.keyword=i.keyword.split("-"),i.keyword=this.dealTextArea(i.keyword)):i.keyword=[],this.buttonType.dsp||(i.dsp=[]),this.buttonType.industry||(i.industry=[]),this.buttonType.region||(i.region=[]),this.buttonType.material||(i.vulgar=0,i.beauty=0,i.actionType=[]),this.buttonType.weektime||(i.weektime=[]),i.vulgar=i.vulgar?1:0,i.beauty=i.beauty?1:0;var s=[];return i.weektime[0]&&(i.weektime[7]=st()(i.weektime[0]),delete i.weektime[0]),Object.keys(i.weektime).forEach(function(e){for(var t in i.weektime[e]){i.weektime[e][t]=st()(i.weektime[e][t]),i.weektime[e][t][0]<10&&(i.weektime[e][t][0]="0"+i.weektime[e][t][0]),i.weektime[e][t][1]+=1,i.weektime[e][t][1]<10&&(i.weektime[e][t][1]="0"+i.weektime[e][t][1]);var a=parseInt(e,10).toString();s.push(a+i.weektime[e][t][0]),s.push(a+i.weektime[e][t][1])}}),i.weektime=s,i.appId=1,this.requestUpdate(i)}throw new Error("unknown form page type: ".concat(this.pageType,"!"))}},{key:"invalid",value:function(e){}},{key:"success",value:function(e){}},{key:"fail",value:function(e){}}]),t}(ve.a),Li=a("cbe3"),Ei=a("53dc"),Pi=a("804d"),Vi=a("b32f"),Bi=(new K.a({alias:"NORMAL",text:"正常",value:0},{alias:"PAUSE",text:"停用",value:1},{alias:"DELETE",text:"删除",value:2}),new K.a({alias:"LANDING_PAGE",text:"链接跳转",value:"landingpage"},{alias:"DOWNLOAD",text:"点击下载",value:"download"},{alias:"MAP",text:"地图",value:"map"},{alias:"SMS",text:"短信",value:"sms"},{alias:"MAIL",text:"邮件",value:"mail"},{alias:"PHONE",text:"电话",value:"phone"},{alias:"APP",text:"APP唤醒",value:"app"}));function $i(e){return e.replace(/(^\s*)|(\s*$)/g,"")}Xt.a.addRule("less100",{validate:function(e,t){var a=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e.replace(/\n/g,"-").split("-"));return!!At()(e)||a.length<=t},message:function(e,t){return"最多可以输入".concat(e,"条")},priority:100});var zi=Object(u.a)(ye.a,Yi,{name:"ProtectRuleFormView",components:{"veui-fieldset":ue.a,"veui-field":ce.a,"veui-input":ge.a,"veui-tabs":Sa.a,"veui-tab":F.a,"veui-transfer":Xe.a,"veui-button":S.a,"veui-radio-group":Ce.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-date-picker":Jt.a,"veui-select":N.a,"veui-textarea":$e.a,"veui-calendar":Ei.a,"veui-radio-button-group":De.a,"veui-switch":we.a,"veui-label":Li.a,"veui-checkbox-group":Qt.a,"veui-number-input":_e.a,"veui-region-picker":Pi.a,"veui-schedule":Vi.a},data:function(){return{dspData:[{label:"推广计划007",value:1},{label:"推广计划009",value:3}],searchData:[{label:"链接跳转",value:0},{label:"点击下载",value:1}],nameRule:[{name:"required",value:!0,triggers:"blur,input",priority:99},{triggers:"change, blur, input",name:"minLength",value:2,validate:function(e,t){return $i(e).length>=t},message:function(e,t){return"不能为空"},priority:100},{triggers:"change, blur",name:"maxLength",value:40,validate:function(e,t){return!!At()($i(e))||$i(e).length<t},message:function(e,t){return"字符长度不能多于".concat(e,"，当前长度").concat(t.length)},priority:100}],DSPButton:[{label:"不限",value:0},{label:"屏蔽",value:1}],RegionButton:[{label:"不限",value:0},{label:"定向地域",value:1}],ScheduleButton:[{label:"不限",value:0},{label:"指定日程",value:1}],regions:[{label:"北京",value:0},{label:"上海",value:1}],shortcuts:[{label:"全周",selected:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0}},{label:"工组日",selected:{1:!0,2:!0,3:!0,4:!0,5:!0}},{label:"周末",selected:{0:!0,6:!0}}],statuses:[{label:"已投放",name:"selected"},{label:"未投放",name:"available"}],titleTip:!1,vulgarTip:!1,beautyTip:!1,ActionType:Bi,isDetail:!1,isEdit:!1,less100Rule:[{triggers:"change, blur",name:"less100",value:100}],less200Rule:[{triggers:"change, blur",name:"less100",value:200}],less300Rule:[{triggers:"change, blur",name:"less100",value:300}]}},mounted:function(){xe.a.hideHeaderDom(),"detail"===this.store.pageType?this.isDetail=!0:"edit"===this.store.pageType&&(this.isEdit=!0)},beforeDestroy:function(){xe.a.addHeaderDom()},computed:{allDspCount:function(){return this.store.dspList.length},allIndustryCount:function(){for(var e=0,t=0;t<this.store.industryList.length;t++)for(var a=0;a<this.store.industryList[t].children.length;a++)e+=1;return e}},methods:{nameTrim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},goBack:function(){this.redirectTo("/union/protect")},selectAll:function(){this.$emit("selectall")}}}),qi=(a("cde3"),Object(p.a)(zi,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common filter-form",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),[a("h3",{staticClass:"title edit-form-title"},[e._v("新建策略")]),a("veui-icon",{ref:"notice",staticClass:"title-notice-icon",attrs:{name:"question-circle-o"}}),a("veui-tooltip",{attrs:{position:"bottom-start",target:"notice",trigger:"hover","overlay-class":"notice-tooltip"}},[e._v("\n            设置投放限制后，会减少广告返回数量，可能会降低广告填充率，请谨慎配置。\n        ")])],a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title"},[a("veui-field",{attrs:{label:"策略名称:",name:"name",field:"name",rules:e.nameRule,disabled:e.isDetail,tip:"最多可输入40个字符"}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",attrs:{placeholder:"为你的策略起个名字吧~",disabled:e.isDetail},model:{value:e.store.formData.name,callback:function(t){e.$set(e.store.formData,"name",t)},expression:"store.formData.name"}})],1)])],1),a("div",{staticClass:"edit-form-card"},[a("h3",{staticClass:"card-title"},[e._v("屏蔽规则")]),e.store.authDSP?a("veui-field",{class:{"has-sub-card":e.store.buttonType.dsp},attrs:{label:"DSP屏蔽:",name:"dsp",field:"dsp",disabled:e.isDetail}},[a("div",{staticClass:"card-right black-button-tabs"},e._l(e.DSPButton,function(t){return a("veui-button",{key:t.value,class:{active:e.store.buttonType.dsp===t.value},attrs:{disabled:e.isDetail},on:{click:function(a){e.store.buttonType.dsp=t.value}}},[e._v("\n                            "+e._s(t.label)+"\n                        ")])}))]):e._e(),e.store.buttonType.dsp&&e.store.authDSP?a("div",{staticClass:"sub-card has-sub-card"},[a("veui-field",{attrs:{name:"dsp-select",field:"dsp-select",disabled:e.isDetail}},[a("div",{staticClass:"card-right"},[a("veui-transfer",{staticClass:"transfer-userdefined",attrs:{datasource:e.store.dspList,"candidate-placeholder":"请输入dsp名称","selected-placeholder":"请输入dsp名称",disabled:e.isDetail},scopedSlots:e._u([{key:"candidate-item-label",fn:function(t){return[a("div",{staticClass:"candidate-item-left"},[e._v(e._s(t.item.label))])]}}]),model:{value:e.store.formData.dsp,callback:function(t){e.$set(e.store.formData,"dsp",t)},expression:"store.formData.dsp"}},[a("template",{slot:"candidate-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                        全部DSP\n                                        "),a("span",{staticClass:"number"},[e._v(e._s(e.allDspCount))])])]),a("template",{slot:"selected-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                        已选\n                                        "),a("span",{staticClass:"number"},[e._v(e._s(e.store.formData.dsp.length))])])])],2)],1)])],1):e._e(),a("veui-field",{class:{"has-sub-card":e.store.buttonType.industry},attrs:{label:"行业屏蔽:",name:"industry-button",field:"industry-button",disabled:e.isDetail}},[a("div",{staticClass:"card-right black-button-tabs"},[a("veui-radio-button-group",{attrs:{items:e.DSPButton},model:{value:e.store.buttonType.industry,callback:function(t){e.$set(e.store.buttonType,"industry",t)},expression:"store.buttonType.industry"}})],1)]),e.store.buttonType.industry?a("div",{staticClass:"sub-card has-sub-card"},[a("veui-field",{attrs:{name:"industry",field:"industry",disabled:e.isDetail}},[a("div",{staticClass:"card-right"},[a("veui-transfer",{staticClass:"transfer-userdefined",attrs:{datasource:e.store.industryList,"candidate-placeholder":"请输入行业名称","selected-placeholder":"请输入行业名称",disabled:e.isDetail},scopedSlots:e._u([{key:"candidate-item-label",fn:function(t){return[a("div",{staticClass:"candidate-item-left"},[e._v(e._s(t.item.label))])]}}]),model:{value:e.store.formData.industry,callback:function(t){e.$set(e.store.formData,"industry",t)},expression:"store.formData.industry"}},[a("template",{slot:"candidate-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                        全部行业\n                                        "),a("span",{staticClass:"number"},[e._v(e._s(e.allIndustryCount))])])]),a("template",{slot:"selected-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                        已选\n                                        "),a("span",{staticClass:"number"},[e._v(e._s(e.store.formData.industry.length))])])])],2)],1)])],1):e._e(),a("veui-field",{class:{"has-sub-card":e.store.buttonType.advertiser},attrs:{label:"广告主URL屏蔽:",name:"adurl",field:"adurl",disabled:e.isDetail}},[a("div",{staticClass:"card-right black-button-tabs"},[a("veui-radio-button-group",{attrs:{items:e.DSPButton},model:{value:e.store.buttonType.advertiser,callback:function(t){e.$set(e.store.buttonType,"advertiser",t)},expression:"store.buttonType.advertiser"}})],1)]),e.store.buttonType.advertiser?a("div",{staticClass:"sub-card has-sub-card"},[a("veui-field",{attrs:{name:"advertiser",field:"advertiser",disabled:e.isDetail,rules:e.less100Rule}},[a("div",{staticClass:"card-right"},[a("veui-textarea",{staticClass:"edit-textarea-large",attrs:{autoresize:"","line-number":"",lineNumber:"",rows:"8",placeholder:"输入希望屏蔽的内容页完整URL(如 www.**.com)",disabled:e.isDetail},model:{value:e.store.formData.advertiser,callback:function(t){e.$set(e.store.formData,"advertiser",t)},expression:"store.formData.advertiser"}})],1)])],1):e._e(),a("veui-field",{attrs:{label:"物料屏蔽:",name:"material",field:"material",disabled:e.isDetail}},[a("div",{staticClass:"card-right black-button-tabs"},[a("veui-radio-button-group",{attrs:{items:e.DSPButton},model:{value:e.store.buttonType.material,callback:function(t){e.$set(e.store.buttonType,"material",t)},expression:"store.buttonType.material"}})],1)]),e.store.buttonType.material?a("div",{staticClass:"sub-card has-sub-card"},[a("veui-field",{attrs:{label:"低俗度过滤:",name:"vulgar",field:"vulgar",disabled:e.isDetail}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-icon",{ref:"vulgar-tip",staticClass:"vulgar-radio-icon",attrs:{name:"question-circle-o"}}),a("veui-tooltip",{attrs:{position:"bottom-start",target:"vulgar-tip",trigger:"hover","overlay-class":"notice-tooltip",open:e.vulgarTip},on:{"update:open":function(t){e.vulgarTip=t}}},[e._v("\n                                    选择屏蔽后，将只展现经百度标签团队评定为非低俗的物料，即：屏蔽所有评定为低俗的物料以及由于某些原因未打上标签的物料。\n                                ")]),a("veui-switch",{staticClass:"filed-switcher",model:{value:e.store.formData.vulgar,callback:function(t){e.$set(e.store.formData,"vulgar",t)},expression:"store.formData.vulgar"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.store.formData.vulgar,expression:"store.formData.vulgar"}],staticClass:"field-text"},[e._v("已开启屏蔽")])],1)])]),e.store.buttonType.material&&"editable"===e.global.user.authMap["mssp.protect.beauty.modify"]?a("veui-field",{attrs:{label:"美观度过滤:",name:"beauty",field:"beauty",disabled:e.isDetail}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-switch",{staticClass:"filed-switcher",model:{value:e.store.formData.beauty,callback:function(t){e.$set(e.store.formData,"beauty",t)},expression:"store.formData.beauty"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.store.formData.beauty,expression:"store.formData.beauty"}],staticClass:"field-text"},[e._v("已开启屏蔽")])],1)])]):e._e(),e.store.buttonType.material&&"editable"===e.global.user.authMap["mssp.protect.actiontype.modify"]?a("veui-field",{attrs:{label:"物料动作屏蔽:",name:"actionType",field:"actionType",disabled:e.isDetail}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-checkbox-group",{attrs:{items:e.ActionType.toOptions()},model:{value:e.store.formData.actionType,callback:function(t){e.$set(e.store.formData,"actionType",t)},expression:"store.formData.actionType"}})],1)])]):e._e()],1):e._e(),"editable"===e.global.user.authMap["mssp.protect.package.modify"]?a("veui-field",{class:{"has-sub-card":e.store.buttonType.package},attrs:{label:"包名屏蔽:",name:"package",field:"package",disabled:e.isDetail}},[a("div",{staticClass:"card-right black-button-tabs"},[a("veui-radio-button-group",{attrs:{items:e.DSPButton},model:{value:e.store.buttonType.package,callback:function(t){e.$set(e.store.buttonType,"package",t)},expression:"store.buttonType.package"}})],1)]):e._e(),e.store.buttonType.package&&"editable"===e.global.user.authMap["mssp.protect.package.modify"]?a("div",{staticClass:"sub-card has-sub-card"},[a("veui-field",{attrs:{name:"packageName",field:"packageName",disabled:e.isDetail,rules:e.less200Rule}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-textarea",{staticClass:"edit-textarea-large",attrs:{autoresize:"","line-number":"",lineNumber:"",rows:"8",placeholder:"请输入希望屏蔽的广告主包名，如com.baidu.mobilessp",disabled:e.isDetail},model:{value:e.store.formData.packageName,callback:function(t){e.$set(e.store.formData,"packageName",t)},expression:"store.formData.packageName"}})],1)])])],1):e._e(),a("veui-field",{class:{"has-sub-card":e.store.buttonType.keyword},attrs:{label:"关键词屏蔽:",name:"keyWord",field:"keyWord",disabled:e.isDetail}},[a("div",{staticClass:"card-right black-button-tabs"},[a("veui-radio-button-group",{attrs:{items:e.DSPButton},model:{value:e.store.buttonType.keyword,callback:function(t){e.$set(e.store.buttonType,"keyword",t)},expression:"store.buttonType.keyword"}})],1)]),e.store.buttonType.keyword?a("div",{staticClass:"sub-card has-sub-card"},[a("veui-field",{attrs:{name:"keyword",field:"keyword",disabled:e.isDetail,rules:e.less300Rule}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-textarea",{staticClass:"edit-textarea-large",attrs:{autoresize:"","line-number":"",lineNumber:"",rows:"8",placeholder:"请输入希望屏蔽的关键词",disabled:e.isDetail},model:{value:e.store.formData.keyword,callback:function(t){e.$set(e.store.formData,"keyword",t)},expression:"store.formData.keyword"}})],1)])])],1):e._e(),"editable"===e.global.user.authMap["mssp.protect.price.modify"]?a("veui-field",{attrs:{label:"设置统一底价：",name:"base-price",field:"base-price",disabled:e.isDetail}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-number-input",{staticClass:"base-price",attrs:{min:0,max:1e4},model:{value:e.store.formData.price,callback:function(t){e.$set(e.store.formData,"price",t)},expression:"store.formData.price"}},[a("template",{slot:"before"},[a("span",{staticClass:"price-unit"},[e._v("元/CPM")])])],2),a("span",{staticClass:"field-text"},[e._v("最大不能超过10000元")])],1)])]):e._e()],1)])]),a("template",{slot:"operation"},[e.isDetail?e._e():a("veui-button",{staticClass:"form-button",attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),e.isDetail?e._e():a("veui-button",{staticClass:"form-button",on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,null,null));qi.options.__file="FilterFormView.vue";var Ui=qi.exports,Wi=Object(u.a)(G.a,Ai,{name:"protectRuleList",components:{"veui-fieldset":ue.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-searchbox":Pe.a,"veui-button":S.a,"veui-select":N.a,"veui-dialog":pe.a,"veui-overlay":fe.a,"veui-icon":y.a,FilterForm:Ui,"veui-tooltip":I.a},data:function(){return{deleteVisible:!1,deleteAllVisible:!1,createVisible:!1,deleteId:"",adPositionVisible:!1,adPositionId:"",detailId:"",detailType:"",ActionType:Bi}},directives:{autosubmit:Ee.a},methods:{searchList:function(){this.global.searchList(this)},format:function(e){return w()(e).format("YYYYMMDD")},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},goToCreate:function(){this.redirectTo("/union/filterStrategy/create")},goToDetail:function(e){this.redirectTo("/union/filterStrategy/detail?id=".concat(e))},goToEdit:function(e){this.redirectTo("/union/filterStrategy/edit?id=".concat(e))},sureDelete:function(e){var t=this;this.store.deleteFilter({ids:[e],status:0}).then(function(e){t.store.submitSearch()})},deleteSelect:function(){this.deleteAllVisible=!0},deleteAll:function(){var e=this;this.store.deleteFilter({ids:this.store.tableSelected,status:0}).then(function(t){e.store.submitSearch()})},delSearch:function(){this.store.filter.keyword="",this.store.submitSearch()}}}),Gi=(a("ac80"),Object(p.a)(Wi,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"filter-list-view",style:{display:e.createVisible?"none":"block"}},[a("template",{slot:"filterContent"},[a("veui-field",[a("veui-button",{attrs:{ui:"primary"},on:{click:e.goToCreate}},[e._v("新建过滤策略")])],1),a("veui-button",{staticClass:"delete",attrs:{disabled:0===this.store.tableSelected.length},on:{click:e.deleteSelect}},[e._v("删除\n        ")]),a("veui-field",{staticClass:"message-search",attrs:{field:"key"}},[a("veui-searchbox",{directives:[{name:"autosubmit",rawName:"v-autosubmit.search",modifiers:{search:!0}}],attrs:{filed:"keyword",placeholder:"输入策略名称"},model:{value:e.store.filter.keyword,callback:function(t){e.$set(e.store.filter,"keyword",t)},expression:"store.filter.keyword"}})],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"name",width:"152",title:"策略名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"filter-cell",attrs:{title:t.name}},[e._v(e._s(t.name))])]}}])}),a("veui-table-column",{attrs:{field:"adPositions",width:"152",title:"代码位"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.adPositions&&1==t.adPositions.length?a("div",[a("div",{staticClass:"filter-cell",attrs:{title:t.name}},[e._v(e._s(t.adPositions[0].name))]),a("div",{staticClass:"tableID filter-cell"},[e._v("ID:"+e._s(t.adPositions[0].id))])]):e._e(),t.adPositions&&1<t.adPositions.length?a("div",[a("div",{ref:"adPosition"+t.id,staticClass:"adPosition"},[a("veui-icon",{attrs:{name:"plus-circle-o"}}),a("span",[e._v(e._s(t.adPositions.length)+"个代码位")])],1)]):e._e(),!t.adPositions||t.adPositions&&0===t.adPositions.length?a("div",[e._v("\n                    --\n                ")]):e._e(),t.adPositions&&1<=t.adPositions.length?a("veui-tooltip",{attrs:{position:"bottom-start",target:"adPosition"+t.id,trigger:"click","overlay-class":"filter-hover-overlay"}},e._l(t.adPositions,function(t,i){return a("div",{key:i},[e._v("\n                        "+e._s(t.id)+"  "+e._s(t.name)+"\n                    ")])})):e._e()]}}])}),"editable"===e.global.user.authMap["mssp.protect.dsp.modify"]?a("veui-table-column",{attrs:{field:"dsp",width:"100",title:"DSP屏蔽"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.dsp&&1==t.dsp.length?a("div",{ref:"dsp"+t.id,staticClass:"url",attrs:{title:t.dsp[0]}},[e._v(e._s(t.dsp[0]))]):e._e(),t.dsp&&1<t.dsp.length?a("div",{ref:"dsp"+t.id,staticClass:"url"},[e._v(e._s(t.dsp[0]+"..."))]):e._e(),!t.dsp||t.dsp&&0===t.dsp.length?a("div",[e._v("\n                    --\n                ")]):e._e(),t.dsp&&1<t.dsp.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"dsp"+t.id,"overlay-class":"filter-hover-overlay"}},e._l(t.dsp,function(t,i){return a("span",{key:i},[0!==i?a("span",[e._v("/")]):e._e(),a("span",[e._v(e._s(t))])])})):e._e()]}}])}):e._e(),a("veui-table-column",{attrs:{field:"industry",width:"100",title:"行业屏蔽"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.industry&&1==t.industry.length?a("div",{ref:"industry"+t.id,staticClass:"url",attrs:{title:t.industry[0]}},[e._v(e._s(t.industry[0]))]):e._e(),t.industry&&1<t.industry.length?a("div",{ref:"industry"+t.id,staticClass:"url"},[e._v(e._s(t.industry[0]+"..."))]):e._e(),!t.industry||t.industry&&0===t.industry.length?a("div",[e._v("\n                    --\n                ")]):e._e(),t.industry&&1<=t.industry.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"industry"+t.id,"overlay-class":"filter-hover-overlay"}},e._l(t.industry,function(t,i){return a("span",{key:i},[0!==i?a("span",[e._v("/")]):e._e(),a("span",[e._v(e._s(t))])])})):e._e()]}}])}),a("veui-table-column",{attrs:{field:"advertiser",width:"150",title:"广告主URL屏蔽"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.advertiser&&1==t.advertiser.length?a("div",{ref:"url"+t.id,staticClass:"url",attrs:{title:t.advertiser[0]}},[e._v(e._s(t.advertiser[0]))]):e._e(),t.advertiser&&1<t.advertiser.length?a("div",{ref:"url"+t.id,staticClass:"url"},[e._v(e._s(t.advertiser[0]+"..."))]):e._e(),!t.advertiser||t.advertiser&&0===t.advertiser.length?a("div",[e._v("\n                    --\n                ")]):e._e(),t.advertiser&&1<=t.advertiser.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"url"+t.id,"overlay-class":"filter-hover-overlay"}},e._l(t.advertiser,function(t,i){return a("div",{key:i},[e._v("\n                        "+e._s(t)+"\n                    ")])})):e._e()]}}])}),"editable"===e.global.user.authMap["mssp.protect.beauty.modify"]||"editable"===e.global.user.authMap["mssp.protect.vulgar.modify"]||"editable"===e.global.user.authMap["mssp.protect.actiontype.modify"]?a("veui-table-column",{attrs:{field:"actionType",width:"100",title:"物料动作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.actionType&&1==t.actionType.length?a("div",{ref:"actionType"+t.id,staticClass:"url",attrs:{title:e.ActionType.getTextFromValue(t.actionType[0])}},[e._v(e._s(e.ActionType.getTextFromValue(t.actionType[0])))]):e._e(),t.actionType&&1<t.actionType.length?a("div",{ref:"actionType"+t.id,staticClass:"url"},[e._v(e._s(e.ActionType.getTextFromValue(t.actionType[0])+"..."))]):e._e(),!t.actionType||t.actionType&&0===t.actionType.length?a("div",[e._v("\n                    --\n                ")]):e._e(),t.actionType&&1<=t.actionType.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"actionType"+t.id,"overlay-class":"filter-hover-overlay"}},e._l(t.actionType,function(t,i){return a("div",{key:i},[e.ActionType.getTextFromValue(t)?a("span",[e._v(e._s(e.ActionType.getTextFromValue(t)))]):e._e()])})):e._e()]}}])}):e._e(),a("veui-table-column",{attrs:{field:"packageName",width:"100",title:"包名屏蔽"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.packageName&&1==t.packageName.length?a("div",{ref:"packageName"+t.id,staticClass:"url",attrs:{title:t.packageName[0]}},[e._v(e._s(t.packageName[0]))]):e._e(),t.packageName&&1<t.packageName.length?a("div",{ref:"packageName"+t.id,staticClass:"url"},[e._v(e._s(t.packageName[0]+"..."))]):e._e(),!t.packageName||t.packageName&&0===t.packageName.length?a("div",[e._v("\n                    --\n                ")]):e._e(),t.packageName&&1<=t.packageName.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"packageName"+t.id,"overlay-class":"filter-hover-overlay"}},e._l(t.packageName,function(t,i){return a("div",{key:i},[e._v("\n                        "+e._s(t)+"\n                    ")])})):e._e()]}}])}),a("veui-table-column",{attrs:{field:"keyword",width:"100",title:"关键词屏蔽"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.keyword&&1==t.keyword.length?a("div",{ref:"keyword"+t.id,staticClass:"url"},[e._v(e._s(t.keyword[0]))]):e._e(),t.keyword&&1<t.keyword.length?a("div",{ref:"keyword"+t.id,staticClass:"url"},[e._v(e._s(t.keyword[0]+"..."))]):e._e(),!t.keyword||t.keyword&&0===t.keyword.length?a("div",[e._v("\n                    --\n                ")]):e._e(),t.keyword&&1<=t.keyword.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"keyword"+t.id,"overlay-class":"filter-hover-overlay"}},e._l(t.keyword,function(t,i){return a("span",{key:i},[0!==i?a("span",[e._v("/")]):e._e(),a("span",[e._v(e._s(t))])])})):e._e()]}}])}),a("veui-table-column",{attrs:{field:"createTime",width:"150",title:"创建日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"url nohover"},[e._v(e._s(e.format(t.createTime)))])]}}])}),a("veui-table-column",{attrs:{field:"op",width:"150",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"op"},[a("veui-button",{staticClass:"opbutton",attrs:{ui:"link"},on:{click:function(a){e.goToDetail(t.id)}}},[e._v("查看")]),a("veui-button",{staticClass:"opbutton",attrs:{ui:"link"},on:{click:function(a){e.goToEdit(t.id)}}},[e._v("编辑")]),a("veui-button",{ref:"delete"+t.id,staticClass:"opbutton",attrs:{ui:"link"},on:{click:function(e){t.item.visible=!t.item.visible}}},[e._v("删除")])],1),a("span",[a("veui-tooltip",{attrs:{position:"top",target:"delete"+t.id,trigger:"click","overlay-class":"del-overlay",open:t.item.showDelDialog},on:{"update:open":function(a){e.$set(t.item,"showDelDialog",a)}}},[a("veui-icon",{staticClass:"message-icon",attrs:{name:"exclamation-circle-o"}}),e._v("\n                        确认删除么?\n                        "),a("div",{staticClass:"btn-group"},[a("veui-button",{attrs:{ui:"primary"},on:{click:function(a){e.sureDelete(t.id)}}},[e._v("确定")]),a("veui-button",{staticClass:"cancel",on:{click:function(e){t.item.showDelDialog=!1}}},[e._v("取消")])],1)],1)],1)]}}])})],1),a("veui-dialog",{attrs:{open:e.deleteAllVisible,"overlay-class":"delete-all"},on:{"update:open":function(t){e.deleteAllVisible=t},ok:e.deleteAll,cancel:function(t){e.deleteAllVisible=!1}}},[e._v("\n    确定删除么？\n    ")])],2)},[],!1,null,null,null));Gi.options.__file="FilterListView.vue";var Hi=Gi.exports,Qi=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"axioss",Vt.a.create({paramsSerializer:function(e){return $t.a.stringify(e,{encode:!0})}})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCreate",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{keyword:"",appId:1,orderBy:"createTime"})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hasSoft",!1),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getRouteQuery({}).keyword,this.scrollNav(),this.getAuthRight(),this.listRequester=this.api.getMediaSiteList,this.canCreate=this.api.canCreate,this.deleteMediaSite=this.api.deleteMediaSite;var a=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,a),this.canCreate().then(function(t){e.canCreate=t}).catch(function(e){}),this.axioss.get("/v2/client/medium/software/get").then(function(t){e.hasSoft=!0,t.data&&1===t.data.status&&(e.hasSoft=!1)}).catch(function(t){e.hasSoft=!1})}},{key:"getAuthRight",value:function(){this.authMediumNew=this.global.user.authMap&&"editable"===this.global.user.authMap["mssp.medium.new"],this.authMediumModify=this.global.user.authMap&&"editable"===this.global.user.authMap["mssp.medium.modify"],this.authDeleteApp=this.global.user.authMap&&"editable"===this.global.user.authMap["mssp.medium.status.modify"]}},{key:"scrollNav",value:function(){var e=document.getElementsByClassName("ria-sidebar sidebar")[0],t=document.documentElement.scrollTop||document.body.scrollTop;window.addEventListener("scroll",function(){t=document.documentElement.scrollTop||document.body.scrollTop,e.style.top=80<=t?0:80-t+"px"},!1)}},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.result,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),Ji=a("5b30"),Ki=(new K.a({alias:"NORMAL",text:"正常",value:0},{alias:"PAUSE",text:"停用",value:1},{alias:"DELETE",text:"删除",value:2}),new K.a({alias:"UNKOWN",text:" ",value:0},{alias:"BASE",text:"基础",value:1},{alias:"COMMON",text:"通用",value:2})),Zi=(new K.a({alias:"DREDGED",text:"已开通"},{alias:"AUDITTING",text:"审核中"},{alias:"REJECTED",text:"未通过"},{alias:"UNDREDGED",text:"未开通"}),new K.a({alias:"CPRO",text:"网盟推广合作"})),Xi=new K.a({alias:"ADOPTED",text:"已通过",value:0},{alias:"AUDIT",text:"审核中",value:1},{alias:"REJECTED",text:"未通过",value:2},{alias:"REMOVED",text:"已删除",value:3}),es=new K.a({alias:"FIFTH",text:"1万以下",value:1},{alias:"FOURTH",text:"1万-10万",value:2},{alias:"THIRD",text:"10万-100万",value:3},{alias:"SECOND",text:"100万-1000万",value:4},{alias:"FIRST",text:"1000万以上",value:5}),ts=Object(u.a)(G.a,Qi,{name:"media-site-list",components:{"veui-fieldset":ue.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-searchbox":Pe.a,"veui-button":S.a,"veui-select":N.a,"veui-dialog":pe.a,"veui-overlay":fe.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-tabs":Sa.a,"veui-link":Ji.a,"veui-tab":F.a},data:function(){return{WebQuality:Ki,Business:Zi,SiteStatus:Xi}},directives:{autosubmit:Ee.a},methods:{format:function(e){return w()(e).format("YYYY-MM-DD")},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},goToCreate:function(){this.redirectTo("/union/media/create")},goToEdit:function(e){this.redirectTo("/union/media/edit?id=".concat(e))},toBiddingReport:function(e){var t=this.global.router.resolve({path:"/report/bidding",query:{websiteId:e,dimensions:"webDomain",filterFields:"rtbTypeId,sellTypeId,websiteId",filterValues:"0|1|".concat(e)}});window.open(t.href,"_blank")},sureDelete:function(e){var t=this;this.store.deleteMediaSite({id:e}).then(function(e){t.store.submitSearch()}).catch(function(e){})}}}),as=(a("3482"),Object(p.a)(ts,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"media-list-view"},[a("h3",{staticClass:"media-list-title"},[e._v("媒体管理")]),a("veui-tabs",{attrs:{active:e.$route.path}},[a("veui-tab",{attrs:{label:"网站管理",to:"/union/media"}},[a("list-view",{staticClass:"media-list-view"},[e.store.canCreate?e._e():a("div",{staticClass:"media-tips-remind"},[a("span",[e._v("财务信息填写并审核完成后才可以新建网站，\n                        "),a("veui-link",{attrs:{to:{path:"/financial/manage"}}},[e._v("去填写>>")])],1)]),a("template",{slot:"filterContent"},[a("veui-field",[e.store.authMediumNew?a("veui-button",{attrs:{ui:"primary",disabled:!e.store.canCreate},on:{click:e.goToCreate}},[e._v("新建网站")]):e._e()],1),a("veui-field",{staticClass:"message-search",attrs:{field:"key"}},[a("veui-searchbox",{directives:[{name:"autosubmit",rawName:"v-autosubmit.search",modifiers:{search:!0}}],attrs:{filed:"keyword",placeholder:"搜索网站名称/域名/ID"},model:{value:e.store.filter.keyword,callback:function(t){e.$set(e.store.filter,"keyword",t)},expression:"store.filter.keyword"}})],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"domain",width:"152",title:"网站域名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{ref:"domain"+t.domain,staticClass:"filter-cell"},[e._v(e._s(t.domain))]),a("div",{staticClass:"tableID filter-cell"},[e._v("ID:"+e._s(t.id))]),t.domain&&15<t.domain.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"domain"+t.domain,"overlay-class":"media-hover-overlay"}},[a("span",[e._v("\n                                    "+e._s(t.domain)+"\n                                ")])]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"name",width:"152",title:"网站名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{ref:"name"+t.name,staticClass:"filter-cell"},[e._v(e._s(t.name))]),t.name&&10<t.name.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"name"+t.name,"overlay-class":"media-hover-overlay"}},[a("span",[e._v("\n                                    "+e._s(t.name)+"\n                                ")])]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"bizStatus",width:"120",title:"已开通业务"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.bizStatus&&0<t.bizStatus.length?a("div",{staticClass:"business"},e._l(t.bizStatus,function(t,i){return a("span",{key:i},[e._v("\n                                    "+e._s(e.Business.getTextFromAlias(t.toUpperCase()))+"   \n                                ")])})):e._e(),!t.bizStatus||t.bizStatus&&0===t.bizStatus.length?a("div",{staticClass:"business"},[e._v("--")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"createTime",width:"150",title:"创建日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"url"},[e._v(e._s(e.format(t.createTime)))])]}}])}),a("veui-table-column",{attrs:{field:"state",width:"100",title:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"url"},[a("span",{class:{orange:1===t.state,red:2===t.state}},[e._v("\n                                    "+e._s(e.SiteStatus.getTextFromValue(t.state))+"\n                                ")]),1===t.state||2===t.state?a("veui-icon",{ref:"state-tip"+t.id,staticClass:"title-notice-icon",attrs:{name:"question-circle-o"}}):e._e(),1===t.state?a("veui-tooltip",{attrs:{position:"bottom-end",target:"state-tip"+t.id,trigger:"hover","overlay-class":"media-state-tooltip"}},[e._v("\n                                    审核需要1-2个工作日的时间，请耐心等待。\n                                ")]):e._e(),2===t.state?a("veui-tooltip",{attrs:{position:"bottom-end",target:"state-tip"+t.id,trigger:"hover","overlay-class":"media-state-tooltip"}},[a("span",{staticClass:"table-question-mark-detail"},[e._v("\n                                            您未通过的原因为："+e._s(t.refuseReason)+"。"),a("br"),e._v("如果后续需要重新申请，请点击“修改”并重新保存即可。\n                                        ")])]):e._e()],1)]}}])}),a("veui-table-column",{attrs:{field:"quality",width:"100",title:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"filter-cell"},[e._v(e._s(e.WebQuality.getTextFromValue(t.quality)))])]}}])},[a("template",{slot:"head"},[a("span",[e._v("备注")]),a("veui-icon",{ref:"remark",style:{verticalAlign:"middle",marginLeft:"5px"},attrs:{name:"question-circle-o"}}),a("veui-tooltip",{attrs:{position:"bottom-end",target:"remark",trigger:"hover","overlay-class":"table-head-tooltip"}},[a("span",[a("span",{staticClass:"tool-title"},[e._v("基础:")]),e._v(" 您目前可以使用网盟推广业务下的产品为【主题链接】"),a("br"),a("span",{staticClass:"tool-title"},[e._v("通用:")]),e._v("您目前可以使用网盟推广业务下的全部产品。\n                                ")])])],1)],2),a("veui-table-column",{attrs:{field:"op",width:"150",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return 1!=t.state?[a("div",{staticClass:"op op-column"},[e.store.authMediumModify?a("veui-button",{staticClass:"opbutton",attrs:{ui:"link"},on:{click:function(a){e.goToEdit(t.id)}}},[e._v("修改")]):e._e(),e.store.authDeleteApp?a("veui-button",{ref:"delete"+t.id,staticClass:"opbutton",attrs:{ui:"link"},on:{click:function(e){t.item.visible=!t.item.visible}}},[e._v("删除")]):e._e(),a("veui-button",{staticClass:"opbutton",attrs:{ui:"link"},on:{click:function(a){e.toBiddingReport(t.id)}}},[e._v("查看报告")])],1),a("veui-tooltip",{attrs:{position:"top",target:"delete"+t.id,trigger:"click","overlay-class":"del-overlay",open:t.item.showDelDialog},on:{"update:open":function(a){e.$set(t.item,"showDelDialog",a)}}},[a("veui-icon",{staticClass:"message-icon",attrs:{name:"exclamation-circle-o"}}),e._v("\n                                确认删除么?\n                                "),a("div",{staticClass:"btn-group"},[a("veui-button",{attrs:{ui:"primary"},on:{click:function(a){e.sureDelete(t.id)}}},[e._v("确定")]),a("veui-button",{staticClass:"cancel",on:{click:function(e){t.item.showDelDialog=!1}}},[e._v("取消")])],1)],1)]:void 0}}])})],1)],2)],1),e.store.hasSoft?a("veui-tab",{attrs:{label:"软件管理",to:"/union/media/soft"}}):e._e()],1)],1)},[],!1,null,null,null));as.options.__file="MediaSiteListView.vue";var is=as.exports,ss=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"type",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{name:"",description:"",rootType:null,downloadLink:"",userLevel:"",downloadLevel:"",remark:"",sobarBinded:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formItem",["id","name","description","rootType","downloadLink","userLevel","downloadLevel","remark","sobarBinded"]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"typeList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"id",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"isModify",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"hasSoft",!1),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getSoft=this.api.getSoft,this.modifySoft=this.api.modifySoft,this.getSiteType=this.api.getSiteType,this.getSiteType({type:2}).then(function(t){e.typeList=st()(t),e.typeList=Ea()(e.typeList,e.toOptions)}).catch(function(e){}),this.getSoftInfo()}},{key:"getSoftInfo",value:function(){var e=this;this.getSoft().then(function(t){e.hasSoft=!0,e.formData=Object(v.a)({},e.formData,t)}).catch(function(t){e.hasSoft=!1,e.global.redirect({url:{path:"/union/media"},type:"push"})})}},{key:"toOptions",value:function(e){return{label:e.name,value:e.id}}},{key:"initFormData",value:function(e){this.detailRequester&&this.id&&this.requestDetail({},{initialData:e})}},{key:"processData",value:function(e){var t=this;Array.isArray(e)&&e.length&&e.forEach(function(e){e.label=e.text,e.value=e.id,t.processData(e.children)})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"submit",value:function(e){var t=this,a=st()(this.formData);a=na()(a,this.formItem),this.modifySoft(a).then(function(e){t.isModify=!1,t.getSoftInfo()}).catch(function(e){})}},{key:"invalid",value:function(e){}},{key:"success",value:function(e){}},{key:"fail",value:function(e){}}]),t}(ve.a),ls=a("dff4");function rs(e){return e.replace(/(^\s*)|(\s*$)/g,"")}Xt.a.addRule("less100",{validate:function(e,t){var a=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e.replace(/\n/g,"-").split("-"));return!!At()(e)||a.length<=t},message:function(e,t){return"最多可以输入".concat(e,"条")},priority:100});var os=Object(u.a)(ye.a,ss,{name:"media-soft-form",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-tabs":Sa.a,"veui-tab":F.a,"veui-button":S.a,"veui-radio-group":Ce.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-select":N.a,"veui-textarea":$e.a,"veui-option-group":ls.a,"veui-option":jt.a},data:function(){return{PVLevel:es,active:"file",index:0,sobarBindedOp:[{label:"是",value:!0},{label:"否",value:!1}],domainRule:[{name:"required",value:!0,triggers:"blur,input",priority:100},{triggers:"change, blur, input",name:"pattern",value:"^(([A-Za-z0-9]([-A-Za-z0-9]*[A-Za-z0-9])?|).)+[A-Za-z]{2,6}$",message:function(e,t){return"网站域名不符合规则"},priority:100}],nameRule:[{name:"required",value:!0,triggers:"blur,input",priority:99},{triggers:"change, blur, input",name:"minLength",value:2,validate:function(e,t){return rs(e).length>=t},message:function(e,t){return"不能为空"},priority:100},{triggers:"change, blur",name:"maxLength",value:40,validate:function(e,t){return!!At()(rs(e))||rs(e).length<t},message:function(e,t){return"字符长度不能多于".concat(e,"，当前长度").concat(t.length)},priority:100}],isDetail:!1,isEdit:!1,less100Rule:[{triggers:"change, blur",name:"less100",value:100}]}},mounted:function(){},computed:{},methods:{modifySoft:function(){this.store.isModify=!0},nameTrim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},goBack:function(){this.store.isModify=!1},selectAll:function(){this.$emit("selectall")},findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(isType(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=isType(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$children[0].$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$children[0].$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),ns=(a("685d"),Object(p.a)(os,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"media-soft"},[a("h3",{staticClass:"media-list-title"},[e._v("媒体管理")]),a("veui-tabs",{attrs:{active:e.$route.fullPath}},[a("veui-tab",{attrs:{label:"网站管理",to:"/union/media"}}),e.store.hasSoft?a("veui-tab",{attrs:{label:"软件管理",to:"/union/media/soft"}},[e.store.isModify?e._e():a("form-view",{staticClass:"edit-form-common media-soft-form"},[a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title soft-info-card"},[1===e.store.formData.state?a("div",{staticClass:"soft-tips-remind"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("您已经修改了该信息，修改请求正在审核中，审核结束后才能再次修改。")])],1):e._e(),2===e.store.formData.state?a("div",{staticClass:"soft-tips-warning"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("审核未通过，原因是"+e._s(e.store.formData.refuseReason))])],1):e._e(),a("veui-field",{attrs:{label:"软件名称:",name:"name",field:"name"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.name))]),1!=e.store.formData.state?a("div",{staticClass:"blue soft-modify",on:{click:e.modifySoft}},[e._v("修改")]):e._e()]),a("veui-field",{attrs:{label:"软件描述:",name:"description",field:"description"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.description))])]),a("veui-field",{attrs:{label:"软件类型:",name:"rootType",field:"rootType"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.rootTypeDesc))])]),a("veui-field",{attrs:{label:"下载地址:",name:"downloadLink",field:"downloadLink"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.downloadLink))])]),a("veui-field",{attrs:{label:"软件使用人数:",name:"userLevel",field:"userLevel"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.PVLevel.getTextFromValue(e.store.formData.userLevel)))])]),a("veui-field",{attrs:{label:"软件下载总量:",name:"downloadLevel",field:"downloadLevel"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.PVLevel.getTextFromValue(e.store.formData.downloadLevel)))])]),a("veui-field",{attrs:{label:"捆绑百度工具栏:",name:"sobarBinded",field:"sobarBinded"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.sobarBinded?"是":"否"))])]),a("veui-field",{attrs:{label:"其他信息:",name:"remark",field:"remark"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.remark))])])],1)])])],2),e.store.isModify?a("form-view",{staticClass:"edit-form-common media-soft-form"},[a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title"},[a("div",{staticClass:"soft-tips-remind"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("如果您的修改包括下载地址、软件类型，则需要审核，审核通过才会生效。")])],1),a("veui-field",{attrs:{label:"软件名称:",name:"name",field:"name",rules:e.nameRule,tip:"最多可输入40个字符"}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",model:{value:e.store.formData.name,callback:function(t){e.$set(e.store.formData,"name",t)},expression:"store.formData.name"}})],1)]),a("veui-field",{attrs:{label:"软件描述:",name:"description",field:"description",rules:"required"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-textarea",{staticClass:"edit-textarea-large",attrs:{autoresize:"",rows:"8"},model:{value:e.store.formData.description,callback:function(t){e.$set(e.store.formData,"description",t)},expression:"store.formData.description"}})],1)])]),a("veui-field",{attrs:{label:"软件类型:",name:"rootType",field:"rootType",rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-select",{attrs:{placeholder:"选择软件类型",options:e.store.typeList},model:{value:e.store.formData.rootType,callback:function(t){e.$set(e.store.formData,"rootType",t)},expression:"store.formData.rootType"}})],1)]),a("veui-field",{attrs:{label:"下载地址:",name:"downloadLink",field:"downloadLink",rules:"required",tip:"请提供在天空软件站或华军软件园的下载地址，下载页面需含有您注册百度联盟所使用的联系邮箱"}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",model:{value:e.store.formData.downloadLink,callback:function(t){e.$set(e.store.formData,"downloadLink",t)},expression:"store.formData.downloadLink"}})],1)]),a("veui-field",{attrs:{label:"软件使用人数:",name:"userLevel",field:"userLevel",rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-radio-group",{attrs:{items:e.PVLevel.toOptions()},model:{value:e.store.formData.userLevel,callback:function(t){e.$set(e.store.formData,"userLevel",t)},expression:"store.formData.userLevel"}})],1)]),a("veui-field",{attrs:{label:"软件下载总量:",name:"downloadLevel",field:"downloadLevel",rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-radio-group",{attrs:{items:e.PVLevel.toOptions()},model:{value:e.store.formData.downloadLevel,callback:function(t){e.$set(e.store.formData,"downloadLevel",t)},expression:"store.formData.downloadLevel"}})],1)]),a("veui-field",{attrs:{label:"捆绑百度工具栏:",name:"sobarBinded",field:"sobarBinded",rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-radio-group",{attrs:{items:e.sobarBindedOp},model:{value:e.store.formData.sobarBinded,callback:function(t){e.$set(e.store.formData,"sobarBinded",t)},expression:"store.formData.sobarBinded"}})],1)]),a("veui-field",{attrs:{label:"其他信息:",name:"remark",field:"remark"}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",model:{value:e.store.formData.remark,callback:function(t){e.$set(e.store.formData,"remark",t)},expression:"store.formData.remark"}})],1)])],1)])]),a("template",{slot:"operation"},[a("veui-button",{staticClass:"form-button",attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{staticClass:"form-button",on:{click:e.goBack}},[e._v("取消")])],1)],2):e._e()],1):e._e()],1)],1)},[],!1,null,null,null));ns.options.__file="MediaSoftFormView.vue";var cs=ns.exports,us=(a("4917"),function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","新建网站成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"type",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"axioss",Vt.a.create({responseType:"arraybuffer",paramsSerializer:function(e){return $t.a.stringify(e,{encode:!0})}})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{name:"",domain:"",description:"",icp:"",pvLevel:"",rootType:"",subType:null,type:null}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"typeList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"id",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"detail",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"passVerify",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"createFormItem",["domain","name","description","icp","rootType","subType","pvLevel"]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"editFormItem",["name","description","icp","rootType","subType","pvLevel"]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"remindForceCreate",!1),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.createRequester=this.api.createSite,this.forceCreateSite=this.api.forceCreateSite,this.detailRequester=this.api.getMediaDetail,this.updateRequester=this.api.modifySite,this.verifySite=this.api.verifySite,this.verifySite2=this.api.verifySite2,this.getSiteType=this.api.getSiteType,this.canCreate=this.api.canCreate,this.isFraudUrl=this.api.isFraudUrl,this.verifyDomain=this.api.verifyDomain,this.getSiteType({type:0}).then(function(t){e.typeList=t}).catch(function(e){return{}})}},{key:"initFormData",value:function(e){this.detailRequester&&this.id&&this.requestDetail({},{initialData:e})}},{key:"adaptData",value:function(e){return this.detail=st()(e),this.formData=Object(v.a)({},this.formData,this.detail),this.formData.type="".concat(this.formData.rootType,"-").concat(this.formData.subType),this.formData}},{key:"processData",value:function(e){var t=this;Array.isArray(e)&&e.length&&e.forEach(function(e){e.label=e.text,e.value=e.id,t.processData(e.children)})}},{key:"download",value:function(e){var t={};t.params=e,this.axioss.get("/v2/client/medium/website/download-verify-file",t).then(function(e){var t=e.headers["content-disposition"].match("(^|;)filename=([^;]*)(;|$)")[2],a=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),i=document.createElement("a"),s=URL.createObjectURL(a);i.href=s,t=decodeURI(t),i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}).catch(function(e){})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"forceCreate",value:function(){var e=st()(this.formData),t=e.type.split("-");return e.rootType=parseInt(t[0],10),e.subType=parseInt(t[1],10),e=na()(e,this.createFormItem),this.forceCreateSite(e)}},{key:"submit",value:function(e){if("create"===this.pageType&&this.createRequester){var t=st()(this.formData),a=t.type.split("-");if(t.rootType=parseInt(a[0],10),t.subType=parseInt(a[1],10),t=na()(t,this.createFormItem),""===this.passVerify||!1===this.passVerify)return void(this.passVerify=!1);if(this.passVerify)return this.requestCreate(t)}if("edit"===this.pageType&&this.updateRequester){var i=st()(this.formData),s=i.type.split("-");return i.rootType=parseInt(s[0],10),i.subType=parseInt(s[1],10),(i=na()(i,this.editFormItem)).id=parseInt(this.id,10),this.requestUpdate(i)}throw new Error("unknown form page type: ".concat(this.pageType,"!"))}},{key:"invalid",value:function(e){}},{key:"success",value:function(e){}},{key:"fail",value:function(e){e.fields&&"该域名在其他账户下已添加，重复提交无法通过审核"===e.fields.domain&&(this.remindForceCreate=!0)}}]),t}(ve.a));function ds(e){return e.replace(/(^\s*)|(\s*$)/g,"")}Xt.a.addRule("less100",{validate:function(e,t){var a=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e.replace(/\n/g,"-").split("-"));return!!At()(e)||a.length<=t},message:function(e,t){return"最多可以输入".concat(e,"条")},priority:100}),Xt.a.addRule("isVerify",{validate:function(e,t){return!!t},message:function(e,t){return"请先进行网站验证"},priority:98});var fs,ps,hs=Object(u.a)(ye.a,us,{name:"media-site-form",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-tabs":Sa.a,"veui-tab":F.a,"veui-button":S.a,"veui-dialog":pe.a,"veui-radio-group":Ce.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-select":N.a,"veui-textarea":$e.a,"veui-option-group":ls.a,"veui-option":jt.a,"veui-radio-button-group":De.a},data:function(){return{isFraud:"",domainTimeStatus:"",PVLevel:es,active:"file",window:window,isVerify:!1,index:0,verifyButton:[{label:"文件验证",value:0},{label:"HTML标签验证",value:1}],domainRule:[{name:"required",value:!0,triggers:"blur,input",priority:100},{triggers:"change, blur, input",name:"pattern",value:/^(([A-Za-z0-9]([-A-Za-z0-9]*[A-Za-z0-9])?|)\.)+[A-Za-z]{2,6}$/,message:function(e,t){return"网站域名不符合规则"},priority:99}],nameRule:[{name:"required",value:!0,triggers:"blur,input",priority:99},{triggers:"change, blur",name:"maxLength",value:40,validate:function(e,t){return!!At()(ds(e))||ds(e).length<t},message:function(e,t){return"字符长度不能多于".concat(e,"，当前长度").concat(t.length)},priority:100}],desRule:[{name:"required",value:!0,triggers:"blur,input",priority:99},{triggers:"change, blur",name:"maxLength",value:300,validate:function(e,t){return!!At()(ds(e))||ds(e).length<t},message:function(e,t){return"字符长度不能多于".concat(e,"，当前长度").concat(t.length)},priority:100}],isDetail:!1,isEdit:!1}},mounted:function(){var e=this;xe.a.hideHeaderDom(),"detail"===this.store.pageType?this.isDetail=!0:"edit"===this.store.pageType&&(this.isEdit=!0),this.store.canCreate().then(function(t){!0!==t&&"create"===e.store.pageType&&(e.showToast("财务信息填写并审核完成后才可以新建网站",{type:"error"}),e.global.redirect({url:{path:"/union/media"},type:"push"}))}).catch(function(e){return{}})},beforeDestroy:function(){xe.a.addHeaderDom()},computed:{},methods:{toUnlock:function(){var e=this;this.store.verifyDomain().then(function(t){e.domainTimeStatus=t.domainTimeStatus,1!==e.domainTimeStatus&&2!==e.domainTimeStatus||e.$router.push({name:"union/media/unlock",params:{domainTimeStatus:e.domainTimeStatus}})}).catch(function(e){})},verifySite:(ps=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$children[0].validate(["domain"]);case 2:if(!0===e.sent)return e.next=7,this.store.isFraudUrl({domain:this.store.formData.domain});e.next=10;break;case 7:t=e.sent,this.isFraud=t.isFraud,0!==t.isFraud&&2!==t.isFraud||this.store.verifySite({domain:this.store.formData.domain}).then(function(e){a.meta=e.meta,a.isVerify=!0}).catch(function(e){a.handleError(e)});case 10:case"end":return e.stop()}},e,this)})),function(){return ps.apply(this,arguments)}),checkHttps:function(e){e&&/^(?:https?):\/\/.*\..+$/.test(e)&&(this.store.formData.domain=this.store.formData.domain.split(/^(?:https?):\/\//)[1])},verifySite2:function(){var e=this;this.store.verifySite2({method:this.active,website:this.store.formData.domain}).then(function(t){e.store.passVerify=!0,e.isVerify=!1}).catch(function(t){t.field.domainVerify=t.field.domain,t.fields.domainVerify=t.fields.domain,e.handleError(t)})},downloadVerify:function(){window.open(window.location.host+"/v2/client/medium/website/download-verify-file"+"?website=".concat(this.store.formData.domain),"_blank")},nameTrim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},goBack:function(){this.redirectTo("/union/media")},selectAll:function(){this.$emit("selectall")},forceCreate:(fs=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.forceCreate();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=12;break;case 8:e.prev=8,e.t2=e.catch(0),this.store.remindForceCreate=!1,this.handleError(e.t2);case 12:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return fs.apply(this,arguments)}),cancelForceCreate:function(){this.store.remindForceCreate=!1},downloadFile:function(){this.store.download({website:this.store.formData.domain})},findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(isType(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=isType(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$children[0].$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.goBack()},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(a.website&&(a.domain=st()(a.website),delete a.website),(a.rootType||a.subType)&&(a.rootType=a.rootType||"",a.subType=a.subType||"",a.type=a.rootType+a.subType,delete a.rootType,delete a.subType),Et()(a,function(e,a){var i=Yt()(t,"$children[0].$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),ms=(a("6546"),Object(p.a)(hs,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common media-site-form",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),["create"===e.store.pageType?a("h3",{staticClass:"title edit-form-title"},[e._v("新建网站")]):e._e(),"edit"===e.store.pageType?a("h3",{staticClass:"title edit-form-title"},[e._v("修改网站")]):e._e()],a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title"},["edit"===e.store.pageType?a("div",{staticClass:"soft-tips-remind"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("如果您的修改包括网站名称、描述、类别、备案信息，则需要审核，审核通过才会生效。")])],1):e._e(),"edit"===e.store.pageType||e.store.passVerify?a("veui-field",{attrs:{label:"网站域名:",name:"domain",field:"domain",disabled:e.isDetail}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"site-domain",attrs:{disabled:e.isDetail}},[e._v("\n                            "+e._s(e.store.formData.domain)+"\n                        ")]),a("span",{staticClass:"blue",attrs:{ui:"primary"}},[e._v("已验证")])])]):e._e(),"create"!==e.store.pageType||e.store.passVerify?e._e():a("veui-field",{attrs:{label:"网站域名:",name:"domain",field:"domain",rules:e.domainRule,tip:1!=e.isFraud&&2!=e.isFraud?"为保证您的权益，请先对网站进行验证，才能注册":"",disabled:e.isVerify}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",attrs:{placeholder:"例如：baidu.com(无需填写前缀)",disabled:e.isDetail},on:{change:e.checkHttps},model:{value:e.store.formData.domain,callback:function(t){e.$set(e.store.formData,"domain",t)},expression:"store.formData.domain"}}),e.isVerify?e._e():a("veui-button",{staticClass:"verify-site",attrs:{ui:"primary"},on:{click:e.verifySite}},[e._v("验证网站")]),1===e.isFraud?a("div",{staticClass:"isFraud"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),e._v("\n                            该域名有联盟违规记录，已封禁处理，请先"),a("span",{staticClass:"blue",on:{click:e.toUnlock}},[e._v("申请解封")])],1):e._e(),2===e.isFraud?a("div",{staticClass:"isFraud"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),e._v("\n                            该域名主体已签署365协议，域名添加完成后将对您暂缓3个月，请知悉。\n                        ")],1):e._e()],1)]),e.isVerify&&"create"===e.store.pageType?a("div",{staticClass:"sub-card has-sub-card site-sub-card"},[a("div",{staticClass:"site-tips-remind"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("请在30分钟内完成以下步骤，如果有问题请查看\n                            "),a("a",{staticClass:"href",attrs:{href:"http://yingxiao.baidu.com/support/union/?module=default&controller=index&action=detail&nodeid=5242",target:"_blank"}},[a("span",{staticClass:"blue"},[e._v("验证步骤详解>>")])])])],1),a("veui-field",{attrs:{label:"选择验证方式:",name:"domainVerify",field:"domainVerify"}},[a("div",{staticClass:"card-right"},[a("veui-tabs",{attrs:{active:e.active,ui:"block"},on:{"update:active":function(t){e.active=t}}},[a("veui-tab",{attrs:{label:"文件验证",name:"file"}},[a("div",{staticClass:"steps"},[a("div",{staticClass:"steps-index"},[e._v("1")]),a("span",[e._v("下载验证文件")]),a("veui-button",{style:{marginLeft:"20px"},on:{click:e.downloadFile}},[a("veui-icon",{style:{marginRight:"10px"},attrs:{name:"download"}}),e._v("下载")],1)],1),a("div",{staticClass:"steps"},[a("div",{staticClass:"steps-index"},[e._v("2")]),a("span",[e._v("将验证文件放置于您所配置域名(如www.yoursite.com)的根目录下")])]),a("div",{staticClass:"steps no-after"},[a("div",{staticClass:"steps-index"},[e._v("3")]),a("span",[e._v("点击“完成验证”按钮")])]),a("div",{staticClass:"verify-op"},[a("veui-button",{attrs:{ui:"primary"},on:{click:e.verifySite2}},[e._v("完成验证")]),a("veui-button",{on:{click:function(t){e.isVerify=!e.isVerify}}},[e._v("取消")])],1)]),a("veui-tab",{attrs:{label:"HTML标签验证",name:"meta"}},[a("div",{staticClass:"site-verify-des"},[e._v("\n                                            将以下代码添加到您网站首页HTML代码的"),a("HEAD",[e._v("标签与")]),e._v("标签之间，并点击“完成验证”按钮。\n                                        ")],1),a("veui-textarea",{staticClass:"site-textarea",attrs:{rows:"4",disabled:e.isDetail},model:{value:e.meta,callback:function(t){e.meta=t},expression:"meta"}}),a("div",{staticClass:"verify-op"},[a("veui-button",{attrs:{ui:"primary"},on:{click:e.verifySite2}},[e._v("完成验证")]),a("veui-button",{on:{click:function(t){e.isVerify=!e.isVerify}}},[e._v("取消")])],1)],1)],1)],1)])],1):e._e(),!1===e.store.passVerify?a("div",{staticClass:"wrong-tip"},[e._v("请先进行网站验证")]):e._e(),a("veui-field",{attrs:{label:"网站名称:",name:"name",field:"name",rules:e.nameRule,disabled:e.isDetail,tip:"最多可输入40个字符"}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",attrs:{disabled:e.isDetail},model:{value:e.store.formData.name,callback:function(t){e.$set(e.store.formData,"name",t)},expression:"store.formData.name"}})],1)]),a("veui-field",{attrs:{label:"网站描述:",name:"description",field:"description",disabled:e.isDetail,rules:e.desRule}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-textarea",{staticClass:"edit-textarea-large",attrs:{autoresize:"",rows:"8",disabled:e.isDetail},model:{value:e.store.formData.description,callback:function(t){e.$set(e.store.formData,"description",t)},expression:"store.formData.description"}})],1)])]),a("veui-field",{attrs:{label:"网站类别:",name:"type",field:"type",disabled:e.isDetail,rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-select",{attrs:{placeholder:"选择网站类别"},model:{value:e.store.formData.type,callback:function(t){e.$set(e.store.formData,"type",t)},expression:"store.formData.type"}},e._l(e.store.typeList,function(t,i){return a("veui-option-group",{key:t.id,attrs:{label:t.name,position:"popup"}},e._l(t.subTypes,function(e,i){return a("veui-option",{key:e.id,attrs:{value:t.id+"-"+e.id,label:""+e.name}})}))}))],1)]),a("veui-field",{attrs:{label:"网站访问量:",name:"pvLevel",field:"pvLevel",disabled:e.isDetail}},[a("div",{staticClass:"card-right"},[a("veui-radio-group",{attrs:{items:e.PVLevel.toOptions()},model:{value:e.store.formData.pvLevel,callback:function(t){e.$set(e.store.formData,"pvLevel",t)},expression:"store.formData.pvLevel"}})],1)]),a("veui-field",{attrs:{label:"网站备案信息:",name:"icp",field:"icp",disabled:e.isDetail,rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",attrs:{placeholder:"例如：京ICP证030132",disabled:e.isDetail},model:{value:e.store.formData.icp,callback:function(t){e.$set(e.store.formData,"icp",t)},expression:"store.formData.icp"}})],1)])],1)])]),a("template",{slot:"operation"},[e.isDetail?e._e():a("veui-button",{staticClass:"form-button",attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),e.isDetail?e._e():a("veui-button",{staticClass:"form-button",on:{click:e.goBack}},[e._v("取消")])],1),a("veui-dialog",{attrs:{open:e.store.remindForceCreate,closable:!1,"overlay-class":"media-site-force-create"},on:{"update:open":function(t){e.$set(e.store,"remindForceCreate",t)},ok:e.forceCreate,cancel:e.cancelForceCreate}},[e._v("\n        该域名在其他账户下已添加，重复提交无法通过审核，确认提交吗?\n    ")])],2)},[],!1,null,null,null));ms.options.__file="MediaSiteFormView.vue";var vs=ms.exports,bs=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","申请解封"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"type",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"applyType",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"photoArr",["idCardPhoto","licensePhoto","transferPhoto","authPhoto"]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{applyName:"",applyNumber:"",authName:"",authNumber:"",idCardPhoto:"",licensePhoto:"",transferPhoto:"",authPhoto:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"uploadUrl","/v2/client/unanti/domain-unlock/post-upload"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"getImgUrl","/v2/client/unanti/domain-unlock/get-domain-unlock-image"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"domainTimeStatus",""),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.createRequester=this.api.submitUnlock,this.verifyDomain=this.api.verifyDomain,this.getUnlockInfo=this.api.getUnlockInfo,this.getUnlockInfo().then(function(t){e.applyType=t.applyType,e.formData.applyName=t.applyName,e.formData.applyNumber=t.applyNumber||""}).catch(function(e){})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"submit",value:function(e){var t=st()(this.formData);t.applyType=this.applyType;var a=!0,i=!1,s=void 0;try{for(var l,r=this.photoArr[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var o=l.value;t[o]&&(t[o]=t[o].value)}}catch(e){i=!0,s=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}return this.createRequester(t)}},{key:"invalid",value:function(e){}},{key:"success",value:function(e){}},{key:"fail",value:function(e){}}]),t}(ve.a),ys=a("7b23");function gs(e){return e.replace(/(^\s*)|(\s*$)/g,"")}Xt.a.addRule("less100",{validate:function(e,t){var a=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e.replace(/\n/g,"-").split("-"));return!!At()(e)||a.length<=t},message:function(e,t){return"最多可以输入".concat(e,"条")},priority:100}),Xt.a.addRule("isVerify",{validate:function(e,t){return!!t},message:function(e,t){return"请先进行网站验证"},priority:98});var _s=Object(u.a)(ye.a,bs,{name:"media-site-unlock",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-button":S.a,"veui-dialog":pe.a,"veui-radio-group":Ce.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-textarea":$e.a,"veui-uploader":ys.a,"veui-switch":we.a,"veui-option-group":ls.a,"veui-option":jt.a,"veui-radio-button-group":De.a},data:function(){return{checked1:!1,checked2:!1,checked3:!1,checked4:!1,checked5:!1,checked6:!1,open365:!1,hasAuth:"off",requiredRule:[{triggers:"blur",name:"required",value:!0}],nameRule:[{name:"required",value:!0,triggers:"blur,input",priority:99},{triggers:"change, blur",name:"maxLength",value:40,validate:function(e,t){return!!At()(gs(e))||gs(e).length<t},message:function(e,t){return"字符长度不能多于".concat(e,"，当前长度").concat(t.length)},priority:100}],desRule:[{name:"required",value:!0,triggers:"blur,input",priority:99},{triggers:"change, blur",name:"maxLength",value:300,validate:function(e,t){return!!At()(gs(e))||gs(e).length<t},message:function(e,t){return"字符长度不能多于".concat(e,"，当前长度").concat(t.length)},priority:100}]}},mounted:function(){document.domain="baidu.com",xe.a.hideHeaderDom(),this.$route.params.domainTimeStatus?this.store.domainTimeStatus=this.$route.params.domainTimeStatus:this.global.redirect({url:{path:"/union/media"},type:"push"})},beforeDestroy:function(){xe.a.addHeaderDom()},computed:{},methods:{submitForm:function(){this.$children[0].submit(),this.open365=!1},verify:function(){this.open365=!0},uploadFuc:function(e){return e.data.filePath?{status:"success",success:!0,name:"".concat(e.data.filePath),value:e.data.filePath,src:"".concat(this.store.getImgUrl,"?fileName=").concat(e.data.filePath),message:""}:e.fields?{status:"failure",success:!1,name:e.fields[0].field,src:"",message:e.fields[0].message}:{status:"failure",success:!1,name:"",src:"",message:"未知错误"}},upSuccess:function(e,t){},nameTrim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},goBack:function(){this.redirectTo("/union/media")},selectAll:function(){this.$emit("selectall")}}}),Os=(a("d6e8"),Object(p.a)(_s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common media-site-unlock",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),void 0,a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title"},[a("veui-field",{attrs:{label:0==e.store.applyType?"姓名":"企业全称",name:"applyName",field:"applyName"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"site-domain"},[e._v("\n                            "+e._s(e.store.formData.applyName)+"\n                        ")])])]),0==e.store.applyType?a("veui-field",{attrs:{label:"身份证号:",name:"applyNumber",field:"applyNumber"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"site-domain"},[e._v("\n                            "+e._s(e.store.formData.applyNumber)+"\n                        ")])])]):e._e(),0!==e.store.applyType?a("veui-field",{attrs:{label:"企业营业执照号:",name:"applyNumber",field:"applyNumber"}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",attrs:{placeholder:"需要和域名转让证明上保持一致"},model:{value:e.store.formData.applyNumber,callback:function(t){e.$set(e.store.formData,"applyNumber",t)},expression:"store.formData.applyNumber"}})],1)]):e._e(),0===e.store.applyType?a("veui-field",{attrs:{label:"手持身份证照：",field:"idCardPhoto",name:"idCardPhoto",rules:e.requiredRule,tip:"格式：JPG、JPEG、PNG、BMP图片格式大小：4M以内"}},[a("div",{staticClass:"card-right"},[a("veui-uploader",{attrs:{type:"image",action:e.store.uploadUrl,accept:"image/jpg, image/jpeg, image/png, image/bmp","request-mode":"xhr","convert-response":e.uploadFuc,"max-size":"4mb","max-count":1},on:{success:e.upSuccess},model:{value:e.store.formData.idCardPhoto,callback:function(t){e.$set(e.store.formData,"idCardPhoto",t)},expression:"store.formData.idCardPhoto"}})],1)]):e._e(),1===e.store.applyType?a("veui-field",{attrs:{label:"营业执照照片：",field:"licensePhoto",name:"licensePhoto",rules:e.requiredRule,tip:"格式：JPG、JPEG、PNG、BMP图片格式大小：4M以内"}},[a("div",{staticClass:"card-right"},[a("veui-uploader",{attrs:{type:"image",action:e.store.uploadUrl,accept:"image/jpg, image/jpeg, image/png, image/bmp","request-mode":"xhr","convert-response":e.uploadFuc,"max-size":"4mb","max-count":1},on:{success:e.upSuccess},model:{value:e.store.formData.licensePhoto,callback:function(t){e.$set(e.store.formData,"licensePhoto",t)},expression:"store.formData.licensePhoto"}})],1)]):e._e(),a("veui-field",{attrs:{label:"域名转让照片：",field:"transferPhoto",name:"transferPhoto",rules:e.requiredRule,tip:"格式：JPG、JPEG、PNG、BMP图片格式大小：2M以内"}},[a("div",{staticClass:"card-right"},[a("veui-uploader",{attrs:{type:"image",action:e.store.uploadUrl,accept:"image/jpg, image/jpeg, image/png, image/bmp","request-mode":"xhr","convert-response":e.uploadFuc,"max-size":"2mb","max-count":1},on:{success:e.upSuccess},model:{value:e.store.formData.transferPhoto,callback:function(t){e.$set(e.store.formData,"transferPhoto",t)},expression:"store.formData.transferPhoto"}})],1)]),a("veui-field",{attrs:{label:"授权信息：",field:"hasAuth",name:"hasAuth"}},[a("div",{staticClass:"card-right"},[a("veui-switch",{attrs:{"true-value":"on","false-value":"off"},model:{value:e.hasAuth,callback:function(t){e.hasAuth=t},expression:"hasAuth"}},[e._v("\n                            如果申请者为域名所有者代理情况，请提供代理授权信息\n                        ")])],1)]),"on"===e.hasAuth?a("veui-field",{attrs:{label:"授权函：",field:"authPhoto",name:"authPhoto",tip:"格式：JPG、JPEG、PNG、BMP图片格式大小：2M以内"}},[a("div",{staticClass:"card-right"},[a("veui-uploader",{attrs:{type:"image",action:e.store.uploadUrl,accept:"image/jpg, image/jpeg, image/png, image/bmp","request-mode":"xhr","convert-response":e.uploadFuc,"max-size":"2mb","max-count":1},on:{success:e.upSuccess},model:{value:e.store.formData.authPhoto,callback:function(t){e.$set(e.store.formData,"authPhoto",t)},expression:"store.formData.authPhoto"}})],1)]):e._e(),"on"===e.hasAuth?a("veui-field",{attrs:{label:"授权方名称：",field:"authName",name:"authName"}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",attrs:{placeholder:"需要和域名转让证明上保持一致"},model:{value:e.store.formData.authName,callback:function(t){e.$set(e.store.formData,"authName",t)},expression:"store.formData.authName"}})],1)]):e._e(),"on"===e.hasAuth?a("veui-field",{attrs:{label:"授权方代码：",field:"authNumber",name:"authNumber"}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"filter-name",attrs:{placeholder:"需要和域名转让证明上保持一致"},model:{value:e.store.formData.authNumber,callback:function(t){e.$set(e.store.formData,"authNumber",t)},expression:"store.formData.authNumber"}})],1)]):e._e()],1)])]),a("template",{slot:"operation"},[2===e.store.domainTimeStatus?a("veui-button",{staticClass:"form-button",attrs:{ui:"primary",type:"submit"}},[e._v("确定")]):e._e(),1===e.store.domainTimeStatus?a("veui-button",{staticClass:"form-button",attrs:{ui:"primary"},on:{click:e.verify}},[e._v("确定")]):e._e(),a("veui-button",{staticClass:"form-button",on:{click:e.goBack}},[e._v("取消")])],1),a("veui-dialog",{attrs:{title:"365协议",open:e.open365,"overlay-class":"media-site-verify"},on:{"update:open":function(t){e.open365=t},ok:function(e){},cancel:function(e){}}},[a("div",{staticClass:"agreement365"},[a("p",{staticClass:"text"},[e._v(" \n                诚信，是基业长青的根本。百度联盟，愿与合作伙伴一起打造一个诚信健康的联盟产业生态圈，我们相信唯有诚信，我们才有更高的利益，更多的成长，才有更坚实的合作共赢。\n            ")]),a("p",{staticClass:"text"},[e._v("\n                诚信，不只是一个承诺，更是一种行动。在此，我们邀请伙伴们与我们一起营造自律、公平、诚信的合作环境，并向联盟作出一下承诺：\n            ")]),a("p",{staticClass:"check"},[a("veui-checkbox",{model:{value:e.checked1,callback:function(t){e.checked1=t},expression:"checked1"}},[e._v("我认同诚信是联盟发展的基础；")])],1),a("p",{staticClass:"check"},[a("veui-checkbox",{model:{value:e.checked2,callback:function(t){e.checked2=t},expression:"checked2"}},[e._v("我会严格按照联盟规范进行业务合作；")])],1),a("p",{staticClass:"check"},[a("veui-checkbox",{model:{value:e.checked3,callback:function(t){e.checked3=t},expression:"checked3"}},[e._v("我保证不发起，不参与任何点击欺诈和流量劫持等违规行为；")])],1),a("p",{staticClass:"check"},[a("veui-checkbox",{model:{value:e.checked4,callback:function(t){e.checked4=t},expression:"checked4"}},[e._v("我会积极举报违规相关信息，做诚信共建的执行者和捍卫者；")])],1),a("p",{staticClass:"check"},[a("veui-checkbox",{model:{value:e.checked5,callback:function(t){e.checked5=t},expression:"checked5"}},[e._v("我会自觉接受监督，并愿意承担因违规行为所带来的责任和后果；")])],1),a("p",{staticClass:"check"},[a("veui-checkbox",{model:{value:e.checked6,callback:function(t){e.checked6=t},expression:"checked6"}},[e._v("我同意解封后根据封禁情况自愿接受暂缓支付三个月分成，以确保合作顺利。")])],1),a("p",{staticClass:"text bottom"},[e._v("\n                以上承诺，将体现在业务合作的每一天，让我们共同打造联盟产业生态圈的“蓝天365”。\n            ")])]),a("template",{slot:"foot"},[a("veui-button",{staticClass:"agreement-button",attrs:{ui:"primary",disabled:!(e.checked1&&e.checked2&&e.checked3&&e.checked4&&e.checked5&&e.checked6)},on:{click:e.submitForm}},[e._v("\n                我已阅读并确认提交\n            ")])],1)],2)],2)},[],!1,null,null,null));Os.options.__file="DomainUnlockView.vue";var Cs=Os.exports,Ds=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","搜索推广"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cmpDatas",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"selectedCmp","请选择计费名"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"productType",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{cid:""}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getSearchAdList,this.deleteRequester=this.api.deleteSearchAd,this.getCnList=this.api.getCnList}},{key:"initListData",value:function(e){var t=this;0<this.cmpDatas.length||this.getCnList({productType:this.productType}).then(function(a){t.cmpDatas=a.map(function(e){return{label:e.cname,value:e.cid}}),t.filter.cid=t.cmpDatas[0]?t.cmpDatas[0].value:"",t.selectedCmp=t.cmpDatas[0]?"计费名："+t.cmpDatas[0].label:"请选择计费名",t.filter.cid&&t.requestList({cid:t.filter.cid},{initialData:e})})}},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.customizeChannelList,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),ws=Object(u.a)(G.a,Ds,{name:"SearchAdListView",components:{"veui-icon":y.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-button":S.a,"veui-table-column":de.a,"veui-tooltip":I.a,"veui-dropdown":wt.a,"veui-option":jt.a},directives:{autosubmit:Ee.a},data:function(){return{}},methods:{choseCmp:function(e){this.store.filter.cid=e.value,this.store.selectedCmp="计费名："+e.label,this.$forceUpdate(),this.store.submitSearch()},setItemStatus:function(e){var t=this;this.store.deleteRequester({chid:e.chid,cid:this.store.filter.cid}).then(function(e){t.store.submitSearch()})},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},createNew:function(){this.redirectTo("/union/search/advertise/create")},eidtDetail:function(e){this.redirectTo("/union/search/advertise/edit?chid=".concat(e,"&cid=").concat(this.store.filter.cid))}}}),js=(a("f197"),Object(p.a)(ws,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"search-ad-list-view"},[a("template",{slot:"filterContent"},[a("veui-fieldset",[a("veui-button",{staticClass:"create-new",attrs:{ui:"primary"},on:{click:e.createNew}},[e._v("新建渠道")]),a("veui-dropdown",{staticClass:"input300",attrs:{label:e.store.selectedCmp}},e._l(e.store.cmpDatas,function(t){return a("veui-option",{key:t.value,attrs:{value:t.value,label:t.label},on:{click:function(a){e.choseCmp(t)}}})}))],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"name",title:"渠道ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.item.chid)+"\n            ")]}}])}),a("veui-table-column",{attrs:{field:"vulgar",title:"渠道名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.item.chName)+"\n            ")]}}])}),a("veui-table-column",{attrs:{field:"operation",title:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"op-column"},[a("veui-button",{attrs:{ui:"link"},on:{click:function(a){e.eidtDetail(t.item.chid)}}},[e._v("编辑")]),a("veui-button",{ref:"relative"+t.item.id,attrs:{ui:"link"},on:{click:function(e){t.item.visible=!t.item.visible}}},[e._v("删除")]),a("span",[a("veui-tooltip",{staticClass:"del-tooltip",attrs:{position:"top",target:"relative"+t.item.id,trigger:"click","overlay-class":"del-overlay",open:t.item.openDelOverlay},on:{"update:open":function(a){e.$set(t.item,"openDelOverlay",a)}}},[a("veui-icon",{staticClass:"message-icon",attrs:{name:"exclamation-circle-o"}}),e._v("\n                                您确定要删除该渠道吗？\n                                "),a("div",{staticClass:"btn-group"},[a("veui-button",{attrs:{ui:"primary"},on:{click:function(a){e.setItemStatus(t.item)}}},[e._v("确定")]),a("veui-button",{staticClass:"cancel",on:{click:function(e){t.item.openDelOverlay=!1}}},[e._v("取消")])],1)],1)],1)],1)]}}])})],1),a("template",{slot:"pager"},[a("div")])],2)},[],!1,null,null,null));js.options.__file="SearchAdListView.vue";var ks=js.exports,Ss=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","新建渠道"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cmpDatas",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"productType",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{chid:"",chName:"",cid:""}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.updateRequester=this.api.modifySearchAd,this.createRequester=this.api.saveSearchAd,this.detailRequester=this.api.getSearchAdDetail,this.getCnList=this.api.getCnList;var e=this.getRouteQuery({});this.formData.chid=e.chid,this.formData.cid=e.cid,this.title="create"===this.pageType?"新建渠道":"编辑渠道","create"===this.pageType&&this.getInitialCmp()}},{key:"getInitialCmp",value:function(){var e=this;0<this.cmpDatas.length||this.getCnList({productType:this.productType}).then(function(t){e.cmpDatas=t.map(function(e){return{label:e.cname,value:e.cid}}),e.formData.cid||(e.formData.cid=e.cmpDatas[0]?e.cmpDatas[0].value:"")})}},{key:"initFormData",value:function(e){this.detailRequester&&this.formData.chid&&this.requestDetail({cid:this.formData.cid,chid:this.formData.chid},{initialData:e})}},{key:"submit",value:function(){var e=this.formData;if("create"===this.pageType&&this.createRequester)return this.requestCreate(e);if("edit"===this.pageType&&this.updateRequester)return this.requestUpdate(e);throw new Error("unknown form page type: ".concat(this.pageType,"!"))}}]),t}(ve.a),xs=Object(u.a)(ye.a,Ss,{name:"EditDirectAdView",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-tab":F.a,"veui-transfer":Se.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-textarea":$e.a,"veui-button":S.a,"veui-switch":we.a,"veui-select":N.a},props:["editProp"],data:function(){return{isEdit:!1,appNamesDatasource:[],requiredRule:[{name:"required",value:!0}]}},methods:{goBack:function(){this.global.redirect({url:{path:"/union/search/advertise"},type:"push"})}},mounted:function(){xe.a.hideHeaderDom(),"edit"===this.store.pageType&&(this.isEdit=!0)},beforeDestroy:function(){xe.a.addHeaderDom()}}),Rs=(a("7720"),Object(p.a)(xs,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common edit-form-content-protect",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card"},[e.isEdit?e._e():a("veui-field",{attrs:{label:"计费名：",name:"cid",field:"cid",rules:e.requiredRule}},[a("div",{staticClass:"card-right"},[a("veui-select",{staticClass:"input300",attrs:{options:e.store.cmpDatas},model:{value:e.store.formData.cid,callback:function(t){e.$set(e.store.formData,"cid",t)},expression:"store.formData.cid"}})],1)]),a("veui-field",{attrs:{label:"渠道名称：",name:"chName",field:"chName",rules:e.requiredRule}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"input300",attrs:{placeholder:"请输入渠道名称",clearable:!0,maxLength:"32"},model:{value:e.store.formData.chName,callback:function(t){e.$set(e.store.formData,"chName",t)},expression:"store.formData.chName"}})],1)])],1)])]),a("template",{slot:"operation"},[a("veui-button",{attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,null,null));Rs.options.__file="SearchAdFormView.vue";var Ts=Rs.exports,Is=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cmpDatas",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"selectedCmp","请选择计费名"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"productType",1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{cid:""}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getSearchAdList,this.deleteRequester=this.api.deleteSearchAd,this.getCnList=this.api.getCnList}},{key:"initListData",value:function(e){var t=this;0<this.cmpDatas.length||this.getCnList({productType:this.productType}).then(function(a){t.cmpDatas=a.map(function(e){return{label:e.cname,value:e.cid}}),t.filter.cid=t.cmpDatas[0]?t.cmpDatas[0].value:"",t.selectedCmp=t.cmpDatas[0]?"计费名："+t.cmpDatas[0].label:"请选择计费名",t.filter.cid&&t.requestList({cid:t.filter.cid},{initialData:e})})}},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.customizeChannelList,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),Fs=Object(u.a)(G.a,Is,{name:"ToolAdListView",components:{"veui-icon":y.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-button":S.a,"veui-table-column":de.a,"veui-tooltip":I.a,"veui-dropdown":wt.a,"veui-option":jt.a},directives:{autosubmit:Ee.a},data:function(){return{}},methods:{choseCmp:function(e){this.store.filter.cid=e.value,this.store.selectedCmp="计费名："+e.label,this.$forceUpdate(),this.store.submitSearch()},setItemStatus:function(e){var t=this;this.store.deleteRequester({chid:e.chid,cid:this.store.filter.cid}).then(function(e){t.store.submitSearch()})},redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},createNew:function(){this.redirectTo("/union/tool/advertise/create?cid=".concat(this.store.filter.cid))},eidtDetail:function(e){this.redirectTo("/union/tool/advertise/edit?chid=".concat(e,"&cid=").concat(this.store.filter.cid))}}}),Ns=(a("938a"),Object(p.a)(Fs,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"search-ad-list-view"},[[a("h3",{staticClass:"selfdefined-title"},[e._v("工具栏推广")])],a("template",{slot:"filterContent"},[a("veui-fieldset",[a("veui-button",{staticClass:"create-new",attrs:{ui:"primary"},on:{click:e.createNew}},[e._v("新建渠道")]),a("veui-dropdown",{staticClass:"input300",attrs:{label:e.store.selectedCmp}},e._l(e.store.cmpDatas,function(t){return a("veui-option",{key:t.value,attrs:{value:t.value,label:t.label},on:{click:function(a){e.choseCmp(t)}}})}))],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"name",title:"渠道ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.item.chid)+"\n            ")]}}])}),a("veui-table-column",{attrs:{field:"vulgar",title:"渠道名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.item.chName)+"\n            ")]}}])}),a("veui-table-column",{attrs:{field:"operation",title:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"op-column"},[a("veui-button",{attrs:{ui:"link"},on:{click:function(a){e.eidtDetail(t.item.chid)}}},[e._v("编辑")]),a("veui-button",{ref:"relative"+t.item.id,attrs:{ui:"link"},on:{click:function(e){t.item.visible=!t.item.visible}}},[e._v("删除")]),a("span",[a("veui-tooltip",{staticClass:"del-tooltip",attrs:{position:"top",target:"relative"+t.item.id,trigger:"click","overlay-class":"del-overlay",open:t.item.openDelOverlay},on:{"update:open":function(a){e.$set(t.item,"openDelOverlay",a)}}},[a("veui-icon",{staticClass:"message-icon",attrs:{name:"exclamation-circle-o"}}),e._v("\n                                您确定要删除该渠道吗？\n                                "),a("div",{staticClass:"btn-group"},[a("veui-button",{attrs:{ui:"primary"},on:{click:function(a){e.setItemStatus(t.item)}}},[e._v("确定")]),a("veui-button",{staticClass:"cancel",on:{click:function(e){t.item.openDelOverlay=!1}}},[e._v("取消")])],1)],1)],1)],1)]}}])})],1),a("template",{slot:"pager"},[a("div")])],2)},[],!1,null,null,null));Ns.options.__file="ToolAdListView.vue";var As=Ns.exports,Ms=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","新建渠道"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cmpDatas",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"productType",1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{cid:"",chName:"",chid:""}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.updateRequester=this.api.modifySearchAd,this.createRequester=this.api.saveSearchAd,this.detailRequester=this.api.getSearchAdDetail,this.getCnList=this.api.getCnList;var e=this.getRouteQuery({});this.formData.cid=e.cid,this.formData.chid=e.chid,this.title="create"===this.pageType?"新建渠道":"编辑渠道","create"===this.pageType&&this.getInitialCmp()}},{key:"getInitialCmp",value:function(){var e=this;0<this.cmpDatas.length||this.getCnList({productType:this.productType}).then(function(t){e.cmpDatas=t.map(function(e){return{label:e.cname,value:e.cid}}),e.formData.cid||(e.formData.cid=e.cmpDatas[0]?e.cmpDatas[0].value:"")})}},{key:"initFormData",value:function(e){this.detailRequester&&this.formData.chid&&this.requestDetail({cid:this.formData.cid,chid:this.formData.chid},{initialData:e})}},{key:"submit",value:function(){var e=this.formData;if("create"===this.pageType&&this.createRequester)return this.requestCreate(e);if("edit"===this.pageType&&this.updateRequester)return this.requestUpdate(e);throw new Error("unknown form page type: ".concat(this.pageType,"!"))}}]),t}(ve.a),Ys=Object(u.a)(ye.a,Ms,{name:"EditDirectAdView",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-tab":F.a,"veui-transfer":Se.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-textarea":$e.a,"veui-button":S.a,"veui-switch":we.a,"veui-select":N.a},props:["editProp"],data:function(){return{isEdit:!1,appNamesDatasource:[],requiredRule:[{name:"required",value:!0}]}},methods:{goBack:function(){this.global.redirect({url:{path:"/union/tool/advertise"},type:"push"})}},mounted:function(){xe.a.hideHeaderDom(),"edit"===this.store.pageType&&(this.isEdit=!0)},beforeDestroy:function(){xe.a.addHeaderDom()}}),Ls=(a("e25a"),Object(p.a)(Ys,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common edit-form-content-protect",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card"},[e.isEdit?e._e():a("veui-field",{attrs:{label:"计费名：",name:"cid",field:"cid",rules:e.requiredRule}},[a("div",{staticClass:"card-right"},[a("veui-select",{staticClass:"input300",attrs:{options:e.store.cmpDatas},model:{value:e.store.formData.cid,callback:function(t){e.$set(e.store.formData,"cid",t)},expression:"store.formData.cid"}})],1)]),a("veui-field",{attrs:{label:"渠道名称：",name:"chName",field:"chName",rules:e.requiredRule}},[a("div",{staticClass:"card-right"},[a("veui-input",{staticClass:"input300",attrs:{placeholder:"请输入渠道名称",clearable:!0,maxLength:"32"},model:{value:e.store.formData.chName,callback:function(t){e.$set(e.store.formData,"chName",t)},expression:"store.formData.chName"}})],1)])],1)])]),a("template",{slot:"operation"},[a("veui-button",{attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,null,null));Ls.options.__file="ToolAdFormView.vue";var Es=Ls.exports,Ps=(a("f1e5"),a("a978")),Vs=a("bcb1"),Bs=a("3abc"),$s=Object(u.a)(g.a,Ps.a,{name:"slot-home",components:{"veui-tabs":Sa.a,"veui-tab":F.a,"new-list":Vs.a,"slot-list":Bs.a}}),zs=(a("5d5a"),Object(p.a)($s,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"slot-home-container"},[t("h3",{staticClass:"media-list-title"},[this._v("代码位管理")]),t("veui-tabs",{attrs:{active:this.$route.path}},[t("veui-tab",{attrs:{label:"代码位管理",to:"/union/slot"}},[t("slot-list")],1),t("veui-tab",{attrs:{label:"创新样式管理",to:"/union/slot/new"}},[t("new-list")],1)],1)],1)},[],!1,null,"13ff2441",null));zs.options.__file="SlotNewHomeView.vue";var qs=zs.exports,Us=(a("f751"),a("53ca")),Ws=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","新建代码位"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{name:"",cn:{cid:""},adpTagNames:[],width:700,height:200,marginTitlePicture:10,paddingTop:14,paddingBottom:14,paddingLeft:0,paddingRight:0,marginDescriptionPicture1:10,marginDescriptionPicture2:10,paddingTitleTop:0,picWidth:160,marginTitleDescription:10,width1:640,height1:55,width2:300,height2:250,ptc1:"猜你感兴趣",piw1:160,pih1:140,ptc4:"猜你感兴趣",piw4:160,pih4:140,width3:300,height3:250,height4:60,layout:[2],element:[5],layout1:[1,2,3,4,5],element1:[0,1,4],layout2:[1],element2:[1,2],layout3:[1,3,5],element3:[1,2],url:"",url1:"",url2:"",url3:"",url4:"",url5:"",url6:"",url7:"",url8:"",url9:"",url10:"",height5:60,url11:"",height6:6,url12:"",height7:60,url13:"",height8:60,url14:"",height9:60,url15:"",height10:60,url16:"",height11:200,url17:"",url18:"",url19:"",url20:"",height12:3,imgRatio1:1.7,imgRatio2:1.7,imgRatio3:1.78,imgRatio4:1.78,ptbg1:70,hn1:3,wn1:2,width13:500,height13:350}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"rules",{name:[{name:"required",value:!0,triggers:"input"},{name:"pattern",value:/^(?!(\s+$))/,triggers:"input",message:"名称不能为全空格"}],adpTagNames:[{name:"maxLength",value:5,message:"最多可输入5个标签"}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formSetting",{validators:[]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"emitFormData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"isNew",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"commonData",{userId:"",cname:""}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getAccountInfo=this.api.accountInitInfo,this.getWebSlotCnList=this.api.getWebSlotCnList,this.getWebSlotChannelList=this.api.getWebSlotChannelList,this.createWebSlot=this.api.createWebSlot,this.updateWebSlot=this.api.updateWebSlot,this.getWebSlotDetail=this.api.getWebSlotDetail,this.createNewWebSlot=this.api.createNewWebSlot,this.updateNewWebSlot=this.api.updateNewWebSlot,this.getNewWebSlotDetail=this.api.getNewWebSlotDetail,"edit"===this.pageType&&(this.title="修改代码位")}},{key:"submit",value:function(){var e=JSON.parse(JSON.stringify(this.emitFormData));if(e.basic.userId=this.commonData.userId,e.basic.cname=this.commonData.cname,e.name=this.formData.name,e.cn=this.formData.cn,e.adpTagNames=this.formData.adpTagNames,e.code&&e.code.includes("|cpro_client=")){var t=e.basic.cname,a=e.code.split("|cpro_client=");a[1].includes("|cpro_version=2.0")?a[1]=t+"|cpro_version=2.0":a[1]=t,e.code=a[0]+"|cpro_client="+a[1]}for(var i in e)e.hasOwnProperty(i)&&"object"===Object(Us.a)(e[i])&&"cn"!==i&&"adpTagNames"!==i&&(e[i]=JSON.stringify(e[i]));return this.isNew?(delete e.adpTagNames,"edit"===this.pageType?this.updateNewWebSlot(e):this.createNewWebSlot(e)):"edit"===this.pageType?this.updateWebSlot(e):this.createWebSlot(e)}}]),t}(ve.a),Gs=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(n.a)(t,e),t}(C.a),Hs=Object(u.a)(g.a,Gs,{name:"tags",props:["source"],data:function(){return{text:""}},watch:{source:{handler:function(e){this.$forceUpdate()},deep:!0}},methods:{add:function(e){13===e.which&&e.preventDefault(),""!==this.text&&(this.source.length,this.source.push(this.text),this.text="")},del:function(e){0<=this.source.length-1&&""===this.text&&this.source.splice(this.source.length-1,1)},delCurrentItem:function(e){this.source.splice(e,1)}}}),Qs=(a("947f"),Object(p.a)(Hs,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input tags-wrap"},[e._l(this.source,function(t,i){return a("div",{staticClass:"tags",attrs:{transition:"tags"}},[a("span",{staticClass:"content"},[e._v(e._s(t))]),a("span",{staticClass:"del",on:{click:function(t){e.delCurrentItem(i)}}},[e._v("×")])])}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticClass:"tags-input",attrs:{type:"text"},domProps:{value:e.text},on:{keydown:[function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.add(t):null},function(t){return"button"in t||!e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete"])?e.del(t):null}],input:function(t){t.target.composing||(e.text=t.target.value)}}})],2)},[],!1,null,null,null));Qs.options.__file="tags.vue";var Js=Qs.exports,Ks=a("8bdb");function Zs(e,t){var a,i=e&&e.a;!(a=e&&e.hsl?Object(Ks.a)(e.hsl):e&&e.hex&&0<e.hex.length?Object(Ks.a)(e.hex):Object(Ks.a)(e))||void 0!==a._a&&null!==a._a||a.setAlpha(i||1);var s=a.toHsl(),l=a.toHsv();return 0===s.s&&(l.h=s.h=e.h||e.hsl&&e.hsl.h||t||0),{hsl:s,hex:a.toHexString().toLowerCase(),hex8:a.toHex8String().toLowerCase(),rgba:a.toRgb(),hsv:l,oldHue:e.h||t||s.h,source:e.source,a:e.a||a.getAlpha()}}var Xs={props:["value"],data:function(){return{val:Zs(this.value)}},computed:{colors:{get:function(){return this.val},set:function(e){this.val=e,this.$emit("input",e)}}},watch:{value:function(e){this.val=Zs(e)}},methods:{colorChange:function(e,t){this.oldHue=this.colors.hsl.h,this.colors=Zs(e,t||this.oldHue)},isValidHex:function(e){return Object(Ks.a)(e).isValid()},simpleCheckForValidColor:function(e){for(var t=["r","g","b","a","h","s","l","v"],a=0,i=0,s=0;s<t.length;s++){var l=t[s];e[l]&&(a++,isNaN(e[l])||i++)}if(a===i)return e},paletteUpperCase:function(e){return e.map(function(e){return e.toLowerCase()})},isTransparent:function(e){return 0===Object(Ks.a)(e).getAlpha()}}},el={name:"editableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get:function(){return this.value},set:function(e){if(!(void 0!==this.max&&+e>this.max))return e;this.$refs.input.value=this.max}},labelId:function(){return"input__label__".concat(this.label,"__").concat(Math.random().toString().slice(2,5))},labelSpanText:function(){return this.labelText||this.label}},methods:{update:function(e){this.handleChange(e.target.value)},handleChange:function(e){var t={};t[this.label]=e,void 0===t.hex&&void 0===t["#"]?this.$emit("change",t):5<e.length&&this.$emit("change",t)},handleKeyDown:function(e){var t=this.val,a=Number(t);if(a){var i=this.arrowOffset||1;38===e.keyCode&&(t=a+i,this.handleChange(t),e.preventDefault()),40===e.keyCode&&(t=a-i,this.handleChange(t),e.preventDefault())}}}},tl=(a("48f4"),Object(p.a)(el,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vc-editable-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"val"}],ref:"input",staticClass:"vc-input__input",attrs:{"aria-labelledby":e.labelId},domProps:{value:e.val},on:{keydown:e.handleKeyDown,input:[function(t){t.target.composing||(e.val=t.target.value)},e.update]}}),a("span",{staticClass:"vc-input__label",attrs:{for:e.label,id:e.labelId}},[e._v(e._s(e.labelSpanText))]),a("span",{staticClass:"vc-input__desc"},[e._v(e._s(e.desc))])])},[],!1,null,null,null));tl.options.__file="EditableInput.vue";var al=tl.exports,il=["#FFFFFF","#F7F7F7","#EEEEEE","#E7E7E7","#DBDBDB","#B8B8B8","#999999","#666666","#333333","#000000","#60ACFC","#27A1EA","#39B3EA","#35C5EA","#32D3EB","#4EBECD","#40CEC7","#63D5B2","#5BC49F","#9CDC82","#D4EC59","#FFDA43","#FEB64D","#FF9F69","#FA816D","#FB6E6C","#FF7B7B","#E9668E","#D660A8","#B55CBD","#9287E7","#747BE1","#6370DE","#668ED6","#9FCDFD","#7DC6F2","#88D1F2","#85DCF2","#84E4F3","#94D8E1","#8CE1DD","#A1E5D0","#9CDBC5","#C3EAB4","#E5F39B","#FFE88E","#FED394","#FFC5A5","#FCB3A7","#FCA8A6","#FFAFAF","#F1A3BB","#E69FCA","#D29DD7","#BDB7F0","#ABAFED","#A1A9EB","#A3BBE6","#E58E5E","#E07361"],sl={name:"Compact",mixins:[Xs],props:{palette:{type:Array,default:function(){return il}}},components:{"ed-in":al},computed:{pick:function(){return this.colors.hex.toLowerCase()}},methods:{handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}},ll=(a("a992"),Object(p.a)(sl,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vc-compact",attrs:{role:"application","aria-label":"Compact color picker"}},[a("ul",{staticClass:"vc-compact-colors",attrs:{role:"listbox"}},e._l(e.paletteUpperCase(e.palette),function(t){return a("li",{key:t,staticClass:"vc-compact-color-item",class:{"vc-compact-color-item--white":"#FFFFFF"===t},style:{background:t},attrs:{role:"option","aria-label":"color:"+t,"aria-selected":t===e.pick},on:{click:function(a){e.handlerClick(t)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t===e.pick,expression:"c === pick"}],staticClass:"vc-compact-dot"})])}))])},[],!1,null,null,null));ll.options.__file="Compact.vue";var rl={name:"colorpicker",props:["color"],data:function(){return{colors:{hex:"#000000"},colorValue:"",displayPicker:!1}},components:{"chrome-picker":ll.exports},mounted:function(){this.setColor(this.color||"#3998FC")},watch:{color:function(e){e&&this.setColor(e)},colorValue:function(e){e&&(this.updateColors(e),this.$emit("input",e))}},methods:{setColor:function(e){this.updateColors(e),this.colorValue=e},updateColors:function(e){if("#"==e.slice(0,1))this.colors={hex:e};else if("rgba"==e.slice(0,4)){var t=e.replace(/^rgba?\(|\s+|\)$/g,"").split(","),a="#"+((1<<24)+(parseInt(t[0])<<16)+(parseInt(t[1])<<8)+parseInt(t[2])).toString(16).slice(1);this.colors={hex:a,a:t[3]}}},showPicker:function(){document.addEventListener("click",this.documentClick),this.displayPicker=!0},hidePicker:function(){document.removeEventListener("click",this.documentClick),this.displayPicker=!1},togglePicker:function(){this.displayPicker?this.hidePicker():this.showPicker()},updateFromInput:function(){this.updateColors(this.colorValue)},updateFromPicker:function(e){1==(this.colors=e).rgba.a?this.colorValue=e.hex:this.colorValue="rgba("+e.rgba.r+", "+e.rgba.g+", "+e.rgba.b+", "+e.rgba.a+")"},documentClick:function(e){var t=this.$refs.colorpicker,a=e.target;t===a||t.contains(a)||this.hidePicker()}}},ol=(a("dbb9"),Object(p.a)(rl,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"colorpicker",staticClass:"input-group color-picker"},[a("span",{staticClass:"input-group-addon color-picker-container"},[a("span",{staticClass:"current-color",style:"background-color: "+e.colorValue,on:{click:function(t){e.togglePicker()}}}),e.displayPicker?a("chrome-picker",{attrs:{value:e.colors},on:{input:e.updateFromPicker}}):e._e()],1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.colorValue,expression:"colorValue"}],staticClass:"color-input-text",attrs:{type:"text"},domProps:{value:e.colorValue},on:{focus:function(t){e.showPicker()},input:[function(t){t.target.composing||(e.colorValue=t.target.value)},e.updateFromInput]}})])},[],!1,null,null,null));ol.options.__file="index.vue";var nl=ol.exports,cl=(a("f559"),a("63ea")),ul=a.n(cl),dl=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["width"],validate:function(e){var t=Number(e);return 100<=t&&t<=1500&&Math.floor(t)===t||{width:"请填写100～1500的整数"}}},{fields:["height"],validate:function(e){var t=Number(e);return 40<=t&&t<=1e3&&Math.floor(t)===t||{height:"请填写40～1000的整数"}}},{fields:["marginTitlePicture"],validate:function(e){var t=Number(e);return 0<=t&&t<=100&&Math.floor(t)===t||{marginTitlePicture:"请填写0～100的整数"}}},{fields:["paddingTop"],validate:function(e){var t=Number(e);return 0<=t&&t<=100&&Math.floor(t)===t||{paddingTop:"请填写0～100的整数"}}},{fields:["paddingBottom"],validate:function(e){var t=Number(e);return 0<=t&&t<=100&&Math.floor(t)===t||{paddingBottom:"请填写0～100的整数"}}},{fields:["paddingLeft"],validate:function(e){var t=Number(e);return 0<=t&&t<=100&&Math.floor(t)===t||{paddingLeft:"请填写0～100的整数"}}},{fields:["paddingRight"],validate:function(e){var t=Number(e);return 0<=t&&t<=100&&Math.floor(t)===t||{paddingRight:"请填写0～100的整数"}}},{fields:["marginDescriptionPicture1"],validate:function(e){var t=Number(e);return 0<=t&&t<=100&&Math.floor(t)===t||{marginDescriptionPicture1:"请填写0～100的整数"}}},{fields:["marginDescriptionPicture2"],validate:function(e){var t=Number(e);return 0<=t&&t<=100&&Math.floor(t)===t||{marginDescriptionPicture2:"请填写0～100的整数"}}},{fields:["picWidth"],validate:function(e){var t=Number(e);return 46<=t&&t<=1e3&&Math.floor(t)===t||{picWidth:"请填写46～1000的整数"}}},{fields:["paddingTitleTop"],validate:function(e){var t=Number(e);return 0<=t&&t<=100&&Math.floor(t)===t||{paddingTitleTop:"请填写0～100的整数"}}},{fields:["marginTitleDescription"],validate:function(e){var t=Number(e);return 0<=t&&t<=100&&Math.floor(t)===t||{marginTitleDescription:"请填写0～100的整数"}}}]),a}return Object(n.a)(t,e),t}(C.a),fl=(a("0626"),Object(u.a)(g.a,dl,{name:"slot-pc-tuwen-qianru-normal",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-icon":y.a,"color-picker":nl,"veui-radio-button-group":De.a},props:{templateId:Number,validatorData:Object,commonData:Object,validators:Array},data:function(){return{container:{anchoredType:1,width:700,height:200,sizeType:1,floated:{}},complement:{type:2},descibeConfig:{readNumber:"1"},extraFillStyle:{backgroundColor:"#ffffff",nativead:{screenShot:{width:160}},txt:{fontName:"微软雅黑",titleFontSize:16,btitle:"1",ctitle:"#000000"},marginTitlePicture:10,padding:{top:14,bottom:14,left:14,right:14}},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:2,styleTemplateId:[],backgroundColor:"#ffffff",nativead:{screenShot:{width:160,height:120},adNum:1,requiredFields:[5],imageNum:[1]},padding:{top:14,bottom:14,left:14,right:14},txt:{fontName:"微软雅黑",titleFontSize:16,btitle:"1",ctitle:"#000000"},marginTitlePicture:10},visual_picRatio:"",paddingTitleTop:0,marginTitleDescription:10,marginDescriptionPicture:10,pdp:1,httpType:"http://",url:"",txt:{descFontName:"微软雅黑",descFontSize:14,cdesc:"#000000"},pdpOptions:[{label:"左",value:1},{label:"右",value:3}],imageNum:4,imageNumOptions:[{label:"3",value:3},{label:"4",value:4}],httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],complementOptions:[{label:"百度公益",value:2},{label:"自定义链接",value:1},{label:"空白",value:3},{label:"自动收起",value:7}],describeConfigOptions:[{label:"无描述",value:"0"},{label:"阅读数量或点赞数等描述",value:"1"}],effect:1,effectOptions:[{label:"默认",value:1},{label:"自定义",value:2}],fontOptions:[{label:"微软雅黑",value:"微软雅黑"},{label:"宋体",value:"宋体"}],fontSizeOptions:[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18},{label:"19px",value:19},{label:"20px",value:20}]}},watch:{effect:function(e){1===e&&(this.container={anchoredType:1,width:700,height:200,sizeType:1,floated:{}},this.complement={type:2},this.extraFillStyle={backgroundColor:"#ffffff",nativead:{screenShot:{width:160}},txt:{fontName:"微软雅黑",titleFontSize:16,btitle:"1",ctitle:"#000000"},marginTitlePicture:10,padding:{top:14,bottom:14,left:14,right:14}},this.fillStyle={styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:2,styleTemplateId:[],backgroundColor:"#ffffff",nativead:{screenShot:{width:160,height:120},adNum:1,requiredFields:[5],imageNum:[1]},padding:{top:14,bottom:14,left:14,right:14},txt:{fontName:"微软雅黑",titleFontSize:16,btitle:"1",ctitle:"#000000"},marginTitlePicture:10},this.paddingTitleTop=0,this.marginTitleDescription=10,this.marginDescriptionPicture=10,this.pdp=1,this.txt={descFontName:"微软雅黑",descFontSize:14,cdesc:"#000000"},this.imageNum=4,50040!==this.templateId&&(this.fillStyle.ignoreStyleMode=1)),50044===this.templateId&&(this.container.height=250,this.extraFillStyle.nativead.screenShot.width=700),this.emitForm()},templateId:function(e){this.fillStyle.ignoreStyleMode=50040===Number(e)?2:1,50044===e?(this.container.height=250,this.extraFillStyle.nativead.screenShot.width=700):(this.container.height=200,this.extraFillStyle.nativead.screenShot.width=160),this.effect=1,this.emitForm()},visual_picRatio:function(){this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url2=e,this.emitForm()},paddingTitleTop:function(e){this.validatorData.paddingTitleTop=e,this.emitForm()},marginTitleDescription:function(e){this.validatorData.marginTitleDescription=e,this.emitForm()},marginDescriptionPicture:function(e){this.validatorData.marginDescriptionPicture1=e,this.validatorData.marginDescriptionPicture2=e,this.emitForm()},pdp:function(){this.emitForm()},imageNum:function(){this.emitForm()},container:{handler:function(e){this.validatorData.width=e.width,this.validatorData.height=e.height,this.emitForm()},deep:!0},complement:{handler:function(){this.emitForm()},deep:!0},descibeConfig:{handler:function(){this.emitForm()},deep:!0},extraFillStyle:{handler:function(e){this.validatorData.marginTitlePicture=e.marginTitlePicture,this.validatorData.paddingTop=e.padding.top,this.validatorData.paddingBottom=e.padding.bottom,this.validatorData.paddingLeft=e.padding.left,this.validatorData.paddingRight=e.padding.right,this.validatorData.picWidth=e.nativead.screenShot.width,this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},txt:{handler:function(){this.emitForm()},deep:!0}},computed:{picOptions:function(){var e=[{label:"16:9",value:.5625},{label:"3:2",value:.6667},{label:"4:3",value:.75}];return this.visual_picRatio=.75,50043===this.templateId&&(e=[{label:"16:9",value:.5625},{label:"3:2",value:.6667},{label:"4:3",value:.75},{label:"1:1",value:1}]),50044===this.templateId&&(e=[{label:"4:1",value:this.visual_picRatio=.25},{label:"3:1",value:.3333}]),e}},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setEditData:function(e){var t=this;1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,this.fillStyle.ignoreStyleMode=e.fillStyle.ignoreStyleMode,ul()(this.extraFillStyle,e.extra.featureAd[this.templateId].fillStyle)&&ul()(this.fillStyle,e.fillStyle)?this.effect=1:(this.effect=2,this.$nextTick(function(){if(t.assignData(t.container,e.container),t.assignData(t.extraFillStyle,e.extra.featureAd[t.templateId].fillStyle),t.assignData(t.fillStyle,e.fillStyle),t.assignData(t.txt,e.fillStyle.txt),e.extra.featureAd[t.templateId].hasOwnProperty("visual_picRatio")&&(t.visual_picRatio=e.extra.featureAd[t.templateId].visual_picRatio),e.extra.featureAd[t.templateId].fillStyle.hasOwnProperty("paddingTitleTop")&&(t.paddingTitleTop=e.extra.featureAd[t.templateId].fillStyle.paddingTitleTop),e.extra.featureAd[t.templateId].fillStyle.hasOwnProperty("marginTitleDescription")&&(t.marginTitleDescription=e.extra.featureAd[t.templateId].fillStyle.marginTitleDescription),e.extra.featureAd[t.templateId].fillStyle.hasOwnProperty("marginDescriptionPicture")&&(t.marginDescriptionPicture=e.extra.featureAd[t.templateId].fillStyle.marginDescriptionPicture),e.fillStyle.nativead.hasOwnProperty("imageNum")&&(t.imageNum=e.fillStyle.nativead.imageNum[0]),e.fillStyle.hasOwnProperty("pdp")&&(t.pdp=e.fillStyle.pdp),-1!==e.context.userDefine.indexOf("dpConfig=")){var a=e.context.userDefine.match(/\|dpConfig=(\d+)(?:$|\|+)/)[1];t.descibeConfig.readNumber=a}}))},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]instanceof Object&&!Array.isArray(e[a])?this.assignData(e[a],t[a]):e[a]=t[a])},setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},emitForm:function(){var e={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:Object(v.a)({},this.container),extra:{shape:"pcFeed",fillStyleType:2,featureAd:{featureStyle:this.templateId}},complement:this.complement,fillStyle:{},context:{userDefine:"",adSlotType:13},adType:107,bidLevel:3};switch(e.container.width=Number(e.container.width),e.container.height=Number(e.container.height),e.fillStyle=JSON.parse(JSON.stringify(this.fillStyle)),e.fillStyle.styleTemplateId=[this.templateId],e.fillStyle.backgroundColor=this.extraFillStyle.backgroundColor,e.fillStyle.nativead.screenShot={width:Number(this.extraFillStyle.nativead.screenShot.width),height:Math.round(this.extraFillStyle.nativead.screenShot.width*this.visual_picRatio)},this.templateId){case 50039:e.fillStyle.nativead.adNum=1,e.fillStyle.nativead.requiredFields=[7],e.fillStyle.nativead.imageNum=[1],e.context.userDefine="cpro_template=template_inlay_all_pc_lu_info_flow_image_txt";break;case 50040:e.fillStyle.nativead.adNum=1,e.fillStyle.nativead.requiredFields=[5],e.fillStyle.nativead.imageNum=[this.imageNum],e.context.userDefine="cpro_template=template_inlay_all_pc_lu_info_flow_images";break;case 50041:e.fillStyle.nativead.adNum=1,e.fillStyle.nativead.requiredFields=[7],e.fillStyle.nativead.imageNum=[1],e.context.userDefine="cpro_template=template_inlay_all_pc_lu_info_flow_image_title_top";break;case 50042:e.fillStyle.nativead.adNum=1,e.fillStyle.nativead.requiredFields=[5],e.fillStyle.nativead.imageNum=[1],e.context.userDefine="cpro_template=template_inlay_all_pc_lu_info_flow_image_no_des";break;case 50043:e.fillStyle.nativead.adNum=1,e.fillStyle.nativead.requiredFields=[5],e.fillStyle.nativead.imageNum=[1],e.context.userDefine="cpro_template=template_inlay_all_pc_lu_info_flow_image_title_bottom";break;case 50044:e.fillStyle.nativead.adNum=1,e.fillStyle.nativead.requiredFields=[5];var t=.25===this.visual_picRatio?2:3;e.fillStyle.nativead.imageNum=[t],e.context.userDefine="cpro_template=template_inlay_all_pc_lu_info_flow_images_big"}var a=JSON.parse(JSON.stringify(this.extraFillStyle));a.marginTitlePicture=Number(a.marginTitlePicture),a.padding.top=Number(a.padding.top),a.padding.bottom=Number(a.padding.bottom),a.padding.left=Number(a.padding.left),a.padding.right=Number(a.padding.right),e.extra.featureAd[this.templateId]={fillStyle:a,visual_picRatio:this.visual_picRatio},e.fillStyle.marginTitlePicture=a.marginTitlePicture,50039!==this.templateId&&50042!==this.templateId||(e.extra.featureAd[this.templateId].fillStyle.paddingTitleTop=Number(this.paddingTitleTop),e.fillStyle.paddingTitleTop=Number(this.paddingTitleTop)),50039!==this.templateId&&50041!==this.templateId||(e.extra.featureAd[this.templateId].fillStyle.marginTitleDescription=Number(this.marginTitleDescription),e.fillStyle.marginTitleDescription=Number(this.marginTitleDescription)),50040===this.templateId&&(e.extra.featureAd[this.templateId].fillStyle.nativead.imageNum=this.imageNum),50039!==this.templateId&&50041!==this.templateId||(Object.assign(e.extra.featureAd[this.templateId].fillStyle.txt,this.txt),Object.assign(e.fillStyle.txt,this.txt)),50039!==this.templateId&&50042!==this.templateId||(e.extra.featureAd[this.templateId].fillStyle.pdp=this.pdp,e.fillStyle.pdp=this.pdp),50040!==this.templateId&&50041!==this.templateId||(e.extra.featureAd[this.templateId].fillStyle.marginDescriptionPicture=Number(this.marginDescriptionPicture),e.fillStyle.marginDescriptionPicture=Number(this.marginDescriptionPicture)),e.fillStyle.padding=Object(v.a)({},e.extra.featureAd[this.templateId].fillStyle.padding),e.fillStyle.txt=Object(v.a)({},e.extra.featureAd[this.templateId].fillStyle.txt);var i=1;1===this.complement.type?(e.complement.url=this.httpType+this.url,i="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(i="0|cpro_acolor=#ffffff"),7===this.complement.type&&(i="0"),e.code="cpro_h="+this.container.height+"|cpro_w="+this.container.width+"|"+e.context.userDefine+"|cpro_cad="+i+"|cpro_client="+this.commonData.cname,50040!==this.templateId&&50044!==this.templateId&&50043!==this.templateId&&(e.context.userDefine=e.context.userDefine+"|dpConfig="+this.descibeConfig.readNumber),this.$emit("emitForm",e)}}})),pl=(a("4bcc"),Object(p.a)(fl,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-field",{attrs:{label:"设置宽高"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽",name:"width",field:"width"}},[a("veui-input",{model:{value:e.container.width,callback:function(t){e.$set(e.container,"width",t)},expression:"container.width"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高",name:"height",field:"height"}},[a("veui-input",{model:{value:e.container.height,callback:function(t){e.$set(e.container,"height",t)},expression:"container.height"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("div",{staticClass:"effect-setting"},[a("veui-radio-button-group",{attrs:{items:e.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("veui-checkbox",{staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n            允许所有样式参与竞价\n        ")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.effect,expression:"effect === 2"}]},[a("p",{staticClass:"item-title"},[e._v("全局设置")]),a("veui-field",{attrs:{label:"背景颜色"}},[a("color-picker",{attrs:{color:e.extraFillStyle.backgroundColor},model:{value:e.extraFillStyle.backgroundColor,callback:function(t){e.$set(e.extraFillStyle,"backgroundColor",t)},expression:"extraFillStyle.backgroundColor"}})],1),a("p",{staticClass:"item-title"},[e._v("广告位设置")]),a("veui-field",{attrs:{label:"内边距"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"上",name:"paddingTop",field:"paddingTop"}},[a("veui-input",{model:{value:e.extraFillStyle.padding.top,callback:function(t){e.$set(e.extraFillStyle.padding,"top",t)},expression:"extraFillStyle.padding.top"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"下",name:"paddingBottom",field:"paddingBottom"}},[a("veui-input",{model:{value:e.extraFillStyle.padding.bottom,callback:function(t){e.$set(e.extraFillStyle.padding,"bottom",t)},expression:"extraFillStyle.padding.bottom"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"左",name:"paddingLeft",field:"paddingLeft"}},[a("veui-input",{model:{value:e.extraFillStyle.padding.left,callback:function(t){e.$set(e.extraFillStyle.padding,"left",t)},expression:"extraFillStyle.padding.left"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"右",name:"paddingRight",field:"paddingRight"}},[a("veui-input",{model:{value:e.extraFillStyle.padding.right,callback:function(t){e.$set(e.extraFillStyle.padding,"right",t)},expression:"extraFillStyle.padding.right"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("图片区样式")]),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:50039===e.templateId||50042===e.templateId,expression:"templateId === 50039 || templateId === 50042"}],attrs:{label:"图片位置"}},[a("veui-select",{attrs:{options:e.pdpOptions},model:{value:e.pdp,callback:function(t){e.pdp=t},expression:"pdp"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:50040===e.templateId,expression:"templateId === 50040"}],staticClass:"inline-field",attrs:{label:"图片数量"}},[a("veui-select",{attrs:{options:e.imageNumOptions},model:{value:e.imageNum,callback:function(t){e.imageNum=t},expression:"imageNum"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:50040===e.templateId,expression:"templateId === 50040"}],staticClass:"inline-field",attrs:{label:"图片间距",name:"marginDescriptionPicture1",field:"marginDescriptionPicture1",rules:"required"}},[a("veui-input",{model:{value:e.marginDescriptionPicture,callback:function(t){e.marginDescriptionPicture=t},expression:"marginDescriptionPicture"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{name:"picWidth",field:"picWidth",label:"宽",rules:"required"}},[a("veui-input",{model:{value:e.extraFillStyle.nativead.screenShot.width,callback:function(t){e.$set(e.extraFillStyle.nativead.screenShot,"width",t)},expression:"extraFillStyle.nativead.screenShot.width"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"宽高比"}},[a("veui-select",{attrs:{options:e.picOptions},model:{value:e.visual_picRatio,callback:function(t){e.visual_picRatio=t},expression:"visual_picRatio"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:50041===e.templateId,expression:"templateId === 50041"}],staticClass:"long-label",attrs:{rules:"required",name:"marginDescriptionPicture2",field:"marginDescriptionPicture2",label:"图片和描述词间距"}},[a("veui-input",{model:{value:e.marginDescriptionPicture,callback:function(t){e.marginDescriptionPicture=t},expression:"marginDescriptionPicture"}})],1),a("p",{staticClass:"item-title"},[e._v("标题")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字"}},[a("veui-select",{attrs:{options:e.fontOptions},model:{value:e.extraFillStyle.txt.fontName,callback:function(t){e.$set(e.extraFillStyle.txt,"fontName",t)},expression:"extraFillStyle.txt.fontName"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.extraFillStyle.txt.ctitle},model:{value:e.extraFillStyle.txt.ctitle,callback:function(t){e.$set(e.extraFillStyle.txt,"ctitle",t)},expression:"extraFillStyle.txt.ctitle"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:50039===e.templateId||50042===e.templateId,expression:"templateId === 50039 || templateId === 50042"}],staticClass:"inline-field",attrs:{label:"标题上边距",name:"paddingTitleTop",field:"paddingTitleTop",rules:"required"}},[a("veui-input",{model:{value:e.paddingTitleTop,callback:function(t){e.paddingTitleTop=t},expression:"paddingTitleTop"}})],1),a("veui-field",{staticClass:"inline-field font-area",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.fontSizeOptions},model:{value:e.extraFillStyle.txt.titleFontSize,callback:function(t){e.$set(e.extraFillStyle.txt,"titleFontSize",t)},expression:"extraFillStyle.txt.titleFontSize"}}),a("veui-checkbox",{staticClass:"font-checkbox",attrs:{"true-value":"1","false-value":"0"},model:{value:e.extraFillStyle.txt.btitle,callback:function(t){e.$set(e.extraFillStyle.txt,"btitle",t)},expression:"extraFillStyle.txt.btitle"}},[e._v("\n                加粗\n            ")])],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:50039===e.templateId||50041===e.templateId,expression:"templateId === 50039 || templateId === 50041"}],staticClass:"inline-field",attrs:{label:"标题描述间距",name:"marginTitleDescription",field:"marginTitleDescription",rules:"required"}},[a("veui-input",{model:{value:e.marginTitleDescription,callback:function(t){e.marginTitleDescription=t},expression:"marginTitleDescription"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"标题图片间距",rules:"required",name:"marginTitlePicture",field:"marginTitlePicture"}},[a("veui-input",{model:{value:e.extraFillStyle.marginTitlePicture,callback:function(t){e.$set(e.extraFillStyle,"marginTitlePicture",t)},expression:"extraFillStyle.marginTitlePicture"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:50039===e.templateId||50041===e.templateId,expression:"templateId === 50039 || templateId === 50041"}]},[a("p",{staticClass:"item-title"},[e._v("描述")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字"}},[a("veui-select",{attrs:{options:e.fontOptions},model:{value:e.txt.descFontName,callback:function(t){e.$set(e.txt,"descFontName",t)},expression:"txt.descFontName"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.txt.cdesc},model:{value:e.txt.cdesc,callback:function(t){e.$set(e.txt,"cdesc",t)},expression:"txt.cdesc"}})],1),a("veui-field",{attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.fontSizeOptions},model:{value:e.txt.descFontSize,callback:function(t){e.$set(e.txt,"descFontSize",t)},expression:"txt.descFontSize"}})],1)],1),50043!==e.templateId&&50044!=e.templateId&&50040!=e.templateId?a("p",{staticClass:"item-title"},[e._v("\n             其它描述配置\n         ")]):e._e(),50043!==e.templateId&&50044!=e.templateId&&50040!=e.templateId?a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.describeConfigOptions},model:{value:e.descibeConfig.readNumber,callback:function(t){e.$set(e.descibeConfig,"readNumber",t)},expression:"descibeConfig.readNumber"}}):e._e()],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.complementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url2",field:"url2"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e()],1)},[],!1,null,"557d48fe",null));pl.options.__file="InfoView.vue";var hl=pl.exports,ml=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(n.a)(t,e),t}(C.a),vl=Object(u.a)(g.a,ml,{name:"slot-pc-tuwen-qianru-normal",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-icon":y.a,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object},data:function(){return{extra:{shape:"startPatch",fillStyleType:0},container:{anchoredType:1,width:640,height:480,sizeType:1,occurrence:1,floated:{}},fillStyle:{elements:[7],layout:[1],video:{time:5,delay:0},lu:{},search:{},styleType:2},fillStyle1:{elements:[7],layout:[1],video:{time:5,delay:0},lu:{},search:{},styleType:2},styleOptions:[{label:"前贴片",value:"startPatch"},{label:"中贴片",value:"midPatch"},{label:"后贴片",value:"endPatch"},{label:"暂停贴",value:"pausePatch"}],size:"640*480",sizeOptions:[{label:"640*480",value:"640*480"},{label:"640*360",value:"640*360"}],effectOptions:[{label:"默认",value:0},{label:"普通样式",value:1}],timeOptions:[{label:"5s",value:5},{label:"15s",value:15},{label:"30s",value:30},{label:"45s",value:45},{label:"60s",value:60}],delayOptions:[],typeArr:[0,1],typeItems:[{label:"文字",value:0},{label:"图片",value:1}],styleArr:[1,3,5],styleItems:[{label:"普通文字",value:1,layout:2,element:"0"},{label:"普通图片",value:3,layout:1,element:"12"},{label:"文字排行",value:5,layout:2,element:"5"}],adSlotType:21}},computed:{},watch:{size:function(e){var t=e.split("*");this.container.width=Number(t[0]),this.container.height=Number(t[1]),this.emitForm()},styleArr:{handler:function(e){this.validatorData.layout3=e,this.emitForm()},deep:!0},"extra.shape":function(e){this.changeShape(e)},"extra.fillStyleType":function(){this.emitForm()},fillStyle:{handler:function(){this.emitForm()},deep:!0}},created:function(){this.getDelayOptions(),this.emitForm()},methods:{setEditData:function(e){var t=this;this.assignData(this.extra,e.extra),this.assignData(this.fillStyle,e.fillStyle),"pausePatch"===this.extra.shape&&this.transElements(this.fillStyle.elements,e.code.cpro_layout_filter),this.$nextTick(function(){t.size=e.container.width+"*"+e.container.height})},transElements:function(e,t){var a=this,i=e.join(""),s=this.styleItems.filter(function(e){return i.includes(e.element)}).map(function(e){return e.value}),l=[];if((s.includes(1)||s.includes(4)||s.includes(5))&&l.push(0),s.includes(3)&&l.push(1),s.includes(2)&&l.push(4),this.typeArr=l,t){var r=[];t.includes("tabcloud")&&r.push(4),t.includes("rank")&&r.push(5),t.includes("image")&&r.push(6),s=s.filter(function(e){return!r.includes(e)})}this.$nextTick(function(){a.styleArr=s})},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]instanceof Object&&!Array.isArray(e[a])?this.assignData(e[a],t[a]):e[a]=t[a])},getDelayOptions:function(){for(var e=[],t=0;t<=60;t++)e.push({label:"".concat(t,"s"),value:t});this.delayOptions=e},changeShape:function(e){switch(e){case"startPatch":this.container.occurrence=1,this.adSlotType=21;break;case"midPatch":this.container.occurrence=9,this.adSlotType=22;break;case"endPatch":this.container.occurrence=3,this.adSlotType=23;break;case"pausePatch":this.container.occurrence=2,this.adSlotType=26}"pausePatch"===e?(this.size="500*375",this.sizeOptions=[{label:"500*375",value:"500*375"},{label:"400*300",value:"400*300"}]):(this.size="640*480",this.sizeOptions=[{label:"640*480",value:"640*480"},{label:"640*360",value:"640*360"}]),this.emitForm()},changeType:function(e){this.validatorData.element3=e;var t=[];2===this.typeArr.length?(t=[{label:"普通文字",value:1,layout:2,element:"0"},{label:"普通图片",value:3,layout:1,element:"12"},{label:"文字排行",value:5,layout:2,element:"5"}],this.styleArr=[1,3,5]):(this.typeArr.includes(0)&&(t=[{label:"普通文字",value:1,layout:2,element:"0"},{label:"文字排行",value:5,layout:2,element:"5"}],this.styleArr=[1,5]),this.typeArr.includes(1)&&(t=[{label:"普通图片",value:3,layout:1,element:"12"}],this.styleArr=[3])),this.styleItems=t},emitForm:function(){var e=this,t={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:3,rspFormat:2,sellType:2,mediumType:1},container:this.container,extra:this.extra,context:{userDefine:"cpro_template=baidujson_patch",adSlotType:this.adSlotType},adType:106,bidLevel:3};if(0===this.extra.fillStyleType?t.fillStyle=JSON.parse(JSON.stringify(this.fillStyle1)):t.fillStyle=JSON.parse(JSON.stringify(this.fillStyle)),t.fillStyle.video.time=String(t.fillStyle.video.time),t.fillStyle.video.delay=Number(t.fillStyle.video.delay),t.code="cpro_w="+t.container.width+"|cpro_h="+t.container.height+"|"+t.context.userDefine+"|cpro_ltime="+t.fillStyle.video.time+"|cpro_delay="+t.fillStyle.video.delay+"|cpro_at=video|cpro_client="+this.commonData.cname,"pausePatch"===this.extra.shape){t.fillStyle.video={};var a,i=[],s="",l=this.styleItems.filter(function(t){return e.styleArr.includes(t.value)});a=l.map(function(e){return e.layout});var r="";l.forEach(function(e){r+=e.element});var o=Object(Ve.a)(new Set(a));s=(i=Object(Ve.a)(new Set(r.split(""))).map(function(e){return Number(e)})).includes(5)?"tabcloud,image":"";var n=[];i.includes(0)&&n.push("text"),i.includes(1)&&n.push("image"),i.includes(5)&&n.push("linkunit"),t.fillStyle.layout=o,t.fillStyle.elements=i,t.context.userDefine=s?"cpro_layout_filter=".concat(s,"|cpro_template=baidujson_patch"):"cpro_template=baidujson_patch",t.code="cpro_w="+t.container.width+"|cpro_h="+t.container.height+"|"+t.context.userDefine+"|cpro_at="+n.join(",")+"|cpro_client="+this.commonData.cname}this.$emit("emitForm",t)}}}),bl=(a("e8e7"),Object(p.a)(vl,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"video-coantiner"},[a("p",{staticClass:"item-title top-title"},[e._v("形态及尺寸")]),a("veui-radio-button-group",{attrs:{items:e.styleOptions},on:{change:e.changeShape},model:{value:e.extra.shape,callback:function(t){e.$set(e.extra,"shape",t)},expression:"extra.shape"}}),a("veui-radio-group",{attrs:{items:e.sizeOptions},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.effectOptions},model:{value:e.extra.fillStyleType,callback:function(t){e.$set(e.extra,"fillStyleType",t)},expression:"extra.fillStyleType"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:"pausePatch"===e.extra.shape,expression:"extra.shape === 'pausePatch'"}]},[a("veui-icon",{staticClass:"info-icon",attrs:{name:"exclamation-circle-o"}}),a("span",{staticClass:"effect-info"},[e._v("推荐您选择默认配置，默认配置是充分竞价，变现效果好")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.extra.fillStyleType&&"pausePatch"!==e.extra.shape,expression:"extra.fillStyleType === 1 && extra.shape !== 'pausePatch'"}]},[a("p",{staticClass:"item-title"},[e._v("播放时长")]),a("veui-select",{attrs:{"overlay-class":"web-slot-select-243",options:e.timeOptions},model:{value:e.fillStyle.video.time,callback:function(t){e.$set(e.fillStyle.video,"time",t)},expression:"fillStyle.video.time"}}),a("p",{staticClass:"item-title"},[e._v("播放延迟")]),a("veui-select",{attrs:{"overlay-class":"web-slot-select-243",options:e.delayOptions},model:{value:e.fillStyle.video.delay,callback:function(t){e.$set(e.fillStyle.video,"delay",t)},expression:"fillStyle.video.delay"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.extra.fillStyleType&&"pausePatch"===e.extra.shape,expression:"extra.fillStyleType === 1 && extra.shape === 'pausePatch'"}],staticClass:"pause-container"},[a("veui-field",{staticClass:"type-field",attrs:{label:"物料类型",name:"element3",field:"element3",rules:"required"}},[a("veui-checkbox-group",{attrs:{items:e.typeItems},on:{change:e.changeType},model:{value:e.typeArr,callback:function(t){e.typeArr=t},expression:"typeArr"}})],1),a("veui-field",{attrs:{label:"样式类型",name:"layout3",field:"layout3",rules:"required"}},[a("veui-checkbox-group",{attrs:{items:e.styleItems},model:{value:e.styleArr,callback:function(t){e.styleArr=t},expression:"styleArr"}})],1)],1)],1)},[],!1,null,"5abdd25b",null));bl.options.__file="VideolView.vue";var yl=bl.exports,gl=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"typeOptions",[{label:"横幅",value:"banner"},{label:"竖幅",value:"vbanner"},{label:"矩形",value:"rectangle"},{label:"其他",value:"others"},{label:"自定义",value:"custom"}]),a}return Object(n.a)(t,e),t}(C.a),_l=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sizeOptions",[{label:"960*90",value:"960*90"},{label:"640*60",value:"640*60"},{label:"728*90",value:"728*90"},{label:"580*90",value:"580*90"},{label:"468*60",value:"468*60"},{label:"760*90",value:"760*90"},{label:"960*60",value:"960*60"},{label:"468*15",value:"468*15"},{label:"500*200",value:"500*200"}]),a}return Object(n.a)(t,e),t}(C.a),Ol=(a("55dd"),function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"rules",{element:[{name:"required",value:!0,triggers:"change",message:"请至少选择一种物料类型"}],layout:[{name:"required",value:!0,triggers:"change",message:"请至少选择一种样式类型"}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterMap",{4:"tabcloud",5:"rank",6:"image"}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"typeItems",[{label:"文字",value:0},{label:"图文",value:4},{label:"图片",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleMap",{0:[{label:"普通文字",value:1,layout:2},{label:"标签云",value:4,layout:2},{label:"文字排行",value:5,layout:2}],4:[{label:"图文",value:2,layout:2}],1:[{label:"普通图片",value:3,layout:1},{label:"图片排行",value:6,layout:2}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleItems",[{label:"普通文字",value:1,layout:2,element:"0"},{label:"图文",value:2,layout:2,element:"4"},{label:"普通图片",value:3,layout:1,element:"127"},{label:"标签云",value:4,layout:2,element:"5"},{label:"文字排行",value:5,layout:2,element:"5"},{label:"图片排行",value:6,layout:2,element:"5"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"colorSettingItems",[{label:"普通配色",value:1},{label:"自定义配色",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"labelSettingItems",[{label:"预设效果",value:1},{label:"自定义效果",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"colorButtonOptions",[{label:"默认",value:"#3998FC"},{label:"简约灰",value:"#666666"},{label:"暖粉橙",value:"#FEB64D"},{label:"红与白",value:"#FF5B5B"},{label:"黄金黄",value:"#FFE168"},{label:"漂新绿",value:"#5BC49F"},{label:"漂青蓝",value:"#60ACFC"},{label:"沁心蓝",value:"#32D3EB"},{label:"嫩叶绿",value:"#D4EC59"},{label:"漂冰绿",value:"#A1E5D0"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"labelArr",["#ffffff","#ffd7d5","#ffcad0","#dfe4f9","#c5e0f3","#eae8e9","#f1d7ff","#c5f3d7","#fff5c0","#fedbc0","#cfdfeb","#f1cfd6","#fbd9d6","#c1f5ff","#e4fec1"]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"alignOptions",[{label:"左",value:1,name:"left"},{label:"中",value:2,name:"center"},{label:"右",value:3,name:"right"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"numberOptions",[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fontSizeOptions",[{label:"12px",value:12},{label:"14px",value:14}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fontNameOptions",[{label:"宋体",value:"宋体"},{label:"微软雅黑",value:"微软雅黑"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"flushOptions",[{label:"不闪烁",value:0},{label:"整体闪烁",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"bborderOptions",[{label:"0px",value:0},{label:"1px",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"COLOR_PATTERN",[{text:"默认",value:["#ffffff","#ffffff","#0000ff","#e10900","#008000","#444444"]},{text:"红与白",value:["#bc0909","#ffffff","#0000ff","#e10900","#008000","#444444"]},{text:"简约灰",value:["#999999","#ffffff","#000000","#e10900","#008000","#444444"]},{text:"沁心蓝",value:["#798dbf","#ffffff","#0000ff","#e10900","#008000","#444444"]},{text:"嫩叶绿",value:["#86ac5f","#ffffff","#0000ff","#e10900","#008000","#444444"]},{text:"暖粉橙",value:["#ed945a","#ffffff","#0000ff","#e10900","#008000","#444444"]},{text:"黄金黄",value:["#f1dd95","#ffffff","#0000ff","#e10900","#008000","#444444"]},{text:"漂青蓝",value:["#e0e4f3","#79829e","#ffffff","#e10900","#353f5e","#d1dbff"]},{text:"漂新绿",value:["#a2be43","#f4fae1","#178102","#e10900","#2d4383","#444444"]},{text:"漂冰绿",value:["#137766","#3b9082","#ffffff","#e10900","#0f5348","#b9f6ee"]}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fillStyle",{txt:{cbackground:"#ffffff",cborder:"#ffffff",ctitle:"#0000ff",cflush:"#e10900",curl:"#008000",cdesc:"#444444",align:1,number:4,fontName:"宋体",fontSize:12,bborder:0},flush:0,opacity:100,elements:[0,4,1,5,2,7],layout:[1,2],backgroundColor:"#ffffff",lu:{number:0,borderWidth:0},cloudTheme:{stid:5},video:{},search:{},styleType:2}),a}return Object(n.a)(t,e),t}(C.a)),Cl=a("7fd1"),Dl=Object(u.a)(g.a,Ol,{name:"slot-pc-tuwen-qianru-normal",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{commonData:Object,height:Number,width:Number,shape:String,validatorData:Object,size:String},data:function(){return{ComplementOptions:Cl.e,showTrigger:!1,trigger:0,httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],complement:{type:2},fillStyle:this.store.fillStyle,cloud:{cbackground:"#dfe4f9",cfont:"#000000",font:"宋体",chfont:"#ffffff"},type:[0,1,4],style:[1,2,3,4,5,6],colorSetting:1,colorValue:"#3998FC",labelSetting:1,labelValue:"#dfe4f9",showCloud:!0,showColor:!0,showLu:!0,showFlush:!0,onlyOpacity:!1}},watch:{trigger:function(){this.emitForm()},width:function(){this.emitForm()},height:function(){this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url4=e,this.emitForm()},labelSetting:function(e){1===e&&this.$refs["cloud-cbackground"].setColor(this.labelValue),this.emitForm()},colorSetting:function(e){if(1===e){var t=this.colorValue,a=this.store.colorButtonOptions.filter(function(e){return e.value===t})[0].label;this.changeColorValue(t,a)}},type:{handler:function(e){this.validatorData.element=e},deep:!0},style:{handler:function(e){this.validatorData.layout=e,this.getFillStyle(e)},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},cloud:{handler:function(){this.emitForm()},deep:!0},complement:{handler:function(){this.emitForm()},deep:!0}},computed:{styleItems:function(){var e=this,t=[];return this.type.forEach(function(a){t=t.concat(e.store.styleMap[a])}),this.style=t.map(function(e){return e.value}),t.sort(function(e,t){return e.value-t.value}),t},showTextColor:function(){return this.style.includes(1)||this.style.includes(2)}},created:function(){this.init()},methods:{setEditData:function(e){var t=this;1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,e.container.floated.hasOwnProperty("trigger")&&(this.trigger=e.container.floated.trigger),this.$nextTick(function(){t.transElements(e.fillStyle.elements,e.code.cpro_layout_filter,e)})},transElements:function(e,t,a){var i=this,s=e.join(""),l=this.store.styleItems.filter(function(e){return s.includes(e.element)}).map(function(e){return e.value});if(t){var r=[];t.includes("tabcloud")&&r.push(4),t.includes("rank")&&r.push(5),t.includes("image")&&r.push(6),l=l.filter(function(e){return!r.includes(e)})}var o=[];(l.includes(1)||l.includes(4)||l.includes(5))&&o.push(0),(l.includes(3)||l.includes(6))&&o.push(1),l.includes(2)&&o.push(4),this.type=o,this.$nextTick(function(){i.style=l,i.$nextTick(function(){i.transLabelColor(a)})})},transLabelColor:function(e){var t=this;this.assignData(this.fillStyle,e.fillStyle);var a=this.store.COLOR_PATTERN.filter(function(e){return e.value[0]===t.fillStyle.txt.cbackground});if(a.length){this.colorValue=this.store.colorButtonOptions.filter(function(e){return e.label===a[0].text})[0].value;var i=a[0].value;i[1]!==this.fillStyle.txt.cbackground&&this.fillStyle.txt.cbackground||i[2]!==this.fillStyle.txt.ctitle&&this.fillStyle.txt.ctitle||i[3]!==this.fillStyle.txt.cflush&&this.fillStyle.txt.cflush||i[4]!==this.fillStyle.txt.curl&&this.fillStyle.txt.curl||i[5]!==this.fillStyle.txt.cdesc&&this.fillStyle.txt.cdesc?this.colorSetting=2:this.colorSetting=1}if(e.code.hasOwnProperty("cpro_cpro_lu")){var s=e.code.cpro_cpro_lu.split(",");this.labelValue=s[1],"#000000"===s[2]&&"宋体"===s[3]&&"#ffffff"===s[4]?this.labelSetting=1:(this.labelSetting=2,this.$nextTick(function(){t.cloud={cbackground:s[1],cfont:s[2],font:s[3],chfont:s[4]}}))}},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]instanceof Object&&!Array.isArray(e[a])?this.assignData(e[a],t[a]):e[a]=t[a])},init:function(){"banner"===this.shape&&(60===this.height&&(this.style=[1,2,3,4,5],this.store.styleMap[1]=[{label:"普通图片",value:3,layout:1}]),200===this.height&&(this.style=[1,2,4,5,6],this.store.styleMap[1]=[{label:"图片排行",value:6,layout:2}]),15===this.height&&(this.store.typeItems=[{label:"文字",value:0}],this.type=[0],this.store.styleMap[0]=[{label:"文字排行",value:5,layout:2}],this.style=[5],this.onlyOpacity=!0)),"vbanner"===this.shape&&240===this.height&&(this.style=[1,2,4,5,6],this.store.styleMap[1]=[{label:"图片排行",value:6,layout:2}]),"rectangle"===this.shape&&(this.showTrigger=!0,125!==this.height&&150!==this.height||(this.style=[1,2,4,5,6],this.store.styleMap[1]=[{label:"图片排行",value:6,layout:2}],this.showTrigger=!1)),"others"===this.shape&&(90===this.height&&(this.store.typeItems=[{label:"文字",value:0},{label:"图片",value:1}],this.type=[0,1],this.store.styleMap[0]=[{label:"标签云",value:4,layout:2},{label:"文字排行",value:5,layout:2}],this.store.styleMap[1]=[{label:"图片排行",value:6,layout:2}],this.style=[4,5,6],this.onlyOpacity=!0),728===this.width&&(this.store.typeItems=[{label:"文字",value:0}],this.type=[0],this.store.styleMap[0]=[{label:"文字排行",value:5,layout:2}],this.style=[5],this.showFlush=!1),234===this.width&&(this.store.typeItems=[{label:"文字",value:0},{label:"图文",value:4}],this.type=[0,4],this.style=[1,2,4,5]),480===this.width&&(this.store.typeItems=[{label:"文字",value:0},{label:"图片",value:1}],this.type=[0,1],this.store.styleMap[1]=[{label:"图片排行",value:6,layout:2}],this.style=[1,4,5,6]),460===this.width&&(this.store.styleMap[1]=[{label:"普通图片",value:3,layout:1}],this.style=[1,2,3,4,5])),"custom"===this.shape&&(this.showTrigger=Cl.o.includes(this.size),this.store.typeItems=[{label:"文字",value:0},{label:"图片",value:1}],this.store.styleMap[0]=[{label:"标签云",value:4,layout:2},{label:"文字排行",value:5,layout:2}],this.type=[0,1],this.style=[3,4,5,6],this.height<90&&120<=this.width&&(this.store.styleMap[1]=[{label:"普通图片",value:3,layout:1}],this.style=[3,4,5]),this.height<90&&this.width<120&&(this.store.typeItems=[{label:"文字",value:0}],this.type=[0],this.style=[4,5])),Cl.m.includes(this.size)||(this.store.styleItems[2].element="12")},changeColorValue:function(e,t){this.colorValue=e;var a=this.store.COLOR_PATTERN.filter(function(e){return e.text===t})[0].value;this.$refs.cborder.setColor(a[0]),this.$refs.cbackground.setColor(a[1]),this.$refs.ctitle.setColor(a[2]),this.$refs.cflush.setColor(a[3]),this.$refs.curl.setColor(a[4]),this.$refs.cdesc.setColor(a[5]),this.emitForm()},changeLabelValue:function(e){this.labelValue=e,this.$refs["cloud-cbackground"].setColor(e),this.emitForm()},getFillStyle:function(e){this.labelSetting=1,this.colorSetting=1,this.fillStyle=JSON.parse(JSON.stringify(this.store.fillStyle)),this.showCloud=e.includes(4),this.showColor=e.includes(1)||e.includes(2)||e.includes(5),this.showLu=e.includes(5),this.showLu||(delete this.fillStyle.txt.align,delete this.fillStyle.txt.fontName,delete this.fillStyle.txt.fontSize,delete this.fillStyle.txt.bborder,delete this.fillStyle.opacity),this.showColor||(this.fillStyle={elements:[1,5,2,7],layout:[1,2],lu:{},video:{},search:{},styleType:2}),this.onlyOpacity&&(this.fillStyle={txt:{cbackground:"#ffffff",cborder:"#ffffff",ctitle:"#0000ff",cflush:"#e10900"},opacity:100,elements:[5],layout:[2],backgroundColor:"#ffffff",lu:{number:0,borderWidth:0},video:{},search:{},styleType:2}),this.showCloud?this.fillStyle.cloudTheme={stid:5}:delete this.fillStyle.cloudTheme,this.getLayoutElements()},getLayoutElements:function(){var e=this,t=this.store.styleItems.filter(function(t){return e.style.includes(t.value)}),a=t.map(function(e){return e.layout}),i="";if(t.forEach(function(e){i+=e.element}),this.fillStyle.layout=Object(Ve.a)(new Set(a)),this.fillStyle.elements=Object(Ve.a)(new Set(i.split(""))).map(function(e){return Number(e)}),this.fillStyle.elements.includes(5)){var s=[4,5,6].filter(function(t){return!e.style.includes(t)});if(s.length){var l=[];s.forEach(function(t){l.push(e.store.filterMap[t])}),this.cpro_layout_filter=l.join(",")}else this.cpro_layout_filter=""}else this.cpro_layout_filter="";this.emitForm()},getCproTemplate:function(){return["468*15","728*15","120*90","200*90","160*90","180*90"].includes(this.size)?this.style.includes(4)?"baiduCustSTagLinkUnit":this.style.includes(5)?"tlink_default_".concat(this.width,"_").concat(this.height):"baiduTlinkInlay":this.style.includes(1)||this.style.includes(2)||this.style.includes(3)?"text_default_".concat(this.width,"_").concat(this.height):this.style.includes(4)?"baiduCustSTagLinkUnit":"baiduTlinkInlay"},getCustomCproTemplate:function(){var e="text_default_all";return this.style.includes(3)||(e=this.style.includes(4)?"baiduCustSTagLinkUnit":"baiduTlinkInlay"),e},getXuantingCproTemplate:function(){var e=null;return(this.style.includes(1)||this.style.includes(2)||this.style.includes(3))&&(e="text_default_".concat(this.width,"_").concat(this.height)),e},emitForm:function(){var e={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:this.width,height:this.height,sizeType:1,floated:{}},extra:{shape:this.shape,fillStyleType:1},fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:{userDefine:""},adType:101,bidLevel:3};!this.showTextColor&&e.fillStyle.txt&&(delete e.fillStyle.txt.curl,delete e.fillStyle.txt.cdesc),this.showTrigger&&this.trigger?(e.container.floated={trigger:8},e.adType=103):(this.trigger=0,e.container.floated={});var t={cbackground:"#dfe4f9",cfont:"#000000",font:"宋体",chfont:"#ffffff"},a="";if(this.style.includes(4)){var i=1;1===this.labelSetting?(t.cbackground=this.labelValue,"#ffffff"===this.labelValue&&(i=0)):Object.assign(t,this.cloud),a="".concat(i,",").concat(t.cbackground,",").concat(t.cfont,",").concat(t.font,",").concat(t.chfont)}else this.style.includes(5)&&(a="0,#ffffff,#000000,微软雅黑,#ffffff");var s=null;s=103===e.adType?this.getXuantingCproTemplate():"custom"===this.shape?this.getCustomCproTemplate():this.getCproTemplate(),a&&(e.context.userDefine="cpro_cpro_lu=".concat(a,"|")),this.cpro_layout_filter&&(e.context.userDefine=e.context.userDefine+"cpro_layout_filter=".concat(this.cpro_layout_filter,"|")),s&&(e.context.userDefine=e.context.userDefine+"cpro_template=".concat(s,"|")),e.context.userDefine=e.context.userDefine+"cpro_version=2.0";var l=[];e.fillStyle.elements.includes(0)&&l.push("text"),e.fillStyle.elements.includes(1)&&l.push("image"),e.fillStyle.elements.includes(4)&&l.push("tuwen"),e.fillStyle.elements.includes(5)&&103!==e.adType&&l.push("linkunit");var r={};e.fillStyle.txt&&(r=e.fillStyle.txt),r.hasOwnProperty("bborder")&&(this.fillStyle.lu.borderWidth=r.bborder);var o=this.style.includes(3)&&!("custom"===this.shape&&101===e.adType);if(e.code="cpro_w="+this.width+"|cpro_h="+this.height+"|cpro_template="+s,r.hasOwnProperty("number"))e.code=e.code+"|cpro_161="+r.number;else if(o&&Cl.p[this.size]){var n=Cl.p[this.size];e.code=e.code+"|cpro_161="+n}if(e.fillStyle.hasOwnProperty("flush")){var c=1===e.fillStyle.flush?1:4;e.code=e.code+"|cpro_flush="+c}else o&&(e.code=e.code+"|cpro_flush=4");if(103===e.adType&&(e.code=e.code+"|cpro_xuanting=1"),r.hasOwnProperty("cborder")?e.code=e.code+"|cpro_cbd="+r.cborder:o&&(e.code=e.code+"|cpro_cbd=#FFFFFF"),r.hasOwnProperty("cbackground")?e.code=e.code+"|cpro_cbg="+r.cbackground:o&&(e.code=e.code+"|cpro_cbg=#FFFFFF"),r.hasOwnProperty("ctitle")?e.code=e.code+"|cpro_ctitle="+r.ctitle:o&&(e.code=e.code+"|cpro_ctitle=#0000ff"),r.hasOwnProperty("cdesc")?e.code=e.code+"|cpro_cdesc="+r.cdesc:o&&(e.code=e.code+"|cpro_cdesc=#444444"),r.hasOwnProperty("curl")?e.code=e.code+"|cpro_curl="+r.curl:o&&(e.code=e.code+"|cpro_curl=#008000"),r.hasOwnProperty("cflush")?e.code=e.code+"|cpro_cflush="+r.cflush:o&&(e.code=e.code+"|cpro_cflush=#e10900"),e.fillStyle.hasOwnProperty("cloudTheme")&&(e.code=e.code+"|cpro_stid=5"),a&&(e.code=e.code+"|cpro_cpro_lu="+a),e.fillStyle.hasOwnProperty("opacity")){var u=100===e.fillStyle.opacity?0:1;e.code=e.code+"|cpro_conOP="+u}if(e.fillStyle.hasOwnProperty("lu")&&e.fillStyle.lu.hasOwnProperty("number")&&(e.code=e.code+"|cpro_lu_161="+e.fillStyle.lu.number),r.hasOwnProperty("fontSize")&&(e.code=e.code+"|cpro_titFS="+r.fontSize),r.hasOwnProperty("fontName")&&(e.code=e.code+"|cpro_titFF="+r.fontName),r.hasOwnProperty("align")){var d=this.store.alignOptions.filter(function(e){return e.value===r.align})[0].name;e.code=e.code+"|cpro_titTA="+d}r.hasOwnProperty("bborder")&&(e.code=e.code+"|cpro_conBW="+r.bborder);var f=1;1===this.complement.type?(e.complement.url=this.httpType+this.url,f="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(f="0|cpro_acolor=#ffffff"),7===this.complement.type&&(f="0"),e.code=e.code+"|cpro_cad="+f,this.cpro_layout_filter&&(e.code=e.code+"|cpro_layout_filter=".concat(this.cpro_layout_filter)),e.code=e.code+"|cpro_at="+l.join(",")+"|cpro_client="+this.commonData.cname+"|cpro_version=2.0",103!==e.adType||this.style.includes(3)||(e.code="cpro_w="+this.width+"|cpro_h="+this.height+"|cpro_cad="+f+"|cpro_client="+this.commonData.cname+"|cpro_version=2.0"),this.$emit("emitForm",e)}}}),wl=(a("dfde"),Object(p.a)(Dl,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"normal-coantiner"},[a("div",[a("veui-field",{staticClass:"type-field",attrs:{label:"物料类型",name:"element",field:"element",rules:e.store.rules.element}},[a("veui-checkbox-group",{attrs:{items:e.store.typeItems},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("veui-field",{attrs:{label:"样式类型",name:"layout",field:"layout",rules:e.store.rules.layout}},[a("veui-checkbox-group",{attrs:{items:e.styleItems},model:{value:e.style,callback:function(t){e.style=t},expression:"style"}})],1)],1),e.showColor?a("div",[a("p",{staticClass:"item-title"},[e._v("颜色配置")]),a("veui-radio-button-group",{attrs:{items:e.store.colorSettingItems},model:{value:e.colorSetting,callback:function(t){e.colorSetting=t},expression:"colorSetting"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.colorSetting,expression:"colorSetting === 1"}],staticClass:"color-button-group"},e._l(e.store.colorButtonOptions,function(t){return a("div",{key:t.label,staticClass:"color-button",class:{active:e.colorValue===t.value},on:{click:function(a){e.changeColorValue(t.value,t.label)}}},[a("div",{staticClass:"color-box",class:{"half-width":"红与白"===t.label},style:{background:t.value}}),a("div",{staticClass:"color-text"},[e._v(e._s(t.label))])])})),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.colorSetting,expression:"colorSetting === 2"}],staticClass:"color-picker-box"},[a("veui-field",{staticClass:"inline-field",attrs:{label:"背景颜色"}},[a("color-picker",{ref:"cbackground",attrs:{color:e.fillStyle.txt.cbackground},model:{value:e.fillStyle.txt.cbackground,callback:function(t){e.$set(e.fillStyle.txt,"cbackground",t)},expression:"fillStyle.txt.cbackground"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"边框颜色"}},[a("color-picker",{ref:"cborder",attrs:{color:e.fillStyle.txt.cborder},model:{value:e.fillStyle.txt.cborder,callback:function(t){e.$set(e.fillStyle.txt,"cborder",t)},expression:"fillStyle.txt.cborder"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"标题颜色"}},[a("color-picker",{ref:"ctitle",attrs:{color:e.fillStyle.txt.ctitle},model:{value:e.fillStyle.txt.ctitle,callback:function(t){e.$set(e.fillStyle.txt,"ctitle",t)},expression:"fillStyle.txt.ctitle"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"关键词颜色"}},[a("color-picker",{ref:"cflush",attrs:{color:e.fillStyle.txt.cflush},model:{value:e.fillStyle.txt.cflush,callback:function(t){e.$set(e.fillStyle.txt,"cflush",t)},expression:"fillStyle.txt.cflush"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTextColor,expression:"showTextColor"}]},[a("veui-field",{staticClass:"inline-field",attrs:{label:"url颜色"}},[a("color-picker",{ref:"curl",attrs:{color:e.fillStyle.txt.curl},model:{value:e.fillStyle.txt.curl,callback:function(t){e.$set(e.fillStyle.txt,"curl",t)},expression:"fillStyle.txt.curl"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"描述颜色"}},[a("color-picker",{ref:"cdesc",attrs:{color:e.fillStyle.txt.cdesc},model:{value:e.fillStyle.txt.cdesc,callback:function(t){e.$set(e.fillStyle.txt,"cdesc",t)},expression:"fillStyle.txt.cdesc"}})],1)],1)],1)],1):e._e(),e.showCloud?a("div",[a("p",{staticClass:"item-title"},[e._v("标签云配置")]),a("veui-radio-button-group",{attrs:{items:e.store.labelSettingItems},model:{value:e.labelSetting,callback:function(t){e.labelSetting=t},expression:"labelSetting"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.labelSetting,expression:"labelSetting === 1"}],staticClass:"label-button-group"},e._l(e.store.labelArr,function(t){return a("div",{key:t,staticClass:"label-button",class:{active:e.labelValue===t},style:{background:t},on:{click:function(a){e.changeLabelValue(t)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"#ffffff"===t,expression:"item === '#ffffff'"}],staticClass:"label-text"},[e._v("默认")])])})),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.labelSetting,expression:"labelSetting === 2"}],staticClass:"label-picker-container"},[a("veui-field",{attrs:{label:"色块颜色"}},[a("color-picker",{ref:"cloud-cbackground",attrs:{color:e.cloud.cbackground},model:{value:e.cloud.cbackground,callback:function(t){e.$set(e.cloud,"cbackground",t)},expression:"cloud.cbackground"}})],1),a("veui-field",{attrs:{label:"字体颜色"}},[a("color-picker",{attrs:{color:e.cloud.cfont},model:{value:e.cloud.cfont,callback:function(t){e.$set(e.cloud,"cfont",t)},expression:"cloud.cfont"}})],1),a("veui-field",{attrs:{label:"鼠标悬停时字体颜色"}},[a("color-picker",{attrs:{color:e.cloud.chfont},model:{value:e.cloud.chfont,callback:function(t){e.$set(e.cloud,"chfont",t)},expression:"cloud.chfont"}})],1),a("veui-field",{attrs:{label:"字体"}},[a("veui-select",{attrs:{options:e.store.fontNameOptions},model:{value:e.cloud.font,callback:function(t){e.$set(e.cloud,"font",t)},expression:"cloud.font"}})],1)],1)],1):e._e(),e.showColor?a("div",{staticClass:"content-container"},[a("p",{staticClass:"item-title"},[e._v("内容配置")]),e.onlyOpacity?e._e():a("div",[e.showLu?a("veui-field",{staticClass:"inline-field",attrs:{label:"对齐"}},[a("veui-select",{attrs:{options:e.store.alignOptions},model:{value:e.fillStyle.txt.align,callback:function(t){e.$set(e.fillStyle.txt,"align",t)},expression:"fillStyle.txt.align"}})],1):e._e(),a("veui-field",{staticClass:"inline-field",attrs:{label:"广告数量"}},[a("veui-select",{attrs:{options:e.store.numberOptions},model:{value:e.fillStyle.txt.number,callback:function(t){e.$set(e.fillStyle.txt,"number",t)},expression:"fillStyle.txt.number"}})],1),e.showLu?a("veui-field",{staticClass:"inline-field",attrs:{label:"文字字号"}},[a("veui-select",{attrs:{options:e.store.fontSizeOptions},model:{value:e.fillStyle.txt.fontSize,callback:function(t){e.$set(e.fillStyle.txt,"fontSize",t)},expression:"fillStyle.txt.fontSize"}})],1):e._e(),e.showLu?a("veui-field",{staticClass:"inline-field",attrs:{label:"文字字体"}},[a("veui-select",{attrs:{options:e.store.fontNameOptions},model:{value:e.fillStyle.txt.fontName,callback:function(t){e.$set(e.fillStyle.txt,"fontName",t)},expression:"fillStyle.txt.fontName"}})],1):e._e(),e.showLu?a("veui-field",{staticClass:"inline-field",attrs:{label:"边框粗细"}},[a("veui-select",{attrs:{options:e.store.bborderOptions},model:{value:e.fillStyle.txt.bborder,callback:function(t){e.$set(e.fillStyle.txt,"bborder",t)},expression:"fillStyle.txt.bborder"}})],1):e._e(),e.showFlush?a("veui-field",{staticClass:"inline-field",attrs:{label:"闪烁开关"}},[a("veui-select",{attrs:{options:e.store.flushOptions},model:{value:e.fillStyle.flush,callback:function(t){e.$set(e.fillStyle,"flush",t)},expression:"fillStyle.flush"}})],1):e._e(),e.showLu?a("veui-checkbox",{staticClass:"opacity-checkbox",attrs:{"true-value":0,"false-value":100},model:{value:e.fillStyle.opacity,callback:function(t){e.$set(e.fillStyle,"opacity",t)},expression:"fillStyle.opacity"}},[e._v("\n                透明背景\n            ")]):e._e()],1),e.onlyOpacity?a("veui-checkbox",{staticClass:"opacity-only",attrs:{"true-value":0,"false-value":100},model:{value:e.fillStyle.opacity,callback:function(t){e.$set(e.fillStyle,"opacity",t)},expression:"fillStyle.opacity"}},[e._v("\n            透明背景\n        ")]):e._e()],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTrigger,expression:"showTrigger"}],staticClass:"other-set"},[a("p",{staticClass:"item-title"},[e._v("其他设置")]),a("veui-checkbox",{staticClass:"open-checkbox",attrs:{"true-value":8,"false-value":0},model:{value:e.trigger,callback:function(t){e.trigger=t},expression:"trigger"}},[e._v("\n            开启悬停\n        ")])],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url4",field:"url4"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e()],1)},[],!1,null,"4470d6ed",null));wl.options.__file="NormalView.vue";var jl=wl.exports,kl=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"piwNumber",160),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["ptc1"],validate:function(e){return!!/^(?!(\s+$))/.test(e)||{ptc1:"标题不能为全空格"}}},{fields:["piw1"],validate:function(e){var t=Number(e);return 1<=t&&t<=160&&Math.floor(t)===t||{piw1:"请填写1～160的整数"}}},{fields:["pih1"],validate:function(e){var t=Number(e);return 1<=t&&t<=140&&Math.floor(t)===t?1<=a.piwNumber/t&&a.piwNumber/t<=1.6||{pih1:"宽高比例介于1.0-1.6"}:{pih1:"请填写1～140的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fontSizeOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"titleSizeOptions",[{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sizeOptions",[{label:"系统默认",value:"auto"},{label:"140*90",value:"140*90"},{label:"130*80",value:"130*80"},{label:"120*70",value:"120*70"},{label:"自定义",value:"custom"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptpOptions",[{label:"图片下方",value:0},{label:"悬浮在图片上",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tftOptions",[{label:"不加粗",value:0},{label:"加粗",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tltOptions",[{label:"小圆点样式",value:1},{label:"无前缀样式",value:0}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adpOptions",[{label:"左对齐",value:1},{label:"居中",value:2}]),a}return Object(n.a)(t,e),t}(C.a),Sl=Object(u.a)(g.a,kl,{name:"slot-pc-tuwen-qianru-special",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{commonData:Object,height:Number,width:Number,validatorData:Object,validators:Array,shape:String},data:function(){return{FontNameOptions:Cl.i,ComplementOptions:Cl.e,showTrigger:!1,httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],complement:{type:2},trigger:0,extra:{shape:"",fillStyleType:2,featureAd:{featureStyle:60101}},adStyle:{visual_adType:"0"},adStyle1:{rss1:"#ffffff",conBW:1,ptt:0,titFF:"微软雅黑",rss2:"#000000",titFS:12,titSU:0,visual_pic_size:"auto",ptp:0},adStyle2:{ptc:"猜你感兴趣",ptFS:14,ptFC:"#000000",ptBC:"#F2F2F2"},adStyle3:{adp:1,tft:0,tlt:1},adStyle4:{piw:160,pih:140},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1,styleTemplateId:[60101]},effectOptions:[{label:"默认",value:"0"},{label:"自定义",value:"1"}],styleOptions:[],titleOptions:[{label:"不需要标题",value:0},{label:"通栏标题",value:1},{label:"简明标题",value:2}]}},watch:{httpType:function(){this.emitForm()},url:function(e){this.validatorData.url9=e,this.emitForm()},trigger:function(){this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},"extra.featureAd.featureStyle":function(){this.adStyle1={rss1:"#ffffff",conBW:1,ptt:0,titFF:"微软雅黑",rss2:"#000000",titFS:12,titSU:0,visual_pic_size:"auto",ptp:0},this.adStyle2={ptc:"猜你感兴趣",ptFS:14,ptFC:"#000000",ptBC:"#F2F2F2"},this.adStyle3={adp:1,tft:0,tlt:1},this.adStyle4={piw:160,pih:140},this.$refs.rss1.setColor(this.adStyle1.rss1),this.$refs.rss2.setColor(this.adStyle1.rss2),this.$refs.ptFC.setColor(this.adStyle2.ptFC),this.$refs.ptBC.setColor(this.adStyle2.ptBC),this.emitForm()},adStyle:{handler:function(){this.emitForm()},deep:!0},adStyle1:{handler:function(){this.emitForm()},deep:!0},adStyle2:{handler:function(e){this.validatorData.ptc1=e.ptc,this.emitForm()},deep:!0},adStyle3:{handler:function(){this.emitForm()},deep:!0},adStyle4:{handler:function(e){this.store.piwNumber=Number(e.piw),this.validatorData.piw1=e.piw,this.validatorData.pih1=e.pih,this.emitForm()},deep:!0}},created:function(){this.init()},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length="custom"===this.shape?2:0},methods:{setEditData:function(e){var t=this;1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,e.container.floated.hasOwnProperty("trigger")&&(this.trigger=e.container.floated.trigger),this.assignData(this.extra,e.extra),this.assignData(this.fillStyle,e.fillStyle),this.$nextTick(function(){t.assignData(t.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle]),t.assignData(t.adStyle1,e.extra.featureAd[e.extra.featureAd.featureStyle]),t.assignData(t.adStyle2,e.extra.featureAd[e.extra.featureAd.featureStyle]),t.assignData(t.adStyle3,e.extra.featureAd[e.extra.featureAd.featureStyle]),t.assignData(t.adStyle4,e.extra.featureAd[e.extra.featureAd.featureStyle])})},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]instanceof Object&&!Array.isArray(e[a])?this.assignData(e[a],t[a]):e[a]=t[a])},setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},init:function(){this.extra.shape=this.shape;var e=[{label:"原生多图",value:60101},{label:"原生图文",value:60103},{label:"原生文字",value:60104}],t="".concat(this.width,"*").concat(this.height);Cl.n.includes(t)&&(e=[{label:"原生多图",value:60101},{label:"原生橱窗",value:60102},{label:"原生图文",value:60103},{label:"原生文字",value:60104}]),this.showTrigger=Cl.o.includes(t),this.styleOptions=e},emitForm:function(){var e=JSON.parse(JSON.stringify(this.extra));e.featureAd[this.extra.featureAd.featureStyle]=Object(v.a)({},this.adStyle),"1"===this.adStyle.visual_adType&&(Object.assign(e.featureAd[this.extra.featureAd.featureStyle],this.adStyle1),0!==this.adStyle1.ptt&&Object.assign(e.featureAd[this.extra.featureAd.featureStyle],this.adStyle2),"custom"===this.adStyle1.visual_pic_size&&Object.assign(e.featureAd[this.extra.featureAd.featureStyle],this.adStyle4)),60103!==this.extra.featureAd.featureStyle&&60104!==this.extra.featureAd.featureStyle||Object.assign(e.featureAd[this.extra.featureAd.featureStyle],this.adStyle3),60102===this.extra.featureAd.featureStyle&&delete e.featureAd[this.extra.featureAd.featureStyle];var t={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:this.width,height:this.height,sizeType:1,floated:{}},extra:e,fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:{userDefine:""},adType:101,bidLevel:3};this.showTrigger&&this.trigger?(t.container.floated={trigger:8},t.adType=103):(this.trigger=0,t.container.floated={}),t.fillStyle.styleTemplateId=[this.extra.featureAd.featureStyle];var a=6,i=null;switch(e.featureAd.featureStyle){case 60101:a=6,i=90;break;case 60103:a=1,i=90;break;case 60104:a=3;break;case 60102:a=17}var s=0,l=0;if("auto"===this.adStyle1.visual_pic_size)l=s=0;else if("custom"===this.adStyle1.visual_pic_size)s=this.adStyle4.pih,l=this.adStyle4.piw;else{var r=this.adStyle1.visual_pic_size.split("*");l=Number(r[0]),s=Number(r[1])}60102===e.featureAd.featureStyle?t.context.userDefine="pat=17|tn=baiduCustNativeAD|at=3":(t.context.userDefine="adp="+this.adStyle3.adp+"|at=3|conBW="+this.adStyle1.conBW+"|pat="+a+"|pih="+s+"|piw="+l,"0"===this.adStyle.visual_adType&&i&&(t.context.userDefine=t.context.userDefine+"|ptbg="+i),[60103,60104].includes(t.extra.featureAd.featureStyle)&&(t.context.userDefine=t.context.userDefine+"|tft="+this.adStyle3.tft+"|tlt="+this.adStyle3.tlt),t.context.userDefine=t.context.userDefine+"|ptp="+this.adStyle1.ptp+"|ptt="+this.adStyle1.ptt+"|rss1="+this.adStyle1.rss1+"|rss2="+this.adStyle1.rss2+"|titFF="+this.adStyle1.titFF+"|titFS="+this.adStyle1.titFS+"|titSU="+this.adStyle1.titSU+"|tn=baiduCustNativeAD","1"===this.adStyle.visual_adType&&0!==this.adStyle1.ptt&&(t.context.userDefine=t.context.userDefine+"|ptc="+encodeURIComponent(this.adStyle2.ptc)+"|ptFS="+this.adStyle2.ptFS+"|ptFC="+this.adStyle2.ptFC+"|ptBC="+this.adStyle2.ptBC));var o=1;1===this.complement.type?(t.complement.url=this.httpType+this.url,o="0|cpro_aurl="+t.complement.url):delete t.complement.url,3===this.complement.type&&(o="0|cpro_acolor=#ffffff"),7===this.complement.type&&(o="0"),t.code="cpro_w="+this.width+"|cpro_h="+this.height+"|"+t.context.userDefine+"|cpro_cad="+o+"|cpro_client="+this.commonData.cname,this.$emit("emitForm",t)}}}),xl=(a("2e54"),Object(p.a)(Sl,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"special-coantiner"},[a("veui-field",{staticClass:"style-type",attrs:{label:"样式类型",rules:"required"}},[a("veui-radio-group",{attrs:{items:e.styleOptions},model:{value:e.extra.featureAd.featureStyle,callback:function(t){e.$set(e.extra.featureAd,"featureStyle",t)},expression:"extra.featureAd.featureStyle"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:60102!==e.extra.featureAd.featureStyle,expression:"extra.featureAd.featureStyle !== 60102"}]},[a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{staticClass:"effect-button-group",attrs:{items:e.effectOptions},model:{value:e.adStyle.visual_adType,callback:function(t){e.$set(e.adStyle,"visual_adType",t)},expression:"adStyle.visual_adType"}}),a("veui-checkbox",{staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n            允许所有样式参与竞价\n        ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.adStyle.visual_adType,expression:"adStyle.visual_adType === '1'"}]},[a("p",{staticClass:"item-title"},[e._v("广告位")]),a("veui-field",{staticClass:"style-type inline-field",attrs:{label:"广告位背景颜色"}},[a("color-picker",{ref:"rss1",attrs:{color:e.adStyle1.rss1},model:{value:e.adStyle1.rss1,callback:function(t){e.$set(e.adStyle1,"rss1",t)},expression:"adStyle1.rss1"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:60103===e.extra.featureAd.featureStyle||60104===e.extra.featureAd.featureStyle,expression:"extra.featureAd.featureStyle === 60103 || extra.featureAd.featureStyle === 60104"}],staticClass:"style-type inline-field",attrs:{label:"广告位内容位置"}},[a("veui-select",{attrs:{options:e.store.adpOptions},model:{value:e.adStyle3.adp,callback:function(t){e.$set(e.adStyle3,"adp",t)},expression:"adStyle3.adp"}})],1),a("veui-checkbox",{staticClass:"border-checkbox",attrs:{"true-value":1,"false-value":0},model:{value:e.adStyle1.conBW,callback:function(t){e.$set(e.adStyle1,"conBW",t)},expression:"adStyle1.conBW"}},[e._v("\n                广告位边框\n            ")]),a("p",{staticClass:"item-title"},[e._v("标题设置")]),a("veui-field",{attrs:{label:"广告位标题"}},[a("veui-select",{staticClass:"title-select",attrs:{options:e.titleOptions},model:{value:e.adStyle1.ptt,callback:function(t){e.$set(e.adStyle1,"ptt",t)},expression:"adStyle1.ptt"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.adStyle1.ptt,expression:"adStyle1.ptt !== 0"}],staticClass:"title-style"},[a("veui-field",{attrs:{label:"标题内容",rules:"required",name:"ptc1",field:"ptc1"}},[a("veui-input",{model:{value:e.adStyle2.ptc,callback:function(t){e.$set(e.adStyle2,"ptc",t)},expression:"adStyle2.ptc"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.titleSizeOptions},model:{value:e.adStyle2.ptFS,callback:function(t){e.$set(e.adStyle2,"ptFS",t)},expression:"adStyle2.ptFS"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{ref:"ptFC",attrs:{color:e.adStyle2.ptFC},model:{value:e.adStyle2.ptFC,callback:function(t){e.$set(e.adStyle2,"ptFC",t)},expression:"adStyle2.ptFC"}})],1),a("veui-field",{attrs:{label:"色块颜色"}},[a("color-picker",{ref:"ptBC",attrs:{color:e.adStyle2.ptBC},model:{value:e.adStyle2.ptBC,callback:function(t){e.$set(e.adStyle2,"ptBC",t)},expression:"adStyle2.ptBC"}})],1)],1),a("p",{staticClass:"item-title"},[e._v("内容文字效果")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"内容字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle1.titFF,callback:function(t){e.$set(e.adStyle1,"titFF",t)},expression:"adStyle1.titFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{ref:"rss2",attrs:{color:e.adStyle1.rss2},model:{value:e.adStyle1.rss2,callback:function(t){e.$set(e.adStyle1,"rss2",t)},expression:"adStyle1.rss2"}})],1),a("veui-field",{staticClass:"inline-field text-size",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.fontSizeOptions},model:{value:e.adStyle1.titFS,callback:function(t){e.$set(e.adStyle1,"titFS",t)},expression:"adStyle1.titFS"}}),a("veui-checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:e.adStyle1.titSU,callback:function(t){e.$set(e.adStyle1,"titSU",t)},expression:"adStyle1.titSU"}},[e._v("\n                    下划线\n                ")])],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:60103===e.extra.featureAd.featureStyle||60104===e.extra.featureAd.featureStyle,expression:"extra.featureAd.featureStyle === 60103 || extra.featureAd.featureStyle === 60104"}],staticClass:"inline-field",attrs:{label:"首行样式"}},[a("veui-select",{attrs:{options:e.store.tftOptions},model:{value:e.adStyle3.tft,callback:function(t){e.$set(e.adStyle3,"tft",t)},expression:"adStyle3.tft"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:60103===e.extra.featureAd.featureStyle||60104===e.extra.featureAd.featureStyle,expression:"extra.featureAd.featureStyle === 60103 || extra.featureAd.featureStyle === 60104"}],attrs:{label:"文字左侧样式"}},[a("veui-select",{staticClass:"tlt-select",attrs:{options:e.store.tltOptions},model:{value:e.adStyle3.tlt,callback:function(t){e.$set(e.adStyle3,"tlt",t)},expression:"adStyle3.tlt"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:60101===e.extra.featureAd.featureStyle||60103===e.extra.featureAd.featureStyle,expression:"extra.featureAd.featureStyle === 60101 || extra.featureAd.featureStyle === 60103"}],staticClass:"pic-container"},[a("p",{staticClass:"item-title"},[e._v("图片区样式")]),a("veui-field",{attrs:{label:"图片大小"}},[a("veui-select",{attrs:{options:e.store.sizeOptions},model:{value:e.adStyle1.visual_pic_size,callback:function(t){e.$set(e.adStyle1,"visual_pic_size",t)},expression:"adStyle1.visual_pic_size"}}),a("span",{staticClass:"picture-info"},[e._v("宽不超过160，高不超过140，宽高比例介于1.0-1.6")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"custom"===e.adStyle1.visual_pic_size,expression:"adStyle1.visual_pic_size === 'custom'"}],staticClass:"custom-size"},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽",name:"piw1",field:"piw1"}},[a("veui-input",{model:{value:e.adStyle4.piw,callback:function(t){e.$set(e.adStyle4,"piw",t)},expression:"adStyle4.piw"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高",name:"pih1",field:"pih1"}},[a("veui-input",{model:{value:e.adStyle4.pih,callback:function(t){e.$set(e.adStyle4,"pih",t)},expression:"adStyle4.pih"}})],1)],1)]),a("veui-field",{attrs:{label:"文字位置"}},[a("veui-select",{attrs:{options:e.store.ptpOptions},model:{value:e.adStyle1.ptp,callback:function(t){e.$set(e.adStyle1,"ptp",t)},expression:"adStyle1.ptp"}})],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTrigger,expression:"showTrigger"}],staticClass:"pic-container"},[a("p",{staticClass:"item-title"},[e._v("其他设置")]),a("veui-checkbox",{staticClass:"open-checkbox",attrs:{"true-value":8,"false-value":0},model:{value:e.trigger,callback:function(t){e.trigger=t},expression:"trigger"}},[e._v("\n            开启悬停\n        ")]),a("veui-checkbox",{directives:[{name:"show",rawName:"v-show",value:60102===e.extra.featureAd.featureStyle,expression:"extra.featureAd.featureStyle === 60102"}],attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n            允许所有样式参与竞价\n        ")])],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url9",field:"url9"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e()],1)},[],!1,null,"45b789d6",null));xl.options.__file="SpecialView.vue";var Rl=xl.exports,Tl=Object(u.a)(g.a,_l,{name:"slot-pc-tuwen-qianru-banner-default",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-icon":y.a,"veui-select":N.a,"normal-style":jl,"special-style":Rl,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{ComplementOptions:Cl.e,complement:{type:2},size:"960*90",width:960,height:90,effect:1,httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}]}},watch:{size:function(e){var t=e.split("*");this.width=Number(t[0]),this.height=Number(t[1]),this.effect=1,this.emitForm()},effect:function(e){1===e&&this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url5=e,this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0}},computed:{effectOptions:function(){var e=[{label:"默认",value:1},{label:"普通样式",value:2},{label:"特色样式",value:3}];return"468*15"===this.size&&(e=[{label:"默认",value:1},{label:"普通样式",value:2}]),e}},created:function(){this.emitForm()},methods:{setEditData:function(e){var t=this;1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,this.size=e.container.width+"*"+e.container.height,this.effect=e.extra.fillStyleType+1,this.$nextTick(function(){t.effect=e.extra.fillStyleType+1,t.$nextTick(function(){2===t.effect?t.$refs.normal.setEditData(e):3===t.effect&&t.$refs.special.setEditData(e)})})},emitData:function(e){this.$emit("emitForm",e)},emitForm:function(){var e={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:this.width,height:this.height,sizeType:1,floated:{}},extra:{shape:"banner",fillStyleType:0},fillStyle:{elements:[0,4,1,5,2,7],layout:[1,2],lu:{number:0,borderWidth:0},video:{},search:{},txt:{align:1,number:4,fontName:"宋体",fontSize:12,bborder:0,ctitle:"#0000ff",curl:"#008000",cdesc:"#444444",cborder:"#ffffff",cbackground:"#ffffff",cflush:"#e10900"},flush:0,opacity:0,backgroundColor:"#ffffff",cloudTheme:{stid:5},styleType:1},complement:this.complement,context:{userDefine:""},adType:101,bidLevel:3},t=1;if(1===this.complement.type?(e.complement.url=this.httpType+this.url,t="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(t="0|cpro_acolor=#ffffff"),7===this.complement.type&&(t="0"),"468*15"===this.size)e.fillStyle={elements:[5],layout:[2],lu:{number:0,borderWidth:0},video:{},search:{},txt:{align:1,number:4,fontName:"宋体",fontSize:12,bborder:0,ctitle:"#0000ff",curl:"#008000",cdesc:"#444444",cborder:"#ffffff",cbackground:"#ffffff",cflush:"#e10900"},flush:0,opacity:0,backgroundColor:"#ffffff",styleType:1},e.context={userDefine:"cpro_cpro_lu=0,#ffffff,#000000,微软雅黑,#ffffff|cpro_layout_filter=tabcloud,image|cpro_template=tlink_default_468_15|cpro_version=2.0"},e.code="cpro_w=468|cpro_h=15|cpro_template=tlink_default_468_15|cpro_lu_161=0|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cflush=#e10900|cpro_cad="+t+"|cpro_layout_filter=tabcloud,image|cpro_at=linkunit";else if("500*200"===this.size)e.fillStyle={elements:[0,4,5],layout:[2],lu:{number:0,borderWidth:0},video:{},search:{},txt:{align:1,number:4,fontName:"宋体",fontSize:12,bborder:0,ctitle:"#0000ff",curl:"#008000",cdesc:"#444444",cborder:"#ffffff",cbackground:"#ffffff",cflush:"#e10900"},flush:0,opacity:0,backgroundColor:"#ffffff",cloudTheme:{stid:5},styleType:1},e.context={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=text_default_500_200|cpro_version=2.0"},e.code="cpro_w=500|cpro_h=200|cpro_template=text_default_500_200|cpro_161=4|cpro_flush=4|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cdesc=#444444|cpro_curl=#008000|cpro_cflush=#e10900|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_conOP=1|cpro_lu_161=0|cpro_titFS=12|cpro_titFF=宋体|cpro_titTA=left|cpro_conBW=0|cpro_cad="+t+"|cpro_at=text,tuwen,linkunit";else{var a="";"640*60"!==this.size&&"960*60"!==this.size||(a="image");var i="text_default_".concat(this.width,"_").concat(this.height),s="1,#dfe4f9,#000000,宋体,#ffffff";e.context.userDefine="cpro_cpro_lu="+s,a&&(e.context.userDefine=e.context.userDefine+"|cpro_layout_filter="+a),e.context.userDefine=e.context.userDefine+"|cpro_template="+i+"|cpro_version=2.0",e.code="cpro_w="+e.container.width+"|cpro_h="+e.container.height+"|cpro_template="+i+"|cpro_161=4|cpro_flush=4|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cdesc=#444444|cpro_curl=#008000|cpro_cflush=#e10900|cpro_stid=5|cpro_cpro_lu="+s+"|cpro_conOP=1|cpro_lu_161=0|cpro_titFS=12|cpro_titFF=宋体|cpro_titTA=left|cpro_conBW=0|cpro_cad="+t,a&&(e.code=e.code+"|cpro_layout_filter="+a),e.code=e.code+"|cpro_at=text,image,tuwen,linkunit"}e.code=e.code+"|cpro_client="+this.commonData.cname+"|cpro_version=2.0",this.$emit("emitForm",e)}}}),Il=(a("ebad"),Object(p.a)(Tl,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tuwen-qianru-coantiner"},[a("veui-radio-group",{attrs:{items:e.store.sizeOptions},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:"468*15"!==e.size,expression:"size !== '468*15'"}]},[a("veui-icon",{staticClass:"info-icon",attrs:{name:"exclamation-circle-o"}}),a("span",{staticClass:"effect-info"},[e._v("推荐您选择默认配置，默认配置是充分竞价，变现效果好")])],1),2===e.effect?a("normal-style",{ref:"normal",attrs:{commonData:e.commonData,width:e.width,height:e.height,size:e.size,shape:"banner",validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),3===e.effect?a("special-style",{ref:"special",attrs:{shape:"banner",commonData:e.commonData,validatorData:e.validatorData,validators:e.validators,width:e.width,height:e.height},on:{emitForm:e.emitData}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.effect,expression:"effect === 1"}],staticClass:"bottom-set-container"},[a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url5",field:"url5"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e()],1)],1)},[],!1,null,"ab2fa66e",null));Il.options.__file="DefaultView.vue";var Fl=Il.exports,Nl=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["width3"],validate:function(e){var t=Number(e);return 100<=t&&t<=1024&&Math.floor(t)===t||{width3:"请填写100～1024的整数"}}},{fields:["height3"],validate:function(e){var t=Number(e);return 22<=t&&t<=800&&Math.floor(t)===t||{height3:"请填写22～800的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"effectOptions",[{label:"默认",value:1},{label:"普通样式",value:2},{label:"特色样式",value:3}]),a}return Object(n.a)(t,e),t}(C.a),Al=Object(u.a)(g.a,Nl,{name:"slot-pc-tuwen-qianru-custom-default",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox":he.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-icon":y.a,"veui-select":N.a,"normal-style":jl,"special-style":Rl,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{ComplementOptions:Cl.e,layout:[1,2],elements:[3,4,5,6],complement:{type:2},trigger:0,width:300,height:250,effect:1,httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}]}},computed:{showTrigger:function(){return Cl.o.includes("".concat(this.width,"*").concat(this.height))}},watch:{width:function(e){this.validatorData.width3=e,this.effect=1,this.emitForm()},height:function(e){this.validatorData.height3=e,this.effect=1,this.emitForm()},trigger:function(){this.emitForm()},httpType:function(){this.emitForm()},effect:function(e){1===e&&this.emitForm()},url:function(e){this.validatorData.url8=e,this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0}},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},setEditData:function(e){var t=this;1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,this.width=e.container.width,this.height=e.container.height,e.container.floated.hasOwnProperty("trigger")&&(this.trigger=e.container.floated.trigger),this.$nextTick(function(){t.effect=e.extra.fillStyleType+1,t.$nextTick(function(){2===t.effect?t.$refs.normal.setEditData(e):3===t.effect&&t.$refs.special.setEditData(e)})})},emitData:function(e){this.$emit("emitForm",e)},emitForm:function(){var e=[1,2],t=[1,2,5],a="text_default_all",i="";this.height<90&&this.width<120&&(e=[2],t=[5],a="baiduCustSTagLinkUnit"),this.height<90&&(i="image"),Cl.m.includes("".concat(this.width,"*").concat(this.height))&&t.push(7);var s={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:Number(this.width),height:Number(this.height),sizeType:1,floated:{}},extra:{shape:"custom",fillStyleType:0},fillStyle:{elements:t,layout:e,lu:{number:0,borderWidth:0},video:{},search:{},txt:{align:1,number:4,fontName:"宋体",fontSize:12,bborder:0,ctitle:"#0000ff",curl:"#008000",cdesc:"#444444",cborder:"#ffffff",cbackground:"#ffffff",cflush:"#e10900"},flush:0,opacity:0,backgroundColor:"#ffffff",cloudTheme:{stid:5},styleType:1},complement:this.complement,context:{userDefine:""},adType:101,bidLevel:3};this.showTrigger&&this.trigger?(s.container.floated={trigger:8},s.adType=103):(this.trigger=0,s.container.floated={});var l=1;1===this.complement.type?(s.complement.url=this.httpType+this.url,l="0|cpro_aurl="+s.complement.url):delete s.complement.url,3===this.complement.type&&(l="0|cpro_acolor=#ffffff"),7===this.complement.type&&(l="0");var r=[];s.fillStyle.elements.includes(1)&&r.push("image"),s.fillStyle.elements.includes(5)&&r.push("linkunit"),s.context.userDefine="cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=".concat(a),i&&(s.context.userDefine=s.context.userDefine+"|cpro_layout_filter="+i),s.context.userDefine=s.context.userDefine+"|cpro_version=2.0";var o="|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cflush=#e10900|cpro_conOP=1|cpro_lu_161=0|cpro_titFS=12|cpro_titFF=宋体|cpro_titTA=left|cpro_conBW=0";103===s.adType&&(a="text_default_".concat(s.container.width,"_").concat(s.container.height),r=["image"],o="|cpro_161=4|cpro_flush=4|cpro_xuanting=1|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cdesc=#444444|cpro_curl=#008000|cpro_cflush=#e10900"),s.code="cpro_w="+s.container.width+"|cpro_h="+s.container.height+"|cpro_template="+a+o+"|cpro_cad="+l,i&&(s.code=s.code+"|cpro_layout_filter="+i),s.code=s.code+"|cpro_at="+r.join(",")+"|cpro_client="+this.commonData.cname+"|cpro_version=2.0",this.$emit("emitForm",s)}}}),Ml=(a("aef1"),Object(p.a)(Al,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tuwen-qianru-coantiner"},[a("veui-field",{attrs:{label:"设置宽高"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽",name:"width3",field:"width3"}},[a("veui-input",{model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高",name:"height3",field:"height3"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.store.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!(e.height<60||e.width<120),expression:"!(height < 60 || width < 120)"}]},[a("veui-icon",{staticClass:"info-icon",attrs:{name:"exclamation-circle-o"}}),a("span",{staticClass:"effect-info"},[e._v("推荐您选择默认配置，默认配置是充分竞价，变现效果好")])],1),2===e.effect?a("normal-style",{ref:"normal",attrs:{commonData:e.commonData,width:Number(e.width),height:Number(e.height),size:this.width+"*"+this.height,shape:"custom",validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),3===e.effect?a("special-style",{ref:"special",attrs:{shape:"custom",commonData:e.commonData,validatorData:e.validatorData,validators:e.validators,width:Number(e.width),height:Number(e.height)},on:{emitForm:e.emitData}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.effect,expression:"effect === 1"}],staticClass:"bottom-set-container"},[a("p",{directives:[{name:"show",rawName:"v-show",value:e.showTrigger,expression:"showTrigger"}],staticClass:"item-title"},[e._v("其他设置")]),a("veui-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.showTrigger,expression:"showTrigger"}],staticClass:"open-checkbox",attrs:{"true-value":8,"false-value":0},model:{value:e.trigger,callback:function(t){e.trigger=t},expression:"trigger"}},[e._v("\n            开启悬停\n        ")]),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{name:"url8",field:"url8",rules:"required",label:"链接地址"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e()],1)],1)},[],!1,null,"3f3546bc",null));Ml.options.__file="DefaultView.vue";var Yl=Ml.exports,Ll=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sizeOptions",[{label:"728*15",value:"728*15"},{label:"234*60",value:"234*60"},{label:"480*160",value:"480*160"},{label:"460*60",value:"460*60"},{label:"120*90",value:"120*90"},{label:"200*90",value:"200*90"},{label:"160*90",value:"160*90"},{label:"180*90",value:"180*90"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"effectOptions",[{label:"默认",value:1},{label:"普通样式",value:2}]),a}return Object(n.a)(t,e),t}(C.a),El=Object(u.a)(g.a,Ll,{name:"slot-pc-tuwen-qianru-banner-default",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-icon":y.a,"veui-select":N.a,"normal-style":jl,"special-style":Rl,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{ComplementOptions:Cl.e,complement:{type:2},size:"728*15",width:728,height:15,effect:1,httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}]}},watch:{size:function(e){var t=e.split("*");this.width=Number(t[0]),this.height=Number(t[1]),this.effect=1,728===this.width?this.store.effectOptions=[{label:"默认",value:1},{label:"普通样式",value:2}]:this.store.effectOptions=[{label:"默认",value:1},{label:"普通样式",value:2},{label:"特色样式",value:3}],this.emitForm()},effect:function(e){1===e&&this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url=e,this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0}},created:function(){this.emitForm()},methods:{setEditData:function(e){var t=this;1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,this.size=e.container.width+"*"+e.container.height,this.effect=e.extra.fillStyleType+1,this.$nextTick(function(){t.effect=e.extra.fillStyleType+1,t.$nextTick(function(){2===t.effect?t.$refs.normal.setEditData(e):3===t.effect&&t.$refs.special.setEditData(e)})})},emitData:function(e){this.$emit("emitForm",e)},emitForm:function(){var e={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:this.width,height:this.height,sizeType:1,floated:{}},extra:{shape:"others",fillStyleType:0},fillStyle:{elements:[5],layout:[2],lu:{number:0,borderWidth:0},video:{},search:{},txt:{align:1,number:4,fontName:"宋体",fontSize:12,bborder:0,ctitle:"#0000ff",curl:"#008000",cdesc:"#444444",cborder:"#ffffff",cbackground:"#ffffff",cflush:"#e10900"},flush:0,opacity:0,backgroundColor:"#ffffff",cloudTheme:{stid:5},styleType:1},complement:this.complement,context:{userDefine:""},adType:101,bidLevel:3},t=1;1===this.complement.type?(e.complement.url=this.httpType+this.url,t="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(t="0|cpro_acolor=#ffffff"),7===this.complement.type&&(t="0"),"728*15"===this.size&&(e.fillStyle.elements=[5],e.fillStyle.layout=[2],delete e.fillStyle.cloudTheme,e.context={userDefine:"cpro_cpro_lu=0,#ffffff,#000000,微软雅黑,#ffffff|cpro_layout_filter=tabcloud,image|cpro_template=tlink_default_728_15|cpro_version=2.0"},e.code="cpro_w=728|cpro_h=15|cpro_template=tlink_default_728_15|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cflush=#e10900|cpro_conOP=1|cpro_lu_161=0|cpro_titFS=12|cpro_titFF=宋体|cpro_titTA=left|cpro_conBW=0|cpro_cad="+t+"|cpro_layout_filter=tabcloud,image|cpro_at=linkunit"),"234*60"===this.size&&(e.fillStyle.elements=[0,4,5],e.fillStyle.layout=[2],e.context={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_layout_filter=image|cpro_template=text_default_234_60|cpro_version=2.0"},e.code="cpro_w=234|cpro_h=60|cpro_template=text_default_234_60|cpro_161=4|cpro_flush=4|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cdesc=#444444|cpro_curl=#008000|cpro_cflush=#e10900|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_conOP=1|cpro_lu_161=0|cpro_titFS=12|cpro_titFF=宋体|cpro_titTA=left|cpro_conBW=0|cpro_cad="+t+"|cpro_layout_filter=image|cpro_at=text,tuwen,linkunit"),"480*160"===this.size&&(e.fillStyle.elements=[0,5],e.fillStyle.layout=[2],e.context={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=text_default_480_160|cpro_version=2.0"},e.code="cpro_w=480|cpro_h=160|cpro_template=text_default_480_160|cpro_161=4|cpro_flush=4|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cdesc=#444444|cpro_curl=#008000|cpro_cflush=#e10900|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_conOP=1|cpro_lu_161=0|cpro_titFS=12|cpro_titFF=宋体|cpro_titTA=left|cpro_conBW=0|cpro_cad="+t+"|cpro_at=text,linkunit"),"460*60"===this.size&&(e.fillStyle.elements=[0,4,1,5,2,7],e.fillStyle.layout=[1,2],e.context={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_layout_filter=image|cpro_template=text_default_460_60|cpro_version=2.0"},e.code="cpro_w=460|cpro_h=60|cpro_template=text_default_460_60|cpro_161=4|cpro_flush=4|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cdesc=#444444|cpro_curl=#008000|cpro_cflush=#e10900|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_conOP=1|cpro_lu_161=0|cpro_titFS=12|cpro_titFF=宋体|cpro_titTA=left|cpro_conBW=0|cpro_cad="+t+"|cpro_layout_filter=image|cpro_at=text,image,tuwen,linkunit"),"120*90"===this.size&&(e.fillStyle.elements=[5],e.fillStyle.layout=[2],e.context={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=baiduCustSTagLinkUnit|cpro_version=2.0"},e.code="cpro_w=120|cpro_h=90|cpro_template=baiduCustSTagLinkUnit|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cflush=#e10900|cpro_lu_161=0|cpro_cad="+t+"|cpro_at=linkunit"),"200*90"===this.size&&(e.fillStyle.elements=[5],e.fillStyle.layout=[2],e.context={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=baiduCustSTagLinkUnit|cpro_version=2.0"},e.code="pro_w=200|cpro_h=90|cpro_template=baiduCustSTagLinkUnit|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cflush=#e10900|cpro_cad="+t+"|cpro_at=linkunit"),"160*90"===this.size&&(e.fillStyle.elements=[5],e.fillStyle.layout=[2],e.context={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=baiduCustSTagLinkUnit|cpro_version=2.0"},e.code="cpro_w=160|cpro_h=90|cpro_template=baiduCustSTagLinkUnit|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cflush=#e10900|cpro_cad="+t+"|cpro_at=linkunit"),"180*90"===this.size&&(e.fillStyle.elements=[5],e.fillStyle.layout=[2],e.context={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=baiduCustSTagLinkUnit|cpro_version=2.0"},e.code="cpro_w=180|cpro_h=90|cpro_template=baiduCustSTagLinkUnit|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cflush=#e10900|cpro_cad="+t+"|cpro_at=linkunit"),e.code=e.code+"|cpro_client="+this.commonData.cname+"|cpro_version=2.0",this.$emit("emitForm",e)}}}),Pl=(a("e795"),Object(p.a)(El,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tuwen-qianru-coantiner"},[a("veui-radio-group",{attrs:{items:e.store.sizeOptions},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.store.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:3===e.store.effectOptions.length,expression:"store.effectOptions.length === 3"}]},[a("veui-icon",{staticClass:"info-icon",attrs:{name:"exclamation-circle-o"}}),a("span",{staticClass:"effect-info"},[e._v("推荐您选择默认配置，默认配置是充分竞价，变现效果好")])],1),2===e.effect?a("normal-style",{ref:"normal",attrs:{commonData:e.commonData,width:e.width,height:e.height,size:e.size,shape:"others",validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),3===e.effect?a("special-style",{ref:"special",attrs:{shape:"others",commonData:e.commonData,validatorData:e.validatorData,validators:e.validators,width:e.width,height:e.height},on:{emitForm:e.emitData}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.effect,expression:"effect === 1"}],staticClass:"bottom-set-container"},[a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{name:"url",field:"url",rules:"required",label:"链接地址"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e()],1)],1)},[],!1,null,"1e7a7be4",null));Pl.options.__file="DefaultView.vue";var Vl=Pl.exports,Bl=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sizeOptions",[{label:"300*250",value:"300*250"},{label:"250*250",value:"250*250"},{label:"200*200",value:"200*200"},{label:"336*280",value:"336*280"},{label:"360*300",value:"360*300"},{label:"125*125",value:"125*125"},{label:"180*150",value:"180*150"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"effectOptions",[{label:"默认",value:1},{label:"普通样式",value:2},{label:"特色样式",value:3}]),a}return Object(n.a)(t,e),t}(C.a),$l=Object(u.a)(g.a,Bl,{name:"slot-pc-tuwen-qianru-rectangle-default",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-icon":y.a,"veui-select":N.a,"normal-style":jl,"special-style":Rl,"veui-checkbox":he.a,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{ComplementOptions:Cl.e,trigger:0,complement:{type:2},size:"300*250",width:300,height:250,effect:1,httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}]}},computed:{showTrigger:function(){return!("125*125"===this.size||"180*150"===this.size)}},watch:{size:function(e){var t=e.split("*");this.width=Number(t[0]),this.height=Number(t[1]),this.effect=1,this.emitForm()},effect:function(e){1===e&&this.emitForm()},trigger:function(){this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url6=e,this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0}},created:function(){this.emitForm()},methods:{setEditData:function(e){var t=this;1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,this.size=e.container.width+"*"+e.container.height,e.container.floated.hasOwnProperty("trigger")&&(this.trigger=e.container.floated.trigger),this.$nextTick(function(){t.effect=e.extra.fillStyleType+1,t.$nextTick(function(){2===t.effect?t.$refs.normal.setEditData(e):3===t.effect&&t.$refs.special.setEditData(e)})})},emitData:function(e){this.$emit("emitForm",e)},emitForm:function(){var e={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:this.width,height:this.height,sizeType:1,floated:{}},extra:{shape:"rectangle",fillStyleType:0},fillStyle:{elements:[0,4,1,5,2,7],layout:[1,2],lu:{number:0,borderWidth:0},video:{},search:{},txt:{align:1,number:4,fontName:"宋体",fontSize:12,bborder:0,ctitle:"#0000ff",curl:"#008000",cdesc:"#444444",cborder:"#ffffff",cbackground:"#ffffff",cflush:"#e10900"},flush:0,opacity:0,backgroundColor:"#ffffff",cloudTheme:{stid:5},styleType:1},complement:this.complement,context:{userDefine:""},adType:101,bidLevel:3};this.showTrigger&&this.trigger?(e.container.floated={trigger:8},e.adType=103):(this.trigger=0,e.container.floated={});var t=1;1===this.complement.type?(e.complement.url=this.httpType+this.url,t="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(t="0|cpro_acolor=#ffffff"),7===this.complement.type&&(t="0");var a="text_default_".concat(this.width,"_").concat(this.height);e.context.userDefine="cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=".concat(a,"|cpro_version=2.0");var i="text,image,tuwen,linkunit";"125*125"!==this.size&&"180*150"!==this.size||(i="text,tuwen,linkunit",e.fillStyle.elements=[0,4,5],e.fillStyle.layout=[2]);var s="|cpro_161=4|cpro_flush=4|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cdesc=#444444|cpro_curl=#008000|cpro_cflush=#e10900|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_conOP=1|cpro_lu_161=0|cpro_titFS=12|cpro_titFF=宋体|cpro_titTA=left|cpro_conBW=0";103===e.adType&&(i="text,image,tuwen",s="|cpro_161=4|cpro_flush=4|cpro_xuanting=1|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cdesc=#444444|cpro_curl=#008000|cpro_cflush=#e10900"),e.code="cpro_w="+e.container.width+"|cpro_h="+e.container.height+"|cpro_template="+a+s+"|cpro_cad="+t+"|cpro_at="+i+"|cpro_client="+this.commonData.cname+"|cpro_version=2.0",this.$emit("emitForm",e)}}}),zl=(a("2848"),Object(p.a)($l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tuwen-qianru-coantiner"},[a("veui-radio-group",{attrs:{items:e.store.sizeOptions},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.store.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("span",[a("veui-icon",{staticClass:"info-icon",attrs:{name:"exclamation-circle-o"}}),a("span",{staticClass:"effect-info"},[e._v("推荐您选择默认配置，默认配置是充分竞价，变现效果好")])],1),2===e.effect?a("normal-style",{ref:"normal",attrs:{commonData:e.commonData,width:e.width,height:e.height,size:e.size,shape:"rectangle",validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),3===e.effect?a("special-style",{ref:"special",attrs:{shape:"rectangle",commonData:e.commonData,validatorData:e.validatorData,validators:e.validators,width:e.width,height:e.height},on:{emitForm:e.emitData}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.effect,expression:"effect === 1"}],staticClass:"bottom-set-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTrigger,expression:"showTrigger"}],staticClass:"other-set"},[a("p",{staticClass:"item-title"},[e._v("其他设置")]),a("veui-checkbox",{staticClass:"open-checkbox",attrs:{"true-value":8,"false-value":0},model:{value:e.trigger,callback:function(t){e.trigger=t},expression:"trigger"}},[e._v("\n                开启悬停\n            ")])],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{name:"url6",field:"url6",rules:"required",label:"链接地址"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e()],1)],1)},[],!1,null,"7cbb7974",null));zl.options.__file="DefaultView.vue";var ql=zl.exports,Ul=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sizeOptions",[{label:"160*600",value:"160*600"},{label:"120*600",value:"120*600"},{label:"120*240",value:"120*240"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"effectOptions",[{label:"默认",value:1},{label:"普通样式",value:2},{label:"特色样式",value:3}]),a}return Object(n.a)(t,e),t}(C.a),Wl=Object(u.a)(g.a,Ul,{name:"slot-pc-tuwen-qianru-vbanner-default",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-icon":y.a,"veui-select":N.a,"normal-style":jl,"special-style":Rl,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{ComplementOptions:Cl.e,complement:{type:2},size:"160*600",width:160,height:600,effect:1,httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}]}},watch:{size:function(e){var t=e.split("*");this.width=Number(t[0]),this.height=Number(t[1]),this.effect=1,this.emitForm()},effect:function(e){1===e&&this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url3=e,this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0}},created:function(){this.emitForm()},methods:{setEditData:function(e){var t=this;1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,this.size=e.container.width+"*"+e.container.height,this.effect=e.extra.fillStyleType+1,this.$nextTick(function(){t.effect=e.extra.fillStyleType+1,t.$nextTick(function(){2===t.effect?t.$refs.normal.setEditData(e):3===t.effect&&t.$refs.special.setEditData(e)})})},emitData:function(e){this.$emit("emitForm",e)},emitForm:function(){var e={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:this.width,height:this.height,sizeType:1,floated:{}},extra:{shape:"vbanner",fillStyleType:0},fillStyle:{elements:[0,4,1,5,2,7],layout:[1,2],lu:{number:0,borderWidth:0},video:{},search:{},txt:{align:1,number:4,fontName:"宋体",fontSize:12,bborder:0,ctitle:"#0000ff",curl:"#008000",cdesc:"#444444",cborder:"#ffffff",cbackground:"#ffffff",cflush:"#e10900"},flush:0,opacity:0,backgroundColor:"#ffffff",cloudTheme:{stid:5},styleType:1},complement:this.complement,context:{userDefine:""},adType:101,bidLevel:3},t=1;1===this.complement.type?(e.complement.url=this.httpType+this.url,t="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(t="0|cpro_acolor=#ffffff"),7===this.complement.type&&(t="0");var a="text_default_".concat(this.width,"_").concat(this.height);e.context.userDefine="cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=".concat(a,"|cpro_version=2.0"),e.code="cpro_w="+e.container.width+"|cpro_h="+e.container.height+"|cpro_template="+a+"|cpro_161=4|cpro_flush=4|cpro_cbd=#ffffff|cpro_cbg=#ffffff|cpro_ctitle=#0000ff|cpro_cdesc=#444444|cpro_curl=#008000|cpro_cflush=#e10900|cpro_stid=5|cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_conOP=1|cpro_lu_161=0|cpro_titFS=12|cpro_titFF=宋体|cpro_titTA=left|cpro_conBW=0|cpro_cad="+t+"|cpro_at=text,image,tuwen,linkunit|cpro_client="+this.commonData.cname+"|cpro_version=2.0",this.$emit("emitForm",e)}}}),Gl=(a("438f"),Object(p.a)(Wl,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tuwen-qianru-coantiner"},[a("veui-radio-group",{attrs:{items:e.store.sizeOptions},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.store.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("span",[a("veui-icon",{staticClass:"info-icon",attrs:{name:"exclamation-circle-o"}}),a("span",{staticClass:"effect-info"},[e._v("推荐您选择默认配置，默认配置是充分竞价，变现效果好")])],1),2===e.effect?a("normal-style",{ref:"normal",attrs:{commonData:e.commonData,width:e.width,height:e.height,size:e.size,shape:"vbanner",validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),3===e.effect?a("special-style",{ref:"special",attrs:{shape:"vbanner",commonData:e.commonData,validatorData:e.validatorData,validators:e.validators,width:e.width,height:e.height},on:{emitForm:e.emitData}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.effect,expression:"effect === 1"}],staticClass:"bottom-set-container"},[a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{name:"url3",field:"url3",rules:"required",label:"链接地址"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e()],1)],1)},[],!1,null,"442bc8b2",null));Gl.options.__file="DefaultView.vue";var Hl=Gl.exports,Ql=Object(u.a)(g.a,gl,{name:"slot-pc-tuwen-qianru",components:{"banner-style":Fl,"custom-style":Yl,"others-style":Vl,"rectangle-style":ql,"vbanner-style":Hl,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{shape:"banner"}},methods:{setEditData:function(e){var t=this;this.shape=e.extra.shape,this.$nextTick(function(){t.$refs[t.shape]?t.$refs[t.shape].setEditData(e):t.emitForm(e)})},emitForm:function(e){this.$emit("emitForm",e)}}}),Jl=Object(p.a)(Ql,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tuwen-qianru-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-radio-button-group",{attrs:{items:e.store.typeOptions},model:{value:e.shape,callback:function(t){e.shape=t},expression:"shape"}}),"banner"===e.shape?a("banner-style",{ref:"banner",attrs:{commonData:e.commonData,validatorData:e.validatorData,validators:e.validators},on:{emitForm:e.emitForm}}):e._e(),"vbanner"===e.shape?a("vbanner-style",{ref:"vbanner",attrs:{commonData:e.commonData,validatorData:e.validatorData,validators:e.validators},on:{emitForm:e.emitForm}}):e._e(),"rectangle"===e.shape?a("rectangle-style",{ref:"rectangle",attrs:{commonData:e.commonData,validatorData:e.validatorData,validators:e.validators},on:{emitForm:e.emitForm}}):e._e(),"others"===e.shape?a("others-style",{ref:"others",attrs:{commonData:e.commonData,validatorData:e.validatorData,validators:e.validators},on:{emitForm:e.emitForm}}):e._e(),"custom"===e.shape?a("custom-style",{ref:"custom",attrs:{commonData:e.commonData,validatorData:e.validatorData,validators:e.validators},on:{emitForm:e.emitForm}}):e._e()],1)},[],!1,null,null,null);Jl.options.__file="QianRuView.vue";var Kl=Jl.exports,Zl=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"shapeOptions",[{label:"搜索框",value:"search"},{label:"搜索推荐",value:"pcSearchRecom"},{label:"悬浮底搜",value:"bottomSearch"}]),a}return Object(n.a)(t,e),t}(C.a),Xl=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["width1"],validate:function(e){var t=Number(e);return 100<=t&&t<=1024&&Math.floor(t)===t||{width1:"请填写100～1024的整数"}}},{fields:["height1"],validate:function(e){var t=Number(e);return 22<=t&&t<=800&&Math.floor(t)===t||{height1:"请填写22～800的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"effectOptions",[{label:"默认",value:0},{label:"普通样式",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"shapeOptions",[{label:"搜索框",value:"search"},{label:"搜索推荐",value:"pcSearchRecom"},{label:"悬浮底搜",value:"bottomSearch"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"numberOptions",[{label:"系统推荐",value:0},{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10},{label:"11",value:11},{label:"12",value:12},{label:"13",value:13},{label:"14",value:14},{label:"15",value:15},{label:"16",value:16},{label:"17",value:17},{label:"18",value:18},{label:"19",value:19},{label:"20",value:20}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"luPosOptions",[{label:"右中",value:5},{label:"下",value:3}]),a}return Object(n.a)(t,e),t}(C.a),er=Object(u.a)(g.a,Xl,{name:"slot-pc-tuwen-search-search",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-number-input":_e.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{extra:{shape:"search",fillStyleType:0},container:{anchoredType:1,width:640,height:55,sizeType:1,floated:{}},fillStyle:{txt:{cbackground:"#2e82ff",number:8},search:{iss:!0,luPos:3},elements:[8],layout:[1],backgroundColor:"#2e82ff",lu:{},video:{},styleType:2},fillStyle1:{txt:{cbackground:"#2e82ff",number:8},search:{iss:!1,luPos:3},elements:[8],layout:[1],backgroundColor:"#2e82ff",lu:{},video:{},styleType:2}}},watch:{extra:{handler:function(){this.emitForm()},deep:!0},container:{handler:function(e){this.validatorData.width1=e.width,this.validatorData.height1=e.height,this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0}},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setEditData:function(e){0!==e.extra.fillStyleType&&(this.assignData(this.extra,e.extra),this.assignData(this.container,e.container),this.assignData(this.fillStyle,e.fillStyle))},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]instanceof Object&&!Array.isArray(e[a])?this.assignData(e[a],t[a]):e[a]=t[a])},setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},emitForm:function(){var e={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:this.container,extra:this.extra,context:{userDefine:"cpro_template=baiduCustLinkunitSearchBox"},adType:101,bidLevel:3};e.container.width=Number(e.container.width),e.container.height=Number(e.container.height),0===this.extra.fillStyleType?e.fillStyle=this.fillStyle1:(e.fillStyle=this.fillStyle,e.fillStyle.backgroundColor=e.fillStyle.txt.cbackground),e.code="cpro_w="+e.container.width+"|cpro_h="+e.container.height+"|"+e.context.userDefine+"|cpro_cbg="+e.fillStyle.backgroundColor+"|cpro_iss="+Number(e.fillStyle.search.iss)+"|cpro_wp="+(3===e.fillStyle.search.luPos?0:2)+"|cpro_161="+e.fillStyle.txt.number+"|cpro_client="+this.commonData.cname,this.$emit("emitForm",e)}}}),tr=(a("f30f"),Object(p.a)(er,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-coantiner"},[a("veui-field",{staticClass:"input-box",attrs:{label:"设置宽高"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽",name:"width1",field:"width1"}},[a("veui-input",{model:{value:e.container.width,callback:function(t){e.$set(e.container,"width",t)},expression:"container.width"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高",name:"height1",field:"height1"}},[a("veui-input",{model:{value:e.container.height,callback:function(t){e.$set(e.container,"height",t)},expression:"container.height"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("div",{staticClass:"effect-area"},[a("veui-radio-button-group",{attrs:{items:e.store.effectOptions},model:{value:e.extra.fillStyleType,callback:function(t){e.$set(e.extra,"fillStyleType",t)},expression:"extra.fillStyleType"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.extra.fillStyleType,expression:"extra.fillStyleType === 1"}]},[a("p",{staticClass:"item-title"},[e._v("颜色配置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"背景颜色"}},[a("color-picker",{attrs:{color:e.fillStyle.txt.cbackground},model:{value:e.fillStyle.txt.cbackground,callback:function(t){e.$set(e.fillStyle.txt,"cbackground",t)},expression:"fillStyle.txt.cbackground"}})],1),a("p",{staticClass:"item-title"},[e._v("内容配置")]),a("veui-field",{attrs:{label:"广告数量"}},[a("veui-select",{attrs:{options:e.store.numberOptions},model:{value:e.fillStyle.txt.number,callback:function(t){e.$set(e.fillStyle.txt,"number",t)},expression:"fillStyle.txt.number"}})],1),a("p",{staticClass:"item-title"},[e._v("搜索配置")]),a("veui-field",{attrs:{label:"推词位置"}},[a("veui-select",{attrs:{options:e.store.luPosOptions},model:{value:e.fillStyle.search.luPos,callback:function(t){e.$set(e.fillStyle.search,"luPos",t)},expression:"fillStyle.search.luPos"}}),a("veui-checkbox",{staticClass:"search-checkbox",model:{value:e.fillStyle.search.iss,callback:function(t){e.$set(e.fillStyle.search,"iss",t)},expression:"fillStyle.search.iss"}},[e._v("站搜")])],1)],1)],1)},[],!1,null,"a126b31a",null));tr.options.__file="Search.vue";var ar=tr.exports,ir=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"effectOptions",[{label:"默认",value:0},{label:"普通样式",value:1}]),a}return Object(n.a)(t,e),t}(C.a),sr=Object(u.a)(g.a,ir,{name:"slot-pc-tuwen-search-bottom",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-number-input":_e.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{commonData:Object},data:function(){return{extra:{shape:"bottomSearch",fillStyleType:0},container:{anchoredType:3,width:1024,height:74,sizeType:1,location:3,floated:{},slide:{}},fillStyle1:{elements:[8],layout:[1],btnStyleId:9,lu:{},video:{},search:{iss:!0},txt:{cflush:"#ffffff",cbackground:"#2d2d2d"},opacity:99,backgroundColor:"#2d2d2d",styleType:2},fillStyle:{elements:[8],layout:[1],btnStyleId:9,lu:{},video:{},search:{iss:!0},txt:{cflush:"#ffffff",cbackground:"#2d2d2d"},opacity:99,backgroundColor:"#2d2d2d",styleType:2}}},watch:{extra:{handler:function(){this.emitForm()},deep:!0},container:{handler:function(){this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0}},created:function(){this.emitForm()},methods:{setEditData:function(e){0!==e.extra.fillStyleType&&(this.assignData(this.extra,e.extra),this.assignData(this.container,e.container),this.assignData(this.fillStyle,e.fillStyle))},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]instanceof Object&&!Array.isArray(e[a])?this.assignData(e[a],t[a]):e[a]=t[a])},emitForm:function(){var e={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:this.container,extra:this.extra,context:{userDefine:"cpro_template=baiduCustLinkunitSearchBoxFloat"},adType:102,bidLevel:3};0===this.extra.fillStyleType?e.fillStyle=this.fillStyle1:(e.fillStyle=this.fillStyle,e.fillStyle.backgroundColor=e.fillStyle.txt.cbackground),e.code="cpro_h="+e.container.height+"|cpro_w="+e.container.width+"|"+e.context.userDefine+"|cpro_iss="+Number(e.fillStyle.search.iss)+"|cpro_cbg="+e.fillStyle.backgroundColor+"|cpro_cflush="+e.fillStyle.txt.cflush+"|cpro_opacity="+e.fillStyle.opacity+"|cpro_xuanting=3|cpro_client="+this.commonData.cname,this.$emit("emitForm",e)}}}),lr=(a("eae6"),Object(p.a)(sr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-coantiner"},[a("veui-field",{staticClass:"input-box",attrs:{label:"固定尺寸"}},[a("veui-input",{attrs:{value:" 宽  1024",disabled:!0}}),a("veui-input",{attrs:{value:" 高  74",disabled:!0}})],1),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("div",{staticClass:"effect-area"},[a("veui-radio-button-group",{attrs:{items:e.store.effectOptions},model:{value:e.extra.fillStyleType,callback:function(t){e.$set(e.extra,"fillStyleType",t)},expression:"extra.fillStyleType"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.extra.fillStyleType,expression:"extra.fillStyleType === 1"}]},[a("p",{staticClass:"item-title"},[e._v("颜色配置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"背景颜色"}},[a("color-picker",{attrs:{color:e.fillStyle.txt.cbackground},model:{value:e.fillStyle.txt.cbackground,callback:function(t){e.$set(e.fillStyle.txt,"cbackground",t)},expression:"fillStyle.txt.cbackground"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"关键词颜色"}},[a("color-picker",{attrs:{color:e.fillStyle.txt.cflush},model:{value:e.fillStyle.txt.cflush,callback:function(t){e.$set(e.fillStyle.txt,"cflush",t)},expression:"fillStyle.txt.cflush"}})],1),a("p",{staticClass:"item-title"},[e._v("搜索配置")]),a("veui-field",{attrs:{label:"背景透明度"}},[a("veui-number-input",{model:{value:e.fillStyle.opacity,callback:function(t){e.$set(e.fillStyle,"opacity",t)},expression:"fillStyle.opacity"}}),a("veui-checkbox",{staticClass:"search-checkbox",model:{value:e.fillStyle.search.iss,callback:function(t){e.$set(e.fillStyle.search,"iss",t)},expression:"fillStyle.search.iss"}},[e._v("站搜")])],1)],1)],1)},[],!1,null,"53cfbf08",null));lr.options.__file="SearchBottom.vue";var rr=lr.exports,or=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["width2"],validate:function(e){var t=Number(e);return 180<=t&&t<=1024&&Math.floor(t)===t||{width2:"请填写180～1024的整数"}}},{fields:["height2"],validate:function(e){var t=Number(e);return 80<=t&&t<=800&&Math.floor(t)===t||{height2:"请填写80～800的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"effectOptions",[{label:"默认",value:0},{label:"特色样式",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleItems",[{label:"热词",value:"2"},{label:"文字",value:"1"},{label:"热点推荐",value:"3"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fontSizeOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lineOptions",[{label:"单行",value:"1"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"titleOptions",[{label:"无标题",value:"0"},{label:"搜索推荐",value:"1"},{label:"大家都在搜",value:"2"},{label:"猜你感兴趣",value:"3"},{label:"猜你喜欢",value:"4"},{label:"为你推荐",value:"5"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"searchBoxItems",[{label:"无",value:"0"},{label:"有",value:"1"}]),a}return Object(n.a)(t,e),t}(C.a),nr=Object(u.a)(g.a,or,{name:"slot-pc-tuwen-search",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-number-input":_e.a,"veui-radio-button-group":De.a,"veui-icon":y.a,"color-picker":nl},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{FontNameOptions:Cl.i,line:"1",title_type:"0",has_search_box:"0",extra:{shape:"pcSearchRecom",fillStyleType:0},featureAd:{70002:{sub_stid:"2",textFont:"微软雅黑",textFontSize:14,txtFontColor:"#000000",cpro_material:"text"},featureStyle:70002},container:{anchoredType:1,width:300,height:250,sizeType:1,floated:{}},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1,styleTemplateId:[70002],lu:{stid:151},txt:{fontName:"微软雅黑",fontSize:14,ctitle:"#000000"},backgroundColor:"#FFFFFF"},fillStyle1:{elements:[50],layout:[1,2],lu:{stid:151},video:{},search:{},styleTemplateId:[70002],styleType:3,txt:{fontName:"微软雅黑",fontSize:14,ctitle:"#000000"},backgroundColor:"#FFFFFF"}}},computed:{materialOptions:function(){var e=[{label:"文字",value:this.featureAd[70002].cpro_material="text"}];return"3"===this.featureAd[70002].sub_stid&&(e=[{label:"图文",value:this.featureAd[70002].cpro_material="tuwen"}]),e}},watch:{line:function(){this.emitForm()},title_type:function(){this.emitForm()},has_search_box:function(){this.emitForm()},extra:{handler:function(){this.emitForm()},deep:!0},container:{handler:function(e){this.validatorData.width2=e.width,this.validatorData.height2=e.height,this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},featureAd:{handler:function(){this.emitForm()},deep:!0}},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setEditData:function(e){0!==e.extra.fillStyleType&&(this.assignData(this.extra,e.extra),this.assignData(this.container,e.container),this.assignData(this.fillStyle,e.fillStyle),this.assignData(this.featureAd[70002],e.extra.featureAd[70002]),e.extra.featureAd[70002].hasOwnProperty("line")&&(this.line=e.extra.featureAd[70002].line),e.extra.featureAd[70002].hasOwnProperty("title_type")&&(this.title_type=e.extra.featureAd[70002].title_type),e.extra.featureAd[70002].hasOwnProperty("has_search_box")&&(this.has_search_box=e.extra.featureAd[70002].has_search_box))},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]instanceof Object&&!Array.isArray(e[a])?this.assignData(e[a],t[a]):e[a]=t[a])},setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},emitForm:function(){var e={basic:{flowType:1,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:this.container,extra:this.extra,context:{userDefine:""},adType:301,bidLevel:3};e.container.width=Number(e.container.width),e.container.height=Number(e.container.height);var t="",a="",i="",s="";s=0===this.extra.fillStyleType?(e.fillStyle=this.fillStyle1,delete e.extra.featureAd,t="tuwen",i=a="1"):(e.fillStyle=this.fillStyle,e.extra.featureAd=JSON.parse(JSON.stringify(this.featureAd)),"2"===this.featureAd[70002].sub_stid?e.extra.featureAd[70002].line=this.line:delete e.extra.featureAd[70002].line,"2"!==this.featureAd[70002].sub_stid?e.extra.featureAd[70002].title_type=this.title_type:(delete e.extra.featureAd[70002].title_type,s="1"),"1"===this.featureAd[70002].sub_stid?e.extra.featureAd[70002].has_search_box=this.has_search_box:(delete e.extra.featureAd[70002].has_search_box,i="1"),t=this.featureAd[70002].cpro_material,a=this.featureAd[70002].sub_stid,i=this.has_search_box,this.title_type),e.context.userDefine="cpro_template=template_pc_search_recom|cpro_material="+t+"|sub_stid="+a+"|title_type="+s+"|has_search_box="+i+"|stid=151|textFont="+this.featureAd[70002].textFont+"|textFontSize="+this.featureAd[70002].textFontSize+"|txtFontColor="+this.featureAd[70002].txtFontColor+"|cpro_psheight="+this.container.height+"|cpro_pswidth="+this.container.width,e.code="cpro_h="+this.container.height+"|cpro_w="+this.container.width+"|"+e.context.userDefine+"|cpro_client="+this.commonData.cname,this.$emit("emitForm",e)}}}),cr=(a("dc91"),Object(p.a)(nr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-coantiner"},[a("veui-field",{staticClass:"input-box",attrs:{label:"设置宽高"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽",name:"width2",field:"width2"}},[a("veui-input",{model:{value:e.container.width,callback:function(t){e.$set(e.container,"width",t)},expression:"container.width"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高",name:"height2",field:"height2"}},[a("veui-input",{model:{value:e.container.height,callback:function(t){e.$set(e.container,"height",t)},expression:"container.height"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.store.effectOptions},model:{value:e.extra.fillStyleType,callback:function(t){e.$set(e.extra,"fillStyleType",t)},expression:"extra.fillStyleType"}}),a("veui-checkbox",{directives:[{name:"show",rawName:"v-show",value:2===e.extra.fillStyleType,expression:"extra.fillStyleType === 2"}],staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n        允许所有样式参与竞价\n    ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.extra.fillStyleType,expression:"extra.fillStyleType === 2"}]},[a("veui-field",{staticClass:"style-radio",attrs:{label:"搜索推荐样式"}},[a("veui-radio-group",{attrs:{items:e.store.styleItems},model:{value:e.featureAd[70002].sub_stid,callback:function(t){e.$set(e.featureAd[70002],"sub_stid",t)},expression:"featureAd[70002].sub_stid"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:"2"!==e.featureAd[70002].sub_stid,expression:"featureAd[70002].sub_stid !== '2'"}],staticClass:"style-radio",attrs:{label:"标题类型"},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[a("veui-radio-group",{attrs:{items:e.store.titleOptions},model:{value:e.title_type,callback:function(t){e.title_type=t},expression:"title_type"}}),a("veui-icon",{staticClass:"info-icon",attrs:{name:"exclamation-circle-o"}}),a("span",{staticClass:"style-info"},[e._v("选择展现标题时，建议广告位高度设置在190以上，否则样式展现将出现异常")])],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:"1"===e.featureAd[70002].sub_stid,expression:"featureAd[70002].sub_stid === '1'"}],staticClass:"style-radio",attrs:{label:"是否有搜索框"}},[a("veui-radio-group",{attrs:{items:e.store.searchBoxItems},model:{value:e.has_search_box,callback:function(t){e.has_search_box=t},expression:"has_search_box"}})],1),a("p",{staticClass:"item-title"},[e._v("内容设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.featureAd[70002].textFont,callback:function(t){e.$set(e.featureAd[70002],"textFont",t)},expression:"featureAd[70002].textFont"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.featureAd[70002].txtFontColor},model:{value:e.featureAd[70002].txtFontColor,callback:function(t){e.$set(e.featureAd[70002],"txtFontColor",t)},expression:"featureAd[70002].txtFontColor"}})],1),a("veui-field",{attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.fontSizeOptions},model:{value:e.featureAd[70002].textFontSize,callback:function(t){e.$set(e.featureAd[70002],"textFontSize",t)},expression:"featureAd[70002].textFontSize"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:"2"===e.featureAd[70002].sub_stid,expression:"featureAd[70002].sub_stid === '2'"}],staticClass:"inline-field",attrs:{label:"广告行数"}},[a("veui-select",{attrs:{options:e.store.lineOptions,disabled:!0},model:{value:e.line,callback:function(t){e.line=t},expression:"line"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"物料类型"}},[a("veui-select",{attrs:{options:e.materialOptions,disabled:!0},model:{value:e.featureAd[70002].cpro_material,callback:function(t){e.$set(e.featureAd[70002],"cpro_material",t)},expression:"featureAd[70002].cpro_material"}})],1)],1)],1)},[],!1,null,"b114db5e",null));cr.options.__file="SearchRecom.vue";var ur=cr.exports,dr=Object(u.a)(g.a,Zl,{name:"slot-pc-tuwen-search",components:{"search-box":ar,"search-bottom":rr,"search-Recom":ur,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{shape:"search"}},methods:{setEditData:function(e){var t=this;this.shape=e.extra.shape,this.$nextTick(function(){t.$refs[t.shape]?t.$refs[t.shape].setEditData(e):t.emitForm(e)})},emitForm:function(e){this.$emit("emitForm",e)}}}),fr=Object(p.a)(dr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"item-title top-title"},[e._v("子样式")]),a("veui-radio-button-group",{attrs:{items:e.store.shapeOptions},model:{value:e.shape,callback:function(t){e.shape=t},expression:"shape"}}),"search"===e.shape?a("search-box",{ref:"search",attrs:{commonData:e.commonData,validatorData:e.validatorData,validators:e.validators},on:{emitForm:e.emitForm}}):e._e(),"bottomSearch"===e.shape?a("search-bottom",{ref:"bottomSearch",attrs:{commonData:e.commonData,validatorData:e.validatorData,validators:e.validators},on:{emitForm:e.emitForm}}):e._e(),"pcSearchRecom"===e.shape?a("search-Recom",{ref:"pcSearchRecom",attrs:{commonData:e.commonData,validatorData:e.validatorData,validators:e.validators},on:{emitForm:e.emitForm}}):e._e()],1)},[],!1,null,null,null);fr.options.__file="SearchView.vue";var pr=fr.exports,hr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sizeOptions",[{label:"固定比例 20:3",value:"20:3"}]),a}return Object(n.a)(t,e),t}(C.a),mr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"rules",{element:[{name:"required",value:!0,triggers:"change",message:"请至少选择一种物料类型"}],layout:[{name:"required",value:!0,triggers:"change",message:"请至少选择一种样式类型"}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterMap",{4:"tabcloud",5:"rank",6:"image"}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"SKIN_MAP",{1:"mobile_skin_white_red",2:"mobile_skin_gray_black",3:"mobile_skin_white_blue",4:"mobile_skin_black_white",5:"mobile_skin_yellow_blue",6:"mobile_skin_green_white",7:"mobile_skin_blue_white"}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"typeItems",[{label:"文字",value:0},{label:"图文",value:4},{label:"图片",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleItems",[{label:"普通文字",value:1,layout:2,element:"0"},{label:"图文",value:2,layout:2,element:"4"},{label:"普通图片",value:3,layout:1,element:"12"},{label:"标签云",value:4,layout:2,element:"5"},{label:"文字排行",value:5,layout:2,element:"5"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleMap",{0:[{label:"普通文字",value:1,layout:2},{label:"标签云",value:4,layout:2},{label:"文字排行",value:5,layout:2}],4:[{label:"图文",value:2,layout:2}],1:[{label:"普通图片",value:3,layout:1}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"colorItems",[{label:"简约灰",color:"#666666",value:2},{label:"简约黑",color:"#333333",value:4}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"labelOptions",[{label:"纯净",value:1},{label:"清新",value:2},{label:"华丽",value:3}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"labelObj",{1:[{postition:0,value:3},{postition:1,value:4},{postition:2,value:5},{postition:3,value:6},{postition:5,value:8}],2:[{postition:6,value:1},{postition:7,value:9},{postition:8,value:10},{postition:9,value:11},{postition:10,value:12}],3:[{postition:11,value:13},{postition:13,value:15},{postition:14,value:16},{postition:15,value:2}]}),a}return Object(n.a)(t,e),t}(C.a),vr=Object(u.a)(g.a,mr,{name:"slot-pc-tuwen-qianru-normal",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{commonData:Object,validatorData:Object},data:function(){return{ComplementOptions:Cl.e,httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],sizeType:2,sizeTypeOptions:[{label:"按屏幕宽度",value:2},{label:"按父容器宽度",value:5}],complement:{type:2},fillStyle:{txt:{txtSkin:2,number:1},elements:[0,1,5,2],layout:[1,2],cloudTheme:{stid:5,skin:3},lu:{},video:{},search:{},styleType:2},type:[0,1,4],style:[1,2,3,4,5],labelSetting:1,showCloud:!0,showColor:!0,cpro_layout_filter:""}},watch:{labelSetting:function(e){this.changeLabelValue(this.store.labelObj[e][0].value)},sizeType:function(){this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url18=e,this.emitForm()},type:{handler:function(e){this.validatorData.element1=e},deep:!0},style:{handler:function(e){this.fillStyle.txt.txtSkin=2,this.validatorData.layout1=e,this.getFillStyle(e)},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},complement:{handler:function(){this.emitForm()},deep:!0}},computed:{labelArr:function(){return this.store.labelObj[this.labelSetting]},styleItems:function(){var e=this,t=[];return this.type.forEach(function(a){t=t.concat(e.store.styleMap[a])}),this.style=t.map(function(e){return e.value}),t}},methods:{setEditData:function(e){var t=this;this.sizeType=e.container.sizeType,1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,this.$nextTick(function(){t.transElements(e.fillStyle.elements,e.code.cpro_layout_filter,e)})},transElements:function(e,t,a){var i=this,s=e.join(""),l=this.store.styleItems.filter(function(e){return s.includes(e.element)}).map(function(e){return e.value}),r=[];if(t){var o=[];t.includes("tabcloud")&&o.push(4),t.includes("rank")&&o.push(5),t.includes("image")&&o.push(6),l=l.filter(function(e){return!o.includes(e)})}(l.includes(1)||l.includes(4)||l.includes(5))&&r.push(0),l.includes(3)&&r.push(1),l.includes(2)&&r.push(4),this.type=r,this.$nextTick(function(){i.style=l,i.$nextTick(function(){i.assignData(i.fillStyle,a.fillStyle),[3,4,5,6,8].includes(i.fillStyle.cloudTheme.skin)&&(i.labelSetting=1),[1,9,10,11,12].includes(i.fillStyle.cloudTheme.skin)&&(i.labelSetting=2),[13,15,16,2].includes(i.fillStyle.cloudTheme.skin)&&(i.labelSetting=3),i.$nextTick(function(){i.fillStyle.cloudTheme.skin=a.fillStyle.cloudTheme.skin})})})},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]instanceof Object&&!Array.isArray(e[a])?this.assignData(e[a],t[a]):e[a]=t[a])},changeColorValue:function(e){this.fillStyle.txt.txtSkin=e},changeLabelValue:function(e){this.fillStyle.cloudTheme.skin=e},getFillStyle:function(e){this.labelSetting=1,this.showCloud=e.includes(4),this.showColor=e.includes(1)||e.includes(2),this.getLayoutElements()},getLayoutElements:function(){var e=this,t=this.store.styleItems.filter(function(t){return e.style.includes(t.value)}),a=t.map(function(e){return e.layout}),i="";if(t.forEach(function(e){i+=e.element}),this.fillStyle.layout=Object(Ve.a)(new Set(a)),this.fillStyle.elements=Object(Ve.a)(new Set(i.split(""))).map(function(e){return Number(e)}),this.fillStyle.elements.includes(5)){var s=[4,5,6].filter(function(t){return!e.style.includes(t)});if(s.length){var l=[];s.forEach(function(t){l.push(e.store.filterMap[t])}),this.cpro_layout_filter=l.join(",")}else this.cpro_layout_filter=""}else this.cpro_layout_filter="";this.emitForm()},emitForm:function(){var e={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:3,width:20,height:3,sizeType:this.sizeType,location:3,floated:{}},extra:{shape:"floatedRegular",fillStyleType:1},fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:{userDefine:""},adType:202,bidLevel:3},t="mobile_skin_white_red";this.showCloud?t="tabcloud_skin_".concat(e.fillStyle.cloudTheme.skin):delete e.fillStyle.cloudTheme,this.showColor?t=this.store.SKIN_MAP[e.fillStyle.txt.txtSkin]:delete e.fillStyle.txt.txtSkin;var a=1;1===this.complement.type?(e.complement.url=this.httpType+this.url,a="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(a="0|cpro_acolor=#ffffff"),7===this.complement.type&&(a="0");var i="template_inlay_all_mobile";1===this.style.length&&this.style.includes(4)&&(i="template_inlay_all_mobile_lu_tabcloud"),e.context.userDefine=i+"|cpro_version=2.0",e.code="cpro_scale=20.3|cpro_161=1|cpro_template="+i+"|cpro_skin="+t+"|cpro_cad="+a+"|cpro_xuanting=3",this.cpro_layout_filter&&(e.context.userDefine="cpro_layout_filter=".concat(this.cpro_layout_filter,"|")+e.context.userDefine,e.code=e.code+"|cpro_layout_filter=".concat(this.cpro_layout_filter)),e.code=e.code+"|cpro_client="+this.commonData.cname+"|cpro_version=2.0",this.$emit("emitForm",e)}}}),br=(a("deb9"),Object(p.a)(vr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"normal-coantiner"},[a("veui-field",{staticClass:"type-field",attrs:{label:"物料类型",name:"element1",field:"element1",rules:e.store.rules.element}},[a("veui-checkbox-group",{attrs:{items:e.store.typeItems},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("veui-field",{attrs:{label:"样式类型",name:"layout1",field:"layout1",rules:e.store.rules.layout}},[a("veui-checkbox-group",{attrs:{items:e.styleItems},model:{value:e.style,callback:function(t){e.style=t},expression:"style"}})],1),e.showColor?a("div",[a("p",{staticClass:"item-title"},[e._v("颜色配置")]),a("div",{staticClass:"color-button-group"},e._l(e.store.colorItems,function(t){return a("div",{key:t.label,staticClass:"color-button",class:{active:e.fillStyle.txt.txtSkin===t.value},on:{click:function(a){e.changeColorValue(t.value)}}},[a("div",{staticClass:"color-box",style:{background:t.color}}),a("div",{staticClass:"color-text"},[e._v(e._s(t.label))])])}))]):e._e(),e.showCloud?a("div",[a("p",{staticClass:"item-title"},[e._v("标签云配置")]),a("veui-radio-button-group",{attrs:{items:e.store.labelOptions},model:{value:e.labelSetting,callback:function(t){e.labelSetting=t},expression:"labelSetting"}}),a("div",{staticClass:"label-button-group"},e._l(e.labelArr,function(t){return a("div",{key:t.value,staticClass:"label-button",class:{active:e.fillStyle.cloudTheme.skin===t.value},style:{"background-position":"0 -"+53*t.postition+"px"},on:{click:function(a){e.changeLabelValue(t.value)}}})}))],1):e._e(),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url18",field:"url18"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title bottom-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)},[],!1,null,"3b205dac",null));br.options.__file="NormalView.vue";var yr=br.exports,gr=Object(u.a)(g.a,hr,{name:"slot-pc-tuwen-qianru-banner-default",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-icon":y.a,"veui-select":N.a,"normal-style":yr,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{ComplementOptions:Cl.e,size:"20:3",sizeType:2,sizeTypeOptions:[{label:"按屏幕宽度",value:2},{label:"按父容器宽度",value:5}],complement:{type:2},effect:0,effectOptions:[{label:"默认",value:0},{label:"普通样式",value:1}],httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}]}},watch:{httpType:function(){this.emitForm()},url:function(e){this.validatorData.url17=e,this.emitForm()},effect:function(e){0===e&&this.emitForm()},sizeType:function(){this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0}},created:function(){this.emitForm()},methods:{setEditData:function(e){var t=this;this.sizeType=e.container.sizeType,this.effect=e.extra.fillStyleType,0===this.effect?(1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type):1===this.effect?this.$nextTick(function(){t.$refs.normalStyle.setEditData(e)}):this.emitForm(e)},emitData:function(e){this.$emit("emitForm",e)},emitForm:function(){var e={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:3,width:20,height:3,sizeType:this.sizeType,location:3,floated:{}},extra:{shape:"floatedRegular",fillStyleType:0},fillStyle:{elements:[0,4,1,5,2],layout:[1,2],txt:{txtSkin:1,number:1},cloudTheme:{skin:3,stid:5},lu:{number:0},video:{},search:{},styleType:1},complement:this.complement,context:{userDefine:"cpro_layout_filter=image|cpro_template=template_inlay_all_mobile|cpro_version=2.0"},adType:202,bidLevel:3},t=1;1===this.complement.type?(e.complement.url=this.httpType+this.url,t="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(t="0|cpro_acolor=#ffffff"),7===this.complement.type&&(t="0"),e.code="cpro_scale=20.3|cpro_161=1|cpro_template=template_inlay_all_mobile|cpro_skin=mobile_skin_white_red|cpro_cad="+t+"|cpro_xuanting=3",e.code=e.code+"|cpro_layout_filter=image|cpro_at=text,image,tuwen,linkunit|cpro_client="+this.commonData.cname+"|cpro_version=2.0",this.$emit("emitForm",e)}}}),_r=(a("5ba4"),Object(p.a)(gr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tuwen-qianru-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-radio-group",{attrs:{readonly:!0,items:e.store.sizeOptions},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{staticClass:"effect-button-group",attrs:{items:e.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("veui-icon",{staticClass:"info-icon",attrs:{name:"exclamation-circle-o"}}),a("span",{staticClass:"effect-info"},[e._v("推荐您选择默认配置，默认配置是充分竞价，变现效果好")]),1===e.effect?a("normal-style",{ref:"normalStyle",staticClass:"normal-container",attrs:{commonData:e.commonData,validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.effect,expression:"effect === 0"}]},[a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url17",field:"url17"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)],1)},[],!1,null,"0a26b928",null));_r.options.__file="DefaultView.vue";var Or=_r.exports,Cr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators1",[{fields:["height11"],validate:function(e){var t=Number(e);return 20<=t&&t<=2e3&&Math.floor(t)===t||{height11:"请填写20～2000的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators2",[{fields:["height11"],validate:function(e){var t=Number(e);return 145<=t&&t<=2e3&&Math.floor(t)===t||{height11:"请填写145～2000的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"effectOptions",[{label:"默认",value:1},{label:"自定义",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleItems",[{label:"图文",value:"5"},{label:"文字",value:"4"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fontSizeOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18},{label:"19px",value:19}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"titleOptions",[{label:"无标题",value:"0"},{label:"搜索推荐",value:"1"},{label:"大家都在搜",value:"2"},{label:"猜你感兴趣",value:"3"},{label:"猜你喜欢",value:"4"},{label:"为你推荐",value:"5"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"searchBoxItems",[{label:"无",value:"0"},{label:"有",value:"1"}]),a}return Object(n.a)(t,e),t}(C.a),Dr=Object(u.a)(g.a,Cr,{name:"slot-pc-tuwen-search",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-number-input":_e.a,"veui-radio-button-group":De.a,"veui-icon":y.a,"color-picker":nl},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{FontNameOptions:Cl.i,title_type:"0",has_search_box:"0",sizeTypeOptions:[{label:"按屏幕宽度",value:3},{label:"按父容器宽度",value:6}],effect:1,extra:{shape:"autoWidth",fillStyleType:2},featureAd:{71001:{sub_stid:"5",textFont:"微软雅黑",textFontSize:15,txtFontColor:"#000000",cpro_material:"tuwen"},featureStyle:71001},featureAd1:{71001:{sub_stid:"5",textFont:"微软雅黑",textFontSize:15,txtFontColor:"#000000",cpro_material:"tuwen"},featureStyle:71001},height:200,container:{anchoredType:1,width:0,height:230,sizeType:3,floated:{}},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1,styleTemplateId:[71001],lu:{stid:4073},txt:{fontName:"微软雅黑",fontSize:15,ctitle:"#000000"},backgroundColor:"#FFFFFF"},fillStyle1:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1,styleTemplateId:[71001],lu:{stid:4073},txt:{fontName:"微软雅黑",fontSize:15,ctitle:"#000000"},backgroundColor:"#FFFFFF"}}},computed:{materialOptions:function(){var e=[{label:"文字",value:this.featureAd[71001].cpro_material="text"}];return"5"===this.featureAd[71001].sub_stid&&(e=[{label:"图文",value:this.featureAd[71001].cpro_material="tuwen"}]),e}},watch:{title_type:function(){this.emitForm()},has_search_box:function(){this.emitForm()},height:function(e){this.validatorData.height11=e,this.emitForm()},effect:function(){this.emitForm()},extra:{handler:function(){this.emitForm()},deep:!0},container:{handler:function(){this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},featureAd:{handler:function(){this.changeValidators(),this.emitForm()},deep:!0}},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setEditData:function(e){this.fillStyle.ignoreStyleMode=e.fillStyle.ignoreStyleMode,this.container.sizeType=e.container.sizeType,this.height=e.code.cpro_psheight,ul()(this.extra,e.extra)&&ul()(this.featureAd[71001],e.extra.featureAd[71001])&&ul()(this.container,e.container)&&ul()(this.fillStyle,e.fillStyle)?this.effect=1:(this.effect=2,e.code.hasOwnProperty("title_type")&&(this.title_type=e.code.title_type),e.code.hasOwnProperty("has_search_box")&&(this.has_search_box=e.code.has_search_box),this.assignData(this.extra,e.extra),this.assignData(this.featureAd[71001],e.extra.featureAd[71001]),this.assignData(this.container,e.container),this.assignData(this.fillStyle,e.fillStyle))},changeValidators:function(){var e=this;this.validators.length=0,"4"===this.featureAd[71001].sub_stid?this.store.validators2.forEach(function(t){e.validators.push(t)}):this.store.validators1.forEach(function(t){e.validators.push(t)})},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]=t[a])},setValidators:function(){var e=this;this.store.validators1.forEach(function(t){e.validators.push(t)})},emitForm:function(){var e={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:this.container,extra:this.extra,context:{userDefine:""},adType:302,bidLevel:3};1===this.effect?(e.fillStyle=this.fillStyle1,e.fillStyle.ignoreStyleMode=this.fillStyle.ignoreStyleMode,e.extra.featureAd=this.featureAd1):(e.fillStyle=this.fillStyle,e.extra.featureAd=JSON.parse(JSON.stringify(this.featureAd)));var t=e.extra.featureAd[71001],a=Number(this.height),i="4"===this.featureAd[71001].sub_stid?a:230;e.container.height=i,e.context.userDefine="sub_stid="+t.sub_stid,"4"===t.sub_stid&&(t.title_type=this.title_type,t.has_search_box=this.has_search_box,e.context.userDefine=e.context.userDefine+"|title_type="+t.title_type+"|has_search_box="+t.has_search_box),e.context.userDefine=e.context.userDefine+"|textFont="+t.textFont+"|textFontSize="+t.textFontSize+"|txtFontColor="+t.txtFontColor+"|cpro_material="+t.cpro_material+"|cpro_template=template_inlay_all_mobile_lu_search_recom|stid=4073|cpro_psheight="+a+"|cpro_pswidth=auto";var s="cpro_scale=0."+a;6!==e.container.sizeType&&(s=s+"|cpro_h="+i),e.code=s+"|"+e.context.userDefine+"|cpro_client="+this.commonData.cname,this.$emit("emitForm",e)}}}),wr=(a("e0c3"),Object(p.a)(Dr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-field",{attrs:{label:"固定高度",name:"height11",field:"height11"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}}),a("span",{staticClass:"input-px"},[e._v("px")])],1),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.store.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("veui-checkbox",{staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n        允许所有样式参与竞价\n    ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.effect,expression:"effect === 2"}],staticClass:"set-box"},[a("veui-field",{staticClass:"style-radio",attrs:{label:"搜索推荐样式"}},[a("veui-radio-group",{attrs:{items:e.store.styleItems},model:{value:e.featureAd[71001].sub_stid,callback:function(t){e.$set(e.featureAd[71001],"sub_stid",t)},expression:"featureAd[71001].sub_stid"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"4"===e.featureAd[71001].sub_stid,expression:"featureAd[71001].sub_stid === '4'"}]},[a("veui-field",{staticClass:"style-radio",attrs:{label:"标题类型"}},[a("veui-radio-group",{attrs:{items:e.store.titleOptions},model:{value:e.title_type,callback:function(t){e.title_type=t},expression:"title_type"}})],1),a("veui-field",{staticClass:"style-radio",attrs:{label:"是否有搜索框"}},[a("veui-radio-group",{attrs:{items:e.store.searchBoxItems},model:{value:e.has_search_box,callback:function(t){e.has_search_box=t},expression:"has_search_box"}})],1),a("div",{staticClass:"info-box"},[a("veui-icon",{staticClass:"info-icon",attrs:{name:"exclamation-circle-o"}}),a("span",{staticClass:"style-info"},[e._v("选择展现全部样式元素时，建议广告位高度设置在146px以上，否则样式展现将出现异常。")])],1)],1),a("p",{staticClass:"item-title"},[e._v("内容设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.featureAd[71001].textFont,callback:function(t){e.$set(e.featureAd[71001],"textFont",t)},expression:"featureAd[71001].textFont"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.featureAd[71001].txtFontColor},model:{value:e.featureAd[71001].txtFontColor,callback:function(t){e.$set(e.featureAd[71001],"txtFontColor",t)},expression:"featureAd[71001].txtFontColor"}})],1),a("veui-field",{attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.fontSizeOptions},model:{value:e.featureAd[71001].textFontSize,callback:function(t){e.$set(e.featureAd[71001],"textFontSize",t)},expression:"featureAd[71001].textFontSize"}})],1),a("veui-field",{attrs:{label:"物料类型"}},[a("veui-select",{attrs:{options:e.materialOptions,disabled:!0},model:{value:e.featureAd[71001].cpro_material,callback:function(t){e.$set(e.featureAd[71001],"cpro_material",t)},expression:"featureAd[71001].cpro_material"}})],1)],1),a("p",{staticClass:"item-title bottom-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.container.sizeType,callback:function(t){e.$set(e.container,"sizeType",t)},expression:"container.sizeType"}})],1)},[],!1,null,"53fb6141",null));wr.options.__file="SearchRecomView.vue";var jr=wr.exports,kr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["height12"],validate:function(e){var t=Number(e);return 3<=t&&t<=20&&Math.floor(t)===t||{height12:"请填写3～20的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sizeOptions",[{label:"6:5",value:"6:5"},{label:"20:3",value:"20:3"},{label:"20:5",value:"20:5"},{label:"20:2",value:"20:2"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"effectOptions",[{label:"默认",value:1},{label:"普通样式",value:2}]),a}return Object(n.a)(t,e),t}(C.a),Sr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"rules",{element:[{name:"required",value:!0,triggers:"change",message:"请至少选择一种物料类型"}],layout:[{name:"required",value:!0,triggers:"change",message:"请至少选择一种样式类型"}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterMap",{4:"tabcloud",5:"rank",6:"image"}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"typeItems",[{label:"文字",value:0},{label:"图文",value:4},{label:"图片",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleItems",[{label:"普通文字",value:1,layout:2,element:"0"},{label:"图文",value:2,layout:2,element:"4"},{label:"普通图片",value:3,layout:1,element:"12"},{label:"标签云",value:4,layout:2,element:"5"},{label:"文字排行",value:5,layout:2,element:"5"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleMap",{0:[{label:"普通文字",value:1,layout:2},{label:"标签云",value:4,layout:2},{label:"文字排行",value:5,layout:2}],4:[{label:"图文",value:2,layout:2}],1:[{label:"普通图片",value:3,layout:1}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"colorItems",[{label:"红与白",color:["#FF5B5B","#FFFFFF"],value:1},{label:"简约灰",color:["#666666","#666666"],value:2},{label:"蓝色字",color:["#3998FC","#3998FC"],value:3},{label:"简约黑",color:["#333333","#333333"],value:4},{label:"黄金蓝",color:["#FFE168","#60ACFC"],value:5},{label:"漂新绿",color:["#5BC49F","#5BC49F"],value:6},{label:"漂青蓝",color:["#60ACFC","#60ACFC"],value:7}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"SKIN_MAP",{1:"mobile_skin_white_red",2:"mobile_skin_gray_black",3:"mobile_skin_white_blue",4:"mobile_skin_black_white",5:"mobile_skin_yellow_blue",6:"mobile_skin_green_white",7:"mobile_skin_blue_white"}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"labelOptions",[{label:"纯净",value:1},{label:"清新",value:2},{label:"华丽",value:3}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"labelObj",{1:[{postition:0,value:3},{postition:1,value:4},{postition:2,value:5},{postition:3,value:6},{postition:5,value:8}],2:[{postition:6,value:1},{postition:7,value:9},{postition:8,value:10},{postition:9,value:11},{postition:10,value:12}],3:[{postition:11,value:13},{postition:13,value:15},{postition:14,value:16},{postition:15,value:2}]}),a}return Object(n.a)(t,e),t}(C.a),xr=Object(u.a)(g.a,Sr,{name:"slot-pc-tuwen-qianru-normal",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{commonData:Object,shape:String,isCustom:Boolean,size:String,height:Number,width:Number,validatorData:Object},data:function(){return{ComplementOptions:Cl.e,httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],sizeType:2,sizeTypeOptions:[{label:"按屏幕宽度",value:2},{label:"按父容器宽度",value:5}],complement:{type:2},fillStyle:{txt:{txtSkin:1,number:1},elements:[1,2],layout:[1],cloudTheme:{stid:5,skin:3},lu:{},video:{},search:{},styleType:2},type:[0,1,4],style:[1,2,3,4,5],labelSetting:1,showCloud:!0,showColor:!0,cpro_layout_filter:"",cpro_template:"template_inlay_all_mobile"}},watch:{labelSetting:function(e){this.changeLabelValue(this.store.labelObj[e][0].value)},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url19=e,this.emitForm()},sizeType:function(){this.emitForm()},type:{handler:function(e){this.validatorData.element2=e},deep:!0},style:{handler:function(e){this.fillStyle.txt.txtSkin=1,this.validatorData.layout2=e,this.getFillStyle(e)},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},complement:{handler:function(){this.emitForm()},deep:!0}},computed:{labelArr:function(){return this.store.labelObj[this.labelSetting]},styleItems:function(){var e=this,t=[];return this.type.forEach(function(a){t=t.concat(e.store.styleMap[a])}),this.style=t.map(function(e){return e.value}),t}},created:function(){this.init()},methods:{setEditData:function(e){var t=this;this.sizeType=e.container.sizeType,1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type,this.$nextTick(function(){t.transElements(e.fillStyle.elements,e.code.cpro_layout_filter,e)})},transElements:function(e,t,a){var i=this,s=e.join(""),l=this.store.styleItems.filter(function(e){return s.includes(e.element)}).map(function(e){return e.value}),r=[];if(t){var o=[];t.includes("tabcloud")&&o.push(4),t.includes("rank")&&o.push(5),t.includes("image")&&o.push(6),l=l.filter(function(e){return!o.includes(e)})}(l.includes(1)||l.includes(4)||l.includes(5))&&r.push(0),l.includes(3)&&r.push(1),l.includes(2)&&r.push(4),this.type=r,this.$nextTick(function(){i.style=l,i.$nextTick(function(){i.assignData(i.fillStyle,a.fillStyle),[3,4,5,6,8].includes(i.fillStyle.cloudTheme.skin)&&(i.labelSetting=1),[1,9,10,11,12].includes(i.fillStyle.cloudTheme.skin)&&(i.labelSetting=2),[13,15,16,2].includes(i.fillStyle.cloudTheme.skin)&&(i.labelSetting=3),i.$nextTick(function(){i.fillStyle.cloudTheme.skin=a.fillStyle.cloudTheme.skin})})})},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]instanceof Object&&!Array.isArray(e[a])?this.assignData(e[a],t[a]):e[a]=t[a])},init:function(){if(this.isCustom)return this.type=[0],this.store.typeItems=[{label:"文字",value:0}],this.style=[4,5],this.store.styleMap[0]=[{label:"标签云",value:4,layout:2},{label:"文字排行",value:5,layout:2}],void(this.cpro_template="template_inlay_all_mobile_lu_tabcloud");"6:5"===this.size&&(this.type=[1],this.store.typeItems=[{label:"图片",value:1}]),"20:3"===this.size&&(this.type=[0,4,1],this.store.typeItems=[{label:"文字",value:0},{label:"图文",value:4},{label:"图片",value:1}]),"20:5"===this.size&&(this.type=[0,4],this.store.typeItems=[{label:"文字",value:0},{label:"图文",value:4}]),"20:2"===this.size&&(this.type=[0],this.store.typeItems=[{label:"文字",value:0}],this.cpro_template="template_inlay_all_mobile_tixt")},changeColorValue:function(e){this.fillStyle.txt.txtSkin=e},changeLabelValue:function(e){this.fillStyle.cloudTheme.skin=e},getFillStyle:function(e){this.labelSetting=1,this.showCloud=e.includes(4),this.showColor=e.includes(1)||e.includes(2),this.getLayoutElements()},getLayoutElements:function(){var e=this,t=this.store.styleItems.filter(function(t){return e.style.includes(t.value)}),a=t.map(function(e){return e.layout}),i="";if(t.forEach(function(e){i+=e.element}),this.fillStyle.layout=Object(Ve.a)(new Set(a)),this.fillStyle.elements=Object(Ve.a)(new Set(i.split(""))).map(function(e){return Number(e)}),this.fillStyle.elements.includes(5)){var s=[4,5,6].filter(function(t){return!e.style.includes(t)});if(s.length){var l=[];s.forEach(function(t){l.push(e.store.filterMap[t])}),this.cpro_layout_filter=l.join(",")}else this.cpro_layout_filter=""}else this.cpro_layout_filter="";this.emitForm()},emitForm:function(){var e={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:this.width,height:this.height,sizeType:this.sizeType,floated:{}},extra:{shape:this.shape,fillStyleType:1},fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:{userDefine:"cpro_template=".concat(this.cpro_template,"|cpro_version=2.0")},adType:201,bidLevel:3},t="mobile_skin_white_red";this.showCloud?t="tabcloud_skin_".concat(e.fillStyle.cloudTheme.skin):delete e.fillStyle.cloudTheme,this.showColor?t=this.store.SKIN_MAP[e.fillStyle.txt.txtSkin]:delete e.fillStyle.txt.txtSkin;var a=1;1===this.complement.type?(e.complement.url=this.httpType+this.url,a="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(a="0|cpro_acolor=#ffffff"),7===this.complement.type&&(a="0");var i=[];e.fillStyle.elements.includes(0)&&i.push("text"),e.fillStyle.elements.includes(1)&&i.push("image"),e.fillStyle.elements.includes(4)&&i.push("tuwen"),e.fillStyle.elements.includes(5)&&i.push("linkunit"),e.code="cpro_scale="+this.width+"."+this.height+"|cpro_161=1|cpro_template="+this.cpro_template+"|cpro_skin="+t+"|cpro_cad="+a,this.cpro_layout_filter&&(e.context.userDefine="cpro_layout_filter=".concat(this.cpro_layout_filter,"|")+e.context.userDefine,e.code=e.code+"|cpro_layout_filter=".concat(this.cpro_layout_filter)),i.length&&(e.code=e.code+"|cpro_at="+i.join(",")),e.code=e.code+"|cpro_client="+this.commonData.cname+"|cpro_version=2.0",this.$emit("emitForm",e)}}}),Rr=(a("e694"),Object(p.a)(xr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"normal-coantiner"},[a("veui-field",{staticClass:"type-field",attrs:{label:"物料类型",name:"element2",field:"element2",rules:e.store.rules.element}},[a("veui-checkbox-group",{attrs:{items:e.store.typeItems},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("veui-field",{attrs:{label:"样式类型",name:"layout2",field:"layout2",rules:e.store.rules.layout}},[a("veui-checkbox-group",{attrs:{items:e.styleItems},model:{value:e.style,callback:function(t){e.style=t},expression:"style"}})],1),e.showColor?a("div",[a("p",{staticClass:"item-title"},[e._v("颜色配置")]),a("div",{staticClass:"color-button-group"},e._l(e.store.colorItems,function(t){return a("div",{key:t.label,staticClass:"color-button",class:{active:e.fillStyle.txt.txtSkin===t.value},on:{click:function(a){e.changeColorValue(t.value)}}},[a("div",{staticClass:"color-box"},[a("div",{staticClass:"half-box",style:{background:t.color[0]}}),a("div",{staticClass:"half-box",style:{background:t.color[1]}})]),a("div",{staticClass:"color-text"},[e._v(e._s(t.label))])])}))]):e._e(),e.showCloud?a("div",[a("p",{staticClass:"item-title"},[e._v("标签云配置")]),a("veui-radio-button-group",{attrs:{items:e.store.labelOptions},model:{value:e.labelSetting,callback:function(t){e.labelSetting=t},expression:"labelSetting"}}),a("div",{staticClass:"label-button-group"},e._l(e.labelArr,function(t){return a("div",{key:t.value,staticClass:"label-button",class:{active:e.fillStyle.cloudTheme.skin===t.value},style:{"background-position":"0 -"+53*t.postition+"px"},on:{click:function(a){e.changeLabelValue(t.value)}}})}))],1):e._e(),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url19",field:"url19"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title bottom-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)},[],!1,null,"1adafa64",null));Rr.options.__file="NormalView.vue";var Tr=Rr.exports,Ir=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["height7"],validate:function(e){var t=Number(e);return 20<=t&&t<=2e3&&Math.floor(t)===t||{height5:"请填写20～2000的整数"}}},{fields:["imgRatio1"],validate:function(e){var t=Number(e);return 0<=t&&t<=10||{imgRatio1:"请填写≥0且≤10的数字，最多保留两位小数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"imgSizeOptions",[{label:"默认大小",value:0},{label:"自定义像素",value:1},{label:"自定义百分比",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptpOptions",[{label:"图片靠左",value:0},{label:"图片靠右",value:1},{label:"无图片",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptDescOptions",[{label:"一般描述",value:0},{label:"时间描述",value:1},{label:"无描述",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"descriptionConfigs",[{label:"无描述",value:"0"},{label:"阅读数量或点赞数等描述",value:"1"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"titleFontOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18},{label:"19px",value:19}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fontSizeOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptLogoOptions",[{label:"默认",value:0},{label:"推广",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adStyle",{ptn:1,rss1:"#ffffff",visual_adType:"1",ptp:0,visual_imgSize:0,itecpl:10,ptDesc:0,ptLogo:0,conpl:10,conpr:10,conpt:10,conpb:10,ptFF:"微软雅黑",ptFS:14,ptFC:"#000000",ptFW:1,titFF:"微软雅黑",rss2:"#000000",titFS:12}),a}return Object(n.a)(t,e),t}(C.a),Fr=Object(u.a)(g.a,Ir,{name:"slot-pc-tuwen-qianru-special",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-number-input":_e.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{templateId:Number,commonData:Object,validatorData:Object,validators:Array,shape:String},data:function(){return{FontNameOptions:Cl.i,ComplementOptions:Cl.e,context:{userDefine:""},height:100,type:1,typeOptions:[{label:"固定高度",value:1}],sizeType:3,sizeTypeOptions:[{label:"按屏幕宽度",value:3},{label:"按父容器宽度",value:6}],httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],complement:{type:2},extra:{shape:"feedAutoWidth",fillStyleType:2,featureAd:{featureStyle:61108}},adStyle:{ptn:1,rss1:"#ffffff",visual_adType:"1",ptp:0,visual_imgSize:0,itecpl:10,ptDesc:0,ptLogo:0,conpl:10,conpr:10,conpt:10,conpb:10,ptFF:"微软雅黑",ptFS:14,ptFC:"#000000",ptFW:1,titFF:"微软雅黑",rss2:"#000000",titFS:12},descibeConfig:{readNumber:"1"},adStyle2:{ptLogoFS:10,ptLogoW:"",ptLogoH:"",ptLogoC:"#ffffff",ptLogoBg:"#dbdbdb"},adStyle3:{piw:0,pih:0},adStyle4:{piw:0,imgRatio:1.7},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1,styleTemplateId:[61108]},adType:201,effect:"0",effectOptions:[{label:"默认",value:"0"},{label:"自定义",value:"1"}]}},watch:{effect:function(){this.emitForm()},height:function(e){this.validatorData.height7=e,this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url13=e,this.emitForm()},sizeType:function(){this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},adStyle:{handler:function(){this.emitForm()},deep:!0},descibeConfig:{handler:function(){this.emitForm()},deep:!0},adStyle2:{handler:function(){this.emitForm()},deep:!0},adStyle3:{handler:function(){this.emitForm()},deep:!0},adStyle4:{handler:function(e){this.validatorData.imgRatio1=e.imgRatio,this.emitForm()},deep:!0}},created:function(){this.init()},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},init:function(){this.extra.shape=this.shape,this.extra.featureAd.featureStyle=this.templateId,this.shape.includes("feed")&&(this.context.adSlotType=13,this.adType=204)},setEditData:function(e){if(this.height=e.container.height,1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.sizeType=e.container.sizeType,this.assignData(this.complement,e.complement),this.fillStyle.ignoreStyleMode=e.fillStyle.ignoreStyleMode,ul()(this.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle])&&ul()(this.fillStyle,e.fillStyle))this.effect="0";else if(this.effect="1",this.assignData(this.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle2,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle3,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle4,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.fillStyle,e.fillStyle),-1!==e.context.userDefine.indexOf("dpConfig=")){var t=e.context.userDefine.match(/\|dpConfig=(\d+)(?:$|\|+)/)[1];this.descibeConfig.readNumber=t}},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]=t[a])},emitForm:function(){var e=JSON.parse(JSON.stringify(this.extra)),t=0,a=0,i=0,s=!1;"1"===this.effect?(e.featureAd[this.templateId]=Object(v.a)({},this.adStyle),e.featureAd[this.templateId].conpl=Number(this.adStyle.conpl),e.featureAd[this.templateId].conpr=Number(this.adStyle.conpr),e.featureAd[this.templateId].conpt=Number(this.adStyle.conpt),e.featureAd[this.templateId].conpb=Number(this.adStyle.conpb),e.featureAd[this.templateId].itecpl=Number(this.adStyle.itecpl),1===this.adStyle.ptLogo&&(Object.assign(e.featureAd[this.templateId],this.adStyle2),e.featureAd[this.templateId].ptLogoFS=Number(this.adStyle2.ptLogoFS),e.featureAd[this.templateId].ptLogoW&&(e.featureAd[this.templateId].ptLogoW=Number(this.adStyle2.ptLogoW)),e.featureAd[this.templateId].ptLogoH&&(e.featureAd[this.templateId].ptLogoH=Number(this.adStyle2.ptLogoH)),s=!0),1===this.adStyle.visual_imgSize&&(Object.assign(e.featureAd[this.templateId],this.adStyle3),e.featureAd[this.templateId].piw=Number(this.adStyle3.piw),e.featureAd[this.templateId].pih=Number(this.adStyle3.pih),t=e.featureAd[this.templateId].pih,a=e.featureAd[this.templateId].piw),2===this.adStyle.visual_imgSize&&(Object.assign(e.featureAd[this.templateId],this.adStyle4),e.featureAd[this.templateId].piw=Number(this.adStyle4.piw),e.featureAd[this.templateId].imgRatio=Number(Number(this.adStyle4.imgRatio).toFixed(2)),t=0,a=e.featureAd[this.templateId].piw,i=e.featureAd[this.templateId].imgRatio)):e.featureAd[this.templateId]=Object(v.a)({},this.store.adStyle);var l={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:0,height:Number(this.height),sizeType:this.sizeType,floated:{}},extra:e,fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:this.context,adType:this.adType,bidLevel:3};l.fillStyle.styleTemplateId=[this.extra.featureAd.featureStyle];var r=e.featureAd[this.templateId];l.context.userDefine="ptn="+r.ptn+"|rss1="+r.rss1+"|ptp="+r.ptp+"|itecpl="+r.itecpl+"|ptDesc="+r.ptDesc+"|ptLogo="+r.ptLogo+"|conpl="+r.conpl+"|conpr="+r.conpr+"|conpt="+r.conpt+"|conpb="+r.conpb+"|ptFF="+r.ptFF+"|ptFS="+r.ptFS+"|ptFC="+r.ptFC+"|ptFW="+r.ptFW+"|titFF="+r.titFF+"|rss2="+r.rss2+"|titFS="+r.titFS+"|pat=15|at=3|tn=template_inlay_all_mobile_lu_native|piw="+a+"|pih="+t,i&&(l.context.userDefine=l.context.userDefine+"|imgRatio="+i),s&&(l.context.userDefine=l.context.userDefine+"|ptLogoFS="+r.ptLogoFS+"|ptLogoC="+r.ptLogoC+"|ptLogoBg="+r.ptLogoBg,r.ptLogoW&&(l.context.userDefine=l.context.userDefine+"|ptLogoW="+r.ptLogoW),r.ptLogoH&&(l.context.userDefine=l.context.userDefine+"|ptLogoH="+r.ptLogoH));var o=1;1===this.complement.type?(l.complement.url=this.httpType+this.url,o="0|cpro_aurl="+l.complement.url):delete l.complement.url,3===this.complement.type&&(o="0|cpro_acolor=#ffffff"),7===this.complement.type&&(o="0");var n="cpro_scale=0."+l.container.height;6!==l.container.sizeType&&(n=n+"|cpro_h="+l.container.height),l.code=n+"|"+l.context.userDefine+"|cpro_cad="+o+"|cpro_client="+this.commonData.cname,l.context.userDefine=l.context.userDefine+"|dpConfig="+this.descibeConfig.readNumber,this.$emit("emitForm",l)}}}),Nr=(a("d2e62"),Object(p.a)(Fr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"special-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-radio-group",{staticClass:"type-radio-group",attrs:{items:e.typeOptions},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("div",{staticClass:"size-set-container"},[a("veui-field",{attrs:{name:"height7",field:"height7"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}}),a("span",{staticClass:"input-px"},[e._v("px")]),a("span",{staticClass:"input-px-info"},[e._v("高度为像素值，宽度根据屏幕自适应。")])],1)],1),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("veui-checkbox",{staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n        允许所有样式参与竞价\n    ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.effect,expression:"effect === '1'"}]},[a("p",{staticClass:"item-title"},[e._v("全局设置")]),a("veui-field",{staticClass:" inline-field",attrs:{label:"广告个数"}},[a("veui-number-input",{model:{value:e.adStyle.ptn,callback:function(t){e.$set(e.adStyle,"ptn",t)},expression:"adStyle.ptn"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"广告背景色"}},[a("color-picker",{attrs:{color:e.adStyle.rss1},model:{value:e.adStyle.rss1,callback:function(t){e.$set(e.adStyle,"rss1",t)},expression:"adStyle.rss1"}})],1),a("p",{staticClass:"item-title"},[e._v("广告位设置")]),a("veui-field",{attrs:{label:"边距设置"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"上"}},[a("veui-input",{model:{value:e.adStyle.conpt,callback:function(t){e.$set(e.adStyle,"conpt",t)},expression:"adStyle.conpt"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"下"}},[a("veui-input",{model:{value:e.adStyle.conpb,callback:function(t){e.$set(e.adStyle,"conpb",t)},expression:"adStyle.conpb"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"左"}},[a("veui-input",{model:{value:e.adStyle.conpl,callback:function(t){e.$set(e.adStyle,"conpl",t)},expression:"adStyle.conpl"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"右"}},[a("veui-input",{model:{value:e.adStyle.conpr,callback:function(t){e.$set(e.adStyle,"conpr",t)},expression:"adStyle.conpr"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("图片区样式")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"图片位置"}},[a("veui-select",{attrs:{options:e.store.ptpOptions},model:{value:e.adStyle.ptp,callback:function(t){e.$set(e.adStyle,"ptp",t)},expression:"adStyle.ptp"}})],1),a("veui-field",{attrs:{label:"图片尺寸"}},[a("veui-select",{staticClass:"img-size-select",attrs:{options:e.store.imgSizeOptions},model:{value:e.adStyle.visual_imgSize,callback:function(t){e.$set(e.adStyle,"visual_imgSize",t)},expression:"adStyle.visual_imgSize"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.visual_imgSize,expression:"adStyle.visual_imgSize === 1"}],staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽"}},[a("veui-input",{model:{value:e.adStyle3.piw,callback:function(t){e.$set(e.adStyle3,"piw",t)},expression:"adStyle3.piw"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.visual_imgSize,expression:"adStyle.visual_imgSize === 1"}],staticClass:"label-input"},[a("veui-field",{attrs:{label:"高"}},[a("veui-input",{model:{value:e.adStyle3.pih,callback:function(t){e.$set(e.adStyle3,"pih",t)},expression:"adStyle3.pih"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.adStyle.visual_imgSize,expression:"adStyle.visual_imgSize === 2"}],staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽"}},[a("veui-input",{model:{value:e.adStyle4.piw,callback:function(t){e.$set(e.adStyle4,"piw",t)},expression:"adStyle4.piw"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.adStyle.visual_imgSize,expression:"adStyle.visual_imgSize === 2"}],staticClass:"label-input imgRatio-input"},[a("veui-field",{attrs:{label:"宽高比",name:"imgRatio1",field:"imgRatio1"}},[a("veui-input",{model:{value:e.adStyle4.imgRatio,callback:function(t){e.$set(e.adStyle4,"imgRatio",t)},expression:"adStyle4.imgRatio"}})],1)],1)],1),a("veui-field",{staticClass:"itecpl-field",attrs:{label:"图片和文本间距"}},[a("veui-input",{model:{value:e.adStyle.itecpl,callback:function(t){e.$set(e.adStyle,"itecpl",t)},expression:"adStyle.itecpl"}})],1),a("p",{staticClass:"item-title"},[e._v("描述信息类型配置")]),a("veui-select",{staticClass:"bottom-select desc-select",attrs:{"overlay-class":"web-slot-select-243",options:e.store.ptDescOptions},model:{value:e.adStyle.ptDesc,callback:function(t){e.$set(e.adStyle,"ptDesc",t)},expression:"adStyle.ptDesc"}}),a("p",{staticClass:"item-title"},[e._v("其它描述配置")]),a("veui-select",{staticClass:"bottom-select desc-select",attrs:{"overlay-class":"web-slot-select-243",options:e.store.descriptionConfigs},model:{value:e.descibeConfig.readNumber,callback:function(t){e.$set(e.descibeConfig,"readNumber",t)},expression:"descibeConfig.readNumber"}}),a("p",{staticClass:"item-title"},[e._v("标题设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"标题字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle.ptFF,callback:function(t){e.$set(e.adStyle,"ptFF",t)},expression:"adStyle.ptFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.adStyle.ptFC},model:{value:e.adStyle.ptFC,callback:function(t){e.$set(e.adStyle,"ptFC",t)},expression:"adStyle.ptFC"}})],1),a("veui-field",{attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.titleFontOptions},model:{value:e.adStyle.ptFS,callback:function(t){e.$set(e.adStyle,"ptFS",t)},expression:"adStyle.ptFS"}}),a("veui-checkbox",{staticClass:"font-checkbox",attrs:{"true-value":1,"false-value":0},model:{value:e.adStyle.ptFW,callback:function(t){e.$set(e.adStyle,"ptFW",t)},expression:"adStyle.ptFW"}},[e._v("\n                加粗\n            ")])],1),a("p",{staticClass:"item-title"},[e._v("内容文字效果")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"内容字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle.titFF,callback:function(t){e.$set(e.adStyle,"titFF",t)},expression:"adStyle.titFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{ref:"rss2",attrs:{color:e.adStyle.rss2},model:{value:e.adStyle.rss2,callback:function(t){e.$set(e.adStyle,"rss2",t)},expression:"adStyle.rss2"}})],1),a("veui-field",{staticClass:"inline-field text-size",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.fontSizeOptions},model:{value:e.adStyle.titFS,callback:function(t){e.$set(e.adStyle,"titFS",t)},expression:"adStyle.titFS"}})],1),a("p",{staticClass:"item-title"},[e._v("Logo设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"Logo类型"}},[a("veui-select",{attrs:{options:e.store.ptLogoOptions},model:{value:e.adStyle.ptLogo,callback:function(t){e.$set(e.adStyle,"ptLogo",t)},expression:"adStyle.ptLogo"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.ptLogo,expression:"adStyle.ptLogo === 1"}],staticClass:"inline-field",attrs:{label:"Logo颜色"}},[a("color-picker",{attrs:{color:e.adStyle2.ptLogoC},model:{value:e.adStyle2.ptLogoC,callback:function(t){e.$set(e.adStyle2,"ptLogoC",t)},expression:"adStyle2.ptLogoC"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.ptLogo,expression:"adStyle.ptLogo === 1"}],staticClass:"inline-field",attrs:{label:"文字大小"}},[a("veui-input",{model:{value:e.adStyle2.ptLogoFS,callback:function(t){e.$set(e.adStyle2,"ptLogoFS",t)},expression:"adStyle2.ptLogoFS"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.ptLogo,expression:"adStyle.ptLogo === 1"}],staticClass:"inline-field",attrs:{label:"背景颜色"}},[a("color-picker",{attrs:{color:e.adStyle2.ptLogoBg},model:{value:e.adStyle2.ptLogoBg,callback:function(t){e.$set(e.adStyle2,"ptLogoBg",t)},expression:"adStyle2.ptLogoBg"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.ptLogo,expression:"adStyle.ptLogo === 1"}],attrs:{label:"Logo大小"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽"}},[a("veui-input",{model:{value:e.adStyle2.ptLogoW,callback:function(t){e.$set(e.adStyle2,"ptLogoW",t)},expression:"adStyle2.ptLogoW"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高"}},[a("veui-input",{model:{value:e.adStyle2.ptLogoH,callback:function(t){e.$set(e.adStyle2,"ptLogoH",t)},expression:"adStyle2.ptLogoH"}})],1)],1)])],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url13",field:"url13"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)},[],!1,null,"da916740",null));Nr.options.__file="a61108View.vue";var Ar=Nr.exports,Mr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["height8"],validate:function(e){var t=Number(e);return 20<=t&&t<=2e3&&Math.floor(t)===t||{height8:"请填写20～2000的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"imgSizeOptions",[{label:"默认大小",value:0},{label:"自定义像素",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptDescOptions",[{label:"时间描述",value:1},{label:"无描述",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"titleFontOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18},{label:"19px",value:19}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fontSizeOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptLogoOptions",[{label:"默认",value:0},{label:"推广",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adStyle",{ptn:1,rss1:"#ffffff",visual_adType:"2",visual_imgSize:0,ptDesc:1,ptLogo:0,conpl:10,conpr:10,conpt:10,conpb:10,ptFF:"微软雅黑",ptFS:14,ptFC:"#000000",ptFW:1,titFF:"微软雅黑",rss2:"#000000",titFS:12,marginTP:10,picGap:5}),a}return Object(n.a)(t,e),t}(C.a),Yr=Object(u.a)(g.a,Mr,{name:"slot-pc-tuwen-qianru-special",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-number-input":_e.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{templateId:Number,commonData:Object,validatorData:Object,validators:Array,shape:String},data:function(){return{FontNameOptions:Cl.i,ComplementOptions:Cl.e,adType:201,context:{userDefine:""},height:150,type:1,typeOptions:[{label:"固定高度",value:1}],sizeType:3,sizeTypeOptions:[{label:"按屏幕宽度",value:3},{label:"按父容器宽度",value:6}],httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],complement:{type:2},extra:{shape:"feedAutoWidth",fillStyleType:2,featureAd:{featureStyle:61108}},adStyle:{ptn:1,rss1:"#ffffff",visual_adType:"2",visual_imgSize:0,ptDesc:1,ptLogo:0,conpl:10,conpr:10,conpt:10,conpb:10,ptFF:"微软雅黑",ptFS:14,ptFC:"#000000",ptFW:1,titFF:"微软雅黑",rss2:"#000000",titFS:12,marginTP:10,picGap:5},adStyle2:{ptLogoFS:10,ptLogoW:"",ptLogoH:"",ptLogoC:"#ffffff",ptLogoBg:"#dbdbdb"},adStyle3:{piw:0,pih:0},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1,styleTemplateId:[61108]},effect:"0",effectOptions:[{label:"默认",value:"0"},{label:"自定义",value:"1"}]}},watch:{effect:function(){this.emitForm()},height:function(e){this.validatorData.height8=e,this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url14=e,this.emitForm()},sizeType:function(){this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},adStyle:{handler:function(){this.emitForm()},deep:!0},adStyle2:{handler:function(){this.emitForm()},deep:!0},adStyle3:{handler:function(){this.emitForm()},deep:!0}},created:function(){this.init()},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},init:function(){this.extra.shape=this.shape,this.extra.featureAd.featureStyle=this.templateId,this.shape.includes("feed")&&(this.context.adSlotType=13,this.adType=204)},setEditData:function(e){this.height=e.container.height,1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.sizeType=e.container.sizeType,this.assignData(this.complement,e.complement),this.fillStyle.ignoreStyleMode=e.fillStyle.ignoreStyleMode,ul()(this.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle])&&ul()(this.fillStyle,e.fillStyle)?this.effect="0":(this.effect="1",this.assignData(this.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle2,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle3,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.fillStyle,e.fillStyle))},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]=t[a])},emitForm:function(){var e=JSON.parse(JSON.stringify(this.extra)),t=0,a=0,i=!1;"1"===this.effect?(e.featureAd[this.templateId]=Object(v.a)({},this.adStyle),e.featureAd[this.templateId].conpl=Number(this.adStyle.conpl),e.featureAd[this.templateId].conpr=Number(this.adStyle.conpr),e.featureAd[this.templateId].conpt=Number(this.adStyle.conpt),e.featureAd[this.templateId].conpb=Number(this.adStyle.conpb),e.featureAd[this.templateId].marginTP=Number(this.adStyle.marginTP),e.featureAd[this.templateId].picGap=Number(this.adStyle.picGap),1===this.adStyle.ptLogo&&(Object.assign(e.featureAd[this.templateId],this.adStyle2),e.featureAd[this.templateId].ptLogoFS=Number(this.adStyle2.ptLogoFS),this.adStyle2.ptLogoW&&(e.featureAd[this.templateId].ptLogoW=Number(this.adStyle2.ptLogoW)),this.adStyle2.ptLogoH&&(e.featureAd[this.templateId].ptLogoH=Number(this.adStyle2.ptLogoH)),i=!0),1===this.adStyle.visual_imgSize&&(Object.assign(e.featureAd[this.templateId],this.adStyle3),e.featureAd[this.templateId].piw=Number(this.adStyle3.piw),e.featureAd[this.templateId].pih=Number(this.adStyle3.pih),t=e.featureAd[this.templateId].pih,a=e.featureAd[this.templateId].piw)):e.featureAd[this.templateId]=Object(v.a)({},this.store.adStyle);var s={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:0,height:Number(this.height),sizeType:this.sizeType,floated:{}},extra:e,fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:this.context,adType:this.adType,bidLevel:3};s.fillStyle.styleTemplateId=[this.extra.featureAd.featureStyle];var l=e.featureAd[this.templateId];s.context.userDefine="ptn="+l.ptn+"|rss1="+l.rss1+"|ptDesc="+l.ptDesc+"|ptLogo="+l.ptLogo+"|conpl="+l.conpl+"|conpr="+l.conpr+"|conpt="+l.conpt+"|conpb="+l.conpb+"|ptFF="+l.ptFF+"|ptFS="+l.ptFS+"|ptFC="+l.ptFC+"|ptFW="+l.ptFW+"|titFF="+l.titFF+"|rss2="+l.rss2+"|titFS="+l.titFS+"|marginTP="+l.marginTP+"|picGap="+l.picGap+"|pat=21|at=3|tn=template_inlay_all_mobile_lu_native|piw="+a+"|pih="+t,i&&(s.context.userDefine=s.context.userDefine+"|ptLogoFS="+l.ptLogoFS+"|ptLogoC="+l.ptLogoC+"|ptLogoBg="+l.ptLogoBg,l.ptLogoW&&(s.context.userDefine=s.context.userDefine+"|ptLogoW="+l.ptLogoW),l.ptLogoH&&(s.context.userDefine=s.context.userDefine+"|ptLogoH="+l.ptLogoH));var r=1;1===this.complement.type?(s.complement.url=this.httpType+this.url,r="0|cpro_aurl="+s.complement.url):delete s.complement.url,3===this.complement.type&&(r="0|cpro_acolor=#ffffff"),7===this.complement.type&&(r="0");var o="cpro_scale=0."+s.container.height;6!==s.container.sizeType&&(o=o+"|cpro_h="+s.container.height),s.code=o+"|"+s.context.userDefine+"|cpro_cad="+r+"|cpro_client="+this.commonData.cname,this.$emit("emitForm",s)}}}),Lr=(a("6a19"),Object(p.a)(Yr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"special-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-radio-group",{staticClass:"type-radio-group",attrs:{items:e.typeOptions},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("div",{staticClass:"size-set-container"},[a("veui-field",{attrs:{name:"height8",field:"height8"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}}),a("span",{staticClass:"input-px"},[e._v("px")]),a("span",{staticClass:"input-px-info"},[e._v("高度为像素值，宽度根据屏幕自适应。")])],1)],1),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("veui-checkbox",{staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n        允许所有样式参与竞价\n    ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.effect,expression:"effect === '1'"}]},[a("p",{staticClass:"item-title"},[e._v("全局设置")]),a("veui-field",{staticClass:" inline-field",attrs:{label:"广告个数"}},[a("veui-number-input",{model:{value:e.adStyle.ptn,callback:function(t){e.$set(e.adStyle,"ptn",t)},expression:"adStyle.ptn"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"广告背景色"}},[a("color-picker",{attrs:{color:e.adStyle.rss1},model:{value:e.adStyle.rss1,callback:function(t){e.$set(e.adStyle,"rss1",t)},expression:"adStyle.rss1"}})],1),a("p",{staticClass:"item-title"},[e._v("广告位设置")]),a("veui-field",{attrs:{label:"边距设置"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"上"}},[a("veui-input",{model:{value:e.adStyle.conpt,callback:function(t){e.$set(e.adStyle,"conpt",t)},expression:"adStyle.conpt"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"下"}},[a("veui-input",{model:{value:e.adStyle.conpb,callback:function(t){e.$set(e.adStyle,"conpb",t)},expression:"adStyle.conpb"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"左"}},[a("veui-input",{model:{value:e.adStyle.conpl,callback:function(t){e.$set(e.adStyle,"conpl",t)},expression:"adStyle.conpl"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"右"}},[a("veui-input",{model:{value:e.adStyle.conpr,callback:function(t){e.$set(e.adStyle,"conpr",t)},expression:"adStyle.conpr"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("图片区样式")]),a("veui-field",{attrs:{label:"图片尺寸"}},[a("veui-select",{staticClass:"img-size-select",attrs:{options:e.store.imgSizeOptions},model:{value:e.adStyle.visual_imgSize,callback:function(t){e.$set(e.adStyle,"visual_imgSize",t)},expression:"adStyle.visual_imgSize"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.visual_imgSize,expression:"adStyle.visual_imgSize === 1"}],staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽"}},[a("veui-input",{model:{value:e.adStyle3.piw,callback:function(t){e.$set(e.adStyle3,"piw",t)},expression:"adStyle3.piw"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.visual_imgSize,expression:"adStyle.visual_imgSize === 1"}],staticClass:"label-input"},[a("veui-field",{attrs:{label:"高"}},[a("veui-input",{model:{value:e.adStyle3.pih,callback:function(t){e.$set(e.adStyle3,"pih",t)},expression:"adStyle3.pih"}})],1)],1)],1),a("p",{staticClass:"item-title"},[e._v("描述信息类型配置")]),a("veui-select",{staticClass:"bottom-select desc-select",attrs:{"overlay-class":"web-slot-select-243",options:e.store.ptDescOptions},model:{value:e.adStyle.ptDesc,callback:function(t){e.$set(e.adStyle,"ptDesc",t)},expression:"adStyle.ptDesc"}}),a("p",{staticClass:"item-title"},[e._v("标题设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"标题字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle.ptFF,callback:function(t){e.$set(e.adStyle,"ptFF",t)},expression:"adStyle.ptFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.adStyle.ptFC},model:{value:e.adStyle.ptFC,callback:function(t){e.$set(e.adStyle,"ptFC",t)},expression:"adStyle.ptFC"}})],1),a("veui-field",{attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.titleFontOptions},model:{value:e.adStyle.ptFS,callback:function(t){e.$set(e.adStyle,"ptFS",t)},expression:"adStyle.ptFS"}}),a("veui-checkbox",{staticClass:"font-checkbox",attrs:{"true-value":1,"false-value":0},model:{value:e.adStyle.ptFW,callback:function(t){e.$set(e.adStyle,"ptFW",t)},expression:"adStyle.ptFW"}},[e._v("\n                加粗\n            ")])],1),a("p",{staticClass:"item-title"},[e._v("内容文字效果")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"内容字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle.titFF,callback:function(t){e.$set(e.adStyle,"titFF",t)},expression:"adStyle.titFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{ref:"rss2",attrs:{color:e.adStyle.rss2},model:{value:e.adStyle.rss2,callback:function(t){e.$set(e.adStyle,"rss2",t)},expression:"adStyle.rss2"}})],1),a("veui-field",{staticClass:"inline-field text-size",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.fontSizeOptions},model:{value:e.adStyle.titFS,callback:function(t){e.$set(e.adStyle,"titFS",t)},expression:"adStyle.titFS"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"图文间距",rules:"required"}},[a("veui-input",{model:{value:e.adStyle.marginTP,callback:function(t){e.$set(e.adStyle,"marginTP",t)},expression:"adStyle.marginTP"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"图片间距",rules:"required"}},[a("veui-input",{model:{value:e.adStyle.picGap,callback:function(t){e.$set(e.adStyle,"picGap",t)},expression:"adStyle.picGap"}})],1),a("p",{staticClass:"item-title"},[e._v("Logo设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"Logo类型"}},[a("veui-select",{attrs:{options:e.store.ptLogoOptions},model:{value:e.adStyle.ptLogo,callback:function(t){e.$set(e.adStyle,"ptLogo",t)},expression:"adStyle.ptLogo"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.ptLogo,expression:"adStyle.ptLogo === 1"}],staticClass:"inline-field",attrs:{label:"Logo颜色"}},[a("color-picker",{attrs:{color:e.adStyle2.ptLogoC},model:{value:e.adStyle2.ptLogoC,callback:function(t){e.$set(e.adStyle2,"ptLogoC",t)},expression:"adStyle2.ptLogoC"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.ptLogo,expression:"adStyle.ptLogo === 1"}],staticClass:"inline-field",attrs:{label:"文字大小"}},[a("veui-input",{model:{value:e.adStyle2.ptLogoFS,callback:function(t){e.$set(e.adStyle2,"ptLogoFS",t)},expression:"adStyle2.ptLogoFS"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.ptLogo,expression:"adStyle.ptLogo === 1"}],staticClass:"inline-field",attrs:{label:"背景颜色"}},[a("color-picker",{attrs:{color:e.adStyle2.ptLogoBg},model:{value:e.adStyle2.ptLogoBg,callback:function(t){e.$set(e.adStyle2,"ptLogoBg",t)},expression:"adStyle2.ptLogoBg"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.ptLogo,expression:"adStyle.ptLogo === 1"}],attrs:{label:"Logo大小"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽"}},[a("veui-input",{model:{value:e.adStyle2.ptLogoW,callback:function(t){e.$set(e.adStyle2,"ptLogoW",t)},expression:"adStyle2.ptLogoW"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高"}},[a("veui-input",{model:{value:e.adStyle2.ptLogoH,callback:function(t){e.$set(e.adStyle2,"ptLogoH",t)},expression:"adStyle2.ptLogoH"}})],1)],1)])],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url14",field:"url14"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title bottom-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)},[],!1,null,"7d6419b6",null));Lr.options.__file="b61108View.vue";var Er=Lr.exports,Pr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["height9"],validate:function(e){var t=Number(e);return 20<=t&&t<=2e3&&Math.floor(t)===t||{height9:"请填写20～2000的整数"}}},{fields:["imgRatio3"],validate:function(e){var t=Number(e);return 0<=t&&t<=10||{imgRatio3:"请填写≥0且≤10的数字，最多保留两位小数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"imgSizeOptions",[{label:"自定义百分比",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"titleFontOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18},{label:"19px",value:19}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptLogoOptions",[{label:"默认",value:0},{label:"推广",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adStyle",{rss1:"#ffffff",visual_adType:"3",visual_imgSize_full:2,visual_imgRatio:1.78,itecpl:10,conpl:10,conpr:10,conpt:10,conpb:10,ptFF:"微软雅黑",ptFS:14,ptFC:"#000000",ptFW:1}),a}return Object(n.a)(t,e),t}(C.a),Vr=Object(u.a)(g.a,Pr,{name:"slot-pc-tuwen-qianru-special",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-number-input":_e.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{templateId:Number,commonData:Object,validatorData:Object,validators:Array,shape:String},data:function(){return{FontNameOptions:Cl.i,ComplementOptions:Cl.e,adType:201,context:{userDefine:""},height:282,type:1,typeOptions:[{label:"固定高度",value:1}],sizeType:3,sizeTypeOptions:[{label:"按屏幕宽度",value:3},{label:"按父容器宽度",value:6}],httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],complement:{type:2},extra:{shape:"feedAutoWidth",fillStyleType:2,featureAd:{featureStyle:61108}},adStyle:{rss1:"#ffffff",visual_adType:"3",visual_imgSize_full:2,visual_imgRatio:1.78,itecpl:10,conpl:10,conpr:10,conpt:10,conpb:10,ptFF:"微软雅黑",ptFS:14,ptFC:"#000000",ptFW:1},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1,styleTemplateId:[61108]},effect:"0",effectOptions:[{label:"默认",value:"0"},{label:"自定义",value:"1"}]}},watch:{effect:function(){this.emitForm()},httpType:function(){this.emitForm()},height:function(e){this.validatorData.height9=e,this.emitForm()},url:function(e){this.validatorData.url15=e,this.emitForm()},sizeType:function(){this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},adStyle:{handler:function(e){this.validatorData.imgRatio3=e.visual_imgRatio,this.emitForm()},deep:!0}},created:function(){this.init()},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},init:function(){this.extra.shape=this.shape,this.extra.featureAd.featureStyle=this.templateId,this.shape.includes("feed")&&(this.context.adSlotType=13,this.adType=204)},setEditData:function(e){this.height=e.container.height,1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.sizeType=e.container.sizeType,this.assignData(this.complement,e.complement),this.fillStyle.ignoreStyleMode=e.fillStyle.ignoreStyleMode,ul()(this.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle])&&ul()(this.fillStyle,e.fillStyle)?this.effect="0":(this.effect="1",this.assignData(this.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.fillStyle,e.fillStyle))},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]=t[a])},emitForm:function(){var e=JSON.parse(JSON.stringify(this.extra));"1"===this.effect?(e.featureAd[this.templateId]=Object(v.a)({},this.adStyle),e.featureAd[this.templateId].conpl=Number(this.adStyle.conpl),e.featureAd[this.templateId].conpr=Number(this.adStyle.conpr),e.featureAd[this.templateId].conpt=Number(this.adStyle.conpt),e.featureAd[this.templateId].conpb=Number(this.adStyle.conpb),e.featureAd[this.templateId].itecpl=Number(this.adStyle.itecpl),e.featureAd[this.templateId].visual_imgRatio=Number(Number(this.adStyle.visual_imgRatio).toFixed(2))):e.featureAd[this.templateId]=Object(v.a)({},this.store.adStyle);var t={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:0,height:Number(this.height),sizeType:this.sizeType,floated:{}},extra:e,fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:this.context,adType:this.adType,bidLevel:3};t.fillStyle.styleTemplateId=[this.extra.featureAd.featureStyle];var a=e.featureAd[this.templateId];t.context.userDefine="rss1="+a.rss1+"|itecpl="+a.itecpl+"|conpl="+a.conpl+"|conpr="+a.conpr+"|conpt="+a.conpt+"|conpb="+a.conpb+"|ptFF="+a.ptFF+"|ptFS="+a.ptFS+"|ptFC="+a.ptFC+"|ptFW="+a.ptFW+"|pat=30|at=3|tn=template_inlay_all_mobile_lu_native|ptn=1|imgRatio="+e.featureAd[this.templateId].visual_imgRatio;var i=1;1===this.complement.type?(t.complement.url=this.httpType+this.url,i="0|cpro_aurl="+t.complement.url):delete t.complement.url,3===this.complement.type&&(i="0|cpro_acolor=#ffffff"),7===this.complement.type&&(i="0");var s="cpro_scale=0."+t.container.height;6!==t.container.sizeType&&(s=s+"|cpro_h="+t.container.height),t.code=s+"|"+t.context.userDefine+"|cpro_cad="+i+"|cpro_client="+this.commonData.cname,this.$emit("emitForm",t)}}}),Br=(a("45ec"),Object(p.a)(Vr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"special-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-radio-group",{staticClass:"type-radio-group",attrs:{items:e.typeOptions},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("div",{staticClass:"size-set-container"},[a("veui-field",{attrs:{name:"height9",field:"height9"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}}),a("span",{staticClass:"input-px"},[e._v("px")]),a("span",{staticClass:"input-px-info"},[e._v("高度为像素值，宽度根据屏幕自适应。")])],1)],1),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("veui-checkbox",{staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n        允许所有样式参与竞价\n    ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.effect,expression:"effect === '1'"}],staticClass:"custom-container"},[a("p",{staticClass:"item-title"},[e._v("全局设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"广告背景色"}},[a("color-picker",{attrs:{color:e.adStyle.rss1},model:{value:e.adStyle.rss1,callback:function(t){e.$set(e.adStyle,"rss1",t)},expression:"adStyle.rss1"}})],1),a("p",{staticClass:"item-title"},[e._v("广告位设置")]),a("veui-field",{attrs:{label:"边距设置"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"上"}},[a("veui-input",{model:{value:e.adStyle.conpt,callback:function(t){e.$set(e.adStyle,"conpt",t)},expression:"adStyle.conpt"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"下"}},[a("veui-input",{model:{value:e.adStyle.conpb,callback:function(t){e.$set(e.adStyle,"conpb",t)},expression:"adStyle.conpb"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"左"}},[a("veui-input",{model:{value:e.adStyle.conpl,callback:function(t){e.$set(e.adStyle,"conpl",t)},expression:"adStyle.conpl"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"右"}},[a("veui-input",{model:{value:e.adStyle.conpr,callback:function(t){e.$set(e.adStyle,"conpr",t)},expression:"adStyle.conpr"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("图片区样式")]),a("veui-field",{attrs:{label:"图片尺寸"}},[a("veui-select",{staticClass:"img-size-select",attrs:{options:e.store.imgSizeOptions},model:{value:e.adStyle.visual_imgSize_full,callback:function(t){e.$set(e.adStyle,"visual_imgSize_full",t)},expression:"adStyle.visual_imgSize_full"}}),a("div",{staticClass:"label-input imgRatio-input"},[a("veui-field",{attrs:{label:"宽高比",name:"imgRatio3",field:"imgRatio3"}},[a("veui-input",{model:{value:e.adStyle.visual_imgRatio,callback:function(t){e.$set(e.adStyle,"visual_imgRatio",t)},expression:"adStyle.visual_imgRatio"}})],1)],1)],1),a("veui-field",{staticClass:"itecpl-field",attrs:{label:"图片和文本间距"}},[a("veui-input",{model:{value:e.adStyle.itecpl,callback:function(t){e.$set(e.adStyle,"itecpl",t)},expression:"adStyle.itecpl"}})],1),a("p",{staticClass:"item-title"},[e._v("标题设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"标题字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle.ptFF,callback:function(t){e.$set(e.adStyle,"ptFF",t)},expression:"adStyle.ptFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.adStyle.ptFC},model:{value:e.adStyle.ptFC,callback:function(t){e.$set(e.adStyle,"ptFC",t)},expression:"adStyle.ptFC"}})],1),a("veui-field",{attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.titleFontOptions},model:{value:e.adStyle.ptFS,callback:function(t){e.$set(e.adStyle,"ptFS",t)},expression:"adStyle.ptFS"}}),a("veui-checkbox",{staticClass:"font-checkbox",attrs:{"true-value":1,"false-value":0},model:{value:e.adStyle.ptFW,callback:function(t){e.$set(e.adStyle,"ptFW",t)},expression:"adStyle.ptFW"}},[e._v("\n                加粗\n            ")])],1)],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url15",field:"url15"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)},[],!1,null,"6c51a608",null));Br.options.__file="c61108View.vue";var $r=Br.exports,zr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["height10"],validate:function(e){var t=Number(e);return 20<=t&&t<=2e3&&Math.floor(t)===t||{height10:"请填写20～2000的整数"}}},{fields:["imgRatio4"],validate:function(e){var t=Number(e);return 0<=t&&t<=10||{imgRatio4:"请填写≥0且≤10的数字，最多保留两位小数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"imgSizeOptions",[{label:"自定义百分比",value:2}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"titleFontOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18},{label:"19px",value:19}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptLogoOptions",[{label:"默认",value:0},{label:"推广",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adStyle",{rss1:"#ffffff",visual_adType:"4",visual_imgRatio:1.78,itecpl:10,conpl:10,conpr:10,conpt:10,conpb:10,ptFF:"微软雅黑",ptFS:14,ptFC:"#000000",ptFW:1,needBi:1,bnFF:"微软雅黑",bnFS:14,bnFC:"#000000",bnFW:0,bladm:6}),a}return Object(n.a)(t,e),t}(C.a),qr=Object(u.a)(g.a,zr,{name:"slot-pc-tuwen-qianru-special",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-number-input":_e.a,"veui-switch":we.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{templateId:Number,commonData:Object,validatorData:Object,validators:Array,shape:String},data:function(){return{FontNameOptions:Cl.i,ComplementOptions:Cl.e,adType:201,context:{userDefine:""},height:282,type:1,typeOptions:[{label:"固定高度",value:1}],sizeType:3,sizeTypeOptions:[{label:"按屏幕宽度",value:3},{label:"按父容器宽度",value:6}],httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],complement:{type:2},extra:{shape:"feedAutoWidth",fillStyleType:2,featureAd:{featureStyle:61108}},adStyle:{rss1:"#ffffff",visual_adType:"4",visual_imgRatio:1.78,itecpl:10,conpl:10,conpr:10,conpt:10,conpb:10,ptFF:"微软雅黑",ptFS:14,ptFC:"#000000",ptFW:1,needBi:1,bnFF:"微软雅黑",bnFS:14,bnFC:"#000000",bnFW:0,bladm:6},adStyle2:{biSZ:30,bnml:10},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1},effect:"0",effectOptions:[{label:"默认",value:"0"},{label:"自定义",value:"1"}]}},watch:{effect:function(){this.emitForm()},height:function(e){this.validatorData.height10=e,this.emitForm()},httpType:function(){this.emitForm()},url:function(e){this.validatorData.url16=e,this.emitForm()},sizeType:function(){this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},adStyle:{handler:function(e){this.validatorData.imgRatio4=e.visual_imgRatio,this.emitForm()},deep:!0}},created:function(){this.init()},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},init:function(){this.extra.shape=this.shape,this.extra.featureAd.featureStyle=this.templateId,this.shape.includes("feed")&&(this.context.adSlotType=13,this.adType=204)},setEditData:function(e){this.height=e.container.height,1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.sizeType=e.container.sizeType,this.assignData(this.complement,e.complement),this.fillStyle.ignoreStyleMode=e.fillStyle.ignoreStyleMode;var t=Object.assign({},this.adStyle,this.adStyle2);ul()(t,e.extra.featureAd[e.extra.featureAd.featureStyle])?this.effect="0":(this.effect="1",this.assignData(this.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle2,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.fillStyle,e.fillStyle))},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]=t[a])},fillStyleHandler:function(e){var t=e.extra.featureAd[e.extra.featureAd.featureStyle];e.fillStyle.styleTemplateId=[501],e.fillStyle.nativead={requiredFields:[141],screenShot:{imgRatio:t.visual_imgRatio},screenShotNum:1,adNum:1,imageNum:[1]},e.fillStyle.adNum=1,e.fillStyle.marginTitlePicture=t.itecpl,e.fillStyle.backgroundColor=t.rss1,e.fillStyle.padding={left:t.conpl,right:t.conpr,top:t.conpt,bottom:t.conpb},e.fillStyle.txt={fontName:t.ptFF,titleFontSize:t.ptFS,ctitle:t.ptFC,btitle:t.ptFW+""},e.fillStyle.marginTitleBrand=t.bladm,1==+t.needBi?e.fillStyle.brand={hasBrandLogo:t.needBi,logoSize:t.biSZ,marginLogoBrandName:t.bnml,fontName:t.bnFF,fontSize:t.bnFS,fontColor:t.bnFC,bfont:t.bnFW+""}:e.fillStyle.brand={fontName:t.bnFF,fontSize:t.bnFS,fontColor:t.bnFC,bfont:t.bnFW+"",hasBrandLogo:t.needBi}},emitForm:function(){var e=JSON.parse(JSON.stringify(this.extra));"1"===this.effect?(e.featureAd[this.templateId]=Object(v.a)({},this.adStyle),e.featureAd[this.templateId].conpl=Number(this.adStyle.conpl),e.featureAd[this.templateId].conpr=Number(this.adStyle.conpr),e.featureAd[this.templateId].conpt=Number(this.adStyle.conpt),e.featureAd[this.templateId].conpb=Number(this.adStyle.conpb),e.featureAd[this.templateId].itecpl=Number(this.adStyle.itecpl),e.featureAd[this.templateId].bladm=Number(this.adStyle.bladm),e.featureAd[this.templateId].visual_imgRatio=Number(Number(this.adStyle.visual_imgRatio).toFixed(2))):e.featureAd[this.templateId]=Object(v.a)({},this.store.adStyle),("0"===this.effect||"1"===this.effect&&1===this.adStyle.needBi)&&(Object.assign(e.featureAd[this.templateId],this.adStyle2),e.featureAd[this.templateId].biSZ=Number(this.adStyle2.biSZ),e.featureAd[this.templateId].bnml=Number(this.adStyle2.bnml));var t={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:0,height:Number(this.height),sizeType:this.sizeType,floated:{}},extra:e,fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:this.context,adType:this.adType,bidLevel:3},a=e.featureAd[this.templateId];this.fillStyleHandler(t),t.context.userDefine="rss1="+a.rss1+"|itecpl="+a.itecpl+"|conpl="+a.conpl+"|conpr="+a.conpr+"|conpt="+a.conpt+"|conpb="+a.conpb+"|ptFF="+a.ptFF+"|ptFS="+a.ptFS+"|ptFC="+a.ptFC+"|ptFW="+a.ptFW+"|needBi="+a.needBi+"|bnFF="+a.bnFF+"|bnFS="+a.bnFS+"|bnFC="+a.bnFC+"|bnFW="+a.bnFW+"|bladm="+a.bladm+"|pat=31|at=3|tn=template_inlay_all_mobile_lu_native|imgRatio="+a.visual_imgRatio,("0"===this.effect||"1"===this.effect&&1===a.needBi)&&(t.context.userDefine=t.context.userDefine+"|biSZ="+a.biSZ+"|bnml="+a.bnml);var i=1;1===this.complement.type?(t.complement.url=this.httpType+this.url,i="0|cpro_aurl="+t.complement.url):delete t.complement.url,3===this.complement.type&&(i="0|cpro_acolor=#ffffff"),7===this.complement.type&&(i="0");var s="cpro_scale=0."+t.container.height;6!==t.container.sizeType&&(s=s+"|cpro_h="+t.container.height),t.code=s+"|"+t.context.userDefine+"|cpro_cad="+i+"|cpro_client="+this.commonData.cname,this.$emit("emitForm",t)}}}),Ur=(a("20c1"),Object(p.a)(qr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"special-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-radio-group",{staticClass:"type-radio-group",attrs:{items:e.typeOptions},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("div",{staticClass:"size-set-container"},[a("veui-field",{attrs:{name:"height10",field:"height10"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}}),a("span",{staticClass:"input-px"},[e._v("px")]),a("span",{staticClass:"input-px-info"},[e._v("高度为像素值，宽度根据屏幕自适应。")])],1)],1),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),a("veui-checkbox",{staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n        允许所有样式参与竞价\n    ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.effect,expression:"effect === '1'"}]},[a("p",{staticClass:"item-title"},[e._v("全局设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"广告背景色"}},[a("color-picker",{attrs:{color:e.adStyle.rss1},model:{value:e.adStyle.rss1,callback:function(t){e.$set(e.adStyle,"rss1",t)},expression:"adStyle.rss1"}})],1),a("p",{staticClass:"item-title"},[e._v("广告位设置")]),a("veui-field",{attrs:{label:"边距设置"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"上",name:"paddingTop",field:"paddingTop"}},[a("veui-input",{model:{value:e.adStyle.conpt,callback:function(t){e.$set(e.adStyle,"conpt",t)},expression:"adStyle.conpt"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"下",name:"paddingBottom",field:"paddingBottom"}},[a("veui-input",{model:{value:e.adStyle.conpb,callback:function(t){e.$set(e.adStyle,"conpb",t)},expression:"adStyle.conpb"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"左",name:"paddingLeft",field:"paddingLeft"}},[a("veui-input",{model:{value:e.adStyle.conpl,callback:function(t){e.$set(e.adStyle,"conpl",t)},expression:"adStyle.conpl"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"右",name:"paddingRight",field:"paddingRight"}},[a("veui-input",{model:{value:e.adStyle.conpr,callback:function(t){e.$set(e.adStyle,"conpr",t)},expression:"adStyle.conpr"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("图片区样式")]),a("veui-field",{attrs:{label:"图片尺寸"}},[a("veui-select",{staticClass:"img-size-select",attrs:{options:e.store.imgSizeOptions,value:2}}),a("div",{staticClass:"label-input imgRatio-input"},[a("veui-field",{attrs:{label:"宽高比",name:"imgRatio4",field:"imgRatio4"}},[a("veui-input",{model:{value:e.adStyle.visual_imgRatio,callback:function(t){e.$set(e.adStyle,"visual_imgRatio",t)},expression:"adStyle.visual_imgRatio"}})],1)],1)],1),a("veui-field",{staticClass:"itecpl-field",attrs:{label:"图片和文本间距",name:"marginDescriptionPicture1",field:"marginDescriptionPicture1"}},[a("veui-input",{model:{value:e.adStyle.itecpl,callback:function(t){e.$set(e.adStyle,"itecpl",t)},expression:"adStyle.itecpl"}})],1),a("p",{staticClass:"item-title"},[e._v("标题设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"标题字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle.ptFF,callback:function(t){e.$set(e.adStyle,"ptFF",t)},expression:"adStyle.ptFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.adStyle.ptFC},model:{value:e.adStyle.ptFC,callback:function(t){e.$set(e.adStyle,"ptFC",t)},expression:"adStyle.ptFC"}})],1),a("veui-field",{attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.titleFontOptions},model:{value:e.adStyle.ptFS,callback:function(t){e.$set(e.adStyle,"ptFS",t)},expression:"adStyle.ptFS"}}),a("veui-checkbox",{staticClass:"font-checkbox",attrs:{"true-value":1,"false-value":0},model:{value:e.adStyle.ptFW,callback:function(t){e.$set(e.adStyle,"ptFW",t)},expression:"adStyle.ptFW"}},[e._v("\n                加粗\n            ")])],1),a("p",{staticClass:"item-title"},[e._v("Logo设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"是否加Logo"}},[a("veui-switch",{staticClass:"logo-biSZ",attrs:{"true-value":1,"false-value":0},model:{value:e.adStyle.needBi,callback:function(t){e.$set(e.adStyle,"needBi",t)},expression:"adStyle.needBi"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.needBi,expression:"adStyle.needBi === 1"}],staticClass:"inline-field",attrs:{label:"Logo尺寸"}},[a("veui-input",{model:{value:e.adStyle2.biSZ,callback:function(t){e.$set(e.adStyle2,"biSZ",t)},expression:"adStyle2.biSZ"}})],1),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:1===e.adStyle.needBi,expression:"adStyle.needBi === 1"}],staticClass:"long-label-field",attrs:{label:"Logo和品牌名称间距"}},[a("veui-input",{model:{value:e.adStyle2.bnml,callback:function(t){e.$set(e.adStyle2,"bnml",t)},expression:"adStyle2.bnml"}})],1),a("p",{staticClass:"item-title"},[e._v("品牌名称设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"品牌名字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle.bnFF,callback:function(t){e.$set(e.adStyle,"bnFF",t)},expression:"adStyle.bnFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.adStyle.bnFC},model:{value:e.adStyle.bnFC,callback:function(t){e.$set(e.adStyle,"bnFC",t)},expression:"adStyle.bnFC"}})],1),a("veui-field",{staticClass:"inline-field logo-font-field",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.titleFontOptions},model:{value:e.adStyle.bnFS,callback:function(t){e.$set(e.adStyle,"bnFS",t)},expression:"adStyle.bnFS"}}),a("veui-checkbox",{staticClass:"font-checkbox",attrs:{"true-value":1,"false-value":0},model:{value:e.adStyle.bnFW,callback:function(t){e.$set(e.adStyle,"bnFW",t)},expression:"adStyle.bnFW"}},[e._v("\n                加粗\n            ")])],1),a("veui-field",{staticClass:"inline-field long-label-field",attrs:{label:"品牌名称和标题间距"}},[a("veui-input",{model:{value:e.adStyle.bladm,callback:function(t){e.$set(e.adStyle,"bladm",t)},expression:"adStyle.bladm"}})],1)],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url16",field:"url16"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title bottom-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)},[],!1,null,"dfbef846",null));Ur.options.__file="d61108View.vue";var Wr=Ur.exports,Gr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["height6"],validate:function(e){var t=Number(e);return 4<=t&&t<=20&&Math.floor(t)===t||{height6:"请填写4～20的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fontSizeOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"titleSizeOptions",[{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"17px",value:17},{label:"18px",value:18}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptpOptions",[{label:"图片下方",value:0},{label:"悬浮在图片上",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fixPicCountOptions",[{label:"关闭",value:"0"},{label:"启用",value:"1"}]),a}return Object(n.a)(t,e),t}(C.a),Hr=Object(u.a)(g.a,Gr,{name:"slot-pc-tuwen-qianru-special",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-number-input":_e.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{templateId:Number,commonData:Object,validatorData:Object,validators:Array,shape:String},data:function(){return{FontNameOptions:Cl.i,ComplementOptions:Cl.e,adType:201,context:{userDefine:""},height:6,width:20,type:2,typeOptions:[{label:"设定比例",value:2}],sizeType:2,sizeTypeOptions:[{label:"按屏幕宽度",value:2},{label:"按父容器宽度",value:5}],httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],complement:{type:2},extra:{shape:"feedScaleCustom",fillStyleType:2,featureAd:{featureStyle:61107}},adStyle:{visual_adType:"0"},adStyle1:{rss1:"#ffffff",ptt:0,titFF:"微软雅黑",rss2:"#000000",titFS:14,ptp:0,visual_fixPicCount:"0"},adStyle2:{ptc:"猜你感兴趣",ptFS:14,ptFC:"#000000",ptBC:"#F2F2F2"},ptbg:70,adStyle3:{hn:3,wn:2},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1,styleTemplateId:[61107]},effectOptions:[{label:"默认",value:"0"},{label:"自定义",value:"1"}],titleOptions:[{label:"不需要标题",value:0},{label:"通栏标题",value:1},{label:"简明标题",value:2}]}},watch:{httpType:function(){this.emitForm()},ptbg:function(){this.validatorData.ptbg1=val,this.emitForm()},height:function(e){this.validatorData.height6=e,this.emitForm()},url:function(e){this.validatorData.url12=e,this.emitForm()},sizeType:function(){this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},adStyle:{handler:function(){this.emitForm()},deep:!0},adStyle1:{handler:function(){this.emitForm()},deep:!0},adStyle2:{handler:function(e){this.validatorData.ptc1=e.ptc,this.emitForm()},deep:!0},adStyle3:{handler:function(e){this.validatorData.hn1=e.hn,this.validatorData.wn1=e.wn,this.emitForm()},deep:!0}},created:function(){this.init()},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},init:function(){this.extra.shape=this.shape,this.extra.featureAd.featureStyle=this.templateId,this.shape.includes("feed")&&(this.context.adSlotType=13,this.adType=204)},setEditData:function(e){this.sizeType=e.container.sizeType,this.height=e.container.height,this.width=e.container.width,1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.assignData(this.complement,e.complement),this.assignData(this.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle1,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle2,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle3,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.fillStyle,e.fillStyle)},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]=t[a])},emitForm:function(){var e=JSON.parse(JSON.stringify(this.extra));e.featureAd[this.templateId]=Object(v.a)({},this.adStyle),"1"===this.adStyle.visual_adType&&(Object.assign(e.featureAd[this.templateId],this.adStyle1),0!==this.adStyle1.ptt&&Object.assign(e.featureAd[this.templateId],this.adStyle2),1===this.adStyle1.ptp&&(e.featureAd[this.templateId].ptbg=this.ptbg),"1"===this.adStyle1.visual_fixPicCount&&(Object.assign(e.featureAd[this.templateId],this.adStyle3),e.featureAd[this.templateId].hn=Number(this.adStyle3.hn),e.featureAd[this.templateId].wn=Number(this.adStyle3.wn)));var t={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:Number(this.width),height:Number(this.height),sizeType:this.sizeType,floated:{}},extra:e,fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:this.context,adType:this.adType,bidLevel:3};t.fillStyle.styleTemplateId=[this.extra.featureAd.featureStyle];var a=Number(this.height),i=Number(this.width);"0"===this.adStyle.visual_adType?t.context.userDefine="at=3|hn=0|wn=0|imgRatio=1.7|pat=6|tn=template_inlay_all_mobile_lu_native|rss1=#FFFFFF|adp=1|ptt=0|titFF=%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91|titFS=14|rss2=#000000|titSU=0|ptbg=70|ptp=1":(t.context.userDefine="rss1="+this.adStyle1.rss1+"|ptt="+this.adStyle1.ptt,0!==this.adStyle1.ptt&&(t.context.userDefine=t.context.userDefine+"|ptc="+encodeURIComponent(this.adStyle2.ptc)+"|ptFS="+this.adStyle2.ptFS+"|ptFC="+this.adStyle2.ptFC+"|ptBC="+this.adStyle2.ptBC),t.context.userDefine=t.context.userDefine+"|titFF="+this.adStyle1.titFF+"|rss2="+this.adStyle1.rss2+"|titFS="+this.adStyle1.titFS+"|ptp="+this.adStyle1.ptp,1===this.adStyle1.ptp&&(t.context.userDefine=t.context.userDefine+"|ptbg="+this.ptbg),"1"===this.adStyle1.visual_fixPicCount&&(t.context.userDefine=t.context.userDefine+"|hn="+e.featureAd[this.templateId].hn+"|wn="+e.featureAd[this.templateId].wn),t.context.userDefine=t.context.userDefine+"|at=3|pat=6|imgRatio=1.7|tn=template_inlay_all_mobile_lu_native");var s=1;1===this.complement.type?(t.complement.url=this.httpType+this.url,s="0|cpro_aurl="+t.complement.url):delete t.complement.url,3===this.complement.type&&(s="0|cpro_acolor=#ffffff"),7===this.complement.type&&(s="0"),t.code="cpro_scale="+i+"."+a+"|"+t.context.userDefine+"|cpro_cad="+s+"|cpro_client="+this.commonData.cname,this.$emit("emitForm",t)}}}),Qr=(a("8195"),Object(p.a)(Hr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"special-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-radio-group",{staticClass:"type-radio-group",attrs:{items:e.typeOptions},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("div",{staticClass:"size-set-container"},[a("veui-field",[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽"}},[a("veui-input",{attrs:{readonly:!0},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高",name:"height6",field:"height6"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}})],1)],1),a("span",{staticClass:"size-text"},[e._v("仅支持20:4以上比例")])])],1),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.effectOptions},model:{value:e.adStyle.visual_adType,callback:function(t){e.$set(e.adStyle,"visual_adType",t)},expression:"adStyle.visual_adType"}}),a("veui-checkbox",{staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n        允许所有样式参与竞价\n    ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.adStyle.visual_adType,expression:"adStyle.visual_adType === '1'"}]},[a("p",{staticClass:"item-title"},[e._v("广告位")]),a("veui-field",{staticClass:"style-type inline-field",attrs:{label:"背景颜色"}},[a("color-picker",{ref:"rss1",attrs:{color:e.adStyle1.rss1},model:{value:e.adStyle1.rss1,callback:function(t){e.$set(e.adStyle1,"rss1",t)},expression:"adStyle1.rss1"}})],1),a("p",{staticClass:"item-title"},[e._v("标题设置")]),a("veui-field",{attrs:{label:"广告位标题"}},[a("veui-select",{staticClass:"title-select",attrs:{options:e.titleOptions},model:{value:e.adStyle1.ptt,callback:function(t){e.$set(e.adStyle1,"ptt",t)},expression:"adStyle1.ptt"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.adStyle1.ptt,expression:"adStyle1.ptt !== 0"}],staticClass:"title-style"},[a("veui-field",{attrs:{label:"标题内容",rules:"required",name:"ptc1",field:"ptc1"}},[a("veui-input",{model:{value:e.adStyle2.ptc,callback:function(t){e.$set(e.adStyle2,"ptc",t)},expression:"adStyle2.ptc"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.titleSizeOptions},model:{value:e.adStyle2.ptFS,callback:function(t){e.$set(e.adStyle2,"ptFS",t)},expression:"adStyle2.ptFS"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{ref:"ptFC",attrs:{color:e.adStyle2.ptFC},model:{value:e.adStyle2.ptFC,callback:function(t){e.$set(e.adStyle2,"ptFC",t)},expression:"adStyle2.ptFC"}})],1),a("veui-field",{attrs:{label:"色块颜色"}},[a("color-picker",{ref:"ptBC",attrs:{color:e.adStyle2.ptBC},model:{value:e.adStyle2.ptBC,callback:function(t){e.$set(e.adStyle2,"ptBC",t)},expression:"adStyle2.ptBC"}})],1)],1),a("p",{staticClass:"item-title"},[e._v("内容文字效果")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"内容字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle1.titFF,callback:function(t){e.$set(e.adStyle1,"titFF",t)},expression:"adStyle1.titFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{ref:"rss2",attrs:{color:e.adStyle1.rss2},model:{value:e.adStyle1.rss2,callback:function(t){e.$set(e.adStyle1,"rss2",t)},expression:"adStyle1.rss2"}})],1),a("veui-field",{staticClass:"inline-field text-size",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.fontSizeOptions},model:{value:e.adStyle1.titFS,callback:function(t){e.$set(e.adStyle1,"titFS",t)},expression:"adStyle1.titFS"}})],1),a("div",{staticClass:"pic-container"},[a("p",{staticClass:"item-title"},[e._v("图片区样式")]),a("veui-field",{staticClass:"inline-field ptp-select",attrs:{label:"文字位置"}},[a("veui-select",{attrs:{options:e.store.ptpOptions},model:{value:e.adStyle1.ptp,callback:function(t){e.$set(e.adStyle1,"ptp",t)},expression:"adStyle1.ptp"}})],1),1===e.adStyle1.ptp?a("veui-field",{staticClass:"inline-field ptbg-field",attrs:{label:"文字背景透明度",name:"ptbg1",field:"ptbg1",rules:"required"}},[a("veui-number-input",{attrs:{min:0,max:100},model:{value:e.ptbg,callback:function(t){e.ptbg=t},expression:"ptbg"}})],1):e._e(),a("veui-field",{staticClass:"inline-field",attrs:{label:"固定图片数"}},[a("veui-select",{attrs:{options:e.store.fixPicCountOptions},model:{value:e.adStyle1.visual_fixPicCount,callback:function(t){e.$set(e.adStyle1,"visual_fixPicCount",t)},expression:"adStyle1.visual_fixPicCount"}})],1),"1"===e.adStyle1.visual_fixPicCount?a("veui-field",{staticClass:"inline-field",attrs:{label:"填充行数",name:"hn1",field:"hn1",rules:"required"}},[a("veui-input",{model:{value:e.adStyle3.hn,callback:function(t){e.$set(e.adStyle3,"hn",t)},expression:"adStyle3.hn"}})],1):e._e(),"1"===e.adStyle1.visual_fixPicCount?a("veui-field",{staticClass:"inline-field",attrs:{label:"填充列数",name:"wn1",field:"wn1",rules:"required"}},[a("veui-input",{model:{value:e.adStyle3.wn,callback:function(t){e.$set(e.adStyle3,"wn",t)},expression:"adStyle3.wn"}})],1):e._e()],1)],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url12",field:"url12"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title bottom-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)},[],!1,null,"94cca4de",null));Qr.options.__file="61107View.vue";var Jr=Qr.exports,Kr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["height5"],validate:function(e){var t=Number(e);return 20<=t&&t<=2e3&&Math.floor(t)===t||{height5:"请填写20～2000的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fontSizeOptions",[{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16},{label:"18px",value:18}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"desfsOptions",[{label:"10px",value:10},{label:"11px",value:11},{label:"12px",value:12},{label:"13px",value:13},{label:"14px",value:14},{label:"15px",value:15},{label:"16px",value:16}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"ptpOptions",[{label:"图片下方",value:0},{label:"悬浮在图片上",value:1}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"fixPicCountOptions",[{label:"关闭",value:"0"},{label:"启用",value:"1"}]),a}return Object(n.a)(t,e),t}(C.a),Zr=Object(u.a)(g.a,Kr,{name:"slot-pc-tuwen-qianru-special",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-select":N.a,"veui-checkbox":he.a,"veui-radio-button-group":De.a,"color-picker":nl},props:{templateId:Number,commonData:Object,validatorData:Object,validators:Array,shape:String},data:function(){return{FontNameOptions:Cl.i,ComplementOptions:Cl.e,adType:201,context:{userDefine:""},height:60,type:1,typeOptions:[{label:"固定高度",value:1}],sizeType:3,sizeTypeOptions:[{label:"按屏幕宽度",value:3},{label:"按父容器宽度",value:6}],httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}],complement:{type:2},extra:{shape:"feedAutoWidth",fillStyleType:2,featureAd:{featureStyle:61104}},adStyle:{visual_adType:"0"},adStyle1:{rss1:"#FFFFFF",conpl:10,conpr:10,titFF:"微软雅黑",rss2:"#000000",titFS:16,pimc:20,titSU:0,rss3:"#FFFFFF",desbc:"#DCDCDC",desfs:10},fillStyle:{styleType:3,elements:[50],layout:[1,2],ignoreStyleMode:1,styleTemplateId:[61104]},effectOptions:[{label:"默认",value:"0"},{label:"自定义",value:"1"}]}},watch:{httpType:function(){this.emitForm()},height:function(e){this.validatorData.height5=e,this.emitForm()},url:function(e){this.validatorData.url11=e,this.emitForm()},sizeType:function(){this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0},fillStyle:{handler:function(){this.emitForm()},deep:!0},adStyle:{handler:function(){this.emitForm()},deep:!0},adStyle1:{handler:function(){this.emitForm()},deep:!0}},created:function(){this.init()},mounted:function(){this.setValidators(),this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},init:function(){this.extra.shape=this.shape,this.extra.featureAd.featureStyle=this.templateId,this.shape.includes("feed")&&(this.context.adSlotType=13,this.adType=204)},setEditData:function(e){this.sizeType=e.container.sizeType,this.height=e.container.height,1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.assignData(this.complement,e.complement),this.assignData(this.adStyle,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.adStyle1,e.extra.featureAd[e.extra.featureAd.featureStyle]),this.assignData(this.fillStyle,e.fillStyle)},assignData:function(e,t){for(var a in e)e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&(e[a]=t[a])},emitForm:function(){var e=JSON.parse(JSON.stringify(this.extra));e.featureAd[this.templateId]=Object(v.a)({},this.adStyle),"1"===this.adStyle.visual_adType&&(Object.assign(e.featureAd[this.templateId],this.adStyle1),e.featureAd[this.templateId].conpl=Number(this.adStyle1.conpl),e.featureAd[this.templateId].conpr=Number(this.adStyle1.conpr),e.featureAd[this.templateId].pimc=Number(this.adStyle1.pimc));var t={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:0,height:Number(this.height),sizeType:this.sizeType,floated:{}},extra:e,fillStyle:JSON.parse(JSON.stringify(this.fillStyle)),complement:this.complement,context:this.context,adType:this.adType,bidLevel:3};t.fillStyle.styleTemplateId=[this.extra.featureAd.featureStyle];var a=Number(this.height),i=e.featureAd[this.templateId];"0"===this.adStyle.visual_adType?t.context.userDefine="at=3|pat=8|tn=template_inlay_all_mobile_lu_native|rss1=#FFFFFF|titFF=%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91|titFS=16|rss2=#000000|conpl=10|conpr=10|desfs=10|rss3=#FFFFFF|desbc=#DCDCDC|pimc=20|titSU=0":t.context.userDefine="rss1="+i.rss1+"|conpl="+i.conpl+"|conpr="+i.conpr+"|titFF="+i.titFF+"|rss2="+i.rss2+"|titFS="+i.titFS+"|pimc="+i.pimc+"|titSU="+i.titSU+"|rss3="+i.rss3+"|desbc="+i.desbc+"|desfs="+i.desfs+"|at=3|pat=8|sizeType="+this.sizeType+"|tn=template_inlay_all_mobile_lu_native";var s=1;1===this.complement.type?(t.complement.url=this.httpType+this.url,s="0|cpro_aurl="+t.complement.url):delete t.complement.url,3===this.complement.type&&(s="0|cpro_acolor=#ffffff"),7===this.complement.type&&(s="0");var l="cpro_scale=0."+a;6!==t.container.sizeType&&(l=l+"|cpro_h="+a),t.code=l+"|"+t.context.userDefine+"|cpro_cad="+s+"|cpro_client="+this.commonData.cname,this.$emit("emitForm",t)}}}),Xr=(a("97b9"),Object(p.a)(Zr,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"special-coantiner"},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-radio-group",{staticClass:"type-radio-group",attrs:{items:e.typeOptions},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("div",{staticClass:"size-set-container"},[a("veui-field",{attrs:{name:"height5",field:"height5"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}}),a("span",{staticClass:"input-px"},[e._v("px")]),a("span",{staticClass:"input-px-info"},[e._v("高度为像素值，宽度根据屏幕自适应。")])],1)],1),a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.effectOptions},model:{value:e.adStyle.visual_adType,callback:function(t){e.$set(e.adStyle,"visual_adType",t)},expression:"adStyle.visual_adType"}}),a("veui-checkbox",{staticClass:"allow-checkbox",attrs:{"true-value":2,"false-value":1},model:{value:e.fillStyle.ignoreStyleMode,callback:function(t){e.$set(e.fillStyle,"ignoreStyleMode",t)},expression:"fillStyle.ignoreStyleMode"}},[e._v("\n        允许所有样式参与竞价\n    ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.adStyle.visual_adType,expression:"adStyle.visual_adType === '1'"}],staticClass:"custom-container"},[a("p",{staticClass:"item-title"},[e._v("广告位")]),a("veui-field",{staticClass:"style-type inline-field",attrs:{label:"背景颜色"}},[a("color-picker",{ref:"rss1",attrs:{color:e.adStyle1.rss1},model:{value:e.adStyle1.rss1,callback:function(t){e.$set(e.adStyle1,"rss1",t)},expression:"adStyle1.rss1"}})],1),a("veui-field",{attrs:{label:"边距设置"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"左"}},[a("veui-input",{model:{value:e.adStyle1.conpl,callback:function(t){e.$set(e.adStyle1,"conpl",t)},expression:"adStyle1.conpl"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"右"}},[a("veui-input",{model:{value:e.adStyle1.conpr,callback:function(t){e.$set(e.adStyle1,"conpr",t)},expression:"adStyle1.conpr"}})],1)],1)]),a("p",{staticClass:"item-title"},[e._v("内容文字效果")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"内容字体"}},[a("veui-select",{attrs:{options:e.FontNameOptions},model:{value:e.adStyle1.titFF,callback:function(t){e.$set(e.adStyle1,"titFF",t)},expression:"adStyle1.titFF"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{ref:"rss2",attrs:{color:e.adStyle1.rss2},model:{value:e.adStyle1.rss2,callback:function(t){e.$set(e.adStyle1,"rss2",t)},expression:"adStyle1.rss2"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"最大字数"}},[a("veui-input",{model:{value:e.adStyle1.pimc,callback:function(t){e.$set(e.adStyle1,"pimc",t)},expression:"adStyle1.pimc"}})],1),a("veui-field",{staticClass:"inline-field text-size",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.fontSizeOptions},model:{value:e.adStyle1.titFS,callback:function(t){e.$set(e.adStyle1,"titFS",t)},expression:"adStyle1.titFS"}}),a("veui-checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:e.adStyle1.titSU,callback:function(t){e.$set(e.adStyle1,"titSU",t)},expression:"adStyle1.titSU"}},[e._v("\n                下划线\n            ")])],1),a("p",{staticClass:"item-title"},[e._v("推广图标设置")]),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字大小"}},[a("veui-select",{attrs:{options:e.store.desfsOptions},model:{value:e.adStyle1.desfs,callback:function(t){e.$set(e.adStyle1,"desfs",t)},expression:"adStyle1.desfs"}})],1),a("veui-field",{staticClass:"inline-field",attrs:{label:"文字颜色"}},[a("color-picker",{attrs:{color:e.adStyle1.rss3},model:{value:e.adStyle1.rss3,callback:function(t){e.$set(e.adStyle1,"rss3",t)},expression:"adStyle1.rss3"}})],1),a("veui-field",{attrs:{label:"背景颜色"}},[a("color-picker",{attrs:{color:e.adStyle1.desbc},model:{value:e.adStyle1.desbc,callback:function(t){e.$set(e.adStyle1,"desbc",t)},expression:"adStyle1.desbc"}})],1)],1),a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url11",field:"url11"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title bottom-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)},[],!1,null,"12c89d56",null));Xr.options.__file="61104View.vue";var eo=Xr.exports,to=Object(u.a)(g.a,kr,{name:"slot-pc-tuwen-qianru-banner-default",components:{"wap-61104":eo,"wap-61107":Jr,"wap-61108a":Ar,"wap-61108b":Er,"wap-61108c":$r,"wap-61108d":Wr,"veui-field":ce.a,"veui-radio":je.a,"veui-checkbox-group":Qt.a,"veui-radio-group":Ce.a,"veui-input":ge.a,"veui-icon":y.a,"veui-select":N.a,"normal-style":Tr,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{ComplementOptions:Cl.e,showNormal:!0,featureStyle:61107,templateOptions:[{label:"原生缩略图",value:61107},{label:"原生图文",value:"61108a"},{label:"原生三图",value:"61108b"},{label:"原生大图",value:"61108c"},{label:"原生文字链",value:61104},{label:"评论区样式",value:"61108d"}],size:"6:5",width:6,height:5,sizeType:2,sizeTypeOptions:[{label:"按屏幕宽度",value:2},{label:"按父容器宽度",value:5}],shape:"regular",complement:{type:2},effect:0,effectOptions:[{label:"默认",value:0},{label:"普通样式",value:1},{label:"特色样式",value:2}],type:1,typeOptions:[{label:"固定比例",value:1},{label:"自定义",value:2}],httpType:"http://",url:"",httpOptions:[{label:"http://",value:"http://"},{label:"https://",value:"https://"}]}},watch:{httpType:function(){this.emitForm()},url:function(e){this.validatorData.url20=e,this.emitForm()},size:function(e){var t=this,a=e.split(":");this.width=a[0],this.height=a[1],1===this.effect&&(this.showNormal=!1,this.$nextTick(function(){t.showNormal=!0})),this.emitForm()},height:function(e){this.validatorData.height12=e,this.emitForm()},effect:function(e){0===e&&this.emitForm(),this.changeValidators()},type:function(e){1===e?(this.size="6:5",this.shape="regular"):(this.size="20:3",this.shape="scaleCustom"),this.changeValidators()},sizeType:function(){this.emitForm()},complement:{handler:function(){this.emitForm()},deep:!0}},mounted:function(){this.emitForm()},destroyed:function(){this.validators.length=0},methods:{setEditData:function(e){var t=this;this.sizeType=e.container.sizeType,this.effect=e.extra.fillStyleType,"regular"===e.shape?this.type=1:"scaleCustom"===e.shape&&(this.type=2),this.size=e.container.width+":"+e.container.height,0===this.effect?(1===e.complement.type&&e.complement.hasOwnProperty("url")&&(e.complement.url.startsWith("https://")?(this.httpType="https://",this.url=e.complement.url.split("https://")[1]):(this.httpType="http://",this.url=e.complement.url.split("http://")[1])),this.complement.type=e.complement.type):1===this.effect?this.$nextTick(function(){t.$nextTick(function(){t.$nextTick(function(){t.$refs.normalStyle.setEditData(e)})})}):2===this.effect&&(this.featureStyle=e.extra.featureAd.featureStyle,61108===this.featureStyle&&(this.featureStyle="61108".concat({1:"a",2:"b",3:"c",4:"d"}[e.extra.featureAd[61108].visual_adType])),this.$nextTick(function(){t.$refs[t.featureStyle]?t.$refs[t.featureStyle].setEditData(e):t.emitForm(e)}))},changeValidators:function(){var e=this;2===this.type&&2!==this.effect?this.$nextTick(function(){e.validators.length||e.setValidators()}):this.validators.length=0},setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},emitData:function(e){this.$emit("emitForm",e)},emitForm:function(){var e={basic:{flowType:2,userId:this.commonData.userId,cname:this.commonData.cname,sspId:1,conBackEnv:1,rspFormat:1,sellType:2,mediumType:1},container:{anchoredType:1,width:Number(this.width),height:Number(this.height),sizeType:this.sizeType,floated:{}},extra:{shape:this.shape,fillStyleType:0},fillStyle:{},complement:this.complement,context:{userDefine:""},adType:201,bidLevel:3},t="template_inlay_all_mobile",a="",i="template_inlay_all_mobile",s="mobile_skin_white_red",l="";1===this.type?("6:5"===this.size&&(e.fillStyle={elements:[1,2],layout:[1],txt:{number:1},lu:{},video:{},search:{},styleType:1},e.context.userDefine="cpro_template=template_inlay_all_mobile|cpro_version=2.0",t="image",i="template_inlay_all_mobile"),"20:3"===this.size&&(e.fillStyle={elements:[0,4,1,5,2],layout:[1,2],txt:{txtSkin:1,number:1},cloudTheme:{skin:3,stid:5},lu:{number:0},video:{},search:{},styleType:1},e.context.userDefine="cpro_layout_filter=image|cpro_template=template_inlay_all_mobile|cpro_version=2.0",a="image",t="text,tuwen,image,linkunit",i="template_inlay_all_mobile"),"20:5"===this.size&&(e.fillStyle={elements:[0,4,5],layout:[2],txt:{txtSkin:1,number:1},cloudTheme:{skin:3,stid:5},lu:{number:0},video:{},search:{},styleType:1},e.context.userDefine="cpro_layout_filter=image|cpro_template=template_inlay_all_mobile|cpro_version=2.0",a="image",t="text,tuwen,linkunit",i="template_inlay_all_mobile"),"20:2"===this.size&&(e.fillStyle={elements:[0,5],layout:[2],txt:{txtSkin:1,number:1},cloudTheme:{skin:3,stid:5},lu:{number:0},video:{},search:{},styleType:1},e.context.userDefine="cpro_layout_filter=image|cpro_template=template_inlay_all_mobile_tixt|cpro_version=2.0",a="image",t="text,linkunit",i="template_inlay_all_mobile_tixt")):(e.fillStyle={elements:[5],layout:[2],txt:{txtSkin:1,number:1},cloudTheme:{skin:3,stid:5},lu:{number:0},video:{},search:{},styleType:1},e.context.userDefine="cpro_layout_filter=image|cpro_template=template_inlay_all_mobile_lu_tabcloud|cpro_version=2.0",a="image",t="linkunit",i="template_inlay_all_mobile_lu_tabcloud",s="tabcloud_skin_3",l=5);var r=1;1===this.complement.type?(e.complement.url=this.httpType+this.url,r="0|cpro_aurl="+e.complement.url):delete e.complement.url,3===this.complement.type&&(r="0|cpro_acolor=#ffffff"),7===this.complement.type&&(r="0"),e.code="cpro_scale="+this.width+"."+this.height+"|cpro_161=1|cpro_template="+i+"|cpro_skin="+s+"|cpro_cad="+r,l&&(e.code=e.code+"|cpro_stid="+l),a&&(e.code=e.code+"|cpro_layout_filter="+a),t&&(e.code=e.code+"|cpro_at="+t),e.code=e.code+"|cpro_client="+this.commonData.cname+"|cpro_version=2.0",this.$emit("emitForm",e)}}}),ao=(a("a609"),Object(p.a)(to,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tuwen-qianru-coantiner"},[a("p",{staticClass:"item-title"},[e._v("效果配置")]),a("veui-radio-button-group",{staticClass:"effect-button-group",attrs:{items:e.effectOptions},model:{value:e.effect,callback:function(t){e.effect=t},expression:"effect"}}),2===e.effect?a("div",{staticClass:"special-wrapper"},[a("veui-radio-group",{staticClass:"template-radio-group",attrs:{items:e.templateOptions},model:{value:e.featureStyle,callback:function(t){e.featureStyle=t},expression:"featureStyle"}}),"61108d"===e.featureStyle?a("wap-61108d",{ref:"61108d",attrs:{validators:e.validators,templateId:61108,shape:"autoWidth",commonData:e.commonData,validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),"61108c"===e.featureStyle?a("wap-61108c",{ref:"61108c",attrs:{validators:e.validators,templateId:61108,shape:"autoWidth",commonData:e.commonData,validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),"61108b"===e.featureStyle?a("wap-61108b",{ref:"61108b",attrs:{validators:e.validators,templateId:61108,shape:"autoWidth",commonData:e.commonData,validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),"61108a"===e.featureStyle?a("wap-61108a",{ref:"61108a",attrs:{validators:e.validators,templateId:61108,shape:"autoWidth",commonData:e.commonData,validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),61107===e.featureStyle?a("wap-61107",{ref:"61107",attrs:{validators:e.validators,templateId:Number(e.featureStyle),shape:"scaleCustom",commonData:e.commonData,validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),61104===e.featureStyle?a("wap-61104",{ref:"61104",attrs:{validators:e.validators,templateId:Number(e.featureStyle),shape:"autoWidth",commonData:e.commonData,validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e()],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:2!==e.effect,expression:"effect !== 2"}]},[a("p",{staticClass:"item-title"},[e._v("尺寸设置")]),a("veui-radio-button-group",{staticClass:"type-button-group",attrs:{items:e.typeOptions},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("veui-radio-group",{directives:[{name:"show",rawName:"v-show",value:1===e.type,expression:"type === 1"}],attrs:{items:e.store.sizeOptions},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:2===e.type,expression:"type === 2"}],staticClass:"input-box",attrs:{label:"设置宽高"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽"}},[a("veui-input",{attrs:{readonly:!0},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高",name:"height12",field:"height12"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}})],1)],1)]),1===e.effect&&e.showNormal?a("normal-style",{ref:"normalStyle",attrs:{commonData:e.commonData,shape:e.shape,size:e.size,isCustom:2===e.type,width:Number(e.width),height:Number(e.height),validators:e.validators,validatorData:e.validatorData},on:{emitForm:e.emitData}}):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.effect,expression:"effect === 0"}]},[a("p",{staticClass:"item-title"},[e._v("打底设置")]),a("veui-select",{staticClass:"bottom-setting bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.ComplementOptions},model:{value:e.complement.type,callback:function(t){e.$set(e.complement,"type",t)},expression:"complement.type"}}),1===e.complement.type?a("veui-field",{staticClass:"url-field",attrs:{rules:"required",label:"链接地址",name:"url20",field:"url20"}},[a("veui-select",{attrs:{options:e.httpOptions},model:{value:e.httpType,callback:function(t){e.httpType=t},expression:"httpType"}}),a("veui-input",{staticClass:"url-input",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1):e._e(),a("p",{staticClass:"item-title"},[e._v("拉伸规则")]),a("veui-select",{staticClass:"bottom-select",attrs:{"overlay-class":"web-slot-select-243",options:e.sizeTypeOptions},model:{value:e.sizeType,callback:function(t){e.sizeType=t},expression:"sizeType"}})],1)],1)],1)},[],!1,null,"f939b6e8",null));ao.options.__file="QianRuView.vue";var io=ao.exports,so=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"validators",[{fields:["width13"],validate:function(e){var t=Number(e);return 0<=t&&t<=1080&&Math.floor(t)===t||{width13:"请填写0～1080的整数"}}},{fields:["height13"],validate:function(e){var t=Number(e);return 0<=t&&t<=800&&Math.floor(t)===t||{height13:"请填写0～800的整数"}}}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleOptions",[{label:"多彩标签云",value:"1"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sizeOptions",[{label:"横幅",value:"banner"},{label:"竖幅",value:"vbanner"},{label:"自定义",value:"custom"}]),a}return Object(n.a)(t,e),t}(C.a),lo=Object(u.a)(g.a,so,{name:"slot-new-pc",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-radio":je.a,"veui-radio-group":Ce.a,"veui-radio-button-group":De.a},props:{commonData:Object,validatorData:Object,validators:Array},data:function(){return{shape:"banner",height:380,width:620}},watch:{shape:function(e){"banner"===e?(this.width=620,this.height=380):"vbanner"===e?(this.width=160,this.height=600):"custom"===e&&(this.width=500,this.height=350),this.emitForm()},width:function(e){this.validatorData.width13=e,this.emitForm()},height:function(e){this.validatorData.height13=e,this.emitForm()}},created:function(){this.emitForm()},mounted:function(){this.setValidators()},destroyed:function(){this.validators.length=0},methods:{setValidators:function(){var e=this;this.store.validators.forEach(function(t){e.validators.push(t)})},setEditData:function(e){var t=this;this.shape=e.extra.shape,"custom"===this.shape&&this.$nextTick(function(){t.width=e.container.width,t.height=e.container.height})},emitForm:function(){var e={basic:{userId:this.commonData.userId,sspId:1,flowType:1,cname:this.commonData.cname,sellType:2,rspFormat:1,conBackEnv:1,mediumType:1},container:{height:this.height,width:this.width,sizeType:1,anchoredType:1,floated:{},slide:{}},fillStyle:{styleType:3,elements:[50],txt:{},lu:{},cloudTheme:{},video:{},search:{}},complement:{type:2},extra:{shape:this.shape,template:{},config:[{type:1,value:"1"}]},context:{userDefine:""},adType:411,bidLevel:3};"custom"===e.extra.shape&&(e.container.width=Number(e.container.width),e.container.height=Number(e.container.height)),e.context.userDefine="tn=baiduCustSTagLinkUnitImage|cpro_template=baiduCustSTagLinkUnitImage|rsi0=".concat(e.container.width,"|rsi1=").concat(e.container.height),e.code=e.context.userDefine,this.$emit("emitForm",e)}}}),ro=(a("d011"),Object(p.a)(lo,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-pc-container"},[a("p",{staticClass:"item-title"},[e._v("创新样式模版")]),a("veui-radio-button-group",{attrs:{items:e.store.styleOptions,value:"1"}}),a("p",{staticClass:"item-title size-title"},[e._v("尺寸设置")]),a("veui-radio-button-group",{attrs:{items:e.store.sizeOptions},model:{value:e.shape,callback:function(t){e.shape=t},expression:"shape"}}),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:"custom"===e.shape,expression:"shape === 'custom'"}],staticClass:"size-field",attrs:{label:"设置宽高"}},[a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"宽",name:"width13",field:"width13"}},[a("veui-input",{model:{value:e.width,callback:function(t){e.width=t},expression:"width"}})],1)],1),a("div",{staticClass:"label-input"},[a("veui-field",{attrs:{label:"高",name:"height13",field:"height13"}},[a("veui-input",{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}})],1)],1)]),a("veui-field",{directives:[{name:"show",rawName:"v-show",value:"custom"!==e.shape,expression:"shape !== 'custom'"}],staticClass:"size-field"},[a("veui-radio",{attrs:{checked:"",readonly:""}},[e._v("\n            "+e._s(e.width)+"*"+e._s(e.height)+"\n        ")])],1)],1)},[],!1,null,"1824b849",null));ro.options.__file="PCView.vue";var oo=ro.exports,no=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"styleOptions",[{label:"定制图文",value:"1"}]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"templateOptions",[{label:"哥伦布",value:"template_tuwen_glb_mobile"},{label:"手百详情",value:"template_inlay_all_mobile_shoubai_img_txt"},{label:"视频图文",value:"template_inlay_all_mobile_video_img_txt"},{label:"wise图文",value:"template_inlay_all_mobile_wise_img_txt"}]),a}return Object(n.a)(t,e),t}(C.a),co=Object(u.a)(g.a,no,{name:"slot-new-pc",components:{"veui-field":ce.a,"veui-radio":je.a,"veui-radio-group":Ce.a,"veui-radio-button-group":De.a},props:{commonData:Object},data:function(){return{cpro_template:"template_tuwen_glb_mobile"}},watch:{cpro_template:function(){this.emitForm()}},created:function(){this.emitForm()},methods:{setEditData:function(e){this.cpro_template=e.code.cpro_template},emitForm:function(){var e={basic:{userId:this.commonData.userId,sspId:1,flowType:2,cname:this.commonData.cname,sellType:2,rspFormat:1,conBackEnv:1,mediumType:1},container:{height:8,width:20,sizeType:2,anchoredType:1,floated:{},slide:{}},fillStyle:{styleType:3,elements:[4,5],txt:{logoIcon:{height:160,width:240}},lu:{},cloudTheme:{},video:{},search:{},layout:[2]},complement:{type:2},extra:{shape:"regular",template:{cpro_template:this.cpro_template},config:[{type:1,value:"1"}]},context:{userDefine:"cpro_version=2.0|cpro_template=".concat(this.cpro_template)},adType:418,bidLevel:3,code:"cpro_version=2.0|cpro_template=".concat(this.cpro_template)};"template_inlay_all_mobile_wise_img_txt"===this.cpro_template&&(e.fillStyle.txt={},e.context.userDefine=e.context.userDefine+"|pat=15|piw=640|pih=270",e.code=e.context.userDefine),this.$emit("emitForm",e)}}}),uo=(a("d57c"),Object(p.a)(co,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-wap-container"},[a("p",{staticClass:"item-title"},[e._v("创新样式模版")]),a("veui-radio-button-group",{attrs:{items:e.store.styleOptions,value:"1"}}),a("p",{staticClass:"item-title set-title"},[e._v("尺寸设置")]),a("veui-radio",{attrs:{checked:"",readonly:""}},[e._v("\n        固定比例 20:8\n    ")]),a("p",{staticClass:"item-title set-title"},[e._v("效果配置")]),a("veui-radio-button-group",{attrs:{items:e.store.templateOptions},model:{value:e.cpro_template,callback:function(t){e.cpro_template=t},expression:"cpro_template"}})],1)},[],!1,null,"23466e54",null));uo.options.__file="WAPView.vue";var fo=uo.exports,po={elements:[0],layout:[2]},ho={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=text_default_960_90|cpro_version=2.0"},mo={elements:[4],layout:[2]},vo={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=text_default_960_90|cpro_version=2.0"},bo={elements:[1,2,7],layout:[1]},yo={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_template=text_default_960_90|cpro_version=2.0"},go={elements:[5],layout:[2]},_o={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_layout_filter=rank,image|cpro_template=baiduCustSTagLinkUnit|cpro_version=2.0"},Oo={elements:[5],layout:[2]},Co={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_layout_filter=tabcloud,image|cpro_template=baiduTlinkInlay|cpro_version=2.0"},Do={elements:[5],layout:[2]},wo={userDefine:"cpro_cpro_lu=1,#dfe4f9,#000000,宋体,#ffffff|cpro_layout_filter=rank,tabcloud|cpro_template=baiduTlinkInlay|cpro_version=2.0"},jo={name:"previewIframe",components:{"veui-tabs":Sa.a,"veui-tab":F.a,"veui-button":S.a},props:["flowType","type","adInfo","name","cid","commonData","formData"],data:function(){return{layout:null,fixedHeight:null,txtFillStyle:po,txtContext:ho,tuwenFillStyle:mo,tuwenContext:vo,putongTupianFillStyle:bo,putongTupianContext:yo,biaoqianyunFillStyle:go,biaoqianyunContext:_o,wenzipaihangFillStyle:Oo,wenzipaihangContext:Co,tupianpaihangFillStyle:Do,tupianpaihangContext:wo,previewInfo:{},previewQueryInfo:null}},created:function(){},watch:{adInfo:{handler:function(e){this.previewInfo=st()(e);var t=this.previewInfo.fillStyle;this.previewInfo.context,1===this.layout&&(t.elements=this.txtFillStyle.elements,t.layout=this.txtFillStyle.layout,this.txtContext),2===this.layout&&(t.elements=this.tuwenFillStyle.elements,t.layout=this.tuwenFillStyle.layout,this.tuwenContext),3===this.layout&&(t.elements=this.putongTupianFillStyle.elements,t.layout=this.putongTupianFillStyle.layout,this.putongTupianContext),4===this.layout&&(t.elements=this.biaoqianyunFillStyle.elements,t.layout=this.biaoqianyunFillStyle.layout,this.biaoqianyunContext),5===this.layout&&(t.elements=this.wenzipaihangFillStyle.elements,t.layout=this.wenzipaihangFillStyle.layout,this.wenzipaihangContext),6===this.layout&&(t.elements=this.tupianpaihangFillStyle.elements,t.layout=this.tupianpaihangFillStyle.layout,this.tupianpaihangContext)},deep:!0},previewInfo:{handler:function(e){this.previewQueryInfo=this.getQuery(e)},deep:!0},layout:{handler:function(e){1===e&&(this.previewInfo.fillStyle=Object.assign({},this.adInfo.fillStyle,this.txtFillStyle),this.previewInfo.context=this.txtContext),2===e&&(this.previewInfo.fillStyle=Object.assign({},this.adInfo.fillStyle,this.tuwenFillStyle),this.previewInfo.context=this.tuwenContext),3===e&&(this.previewInfo.fillStyle=Object.assign({},this.adInfo.fillStyle,this.putongTupianFillStyle),this.previewInfo.context=this.putongTupianContext),4===e&&(this.previewInfo.fillStyle=Object.assign({},this.adInfo.fillStyle,this.biaoqianyunFillStyle),this.previewInfo.context=this.biaoqianyunContext),5===e&&(this.previewInfo.fillStyle=Object.assign({},this.adInfo.fillStyle,this.wenzipaihangFillStyle),this.previewInfo.context=this.wenzipaihangContext),6===e&&(this.previewInfo.fillStyle=Object.assign({},this.adInfo.fillStyle,this.tupianpaihangFillStyle),this.previewInfo.context=this.tupianpaihangContext)},deep:!0}},computed:{src:function(){if(this.previewQueryInfo)return"./preview.html"+this.previewQueryInfo},width:function(){return this.adInfo.container?2===this.adInfo.container.sizeType||3===this.adInfo.container.sizeType||5===this.adInfo.container.sizeType||201===this.adInfo.adType||202===this.adInfo.adType||3===this.type?320:this.adInfo.container.width:null},height:function(){return this.adInfo.container?3===this.type?180:2===this.adInfo.container.sizeType||5===this.adInfo.container.sizeType||201===this.adInfo.adType||202===this.adInfo.adType?this.width*(this.adInfo.container.height/(this.adInfo.container.width||320)):this.adInfo.container.height:null},tabs:function(){var e=this.adInfo.fillStyle.elements,t=[{label:"普通文字",value:1,element:0},{label:"图文",value:2,element:4},{label:"普通图片",value:3,element:1},{label:"标签云",value:4,element:5},{label:"文字排行",value:5,element:5},{label:"图片排行",value:6,element:5}].filter(function(t){return e.includes(t.element)}),a=this.adInfo.code.split("|").filter(function(e){return e.includes("cpro_layout_filter=")});if(a.length){var i=a[0].split("=")[1],s=[];i.includes("tabcloud")&&s.push(4),i.includes("rank")&&s.push(5),i.includes("image")&&s.push(6),t=t.filter(function(e){return!s.includes(e.value)})}return t.map(function(e){return{label:e.label,value:e.value}})}},mounted:function(){},methods:{changeLayout:function(e){this.layout=e},getQuery:function(e){var t=e,a=t.code;if(t.code&&this.cid&&this.commonData.userId){var i=t.code.indexOf("cpro_client"),s=a.slice(0,i)+"cpro_client=baiducprostyle_cpr";t.basic.cname="baiducprostyle_cpr",t.basic.userId=this.commonData.userId;var l={cid:this.cid,basic:t.basic,container:t.container,complement:t.complement,fillStyle:t.fillStyle,bidLevel:t.bidLevel,context:t.context},r=t.container.width,o=t.container.height,n=t.container.sizeType,c=t.extra.shape;if(2===this.flowType&&(3===n&&(r=320,n=1,o=this.getUserdefineHeight(l.context)||o),201!==t.adType&&202!==t.adType&&2!==n||(n=1,o=(r=320)*(t.container.height/(t.container.width||r)))),3===this.type)return"?img=video_"+r+"_"+o+"&width=320&height=180";var u="";return"search"!==c&&"pcSearchRecom"!==c&&"bottomSearch"!==c&&"autoWidth"!==c||(l.complement={type:2},"bottomSearch"===c&&(u="xuanfu_bottomSearch")),this.fixedHeight=o,"?cpro_id="+encodeURIComponent(s)+"&adInfo="+encodeURIComponent(JSON.stringify(l))+"&width="+r+"&height="+o+"&sizeType="+n+"&shape="+c+"&img="+u}},getUserdefineHeight:function(e){if(!e)return 0;var t,a=e.userDefine.split("|"),i=a.length;for(t=0;t<i;t++){var s=a[t].split("="),l=void 0;for(l=0;l<=s.length;l++){var r=s[0],o=s[1];if("cpro_psheight"===r)return o}}}}},ko=(a("224f"),Object(p.a)(jo,function(){var e=this,t=e.$createElement,a=e._self._c||t;return this.getQuery(this.adInfo)?a("div",{staticClass:"slot-preview-panel"},[302===e.adInfo.adType?a("div",{staticClass:"slot-preview-summary"},[e._v("\n\t   示意图："+e._s(e.adInfo.container.width)+":"+e._s(e.fixedHeight)+"\n\t")]):a("div",{staticClass:"slot-preview-summary"},[e._v("\n       示意图："+e._s(e.adInfo.container.width)+":"+e._s(e.adInfo.container.height)+"\n    ")]),418===this.adInfo.adType?a("div",{staticClass:"slot-preview-detail"},[a("div",{staticClass:"new-slot-preview-container"},["template_tuwen_glb_mobile"===this.adInfo.extra.template.cpro_template?a("div",{staticClass:"mob-tuwen-glb"}):e._e(),"template_inlay_all_mobile_shoubai_img_txt"===this.adInfo.extra.template.cpro_template?a("div",{staticClass:"mobile_tuwen_shoubai"}):e._e(),"template_inlay_all_mobile_video_img_txt"===this.adInfo.extra.template.cpro_template?a("div",{staticClass:"mobile_tuwen_video"}):e._e(),"template_inlay_all_mobile_wise_img_txt"===this.adInfo.extra.template.cpro_template?a("div",{staticClass:"mobile_wise_img_txt"}):e._e()])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:418!==this.adInfo.adType,expression:"this.adInfo.adType !== 418"}],staticClass:"slot-preview-detail"},[!([101,103].includes(e.adInfo.adType)&&"search"!==this.adInfo.extra.shape||201===this.adInfo.adType)||0!==this.adInfo.extra.fillStyleType&&1!==this.adInfo.extra.fillStyleType?e._e():a("div",{staticClass:"black-button-tabs"},e._l(this.tabs,function(t){return a("veui-button",{key:t.value,class:{active:e.layout===t.value},on:{click:function(a){e.changeLayout(t.value)}}},[e._v("\n    \t        "+e._s(t.label)+"\n    \t    ")])})),a("div",{staticClass:"slot-preview-container"},[a("iframe",{key:e.src,attrs:{src:e.src,width:this.width,height:this.height,scrolling:"no"}}),a("div",{staticClass:"slot-preview-layer",attrs:{id:"slot-preview-mask"}})])])]):e._e()},[],!1,null,null,null));ko.options.__file="previewIframe.vue";var So=ko.exports,xo=Object(u.a)(ye.a,Ws,{name:"SlotForm",components:{"new-pc":oo,"new-wap":fo,"wap-61104":eo,"wap-61107":Jr,"wap-61108a":Ar,"wap-61108b":Er,"wap-61108c":$r,"wap-61108d":Wr,"wap-qianru":io,"wap-search":jr,"wap-xuan-fu":Or,"qian-ru":Kl,"info-flow":hl,"video-ad":yl,"search-box":pr,"veui-field":ce.a,"veui-input":ge.a,"veui-button":S.a,"veui-select":N.a,"veui-form":Kt.a,"veui-checkbox":he.a,"veui-fieldset":ue.a,"veui-tooltip":I.a,"veui-icon":y.a,"veui-tabs":Sa.a,"veui-tab":F.a,"v-tags":Js,"veui-radio-button-group":De.a,"veui-radio-group":Ce.a,"color-picker":nl,"preview-iframe":So},data:function(){return{hasUserChangeName:!1,editAdInfo:null,editStatus:1,featureStyle:50040,cnList:[],platform:2,platformOptions:[{label:"WAP",value:2},{label:"PC",value:1}],type:1,isEdit:!1,isNew:!1,commonData:{userId:"",cname:""}}},created:function(){this.isEdit="edit"===this.store.pageType,this.isNew=Boolean(this.$route.query.new),this.store.isNew=this.isNew,this.getCnList(),this.getAccountInfo(),this.isEdit&&this.getWebSlotDetail()},mounted:function(){xe.a.hideHeaderDom()},watch:{"store.formData.cn.cid":function(e){this.commonData.cname=this.cnList.filter(function(t){return t.value===e})[0].label},commonData:{handler:function(e){this.store.commonData=e},deep:!0}},computed:{typeOptions:function(){if(this.isNew)return[{label:"图文广告",value:this.type="new"}];var e=[{label:"信息流",value:1},{label:"图文广告",value:2},{label:"视频广告",value:3}];return 2===this.platform&&(e=[{label:"信息流",value:1},{label:"图文广告",value:2}]),e},templateOptions:function(){return this.isNew?[{label:"嵌入",value:this.featureStyle="new"}]:1===this.platform?2===this.type?(this.isEdit||(this.featureStyle=1),[{label:"嵌入",value:1},{label:"搜索框",value:2}]):3===this.type?[{label:"视频贴片",value:this.featureStyle=""}]:(this.isEdit||(this.featureStyle=50040),[{label:"原生组图",value:50040},{label:"原生图文",value:50039},{label:"原生图文-无描述",value:50042},{label:"原生图文-上标题",value:50041},{label:"原生图文-下标题",value:50043},{label:"原生大图",value:50044}]):2===this.type?(this.isEdit||(this.featureStyle=6),[{label:"嵌入",value:6},{label:"搜索推荐",value:71001},{label:"悬浮",value:8}]):(this.isEdit||(this.featureStyle=61107),[{label:"原生缩略图",value:61107},{label:"原生图文",value:"61108a"},{label:"原生三图",value:"61108b"},{label:"原生大图",value:"61108c"},{label:"原生文字链",value:61104},{label:"评论区样式",value:"61108d"}])}},methods:{getWebSlotDetail:function(){var e=this,t=this.isNew?"getNewWebSlotDetail":"getWebSlotDetail";this.store[t]({tuIdList:this.$route.params.tuId}).then(function(t){e.editAdInfo=e.getEditInfo(t[0].adPosDetail),e.store.formData.name=e.editAdInfo.name,e.store.formData.cn.cid=e.editAdInfo.cid,e.store.formData.adpTagNames=e.editAdInfo.adpTagNames,e.editStatus=e.editAdInfo.status;var a=e.editAdInfo.code.split("|"),i={};a.forEach(function(e){var t=e.split("=");i[t[0]]=t[1]}),e.editAdInfo.code=i,e.getEditTemplate()})},getEditTemplate:function(){var e=this;if(this.featureStyle=null,this.platform=this.editAdInfo.basic.flowType,this.isNew){if(this.featureStyle="new",2===this.platform&&"regular"!==this.editAdInfo.extra.shape)return this.type=null,void this.emitForm(this.editAdInfo);var t=1===this.platform?"newPC":"newWAP";this.$nextTick(function(){e.$refs[t].setEditData(e.editAdInfo)})}else if(2===this.platform){if(this.type=this.editAdInfo.extra.shape.includes("feed")?1:2,this.editAdInfo.extra.featureAd&&(this.featureStyle=this.editAdInfo.extra.featureAd.featureStyle,61108===this.featureStyle&&(this.featureStyle="61108".concat({1:"a",2:"b",3:"c",4:"d"}[this.editAdInfo.extra.featureAd[61108].visual_adType])),this.$nextTick(function(){e.$refs[e.featureStyle]?e.$refs[e.featureStyle].setEditData(e.editAdInfo):e.emitForm(e.editAdInfo)})),202===this.editAdInfo.adType)return this.featureStyle=8,void this.$nextTick(function(){e.$refs.wapXunaFu.setEditData(e.editAdInfo)});if(201===this.editAdInfo.adType)return this.featureStyle=6,void this.$nextTick(function(){e.$refs.wapQianRu.setEditData(e.editAdInfo)});this.emitForm(this.editAdInfo)}else{if(this.type=2,"pcFeed"===this.editAdInfo.extra.shape)return void(2===this.editAdInfo.extra.fillStyleType?(this.type=1,this.featureStyle=this.editAdInfo.extra.featureAd.featureStyle,this.$nextTick(function(){e.$refs.pcFeed.setEditData(e.editAdInfo)})):(this.type=null,this.emitForm(this.editAdInfo)));if(this.editAdInfo.extra.shape.includes("Patch"))return this.type=3,void this.$nextTick(function(){e.$refs.pcVideo.setEditData(e.editAdInfo)});if(this.editAdInfo.extra.shape.includes("earch"))return this.featureStyle=2,void this.$nextTick(function(){e.$refs.pcSearch.setEditData(e.editAdInfo)});if([101,103].includes(this.editAdInfo.adType))return this.featureStyle=1,void this.$nextTick(function(){e.$refs.pcQianRu.setEditData(e.editAdInfo)});this.emitForm(this.editAdInfo)}},getEditInfo:function(e){for(var t in e)e.hasOwnProperty(t)&&["extra","basic","container","complement","fillStyle","context"].includes(t)&&(e[t]=JSON.parse(e[t]));return e},getAccountInfo:function(){var e=this;this.store.getAccountInfo().then(function(t){e.commonData.userId=t.customer.ucid})},getCnList:function(){var e=this;this.store.getWebSlotCnList().then(function(t){e.store.formData.cn.cid=t.cnList.filter(function(e){return e.isfirst})[0].cid,e.cnList=t.cnList.map(function(e){return{label:e.cname,value:e.cid}})})},emitForm:function(e){if(this.isEdit)Object.assign(e,{tuId:this.$route.params.tuId,status:this.editStatus});else if(!this.hasUserChangeName){var t="";3===e.container.sizeType?t="自适应":2===e.container.sizeType?t="".concat(e.container.width,":").concat(e.container.height):1===e.container.sizeType&&(t="".concat(e.container.width,"*").concat(e.container.height)),this.store.formData.name=t+" 创建于 "+w()().format("YYYY-MM-DD")}this.store.emitFormData=e},goBack:function(){var e=this.isNew?"/union/slot/new":"/union/slot";this.global.router.push({path:e})},changePlatform:function(){this.type=this.isNew?"new":1}},beforeDestroy:function(){xe.a.addHeaderDom()},extractDescriptionConfig:function(e,t){var a=new RegExp("(?:^|\\|)"+t+"=(\\d+)(?:$|\\|+)"),i=e.match(a);return null==i?"":i[1]}}),Ro=(a("fda1"),a("3e02"),Object(p.a)(xo,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common slot-form",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("template",{slot:"field"},[a("article",{staticClass:"slot-form-base-left"},[a("section",{staticClass:"base-info-section"},[a("p",{staticClass:"card-title"},[e._v("基本信息")]),1<e.cnList.length?a("veui-field",{attrs:{label:"计费名："}},[a("veui-select",{staticClass:"input300",attrs:{"overlay-class":"web-slot-cn",options:e.cnList},model:{value:e.store.formData.cn.cid,callback:function(t){e.$set(e.store.formData.cn,"cid",t)},expression:"store.formData.cn.cid"}})],1):e._e(),a("veui-field",{attrs:{name:"name",field:"name",label:"代码位名称：",tip:"最多可输入40个字符",rules:e.store.rules.name}},[a("veui-input",{staticClass:"input300",attrs:{placeholder:"为你的代码位起个名字吧～",maxLength:"40"},on:{change:function(t){e.hasUserChangeName=!0}},model:{value:e.store.formData.name,callback:function(t){e.$set(e.store.formData,"name",t)},expression:"store.formData.name"}})],1),e.isNew?e._e():a("veui-field",{staticClass:"after-sub-card has-sub-card",attrs:{name:"adpTagNames",field:"adpTagNames",label:"标签：",rules:e.store.rules.adpTagNames,tip:"最多可输入5个标签，回车键即可确认"}},[a("v-tags",{staticClass:"input300 input-tags",attrs:{source:e.store.formData.adpTagNames}})],1)],1),a("section",[a("p",{staticClass:"card-title"},[e._v("投放平台")]),a("veui-field",{attrs:{label:"投放平台："}},[a("veui-radio-button-group",{attrs:{items:e.platformOptions,readonly:e.isEdit},on:{change:e.changePlatform},model:{value:e.platform,callback:function(t){e.platform=t},expression:"platform"}})],1)],1),a("section",[a("p",{staticClass:"card-title"},[e._v("选择广告位类型")]),a("veui-field",{staticClass:"type-field",attrs:{label:"代码位类型：",name:"type",field:"type"}},[a("veui-radio-button-group",{attrs:{items:e.typeOptions,readonly:e.isEdit},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("div",{staticClass:"template-container"},[a("veui-field",{staticClass:"template-field",attrs:{label:"模板列表："}},[a("div",{staticClass:"template-wrapper"},[a("veui-radio-group",{attrs:{items:e.templateOptions},model:{value:e.featureStyle,callback:function(t){e.featureStyle=t},expression:"featureStyle"}})],1)]),a("veui-field",{attrs:{label:"自定义："}},[a("div",{staticClass:"slot-form-common-container"},[1===e.type?a("div",[1===e.platform?a("info-flow",{ref:"pcFeed",attrs:{validators:e.store.formSetting.validators,templateId:Number(e.featureStyle),commonData:e.commonData,validatorData:e.store.formData},on:{emitForm:e.emitForm}}):e._e(),2===e.platform&&"61108d"===e.featureStyle?a("wap-61108d",{ref:"61108d",attrs:{validators:e.store.formSetting.validators,templateId:61108,shape:"feedAutoWidth",commonData:e.commonData,validatorData:e.store.formData},on:{emitForm:e.emitForm}}):e._e(),2===e.platform&&"61108c"===e.featureStyle?a("wap-61108c",{ref:"61108c",attrs:{validators:e.store.formSetting.validators,templateId:61108,shape:"feedAutoWidth",commonData:e.commonData,validatorData:e.store.formData},on:{emitForm:e.emitForm}}):e._e(),2===e.platform&&"61108b"===e.featureStyle?a("wap-61108b",{ref:"61108b",attrs:{validators:e.store.formSetting.validators,templateId:61108,shape:"feedAutoWidth",commonData:e.commonData,validatorData:e.store.formData},on:{emitForm:e.emitForm}}):e._e(),2===e.platform&&"61108a"===e.featureStyle?a("wap-61108a",{ref:"61108a",attrs:{validators:e.store.formSetting.validators,templateId:61108,shape:"feedAutoWidth",commonData:e.commonData,validatorData:e.store.formData},on:{emitForm:e.emitForm}}):e._e(),2===e.platform&&61107===e.featureStyle?a("wap-61107",{ref:"61107",attrs:{validators:e.store.formSetting.validators,templateId:Number(e.featureStyle),shape:"feedScaleCustom",commonData:e.commonData,validatorData:e.store.formData},on:{emitForm:e.emitForm}}):e._e(),2===e.platform&&61104===e.featureStyle?a("wap-61104",{ref:"61104",attrs:{validators:e.store.formSetting.validators,templateId:Number(e.featureStyle),shape:"feedAutoWidth",commonData:e.commonData,validatorData:e.store.formData},on:{emitForm:e.emitForm}}):e._e()],1):e._e(),2===e.type?a("div",[1===e.featureStyle?a("qian-ru",{ref:"pcQianRu",attrs:{commonData:e.commonData,validatorData:e.store.formData,validators:e.store.formSetting.validators},on:{emitForm:e.emitForm}}):e._e(),2===e.featureStyle?a("search-box",{ref:"pcSearch",attrs:{commonData:e.commonData,validatorData:e.store.formData,validators:e.store.formSetting.validators},on:{emitForm:e.emitForm}}):e._e(),8===e.featureStyle?a("wap-xuan-fu",{ref:"wapXunaFu",attrs:{commonData:e.commonData,validatorData:e.store.formData,validators:e.store.formSetting.validators},on:{emitForm:e.emitForm}}):e._e(),71001===e.featureStyle?a("wap-search",{ref:"71001",attrs:{commonData:e.commonData,validatorData:e.store.formData,validators:e.store.formSetting.validators},on:{emitForm:e.emitForm}}):e._e(),6===e.featureStyle?a("wap-qianru",{ref:"wapQianRu",attrs:{commonData:e.commonData,validatorData:e.store.formData,validators:e.store.formSetting.validators},on:{emitForm:e.emitForm}}):e._e()],1):e._e(),3===e.type?a("div",[a("video-ad",{ref:"pcVideo",attrs:{commonData:e.commonData,validatorData:e.store.formData},on:{emitForm:e.emitForm}})],1):e._e(),"new"===e.type?a("div",[1===e.platform?a("new-pc",{ref:"newPC",attrs:{commonData:e.commonData,validatorData:e.store.formData,validators:e.store.formSetting.validators},on:{emitForm:e.emitForm}}):e._e(),2===e.platform?a("new-wap",{ref:"newWAP",attrs:{commonData:e.commonData},on:{emitForm:e.emitForm}}):e._e()],1):e._e()])])],1)],1)])]),a("preview-iframe",{staticClass:"slot-form-right",attrs:{flowType:e.platform,type:e.type,adInfo:this.store.emitFormData,name:this.store.formData.name,cid:this.store.formData.cn.cid,commonData:this.commonData,formData:this.store.formData}}),a("template",{staticClass:"slotForm-submit",slot:"operation"},[a("veui-button",{attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,"071d5be7",null));Ro.options.__file="SlotFormView.vue";var To=Ro.exports,Io=new K.a({alias:"IOS",text:"iOS",value:1},{alias:"ANDROID",text:"Android",value:2}),Fo=new K.a({alias:"MOBILE",text:"手机",value:1},{alias:"PAD",text:"平板",value:2}),No=new K.a({alias:"ALL_ALL",text:"全部",value:""},{alias:"ANDROID_ALL",text:"Android 全部",value:1},{alias:"ANDROID_MOBILE",text:"Android 手机",value:2},{alias:"ANDROID_PAD",text:"Android 平板",value:3},{alias:"IOS_ALL",text:"iOS 全部",value:4},{alias:"IOS_MOBILE",text:"ios iphone",value:5},{alias:"IOS_PAD",text:"ios ipad",value:6});No.getValueFromSystemAndDevice=function(e,t){var a=Io.valueIdx[e].alias,i=Fo.valueIdx[t].alias;return this.aliasIdx["".concat(a,"_").concat(i)].value},No.getSystemAndDeviceFromValue=function(e){var t=this.valueIdx[e].alias.split("_");return{system:Io.aliasIdx[t[0]].value,device:Fo.aliasIdx[t[1]].value}},No.toOptions=function(){var e=this.entities.map(function(e){return{value:e.value,label:e.text}});return e.splice(0,1),e},new K.a({alias:"SDK",text:"SDK",value:0},{alias:"API",text:"API",value:1}),new K.a({alias:"PHONE",text:"手机应用",value:0},{alias:"S_PROGRAM",text:"小程序应用",value:1}),new K.a({alias:"REMOVED",text:"删除",value:0},{alias:"NORMAL",text:"正常",value:1},{alias:"PAUSED",text:"暂停",value:2}),new K.a({alias:"BANNER",text:"横幅",value:32},{alias:"SPLASH",text:"开屏",value:33},{alias:"INTERSTITIAL",text:"插屏",value:34},{alias:"OFFERWALL",text:"积分墙",value:35},{alias:"FEED",text:"信息流",value:36},{alias:"SPREADWALL",text:"推广墙",value:37},{alias:"APPWALL",text:"应用推荐墙",value:38},{alias:"WHEEL",text:"轮盘",value:39},{alias:"VIDEO",text:"视频贴片",value:40},{alias:"REWARD_VIDEO",text:"激励视频",value:44}),new K.a({alias:"BANNER",text:"横幅",value:32},{alias:"SPLASH",text:"开屏",value:33},{alias:"INTERSTITIAL",text:"插屏",value:34},{alias:"INFO_FLOW",text:"信息流",value:36},{alias:"PROMOTION_WALL",text:"推广墙",value:37},{alias:"APP_PROMOTION_WALL",text:"应用推荐墙",value:38},{alias:"ROTATION_PLATE",text:"轮盘",value:39},{alias:"VIDEO",text:"视频贴片",value:40},{alias:"FRONT_LINK",text:"悬浮前链",value:41},{alias:"MID_PAGE",text:"垂类中间页",value:42},{alias:"REWARD_VIDEO",text:"激励视频",value:44}),new K.a({alias:"BANNER",text:"横幅",value:"32"},{alias:"SPLASH",text:"开屏",value:"33"},{alias:"INTERSTITIAL",text:"插屏",value:"34"},{alias:"INFO_FLOW",text:"信息流",value:"36"},{alias:"VIDEO",text:"视频贴片",value:"40"},{alias:"REWARD_VIDEO",text:"激励视频",value:"44"}),new K.a({alias:"NOT_FILTER",text:"不过滤",value:0},{alias:"FILTER",text:"过滤",value:1}),new K.a({alias:"MONTH",text:"近30天有收入",value:1},{alias:"NOT_MONTH",text:"其他",value:0}),new K.a({alias:"INFO_FLOW_LEFT_PIC",text:"左图右文",value:28},{alias:"INFO_FLOW_RIGHT_PIC",text:"左文右图",value:27},{alias:"INFO_FLOW_GROUP_PIC",text:"三图",value:26},{alias:"INFO_FLOW_GROUP_PIC_LOGO",text:"三图＋logo",value:31},{alias:"INFO_FLOW_PIC_BOTTOM_TITLE",text:"大图＋底部文字",value:22},{alias:"INFO_FLOW_PIC_TOP_TITLE",text:"大图上部文字",value:21},{alias:"INFO_FLOW_PIC_LOGO",text:"大图上部文字+logo",value:30},{alias:"CAROUSEL_IMAGE_TITLE",text:"大图两行文字",value:11},{alias:"CAROUSEL_IMAGE",text:"大图无文字",value:10},{alias:"INFO_FLOW_VIDEO_TOP_TITLE",text:"视频＋文字",value:32}),new K.a({alias:"NATIVE_TITLE",text:"标题",value:1},{alias:"NATIVE_DESC",text:"描述",value:2},{alias:"NATIVE_IMAGE",text:"大图",value:4},{alias:"NATIVE_ICON",text:"图标",value:8},{alias:"NATIVE_APPSIZE",text:"App大小",value:16},{alias:"NATIVE_ACTIONTYPE",text:"跳转动作",value:32},{alias:"NATIVE_VIDEO",text:"视频",value:64},{alias:"NATIVE_INVENTORYTYPE",text:"视频+尾帧",value:256}),new K.a({alias:"APP应用",text:"手机应用",value:"0"},{alias:"小程序",text:"小程序",value:"1"});var Ao=new K.a({alias:"QIANRU",text:"嵌入",value:"101"},{alias:"XUANTING",text:"悬停",value:"102"},{alias:"XUANFU",text:"悬浮",value:"202"},{alias:"GUANLIAN_SHIPIN",text:"视频贴片",value:"106"},{alias:"GUANLIAN_WENZI",text:"内文",value:"105"},{alias:"GUANLIAN_TUPIAN",text:"图加",value:"203"},{alias:"FEED",text:"信息流",value:"107"}),Mo=new K.a({alias:"FEED",text:"信息流",value:"107,204"},{alias:"QIANRU",text:"嵌入",value:"101,201,0,2"},{alias:"XUANFU",text:"悬浮",value:"102,100,202"},{alias:"SOUSUO",text:"搜索推荐",value:"301,302"},{alias:"TIEPIAN",text:"视频贴片",value:"106"},{alias:"TUJIA",text:"图加",value:"104,203"},{alias:"NEIWEN",text:"内文",value:"105"},{alias:"XUANTING",text:"悬停",value:"103"}),Yo=new K.a({alias:"QIANRU",text:"嵌入",value:1},{alias:"XUANTING",text:"悬停",value:2},{alias:"XUANFU",text:"悬浮",value:3},{alias:"GUANLIAN_SHIPIN",text:"视频贴片",value:4},{alias:"GUANLIAN_WENZI",text:"内文",value:5},{alias:"GUANLIAN_TUPIAN",text:"图加",value:6},{alias:"TANCHUANG",text:"弹窗",value:7},{alias:"QUANPING",text:"全屏",value:8},{alias:"QIANRUANNIU",text:"嵌入按钮",value:9},{alias:"XUANFUANNIU",text:"悬浮按钮",value:10},{alias:"YINCANG",text:"内文",value:11},{alias:"FEED",text:"信息流",value:12}),Lo={"101,201,0,2":/(101,201,0,2)/g,"102,100,202":/(102,100,202)/g,103:/(103)/g,"301,302":/(301,302)/g,"104,203":/(104,203)/g,105:/(105)/g,106:/(106)/g,"107,204":/(107,204)/g},Eo=new Date((new Date).setHours(0,0,0,0)),Po=new Date(Eo-864e5),Vo=new Date(Eo-0-1e3),Bo=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","自定义报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[Po,Vo]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contrastRange",[new Date(new Date-12096e5),new Date(new Date-6912e5)]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{order:"desc",orderBy:"time",orders:"desc",orderBys:"time",adPositionId:[],adTypeId:[],cId:[],websiteId:[],keyword:"",dimensions:"",timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,cpc",filterFields:"rtbTypeId,sellTypeId",filterValues:"0|1",begin:a.range?w()(a.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:a.range?w()(a.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"defaultArgs",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"网盟竞价交易报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"网盟竞价交易报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cnList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allMedia",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"allSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"selectedSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sLotTotalCount",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterSelAll",{adTypeName:!1,cName:!1,webDomain:!1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageViewName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adTypeName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"webDomain",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adPositionName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chart",{}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getAuctionReportAllQuery,this.getAdpCnlist=this.api.getAdpCnlist,this.getAllMedia=this.api.getAllMedia,this.adPositionsRequest=this.api.adPostiionsDetails,this.getSlotList=this.api.getWebSlotNewList,this.getReportSum=this.api.getAuctionReportSum,this.save=this.api.saveAuctionReport;var a=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,a),a.begin&&(this.range=[w()(a.begin)._d,a.end?w()(a.end)._d:Vo]),a.end&&!a.begin&&(this.range=[Po,w()(a.end)._d]);var i=[],s=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=s/864e5,i[1]=w()(this.filter.begin).valueOf()-864e5,i[0]=w()(i[1]).valueOf()-s,i[0]=w()(i[0]).format("YYYYMMDD"),i[1]=w()(i[1]).format("YYYYMMDD"),a.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(a.contrastBegin)._d,w()(a.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(i[0])._d,w()(i[1])._d]),this.getSlotList(this.slotFliter).then(function(t){t.page&&t.page.result&&(e.allSlot=st()(t.page.result),e.sLotTotalCount=t.page.totalCount)}),this.getAdpCnlist().then(function(t){if(t.cnList)for(var a=st()(t.cnList),i=a.length,s=0;s<i;s++)e.cnList.push({label:a[s].cname,value:a[s].cid})}).catch(function(e){}),this.getAllMedia().then(function(t){if(t.results)for(var a=st()(t.results),i=a.length,s=0;s<i;s++)e.allMedia.push({label:a[s].domain,value:a[s].id})}).catch(function(e){})}},{key:"initListData",value:function(){}},{key:"getSlot",value:function(e,t){var a=this,i={};i=t?{pageNo:e,pageSize:30,keyword:t}:{pageNo:e,pageSize:30},this.getSlotList(i).then(function(i){i.page&&i.page.result&&(a.allSlot=st()(i.page.result),a.sLotTotalCount=i.page.totalCount,a.slotFliter.pageNo=e,a.slotFliter.keyword=t)})}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.adTypeId)&&(t.adTypeId=a.adTypeId.join()),Array.isArray(a.cId)&&(t.cId=a.cId.join()),Array.isArray(a.websiteId)&&(t.websiteId=a.websiteId.join()),Array.isArray(a.adPositionId)&&(t.adPositionId=""),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;this.getRouteQuery({}),Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)});var t=this.getValueFromField("adPositionId");if(t&&(this.filter.adPositionId=t),"string"==typeof this.filter.adTypeId){var a=st()(this.filter.adTypeId),i=[];for(var s in Lo)a.match(Lo[s])&&i.push(s);this.filter.adTypeId=st()(i)}"string"==typeof this.filter.cId&&(this.filter.cId=this.filter.cId?this.filter.cId.split(","):[],this.filter.cId=Ea()(this.filter.cId,function(e){return Number(e)})),"string"==typeof this.filter.websiteId&&(this.filter.websiteId=this.filter.websiteId?this.filter.websiteId.split(","):[],this.filter.websiteId=Ea()(this.filter.websiteId,function(e){return Number(e)})),"string"==typeof this.filter.adPositionId&&"all"!==this.filter.adPositionId&&(this.filter.adPositionId=this.filter.adPositionId?this.filter.adPositionId.split(","):[]),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){if(this.fillFilterFromQuery(),0<(e={pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}).result.length){var t=e.result[0],a=Ya()(t);-1<a.indexOf("adTypeName")?this.adTypeName=!0:this.adTypeName=!1,-1<a.indexOf("cName")?this.cName=!0:this.cName=!1,-1<a.indexOf("webDomain")?this.webDomain=!0:this.webDomain=!1,-1<a.indexOf("adPositionName")?this.adPositionName=!0:this.adPositionName=!1,-1<a.indexOf("pageview")?this.pageViewName=!0:this.pageViewName=!1}return e}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"prepareData",value:function(e){return e}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="";var a=this.filter.adTypeId.length||this.selectedSlot.length;this.getReportSum(e).then(function(e){t.chartData=a?Object(j.a)(e.results,["slotview","income","click","clickRatio","ecpm","cpc"]):Object(j.a)(e.results,["slotview","income","pageview","click","clickRatio","ecpm","cpc"])}).catch(function(e){})}},{key:"getValueFromField",value:function(e){var t=st()(this.filter.filterFields),a=st()(this.filter.filterValues),i=t.split(",");return a.split("|")[i.indexOf(e)]}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify(Object(v.a)({reportType:"cpro",adTypeId:this.filter.adTypeId,cId:this.filter.cId,websiteId:this.filter.websiteId,adPositionId:"all"===this.filter.adPositionId?"all":""},this.filterSelAll));var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a),$o=a("98dc"),zo=a.n($o),qo=a("04dc"),Uo=a("5041"),Wo=(a("c9f1"),{name:"veui-table-column",uiTypes:["table-column"],mixins:[qo.a],props:{title:String,field:{type:String,required:!0},width:[String,Number],sortable:Boolean,align:{type:String,validator:function(e){return!e||"left"===e||"right"===e||"center"===e}},span:Function},data:function(){return{id:zo()("veui-table-column-")}},render:function(){return null},created:function(){var e=this,t=Object(Uo.a)(this,"table-column");-1===t&&(t=1),this.table.add(Object(v.a)({},na.a.apply(void 0,[this].concat(["title","field","sortable","width","align","span"],["id"])),{index:t,hasFoot:function(){return!!e.$slots.foot},renderBody:function(t){return e.$scopedSlots.default?e.$scopedSlots.default(t):t[e.field]},renderHead:function(){return e.$slots.head||e.title},renderFoot:function(){return e.$slots.foot||null}}))},destroyed:function(){this.table.removeById(this.id)}}),Go=Object(p.a)(Wo,void 0,void 0,!1,null,null,null);Go.options.__file="Column.vue";var Ho=Go.exports,Qo=a("fdaa");Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var Jo,Ko=Object(u.a)(G.a,Bo,{name:"BiddingReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":Ho,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,ListFilters:pa.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"self-card":Qo.a,"veui-grid-container":x.a,"veui-grid-row":R.a,"veui-grid-column":T.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"select-self":ea.a,"datepicker-self":ba.a},data:function(){var e=this;return{id2name:{adTypeId:"adTypeName",cId:"cName",websiteId:"webDomain"},isall:!1,testDate:null,adTypeName:!1,cName:!1,webDomain:!1,adPositionName:!1,pageViewName:!1,metrics:"view,income,click,clickRatio,ecpm,cpc",metricsWithPage:"view,income,click,clickRatio,ecpm,pageview,cpc",field:"rtbTypeId,sellTypeId,",fieldWithAdp:"rtbTypeId,sellTypeId,getAdType,",value:"0|1|",valueWithAdp:"0|1|1|",AdType:Mo,AnchoredType:Yo,AdTypeObj:Ao,adTypeIdKey:"",adTypeIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.adTypeIdKey.toLowerCase())},cIdKey:"",cIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.cIdKey.toLowerCase())},websiteIdKey:"",websiteIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.websiteIdKey.toLowerCase())},item:[],labelForTag:{adTypeId:"代码位类型",cId:"计费名",websiteId:"媒体"},filterItem:{adTypeId:Mo.toOptions(),cId:this.store.cnList,websiteId:this.store.allMedia,adPositionId:this.store.selectedSlot},adpListDisable:!1,relativeVisible:!1,relativeVisibleOuter:!1,noemail:!1,openFilters:!0,openEditPage:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a,outside:Ra.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},mounted:function(){"all"===this.store.filter.adPositionId&&(this.adpListDisable=!0),this.initSubFilter()},computed:{chartOptions:function(){return this.store.chartData},overlayshow:function(){return this.relativeVisible||this.relativeVisibleOuter}},methods:{initSubFilter:function(){var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i={dimensions:""},s=0;s<e.filterValues.length;s++)a+=e.filterValues[s].join(",")+"|",i[e.filterFields[s]]=e.filterValues[s];delete i.rtbTypeId,delete i.sellTypeId,delete i.getAdType,t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),dimensions:i.dimensions.slice(0,-1),metrics:this.metrics,begin:e.begin,end:e.end};var l=Object(v.a)({},this.store.filter,t,i);this.store.filter=st()(l);var r=e.typeInfo?st()(JSON.parse(e.typeInfo)):{};delete r.reportType,r.adTypeId&&(this.store.filter.adTypeId=r.adTypeId),r.cId&&(this.store.filter.cId=r.cId),r.websiteId&&(this.store.filter.websiteId=r.websiteId),"all"===r.adPositionId&&(this.store.filter.adPositionId="all",this.adpListDisable=!0),this.store.filterSelAll.adTypeName=r.adTypeName,this.store.filterSelAll.cName=r.cName,this.store.filterSelAll.webDomain=r.webDomain,i.adPositionId&&0<i.adPositionId.length?(this.renderSelectedSlot(i),this.refreshTableByFilter(i.adPositionId)):this.refreshTableByFilter()}else{var o=this.store.getRouteQuery();(t={filterFields:o.filterFields?o.filterFields+"|":this.field,filterValues:o.filterValues?o.filterValues+"|":this.value,dimensions:o.dimensions}).filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,t);var n={};n.adPositionId=st()(this.store.filter.adPositionId),Array.isArray(n.adPositionId)&&0<n.adPositionId.length&&this.renderSelectedSlot(n),this.refreshTableByFilter()}this.getGeneralData(t),this.getChartData(t)},findDom:function(e){for(;"BUTTON"!==e.tagName&&"DIV"!==e.tagName;)e=e.parentNode;return e},closeRelative:function(e){var t;e&&e.target&&(t=e.target),"svg"!==t.tagName&&"path"!==t.tagName||(t=this.findDom(t)),t&&-1<t.className.indexOf("filters")&&-1<t.className.indexOf("report")||(this.relativeVisible=!1)},renderSelectedSlot:function(e){var t=this,a=st()(e);a.adPositionId=a.adPositionId.map(function(e,t){return"92233720"+(Number(e.substring(1))+32559808512)}),this.store.adPositionsRequest({tuIdList:a.adPositionId.join(",")}).then(function(e){var a=e.map(function(e,t){return e.adPosDetail});t.store.selectedSlot=a}).catch(function(e){})},getGeneralData:function(e){var t=this,a=(st()(this.store.filter.adTypeId)||[]).length||this.store.selectedSlot.length||"all"===this.store.filter.adPositionId,i={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:a?this.metrics:this.metricsWithPage};delete e.dimensions,this.store.getReportSum(Object(v.a)({},i,e)).then(function(e){for(var a in 0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),0===e.diffResults.length&&(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.diffCardData)t.store.diffCardData[a]=Number(t.store.diffCardData[a])})},getChartData:function(e){var t=(st()(this.store.filter.adTypeId)||[]).length||this.store.selectedSlot.length||"all"===this.store.filter.adPositionId,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:t?this.metrics:this.metricsWithPage};delete e.dimensions,this.store.getChart(Object(v.a)({},a,e))},searchSlot:function(e,t){this.store.getSlot(1,e)},slotTo:function(e,t){this.store.slotFliter.keyword?this.store.getSlot(e,this.store.slotFliter.keyword):this.store.getSlot(e)},selectItem:function(e){this.getState(e.tu)||(this.store.selectedSlot.push(e),this.store.filter.adPositionId.push(e.tu))},deleletItem:function(e){this.store.selectedSlot=this.store.selectedSlot.filter(function(t){return t.tu!==e}),this.store.filter.adPositionId=this.store.filter.adPositionId.filter(function(t){return t!==e})},getState:function(e){return this.store.selectedSlot.some(function(t){return t.tu==e})},selectAll:function(){this.adpListDisable=!0,this.store.selectedSlot=[],this.store.filter.adPositionId="all"},formatLocal:function(e){return null===e?"--":"number"==typeof e||"string"==typeof e?e.toLocaleString():e},format:function(e){return w()(e).format("YYYY-MM-DD")},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]},toPercent:function(e){if(null===e)return"--";var t=Number(e);return(t=t.toFixed(2))+"%"},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"网盟竞价交易报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"网盟竞价交易报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},subCancelAdp:function(){this.relativeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.adPositionId&&0<e.adPositionId.length&&(e.dimensions+=",adPositionId"),e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,e.adPositionId&&delete e.adPositionId,e.adTypeId&&delete e.adTypeId,e.cId&&delete e.cId,e.websiteId&&delete e.websiteId,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},delAllAdp:function(){this.store.selectedSlot=[],this.store.filter.adPositionId=[],this.adpListDisable=!1},deleteFilters:function(e){var t=this;if("all"===e)return this.store.filter.adTypeId=[],this.store.filter.cId=[],this.store.filter.websiteId=[],this.store.filter.adPositionId=[],this.adpListDisable=!1,Object.keys(this.store.filterSelAll).forEach(function(e){t.store.filterSelAll[e]=!1}),this.store.selectedSlot=[],this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),void this.refreshTableByFilter();"adPositionId"===e?(this.store.filter.adPositionId=[],this.adpListDisable=!1,this.store.selectedSlot=[]):(this.store.filter[e]=[],this.store.filterSelAll[this.id2name[e]]=!1),this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},refreshGeneralDataByFilter:function(){var e=[],t=st()(this.store.filter.adTypeId),a=st()(this.store.filter.cId),i=st()(this.store.filter.websiteId);0<this.store.selectedSlot.length&&(e=this.store.selectedSlot.map(function(e){return e.tu}));var s=t.length||this.store.selectedSlot.length||"all"===this.store.filter.adPositionId,l={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:s?this.metrics:this.metricsWithPage,filterFields:s?this.fieldWithAdp:this.field,filterValues:s?this.valueWithAdp:this.value};0===t.length||this.store.filterSelAll.adTypeName||(l.filterFields+="adTypeId,",l.filterValues+=t.join(",")+"|"),0===a.length||this.store.filterSelAll.cName||(l.filterFields+="cId,",l.filterValues+=a.join(",")+"|"),0===i.length||this.store.filterSelAll.webDomain||(l.filterFields+="websiteId,",l.filterValues+=i.join(",")+"|"),0!==e.length&&(l.filterFields+="adPositionId,",l.filterValues+=e.join(",")+"|"),l.filterFields=l.filterFields.slice(0,-1),l.filterValues=l.filterValues.slice(0,-1),this.getGeneralData(l)},refreshChartByFilter:function(){var e=[],t=st()(this.store.filter.adTypeId),a=st()(this.store.filter.cId),i=st()(this.store.filter.websiteId);0<this.store.selectedSlot.length&&(e=this.store.selectedSlot.map(function(e){return e.tu}));var s=t.length||this.store.selectedSlot.length||"all"===this.store.filter.adPositionId,l={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:s?this.metrics:this.metricsWithPage,filterFields:s?this.fieldWithAdp:this.field,filterValues:s?this.valueWithAdp:this.value};t&&0!==t.length&&!this.store.filterSelAll.adTypeName&&(l.filterFields+="adTypeId,",l.filterValues+=t.join(",")+"|"),a&&0!==a.length&&!this.store.filterSelAll.cName&&(l.filterFields+="cId,",l.filterValues+=a.join(",")+"|"),i&&0!==i.length&&!this.store.filterSelAll.webDomain&&(l.filterFields+="websiteId,",l.filterValues+=i.join(",")+"|"),0!==e.length&&(l.filterFields+="adPositionId,",l.filterValues+=e.join(",")+"|"),l.filterFields=l.filterFields.slice(0,-1),l.filterValues=l.filterValues.slice(0,-1),this.store.getChart(l)},refreshTableByFilter:function(e){var t=[],a=st()(this.store.filter.adPositionId);0<this.store.selectedSlot.length?t=this.store.selectedSlot.map(function(e){return e.tu}):Array.isArray(a)&&0<a.length&&(t=a),e&&(t=st()(e));var i=st()(this.store.filter.adTypeId)||[],s=st()(this.store.filter.cId)||[],l=st()(this.store.filter.websiteId)||[],r=i.length||this.store.selectedSlot.length||"all"===this.store.filter.adPositionId||t.length,o={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:r?this.metrics:this.metricsWithPage,filterFields:r?this.fieldWithAdp:this.field,filterValues:r?this.valueWithAdp:this.value,dimensions:"",pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};i&&0!==i.length&&!this.store.filterSelAll.adTypeName&&(o.filterFields+="adTypeId,",o.filterValues+=i.join(",")+"|",o.dimensions+="adTypeName,"),s&&0!==s.length&&!this.store.filterSelAll.cName&&(o.filterFields+="cId,",o.filterValues+=s.join(",")+"|",o.dimensions+="cName,"),l&&0!==l.length&&!this.store.filterSelAll.webDomain&&(o.filterFields+="websiteId,",o.filterValues+=l.join(",")+"|",o.dimensions+="webDomain,"),t&&0!==t.length&&(o.filterFields+="adPositionId,",o.filterValues+=t.join(",")+"|",o.dimensions+="adPositionName,adPositionId,"),"all"===this.store.filter.adPositionId&&(o.dimensions+="adPositionName,adPositionId,"),this.store.filterSelAll.adTypeName&&(o.dimensions+="adTypeName,"),this.store.filterSelAll.cName&&(o.dimensions+="cName,"),this.store.filterSelAll.webDomain&&(o.dimensions+="webDomain,"),o.filterFields=o.filterFields.slice(0,-1),o.filterValues=o.filterValues.slice(0,-1),o.dimensions=o.dimensions.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,o),this.store.submitSearch(),this.$forceUpdate()},requestSearch:function(){this.adpListDisable&&(this.store.filter.adPositionId="all"),this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},compareDate:function(e){},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(Jo=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return Jo.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),Zo=(a("d581"),Object(p.a)(Ko,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"bidding-report-view"},[a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("select-self",{staticClass:"bidding-report-large-select",attrs:{placeholder:"代码位类型",isall:e.store.filterSelAll.adTypeName,options:e.AdType.toOptions(),filter:e.adTypeIdFilter,multi:!0},on:{"update:isall":function(t){e.$set(e.store.filterSelAll,"adTypeName",t)}},model:{value:e.store.filter.adTypeId,callback:function(t){e.$set(e.store.filter,"adTypeId",t)},expression:"store.filter.adTypeId"}},[8<e.AdType.toOptions().length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-input",{staticClass:"select-filter",attrs:{ui:"tiny"},model:{value:e.adTypeIdKey,callback:function(t){e.adTypeIdKey=t},expression:"adTypeIdKey"}})],1):e._e()]),a("select-self",{attrs:{placeholder:"计费名",isall:e.store.filterSelAll.cName,options:e.store.cnList,filter:e.cIdFilter,multi:!0},on:{"update:isall":function(t){e.$set(e.store.filterSelAll,"cName",t)}},model:{value:e.store.filter.cId,callback:function(t){e.$set(e.store.filter,"cId",t)},expression:"store.filter.cId"}},[8<e.store.cnList.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-input",{staticClass:"select-filter",attrs:{ui:"tiny"},model:{value:e.cIdKey,callback:function(t){e.cIdKey=t},expression:"cIdKey"}})],1):e._e()]),a("select-self",{attrs:{placeholder:"媒体",isall:e.store.filterSelAll.webDomain,options:e.store.allMedia,filter:e.websiteIdFilter,multi:!0},on:{"update:isall":function(t){e.$set(e.store.filterSelAll,"webDomain",t)}},model:{value:e.store.filter.websiteId,callback:function(t){e.$set(e.store.filter,"websiteId",t)},expression:"store.filter.websiteId"}},[8<e.store.allMedia.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-searchbox",{staticClass:"select-filter",attrs:{placeholder:"搜索",ui:"tiny"},model:{value:e.websiteIdKey,callback:function(t){e.websiteIdKey=t},expression:"websiteIdKey"}})],1):e._e()]),a("veui-button",{ref:"slot",staticClass:"filters report",on:{click:function(t){e.relativeVisible=!e.relativeVisible}}},[e._v("代码位\n                "),a("veui-icon",{staticClass:"filters-angle",class:{open:e.relativeVisible},attrs:{name:"angle-down"}})],1),a("div",{class:{"inline-block":"CONFIRMED"!==e.store.status,block:"CONFIRMED"==e.store.status}},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},on:{select:e.compareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1)],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("下载\n            ")],1)],1),a("filter-tags",{attrs:{"init-filter":e.store.tagFilter,"filter-options":e.filterItem,label:e.labelForTag},on:{deleteFilter:e.deleteFilters}})],1),a("template",{slot:"batchContent"},[a("veui-grid-container",{attrs:{gutter:0,margin:0,columns:void 0!==e.store.cardData.pageview?28:30}},[a("veui-grid-row",[a("veui-grid-column",{attrs:{span:void 0!==e.store.cardData.pageview?4:5}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"代码位总展现量",content:e.formatLocal(e.store.cardData.view),addValue:e.store.diffCardData.view}})],1)]),a("veui-grid-column",{attrs:{span:void 0!==e.store.cardData.pageview?4:5}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"预计总收入（元）",content:e.formatLocal(e.store.cardData.income),addValue:e.store.diffCardData.income}})],1)]),void 0!==e.store.cardData.pageview?a("veui-grid-column",{attrs:{span:void 0!==e.store.cardData.pageview?4:5}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"页面总展现量",content:e.formatLocal(e.store.cardData.pageview),addValue:e.store.diffCardData.pageview}})],1)]):e._e(),a("veui-grid-column",{attrs:{span:void 0!==e.store.cardData.pageview?4:5}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"总点击量",content:e.formatLocal(e.store.cardData.click),addValue:e.store.diffCardData.click}})],1)]),a("veui-grid-column",{attrs:{span:void 0!==e.store.cardData.pageview?4:5}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"eCPM（元）",content:e.formatLocal(e.store.cardData.ecpm),addValue:e.store.diffCardData.ecpm}})],1)]),a("veui-grid-column",{attrs:{span:void 0!==e.store.cardData.pageview?4:5}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"总点击率",content:e.toPercent(e.store.cardData.clickRatio||0),addValue:e.store.diffCardData.clickRatio}})],1)]),a("veui-grid-column",{attrs:{span:void 0!==e.store.cardData.pageview?4:5}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"CPC（元）",content:e.formatLocal(e.store.cardData.cpc),addValue:e.store.diffCardData.cpc}})],1)])],1)],1),a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatTime(t.time)))])]}}])}),this.store.adTypeName?a("div",{key:"adTypeName"+new Date},[a("veui-table-column",{attrs:{field:"adTypeName",width:"120",title:"代码位类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.adTypeName))])]}}])})],1):e._e(),this.store.cName?a("div",{key:"cName"+new Date},[a("veui-table-column",{attrs:{field:"cName",width:"150",title:"计费名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.cName))])]}}])})],1):e._e(),this.store.webDomain?a("div",{key:"webDomain"+new Date},[a("veui-table-column",{attrs:{field:"webDomain",width:"160",title:"媒体"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.webDomain))])]}}])})],1):e._e(),this.store.adPositionName?a("div",{key:"adPositionName"+new Date},[a("veui-table-column",{attrs:{field:"adPositionName",width:"160",title:"代码位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.adPositionName))]),a("div",[e._v("ID: "+e._s(t.adPositionId))])]}}])})],1):e._e(),a("veui-table-column",{attrs:{field:"view",width:"160",title:"广告展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.view)))])]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.income)))])]}}])}),this.store.pageViewName?a("div",[a("veui-table-column",{attrs:{field:"pageview",width:"160",title:"页面总展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.pageview)))])]}}])})],1):e._e(),a("veui-table-column",{attrs:{field:"click",width:"140",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.click)))])]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"140",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.ecpm)))])]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"130",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.toPercent(t.clickRatio)))])]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"140",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.cpc)))])]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"网盟推广报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s))])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-overlay",{attrs:{target:"slot",options:{attachment:"top left",targetAttachment:"top left",offset:"-40px 0px"},open:e.overlayshow,"overlay-class":"slot-filter-overlay"},on:{"update:open":function(t){e.overlayshow=t}}},[a("div",{directives:[{name:"outside",rawName:"v-outside:toggle",value:e.closeRelative,expression:"closeRelative",arg:"toggle"}],attrs:{tabindex:"-1"}},[a("veui-searchbox",{on:{search:e.searchSlot},model:{value:e.store.slotFliter.keyword,callback:function(t){e.$set(e.store.slotFliter,"keyword",t)},expression:"store.slotFliter.keyword"}}),a("div",{staticClass:"self-transfer"},[a("div",{staticClass:"self-transfer-table left-table"},[a("div",{staticClass:"self-transfer-header"},[a("span",{staticClass:"transfer-title"},[e._v("代码位列表"),a("span",{staticClass:"number"},[e._v(e._s(e.store.sLotTotalCount))])]),a("span",{staticClass:"op",on:{click:function(t){e.selectAll()}}},[e._v("全部添加")])]),a("div",{staticClass:"table-list left-table-list"},[a("table",[a("thead",[a("tr",[a("th",[e._v("代码位名称")]),a("th",[e._v("代码位ID")])])]),a("tbody",{class:{disabled:e.adpListDisable}},e._l(e.store.allSlot,function(t){return a("tr",{key:t.tu,class:{disabled:e.getState(t.tu)},on:{click:function(a){e.selectItem(t)}}},[a("td",[e._v(" "+e._s(t.name||"--")+" ")]),a("td",[e._v(" "+e._s(t.tu)+" ")])])}))])]),a("div",{staticClass:"transfer-page"},[a("pag",{attrs:{page:e.store.slotFliter.pageNo,"page-size":e.store.slotFliter.pageSize,total:e.store.sLotTotalCount},on:{redirect:e.slotTo}})],1)]),a("div",{staticClass:"self-transfer-table right-table"},[a("div",{staticClass:"self-transfer-header"},[a("span",{staticClass:"transfer-title"},[e._v("已选代码位\n                            "),e.adpListDisable?e._e():a("span",{staticClass:"number"},[e._v(e._s(e.store.selectedSlot.length))]),e.adpListDisable?a("span",{staticClass:"number"},[e._v("全部")]):e._e()]),a("span",{staticClass:"op",on:{click:e.delAllAdp}},[e._v("全部删除")])]),a("div",{staticClass:"table-list right-table-list"},[a("table",[a("tbody",[e.adpListDisable?a("tr",[e._v("已选全部代码位")]):e._e(),e._l(e.store.selectedSlot,function(t){return e.adpListDisable?e._e():a("tr",{key:t.tu,on:{click:function(a){e.deleletItem(t.tu)}}},[a("td",[e._v(" "+e._s(t.name||"--")+" ")]),a("td",[e._v(" ID: "+e._s(t.tu)+" ")])])})],2)])])])]),a("veui-button",{staticClass:"slot-button",attrs:{ui:"primary small"},on:{click:e.subCancelAdp}},[e._v("确定")])],1)]),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"网盟推广报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s))])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));Zo.options.__file="BiddingReportView.vue";var Xo=Zo.exports,en=new Date((new Date).setHours(0,0,0,0)),tn=new Date(en-864e5),an=new Date(en-0-1e3),sn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","分渠道报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[tn,an]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contrastRange",[new Date(new Date-12096e5),new Date(new Date-6912e5)]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{order:"desc",orderBy:"time",orders:"desc",orderBys:"time",cId:"",cproChannelId:[],dimensions:"",timeGranularity:"day",metrics:"view,income,click,pageview,clickRatio,ecpm,cpc",filterFields:"rtbTypeId,sellTypeId,getCproChannel",filterValues:"0|1|1",begin:a.range?w()(a.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:a.range?w()(a.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"defaultArgs",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"分渠道报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"分渠道报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cId",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cnList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"channelList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterchName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cproChannelName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chart",{}),a}var a;return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getToolReportAllQuery,this.getCnList=this.api.getCnListRequester,this.getChannelMgList=this.api.getChannelMgList,this.getReportSum=this.api.getToolReportSum,this.save=this.api.saveToolReport;var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin&&(this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:an]),e.end&&!e.begin&&(this.range=[tn,w()(e.end)._d]);var a=[],i=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=i/864e5,a[1]=w()(this.filter.begin).valueOf()-864e5,a[0]=w()(a[1]).valueOf()-i,a[0]=w()(a[0]).format("YYYYMMDD"),a[1]=w()(a[1]).format("YYYYMMDD"),e.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d]):this.compareRange=[w()(a[0])._d,w()(a[1])._d]}},{key:"getChannel",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a,i,s,l,r,o,n,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCnList();case 2:for(t=e.sent,a=st()(t),i=a.length,s=0;s<i;s++)this.cnList.push({label:a[s].cname,value:a[s].cid});if(this.filter.cId=a[0].cid||null,l={cid:this.filter.cId},this.filter.cId)return e.next=11,this.getChannelMgList(l);e.next=13;break;case 11:if((r=e.sent).currentChannelVo.urlChannelList)for(o=st()(r.currentChannelVo.urlChannelList),n=o.length,c=0;c<n;c++)this.channelList.push({label:o[c].chName,value:o[c].chid});case 13:return e.abrupt("return",this.filter.cId);case 14:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"initListData",value:function(){}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.cproChannelId)&&(t.cproChannelId=a.cproChannelId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;this.getRouteQuery({}),Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.cproChannelId&&(this.filter.cproChannelId=this.filter.cproChannelId?this.filter.cproChannelId.split(","):[],this.filter.cproChannelId=Ea()(this.filter.cproChannelId,function(e){return Number(e)})),"string"==typeof this.filter.cId&&(this.filter.cId=Number(this.filter.cId)),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){return this.fillFilterFromQuery(),{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"prepareData",value:function(e){return e}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["slotview","income","pageview","ecpm","click","clickRatio","cpc"])}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"channel",cId:this.filter.cId,filterchName:this.filterchName,cproChannelId:this.filter.cproChannelId});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var ln,rn,on,nn=Object(u.a)(G.a,sn,{name:"ChannelReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"self-card":Qo.a,"veui-grid-container":x.a,"veui-grid-row":R.a,"veui-grid-column":T.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,"veui-searchbox":Pe.a,"select-self":ea.a,"datepicker-self":ba.a},data:function(){var e=this;return{metrics:"view,income,click,pageview,clickRatio,ecpm,cpc",field:"rtbTypeId,sellTypeId,getCproChannel,",value:"0|1|1|",channelIdKey:"",channelIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.channelIdKey.toLowerCase())},item:[],labelForTag:{cproChannelId:"渠道"},filterItem:{cproChannelId:this.store.channelList},subscribeVisible:!1,downloadVisible:!1,dateShortCut:[{label:"昨天",from:-1,to:0},{label:"最近7天",from:-7,to:-1},{label:"上周",from:{startOf:"week",weeks:-1},to:{startOf:"week",days:-1}},{label:"上个月",from:{startOf:"month",months:-1},to:{startOf:"month",days:-1}},{label:"上个季度",from:{startOf:"quarter",quarters:-1},to:{startOf:"quarter",days:-1}}],freRule:[{label:"一次",value:0},{label:"每天",value:1},{label:"每周",value:2},{label:"每月",value:3},{label:"每季度",value:4}],saveFormType:[{value:0,label:"CSV"},{value:1,label:"EXCEL"}],formType:[{value:0,label:"CSV"},{value:1,label:"EXCEL"}],compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},created:function(){},mounted:function(){this.initFilter()},computed:{chartOptions:function(){return this.store.chartData}},methods:{changeCn:(on=Object(q.a)(regeneratorRuntime.mark(function e(t){var a,i,s,l,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={cid:this.store.filter.cId},e.next=3,this.store.getChannelMgList(a);case 3:if((i=e.sent).currentChannelVo.urlChannelList)for(s=st()(i.currentChannelVo.urlChannelList),l=s.length,r=0;r<l;r++)this.store.channelList.push({label:s[r].chName,value:s[r].chid});else this.store.channelList=[];this.store.filter.cproChannelId=[],this.store.tagFilter=st()(this.store.filter);case 7:case"end":return e.stop()}},e,this)})),function(e){return on.apply(this,arguments)}),initFilter:(rn=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a,i,s,l,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.global.reportfilterSelectItems,e.next=3,this.store.getChannel();case 3:if(this.store.filter.cId=e.sent,a={},t){for(s={dimensions:i=""},l=0;l<t.filterValues.length;l++)i+=t.filterValues[l].join(",")+"|",s[t.filterFields[l]]=t.filterValues[l];s.dimensions=t.dimensions.join(","),a={filterFields:t.filterFields.join(","),filterValues:i.slice(0,-1),metrics:t.metrics.join(","),begin:t.begin,end:t.end},delete s.rtbTypeId,delete s.sellTypeId,delete s.getCproChannel,this.store.filter=Object(v.a)({},this.store.filter,a,s),delete(r=st()(JSON.parse(t.typeInfo))).reportType,r.cId&&(this.store.filter.cId=r.cId),r.cproChannelId&&(this.store.filter.cproChannelId=r.cproChannelId),this.store.filterchName=r.filterchName,this.refreshTableByFilter()}else o=this.store.getRouteQuery(),(a={filterFields:o.filterFields?o.filterFields+"|":this.field+"cId,",filterValues:o.filterValues?o.filterValues+"|":this.value+this.store.filter.cId+"|",dimensions:o.dimensions}).filterFields=a.filterFields.slice(0,-1),a.filterValues=a.filterValues.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,a),this.refreshTableByFilter();this.getGeneralData(a),this.getChartData(a);case 8:case"end":return e.stop()}},e,this)})),function(){return rn.apply(this,arguments)}),getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics};delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){for(var a in 0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),0===e.diffResults.length&&(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.diffCardData)t.store.diffCardData[a]=Number(t.store.diffCardData[a])})},getChartData:function(e){var t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics};delete e.dimensions,this.store.getChart(Object(v.a)({},t,e))},formatLocal:function(e){return null===e?"--":"number"==typeof e||"string"==typeof e?e.toLocaleString():e},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]},format:function(e){return w()(e).format("YYYY-MM-DD")},toPercent:function(e){if(null===e)return"--";var t=Number(e);return(t=t.toFixed(2))+"%"},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"分渠道报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"分渠道报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,e.cproChannelId&&delete e.cproChannelId,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},deleteFilters:function(e){if("all"===e)return this.store.filter.cproChannelId=[],this.store.filterchName=!1,this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),void this.refreshTableByFilter();this.store.filter[e]=[],this.store.filterchName=!1,this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},refreshGeneralDataByFilter:function(){var e=st()(this.store.filter.cproChannelId),t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics,filterFields:this.field+"cId,",filterValues:this.value+this.store.filter.cId+"|"};0===e.length||this.store.filterchName||(t.filterFields+="cproChannelId,",t.filterValues+=e.join(",")+"|"),t.filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.getGeneralData(t)},refreshChartByFilter:function(){var e=st()(this.store.filter.cproChannelId),t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics,filterFields:this.field+"cId,",filterValues:this.value+this.store.filter.cId+"|"};e&&0!==e.length&&!this.store.filterchName&&(t.filterFields+="cproChannelId,",t.filterValues+=e.join(",")+"|"),t.filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.store.getChart(t)},refreshTableByFilter:function(){var e=st()(this.store.filter.cproChannelId)||[],t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics,filterFields:this.field+"cId,",filterValues:this.value+this.store.filter.cId+"|",dimensions:"",pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};e&&0!==e.length&&!this.store.filterchName?(t.filterFields+="cproChannelId,",t.filterValues+=e.join(",")+"|",t.dimensions+="cproChannelName,",this.store.cproChannelName=!0):this.store.cproChannelName=!1,this.store.filterchName&&(t.dimensions+="cproChannelName,",this.store.cproChannelName=!0),t.filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),t.dimensions=t.dimensions.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,t),this.store.submitSearch(),this.$forceUpdate()},requestSearch:function(){this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},compareDate:function(e){},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(ln=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return ln.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),cn=(a("21b0"),Object(p.a)(nn,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"tool-report-view"},[a("template",{slot:"filterContent"},[a("veui-select",{staticClass:"long-select",attrs:{placeholder:"计费名",options:e.store.cnList},on:{change:e.changeCn},model:{value:e.store.filter.cId,callback:function(t){e.$set(e.store.filter,"cId",t)},expression:"store.filter.cId"}}),a("select-self",{attrs:{placeholder:"渠道",isall:e.store.filterchName,options:e.store.channelList,filter:e.channelIdFilter,multi:!0},on:{"update:isall":function(t){e.$set(e.store,"filterchName",t)}},model:{value:e.store.filter.cproChannelId,callback:function(t){e.$set(e.store.filter,"cproChannelId",t)},expression:"store.filter.cproChannelId"}},[e.store.channelList&&8<e.store.channelList.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-input",{staticClass:"select-filter",attrs:{ui:"tiny"},model:{value:e.channelIdKey,callback:function(t){e.channelIdKey=t},expression:"channelIdKey"}})],1):e._e()]),a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},on:{select:e.compareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary small"},on:{click:e.requestSearch}},[e._v("查询")]),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("下载\n            ")],1)],1),a("filter-tags",{attrs:{"init-filter":e.store.tagFilter,"filter-options":e.filterItem,label:e.labelForTag},on:{deleteFilter:e.deleteFilters}})],1),a("template",{slot:"batchContent"},[a("veui-grid-container",{attrs:{columns:28}},[a("veui-grid-row",[a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"代码位总展现量",content:e.formatLocal(e.store.cardData.view),addValue:e.store.diffCardData.view}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"页面总展现量",content:e.formatLocal(e.store.cardData.pageview),addValue:e.store.diffCardData.pageview}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"预计总收入（元）",content:e.formatLocal(e.store.cardData.income),addValue:e.store.diffCardData.income}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"总点击量",content:e.formatLocal(e.store.cardData.click),addValue:e.store.diffCardData.click}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"eCPM（元）",content:e.formatLocal(e.store.cardData.ecpm),addValue:e.store.diffCardData.ecpm}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"总点击率",content:e.toPercent(e.store.cardData.clickRatio||0),addValue:e.store.diffCardData.clickRatio}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("self-card",{attrs:{title:"CPC（元）",content:e.formatLocal(e.store.cardData.cpc),addValue:e.store.diffCardData.cpc}})],1)])],1)],1),a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatTime(t.time)))])]}}])}),this.store.cproChannelName?a("veui-table-column",{attrs:{field:"cproChannelName",width:"150",title:"渠道"}}):e._e(),a("veui-table-column",{attrs:{field:"view",width:"160",title:"代码位展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.view)))])]}}])}),a("veui-table-column",{attrs:{field:"pageview",width:"160",title:"页面展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.pageview)))])]}}])}),a("veui-table-column",{attrs:{field:"income",width:"180",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.income)))])]}}])}),a("veui-table-column",{attrs:{field:"click",width:"150",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.click)))])]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"160",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.ecpm)))])]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"160",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.toPercent(t.clickRatio)))])]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"160",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatLocal(t.cpc)))])]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"分渠道报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s))])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"分渠道报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s))])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));cn.options.__file="ChannelReportView.vue";var un=cn.exports,dn=a("17fb"),fn=a.n(dn),pn=(new K.a({text:"cpro",alias:"CPRO",value:1,cnName:"网盟推广合作网页版"},{text:"cproApp",alias:"CPRO_APP",value:2,cnName:"网盟推广合作APP版"},{text:"search",alias:"SEARCH",value:3,cnName:"搜索"},{text:"dan",alias:"DAN",value:4,cnName:"鸿媒体"},{text:"tuan",alias:"TUAN",value:5,cnName:"团购"},{text:"software",alias:"SOFTWARE",value:6,cnName:"工具栏"},{text:"reflux",alias:"REFLUX",value:7,cnName:"回流"},{text:"hao123",alias:"HAO123",value:8,cnName:"Hao123"}),new K.a({text:"自定义",alias:"DIY",value:0},{text:"网址",alias:"URL",value:1}),new K.a({text:"未禁用",alias:"NOT_BAN",value:0},{text:"禁用",alias:"BANED",value:1}),new K.a({text:"千次IP分成合作",alias:"IP",value:1},{text:"搜索分成合作",alias:"SEARCH",value:2},{text:"CPA分成合作",alias:"CPA",value:3})),hn=new K.a({text:"设Hao123为首页",alias:"SET_HOME_PAGE",value:1},{text:"网址站跳转",alias:"REDIRECT",value:2},{text:"桌面快捷方式",alias:"DESTTOP_SHORTCUT",value:3},{text:"百度浏览器合作",alias:"BAIDU_BROWSER",value:4},{text:"第三方浏览器内置Hao123",alias:"THIRD_PART_BROWSER_BUILT_IN",value:5}),mn=new K.a({text:"设Hao123为首页",alias:"SET_HOME_PAGE",value:1},{text:"桌面快捷方式",alias:"DESTTOP_SHORTCUT",value:3},{text:"百度浏览器合作",alias:"BAIDU_BROWSER",value:4}),vn=new K.a({text:"百度卫士",alias:"BAIDU_WEISHI",value:7},{text:"第三方浏览器合作",alias:"THIRD_PART_BROWSER_COOPERATION",value:8}),bn=new Date(new Date-6048e5),yn=new Date(new Date-864e5),gn=function(e){function t(){var e,a,s;Object(i.a)(this,t);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return s=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(n))),Object(O.a)(Object(_.a)(Object(_.a)(s)),"title","Hao123报告"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"range",[new Date(new Date-6048e5),new Date(new Date-864e5)]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"hao123ReportTypes",pn.toOptions()),Object(O.a)(Object(_.a)(Object(_.a)(s)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(s)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(s)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(s)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"lastClickLeName",""),Object(O.a)(Object(_.a)(Object(_.a)(s)),"HAO123_BIZ_TYPE_MAP",(a={},Object(O.a)(a,pn.IP,hn.toOptions()),Object(O.a)(a,pn.SEARCH,mn.toOptions()),Object(O.a)(a,pn.CPA,vn.toOptions()),a)),Object(O.a)(Object(_.a)(Object(_.a)(s)),"tnames",[]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"tnameMap",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filterSelAll",{tnames:!1,bizType:!1}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filterTags",{bizType:[],tnames:[]}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filterClick",{bizType:[],tnames:[]}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filter",Object(v.a)({},Q()(s.filter,"timeRange"),{order:"desc",orderBy:"time",orders:"desc",orderBys:"time",timeGranularity:"day",hao123ReportTypeId:1,bizType:[],tnames:[],metrics:"ip,ipEcpm,income",filterFields:"rtbTypeId,unionBizTypeId,hao123ReportTypeId",filterValues:"2|8|1",begin:s.range?w()(s.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:s.range?w()(s.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD"),dimensions:"hao123BizTypeName,tnameName"})),Object(O.a)(Object(_.a)(Object(_.a)(s)),"subData",{name:"hao123报告_".concat(s.format(s.filter.begin),"~").concat(s.format(s.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"downloadData",{fileName:"hao123报告_".concat(s.format(s.filter.begin),"~").concat(s.format(s.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(s)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(s)),"axioss",Vt.a.create({responseType:"arraybuffer",paramsSerializer:function(e){return $t.a.stringify(e,{encode:!0})}})),s}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getReportAllQuery,this.getGeneralDataRequester=this.api.getHao123ReportSum,this.getChatDataRequester=this.api.getHao123ReportSum,this.save=this.api.saveReport,this.getHao123Tnames=this.api.getHao123Tnames;var a=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);a.begin&&(this.range=[w()(a.begin)._d,a.end?w()(a.end)._d:yn]),a.end&&!a.begin&&(this.range=[bn,w()(a.end)._d]);var i=[],s=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=s/864e5,i[1]=w()(this.filter.begin).valueOf()-864e5,i[0]=w()(i[1]).valueOf()-s,i[0]=w()(i[0]).format("YYYYMMDD"),i[1]=w()(i[1]).format("YYYYMMDD"),a.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(a.contrastBegin)._d,w()(a.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(i[0])._d,w()(i[1])._d]),this.getHao123Tnames().then(function(t){e.tnameMap=e.groupByTname(t)})}},{key:"initListData",value:function(){}},{key:"adaptData",value:function(e){return{result:e.results,totalCount:e.totalCount,pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,order:this.filter.order,orderBy:this.filter.orderBy}}},{key:"tableSort",value:function(e,t){this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"groupByTname",value:function(e){return fn.a.chain(e).map(function(e){return{value:e.tname,label:e.tname,hao123ReportType:4===e.accountType?pn.CPA:e.accountType,hao123BizType:e.bizType,status:e.status}}).groupBy("hao123ReportType").reduce(function(e,t,a){return e[a]=fn.a.groupBy(t,"hao123BizType"),e},{}).value()}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"submit",value:function(e){var t=st()(this.filter);delete t.contrastBegin,delete t.contrastEnd,delete t.orders,delete t.orderBys,t.emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"hao123",hao123ReportTypeId:this.filter.hao123ReportTypeId,bizType:this.filterClick.bizType,tnames:this.filterClick.tnames});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a),_n={name:"IPReportTable",components:{"veui-table":ut.a,"veui-table-column":de.a,"veui-pager":dt.a},props:["data"],data:function(){return{order:!1,orderBy:null}},methods:{tableSort:function(e,t){this.orderBy=e,this.order=t,this.$emit("sortHao123Table",e,t)},formatLocal:function(e){return"number"==typeof e||"string"==typeof e?e.toLocaleString():e||"--"}}},On=(a("ba23"),Object(p.a)(_n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("veui-table",{attrs:{data:e.data,"order-by":e.orderBy,order:e.order},on:{sort:e.tableSort}},[a("veui-table-column",{attrs:{field:"time",title:"日期",sortable:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v(e._s(t.item.time))])]}}])}),a("veui-table-column",{attrs:{field:"hao123BizTypeName",title:"业务类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.item.hao123BizTypeName))]}}])}),a("veui-table-column",{attrs:{field:"tnameName",title:"计费名",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.item.tnameName))]}}])}),a("veui-table-column",{attrs:{field:"ip",title:"独立IP",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.ip)))]}}])}),a("veui-table-column",{attrs:{field:"ipEcpm",title:"千次IP收入",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.ipEcpm)))]}}])}),a("veui-table-column",{attrs:{field:"income",title:"预计收入",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.income)))]}}])})],1)},[],!1,null,null,null));On.options.__file="IPReportTable.vue";var Cn=On.exports,Dn={name:"CpaReportTable",components:{"veui-table":ut.a,"veui-table-column":de.a,"veui-pager":dt.a},props:["data"],data:function(){return{order:!1,orderBy:null}},methods:{tableSort:function(e,t){this.orderBy=e,this.order=t,this.$emit("sortHao123Table",e,t)},formatLocal:function(e){return"number"==typeof e||"string"==typeof e?e.toLocaleString():e||"--"},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]}}},wn=(a("35e2"),Object(p.a)(Dn,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("veui-table",{attrs:{data:e.data,"order-by":e.orderBy,order:e.order},on:{sort:e.tableSort}},[a("veui-table-column",{attrs:{field:"time",title:"日期",sortable:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v(e._s(e.formatTime(t.item.time)))])]}}])}),a("veui-table-column",{attrs:{field:"hao123BizTypeName",title:"业务类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.item.hao123BizTypeName))]}}])}),a("veui-table-column",{attrs:{field:"tnameName",title:"计费名",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.item.tnameName))]}}])}),a("veui-table-column",{attrs:{field:"installs",title:"安装量",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.installs)))]}}])}),a("veui-table-column",{attrs:{field:"installsIncome",title:"安装收入",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.installsIncome)))]}}])}),a("veui-table-column",{attrs:{field:"activates",title:"激活量",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.activates)))]}}])}),a("veui-table-column",{attrs:{field:"activatesIncome",title:"激活收入",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.activatesIncome)))]}}])}),a("veui-table-column",{attrs:{field:"actives",title:"活跃量",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.actives)))]}}])}),a("veui-table-column",{attrs:{field:"activesIncome",title:"活跃收入",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.activesIncome)))]}}])}),a("veui-table-column",{attrs:{field:"income",title:"预计收入",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.income)))]}}])})],1)},[],!1,null,null,null));wn.options.__file="CpaReportTable.vue";var jn=wn.exports,kn={name:"SearchReportTable",components:{"veui-table":ut.a,"veui-table-column":de.a,"veui-pager":dt.a},props:["data"],data:function(){return{order:!1,orderBy:null}},methods:{tableSort:function(e,t){this.orderBy=e,this.order=t,this.$emit("sortHao123Table",e,t)},formatLocal:function(e){return"number"==typeof e||"string"==typeof e?e.toLocaleString():e||"--"},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]}}},Sn=(a("87b8"),Object(p.a)(kn,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("veui-table",{attrs:{data:e.data,"order-by":e.orderBy,order:e.order},on:{sort:e.tableSort}},[a("veui-table-column",{attrs:{field:"time",title:"日期",sortable:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"table-multi-line"},[e._v(e._s(e.formatTime(t.item.time)))])]}}])}),a("veui-table-column",{attrs:{field:"hao123BizTypeName",title:"业务类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.item.hao123BizTypeName))]}}])}),a("veui-table-column",{attrs:{field:"tnameName",title:"计费名",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.item.tnameName))]}}])}),a("veui-table-column",{attrs:{field:"view",title:"展现量",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.view)))]}}])}),a("veui-table-column",{attrs:{field:"click",title:"点击量",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.click)))]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",title:"点击率",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.clickRatio)))]}}])}),a("veui-table-column",{attrs:{field:"ecpm",title:"eCPM",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.ecpm)))]}}])}),a("veui-table-column",{attrs:{field:"income",title:"预计收入",width:"160",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatLocal(t.item.income)))]}}])})],1)},[],!1,null,null,null));Sn.options.__file="SearchReportTable.vue";var xn=Sn.exports;Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var Rn,Tn=Object(u.a)(G.a,gn,{name:"Hao123ReportView",components:{"v-chart":M.a,"veui-button":S.a,"veui-icon":y.a,"veui-table":ut.a,"veui-table-column":de.a,"veui-select":N.a,"veui-dropdown":wt.a,"veui-option":jt.a,"veui-checkbox-group":Qt.a,"veui-checkbox":he.a,"veui-radio":je.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-date-picker":Jt.a,"veui-field":ce.a,"veui-switch":we.a,"veui-textarea":$e.a,"veui-form":Kt.a,"veui-tooltip":I.a,"ip-table":Cn,"cpa-table":jn,"search-table":xn,"select-self":ea.a,FilterTags:va.a},data:function(){var e=this;return{sw:!1,subscribeVisible:!1,downloadVisible:!1,hao123ReportTypeId:1,ip:"--",ipEcpm:"--",income:"--",ipDiff:null,incomeDiff:null,ipEcpmDiff:null,view:"--",click:"--",clickRatio:"--",ecpm:"--",ecpmDiff:null,viewDiff:null,clickRatioDiff:null,clickDiff:null,installs:"--",installsIncome:"--",activates:"--",activatesIncome:"--",activesIncome:"--",actives:"--",installsDiff:null,installsIncomeDiff:null,activatesDiff:null,activatesIncomeDiff:null,activesDiff:null,activesIncomeDiff:null,chartData:{},accountQualityList:[],compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}],downloadData:{type:"csv",name:"Hao123报告"},bizTypeIdKey:"",bizTypesFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.bizTypeIdKey.toLowerCase())},tnamesIdKey:"",tnamesFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.tnamesIdKey.toLowerCase())},labelForTag:{hao123ReportTypes:"结算类型",bizType:"业务类型",tnames:"计费名"},bizTypes:this.store.HAO123_BIZ_TYPE_MAP[this.store.filter.hao123ReportTypeId],readyRender:!1}},computed:{filterItem:function(){return{hao123ReportTypes:this.store.hao123ReportTypes,bizType:this.bizTypes,tnames:this.tnames}},options:function(){return this.chartData},chartDimesionKeys:function(){var e=["totalIncome","ip","ipEcpm"];switch(this.store.filter.hao123ReportTypeId){case 1:break;case 2:e=["view","click","clickRatio","ecpm","totalIncome"];break;case 3:e=["installs","installsIncome","activates","activatesIncome","actives","activesIncome","totalIncome"]}return e},tnames:function(){var e=this.store.filter.hao123ReportTypeId,t=this.store.filterClick.bizType,a=this.store.tnameMap[e];return a=a?this.getTnames(e,t):[],Object(Ve.a)(a)}},beforeDestroy:function(){delete this.global.reportfilterSelectItems},mounted:function(){var e=this,t=this.global.reportfilterSelectItems,a={};if(t){for(var i="",s=0;s<t.filterValues.length;s++)i+=t.filterValues[s].join(",")+"|";a={filterFields:t.filterFields.join(","),filterValues:i.slice(0,-1),metrics:t.metrics.join(","),begin:t.begin,end:t.end},this.store.filter=Object(v.a)({},this.store.filter,a);var l=st()(JSON.parse(t.typeInfo));delete l.reportType,l.hao123ReportTypeId&&(this.store.filter.hao123ReportTypeId=l.hao123ReportTypeId),l.bizType&&(this.store.filterClick.bizType=l.bizType,this.store.filterTags.bizType=st()(this.store.filterClick.bizType)),setTimeout(function(){e.getBizTypes(),e.changeBizTypes()},3e3),l.tnames&&(this.store.filterClick.tnames=l.tnames,this.store.filterTags.tnames=st()(this.store.filterClick.tnames)),this.refreshTableByFilter()}else{var r=this.store.getRouteQuery();a={filterFields:r.filterFields||"rtbTypeId,unionBizTypeId,hao123ReportTypeId",filterValues:r.filterValues||"2|8|1",metrics:r.metrics||"ip,ipEcpm,income"},this.store.filter=Object(v.a)({},this.store.filter,a),this.refreshTableByFilter()}this.getGeneralData(a),this.getChartData(a)},methods:{getTnames:function(e,t){var a,i=t.length,s=[];for(a=0;a<=i;a++){var l=t[a],r=this.store.tnameMap[e][l];r&&r.forEach(function(e){s.push(e)})}return s},tableSort:function(){var e;(e=this.store).tableSort.apply(e,arguments)},formatLocal:function(e){return"number"==typeof e||"string"==typeof e?e.toLocaleString():e||"--"},changeReportType:function(){this.store.filter=Object(v.a)({},this.store.filter,{order:"desc",orderBy:"time",orders:"desc",orderBys:"time"}),this.getBizTypes()},getBizTypes:function(){var e=this.store.filter.hao123ReportTypeId,t=this.store.HAO123_BIZ_TYPE_MAP[e];this.bizTypes=t},resetTnames:function(){this.store.filter.tnames=[]},legendChange:function(e){var t=Object(j.b)(e,this.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},getChartData:function(e){var t=this;this.store.lastClickLeName="";var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"income,ip,ipEcpm",filterFields:"rtbTypeId,hao123ReportTypeId,hao123BizTypeId,unionBizTypeId",filterValues:"2|1|1|8"};this.store.getChatDataRequester(Object(v.a)({},a,e)).then(function(e){t.store.lastClickLeName="",t.chartData=Object(j.a)(e.results,t.chartDimesionKeys),t.readyRender=!0})},getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"ip,ipEcpm,income",filterFields:"rtbTypeId,hao123ReportTypeId,hao123BizTypeId,unionBizTypeId",filterValues:"2|1|1|8"};this.store.getGeneralDataRequester(Object(v.a)({},a,e)).then(function(e){var a=e.results[0];a&&(t.ip=a.ip||0,t.ipEcpm=a.ipEcpm||0,t.income=a.income||0,t.view=a.view||0,t.click=a.click||0,t.clickRatio=a.clickRatio||0,t.ecpm=a.ecpm||0,t.installs=a.installs||0,t.installsIncome=a.installsIncome||0,t.activates=a.activates||0,t.activatesIncome=a.activatesIncome||0,t.activesIncome=a.activatesIncome||0,t.actives=a.actives||0);var i=e.diffResults[0];t.ipDiff=Number(i.ip||0).toFixed(2),t.incomeDiff=Number(i.income||0).toFixed(2),t.ipEcpmDiff=Number(i.ipEcpm||0).toFixed(2),t.viewDiff=Number(i.view||0).toFixed(2),t.clickDiff=Number(i.click||0).toFixed(2),t.clickRatioDiff=Number(i.clickRatio||0).toFixed(2),t.ecpmDiff=Number(i.ecpm||0).toFixed(2),t.installsDiff=Number(i.installs||0).toFixed(2),t.installsIncomeDiff=Number(i.installsIncome||0).toFixed(2),t.activatesDiff=Number(i.activates||0).toFixed(2),t.activatesIncomeDiff=Number(i.activatesIncome||0).toFixed(2),t.activesDiff=Number(i.actives||0).toFixed(2),t.activesIncomeDiff=Number(i.activesIncome||0).toFixed(2)})},refreshChartByFilter:function(){var e=this,t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"ip,ipEcpm,income"},a=this.store.filter.hao123ReportTypeId;this.hao123ReportTypeId=a;var i=this.store.filterTags.bizType,s=this.store.filterTags.tnames;1===a?t.metrics="ip,ipEcpm,income":2===a?t.metrics="view,click,clickRatio,income,ecpm":3===a&&(t.metrics="installs,installsIncome,activates,activatesIncome,actives,activesIncome,income"),0<i.length?(t.filterFields="rtbTypeId,hao123ReportTypeId,hao123BizTypeId,unionBizTypeId",t.filterValues="2|"+a+"|"+i.join(",")+"|8"):(t.filterFields="rtbTypeId,hao123ReportTypeId,unionBizTypeId",t.filterValues="2|"+a+"|8"),0<s.length&&(t.filterFields+=",tnameId",t.filterValues+="|"+s.join(",")),this.store.lastClickLeName="",this.store.getChatDataRequester(t).then(function(t){e.chartData=Object(j.a)(t.results,e.chartDimesionKeys)})},refreshTableByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:"ip,ipEcpm,income",dimensions:"hao123BizTypeName,tnameName",pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize},t=this.store.filter.hao123ReportTypeId;this.hao123ReportTypeId=t;var a=this.store.filterTags.bizType,i=this.store.filterTags.tnames;2===t&&(e.metrics="view,click,clickRatio,income,ecpm"),3===t&&(e.metrics="installs,installsIncome,activates,activatesIncome,actives,activesIncome,income"),0<a.length?(e.filterFields="rtbTypeId,hao123ReportTypeId,hao123BizTypeId,unionBizTypeId",e.filterValues="2|"+t+"|"+a.join(",")+"|8"):(e.filterFields="rtbTypeId,hao123ReportTypeId,unionBizTypeId",e.filterValues="2|"+t+"|8"),0<i.length&&(e.filterFields+=",tnameId",e.filterValues+="|"+i.join(",")),this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},refreshGeneralDataByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:"ip,ipEcpm,income"},t=this.store.filter.hao123ReportTypeId;this.hao123ReportTypeId=t;var a=this.store.filterTags.bizType,i=this.store.filterTags.tnames;2===t&&(e.metrics="view,click,clickRatio,income,ecpm"),3===t&&(e.metrics="installs,installsIncome,activates,activatesIncome,actives,activesIncome,income"),0<a.length?(e.filterFields="rtbTypeId,hao123ReportTypeId,hao123BizTypeId,unionBizTypeId",e.filterValues="2|"+t+"|"+a.join(",")+"|8"):(e.filterFields="rtbTypeId,hao123ReportTypeId,unionBizTypeId",e.filterValues="2|"+t+"|8"),0<i.length&&(e.filterFields+=",tnameId",e.filterValues+="|"+i.join(",")),this.getGeneralData(e)},requestAfterFilter:function(){this.store.filterTags.bizType=st()(this.store.filterClick.bizType),this.store.filterTags.tnames=st()(this.store.filterClick.tnames),this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},getRatio:function(e){return/^[0-9]+.?[0-9]*$/.test(e)?e+"%":e||"--"},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return!1},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t=t/864e5+1,this.store.dateRange=0===t?1:t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*this.store.dateRange*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},compareDate:function(e){var t=[];e&&(t[0]=e,t[1]=new Date(e.valueOf()+24*this.store.dateRange*3600*1e3),this.store.canCompareRange=!0,this.store.compareRange=t)},clickCompare:function(){this.$refs.compare.expanded?(this.store.canCompareRange=!1,this.store.compareRange=this.store.compareRange[0]):this.store.canCompareRange=!0},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"Hao123报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(Rn=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sw)return e.prev=1,e.t0=this,e.next=5,this.store.submit();e.next=12;break;case 5:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),this.handleError(e.t2);case 12:case"end":return e.stop()}},e,this,[[1,9]])})),function(){return Rn.apply(this,arguments)}),handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e)},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.store.fail(e),this.$emit("submitfail",e)},subClick:function(){this.subscribeVisible=!0,this.sw=!1,this.store.subData={name:"Hao123报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},format:function(e){return w()(e).format("YYYY-MM-DD")},deleteFilters:function(e){if("all"===e)return this.store.filterClick.bizType=[],this.store.filterClick.tnames=[],void this.requestAfterFilter();this.store.filterClick[e]=[],this.requestAfterFilter()}}}),In=(a("584f"),Object(p.a)(Tn,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"content-report"},[a("template",{slot:"title"},[a("span",[e._v("Hao123报告")])]),a("template",{slot:"filterContent"},[a("veui-field",[a("veui-select",{staticClass:"long-select",attrs:{placeholder:"结算类型",options:this.store.hao123ReportTypes},on:{change:e.changeReportType},model:{value:e.store.filter.hao123ReportTypeId,callback:function(t){e.$set(e.store.filter,"hao123ReportTypeId",t)},expression:"store.filter.hao123ReportTypeId"}}),a("select-self",{attrs:{placeholder:"业务类型",isall:e.store.filterSelAll.bizType,options:this.bizTypes,filter:e.bizTypesFilter,multi:!0},on:{"update:isall":function(t){e.$set(e.store.filterSelAll,"bizType",t)}},model:{value:e.store.filterClick.bizType,callback:function(t){e.$set(e.store.filterClick,"bizType",t)},expression:"store.filterClick.bizType"}},[this.bizTypes&&8<this.bizTypes.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-input",{staticClass:"select-filter",attrs:{ui:"tiny"},model:{value:e.bizTypeIdKey,callback:function(t){e.bizTypeIdKey=t},expression:"bizTypeIdKey"}})],1):e._e()]),a("select-self",{attrs:{placeholder:"计费名",isall:e.store.filterSelAll.tnames,options:this.tnames,filter:e.tnamesFilter,multi:!0},on:{"update:isall":function(t){e.$set(e.store.filterSelAll,"tnames",t)}},model:{value:e.store.filterClick.tnames,callback:function(t){e.$set(e.store.filterClick,"tnames",t)},expression:"store.filterClick.tnames"}},[this.tnames&&8<this.tnames.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-input",{staticClass:"select-filter",attrs:{ui:"tiny"},model:{value:e.tnamesIdKey,callback:function(t){e.tnamesIdKey=t},expression:"tnamesIdKey"}})],1):e._e()]),a("span",{class:{block:"CONFIRMED"==e.store.status}},[a("veui-field",{staticClass:"veui-date-picker"},[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比")])],1),"CONFIRMED"===e.store.status?a("veui-field",[a("div",{on:{click:e.clickCompare}},["CONFIRMED"===e.store.status?a("veui-date-picker",{ref:"compare",attrs:{range:e.store.canCompareRange,compare:e.store.dateRange,clearable:"","disabled-date":e.disabledCompareDate},on:{select:e.compareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1)]):e._e(),a("veui-button",{staticClass:"submit-btn",attrs:{ui:"primary small"},on:{click:e.requestAfterFilter}},[e._v("查询")])],1)],1),a("div",{staticClass:"btn-wrapper"},[a("veui-button",{staticClass:"subscribeBtn",attrs:{ui:"alt"},on:{click:e.subClick}},[a("veui-icon",{staticClass:"btn-icon",attrs:{name:"subscribe"}}),e._v("订阅")],1),a("veui-button",{staticClass:"downloadBtn",attrs:{ui:"alt"},on:{click:e.downClick}},[a("veui-icon",{staticClass:"btn-icon",attrs:{name:"download"}}),e._v("下载")],1)],1),a("filter-tags",{attrs:{"init-filter":e.store.filterTags,"filter-options":e.filterItem,label:e.labelForTag},on:{deleteFilter:e.deleteFilters}})],1),a("template",{slot:"batchContent"},[1===this.hao123ReportTypeId?a("table",{staticClass:"general-table"},[a("tr",[a("th",[e._v("总IP量")]),a("th",[e._v("总千次IP收益（元）")]),a("th",[e._v("预计总收入（元）")])]),a("tr",[a("td",[e._v(e._s(e.formatLocal(this.ip)))]),a("td",[e._v(e._s(e.formatLocal(this.ipEcpm)))]),a("td",[e._v(e._s(e.formatLocal(this.income)))])]),a("tr",[0<this.ipDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.ipDiff)+"%\n                    ")])],1):0==this.ipDiff?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.ipDiff).toFixed(2))+"%\n                    ")])],1),0<this.ipEcpmDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.ipEcpmDiff)+"%\n                    ")])],1):0==this.ipEcpmDiff?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.ipEcpmDiff).toFixed(2))+"%\n                    ")])],1),0<this.incomeDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.incomeDiff)+"%\n                    ")])],1):0==this.incomeDiff?a("td",{staticClass:"equal"},[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("span",[e._v("--")]),a("veui-icon",{ref:"equal",staticClass:"title-notice-icon",attrs:{name:"info-circle-o"}}),a("veui-tooltip",{attrs:{position:"top-start",target:"equal",trigger:"hover","overlay-class":"notice-tooltip"}},[a("div",{},[e._v("与前一日持平")])])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.incomeDiff).toFixed(2))+"%\n                    ")])],1)])]):e._e(),2===this.hao123ReportTypeId?a("table",{staticClass:"general-table"},[a("tr",[a("th",[e._v("总展现量")]),a("th",[e._v("预计总收入（元）")]),a("th",[e._v("总点击量")]),a("th",[e._v("eCPM")]),a("th",[e._v("总点击率")])]),a("tr",[a("td",[e._v(e._s(e.formatLocal(this.view)))]),a("td",[e._v(e._s(e.formatLocal(this.income)))]),a("td",[e._v(e._s(e.formatLocal(this.click)))]),a("td",[e._v(e._s(e.formatLocal(this.ecpm)))]),a("td",[e._v(e._s(e.formatLocal(this.clickRatio))+"%")])]),a("tr",[0<this.viewDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.viewDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.viewDiff).toFixed(2))+"%\n                    ")])],1),0<this.incomeDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.incomeDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.incomeDiff).toFixed(2))+"%\n                    ")])],1),0<this.clickDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.clickDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.clickDiff).toFixed(2))+"%\n                    ")])],1),0<this.ecpmDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.ecpmDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.ecpmDiff).toFixed(2))+"%\n                    ")])],1),0<this.clickRatioDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.clickRatioDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.clickRatioDiff).toFixed(2))+"%\n                    ")])],1)])]):e._e(),3===this.hao123ReportTypeId?a("table",{staticClass:"general-table"},[a("tr",[a("th",[e._v("安装量")]),a("th",[e._v("安装收入（元）")]),a("th",[e._v("活跃量")]),a("th",[e._v("活跃收入（元）")]),a("th",[e._v("激活量")]),a("th",[e._v("激活收入（元）")]),a("th",[e._v("预估总分成收入（元）")])]),a("tr",[a("td",[e._v(e._s(e.formatLocal(this.installs)))]),a("td",[e._v(e._s(e.formatLocal(this.installsIncome)))]),a("td",[e._v(e._s(e.formatLocal(this.activates)))]),a("td",[e._v(e._s(e.formatLocal(this.activatesIncome)))]),a("td",[e._v(e._s(e.formatLocal(this.actives)))]),a("td",[e._v(e._s(e.formatLocal(this.activesIncome)))]),a("td",[e._v(e._s(e.formatLocal(this.income)))])]),a("tr",[0<this.installsDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.installsDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.installsDiff).toFixed(2))+"%\n                    ")])],1),0<this.installsIncomeDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.installsIncomeDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.installsIncomeDiff).toFixed(2))+"%\n                    ")])],1),0<this.activatesDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.activatesDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.activatesDiff).toFixed(2))+"%\n                    ")])],1),0<this.activatesIncomeDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.activatesIncomeDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.activatesIncomeDiff).toFixed(2))+"%\n                    ")])],1),0<this.activesDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.activesDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.activesDiff).toFixed(2))+"%\n                    ")])],1),0<this.activesIncomeDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.activesIncomeDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.activesIncomeDiff).toFixed(2))+"%\n                    ")])],1),0<this.incomeDiff?a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),a("span",{staticClass:"general-detail-item-data-rate increase"},[e._v(e._s(this.incomeDiff)+"%\n                    ")])],1):a("td",[a("span",{staticClass:"increase-text"},[e._v(e._s("CONFIRMED"!=e.store.status?"环比":""))]),a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),a("span",{staticClass:"general-detail-item-data-rate decrease"},[e._v(e._s(Math.abs(this.incomeDiff).toFixed(2))+"%\n                    ")])],1)])]):e._e(),a("div",{staticClass:"v-chart-assession"},[e.readyRender?a("v-chart",{attrs:{options:e.options},on:{legendselectchanged:e.legendChange}}):e._e()],1)]),a("template",{slot:"table"},[1===this.hao123ReportTypeId?a("ip-table",{attrs:{data:e.store.tableData},on:{sortHao123Table:e.tableSort}}):e._e(),2===this.hao123ReportTypeId?a("search-table",{attrs:{data:e.store.tableData},on:{sortHao123Table:e.tableSort}}):e._e(),3===this.hao123ReportTypeId?a("cpa-table",{attrs:{data:e.store.tableData},on:{sortHao123Table:e.tableSort}}):e._e()],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"Hao123报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.end)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"我要订阅：",name:"sw"}},[a("veui-switch",{model:{value:e.sw,callback:function(t){e.sw=t},expression:"sw"}})],1)],1),e.sw?a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s))])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]):e._e(),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"Hao123报告_"+this.format(this.store.filter.start)+"~"+this.format(this.store.filter.start)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s))])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));In.options.__file="Hao123ReportView.vue";var Fn=In.exports,Nn=new Date((new Date).setHours(0,0,0,0)),An=new Date(Nn-864e5),Mn=new Date(Nn-0-1e3),Yn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","计费名报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[20,50,100]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[An,Mn]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"commonMetrics","view,income,click,clickRatio,ecpm,cpc"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{pageSize:20,order:"desc",orderBy:"income",orders:"desc",orderBys:"income",cId:[],begin:a.formatDate(a.range[0]),end:a.formatDate(a.range[1]),timeGranularity:"day",metrics:a.commonMetrics,filterFields:"rtbTypeId,unionBizTypeId",filterValues:"2|3",dimensions:"cId,cName"})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"搜索推广报告_计费名报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"搜索推广报告_计费名报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cnList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterSelAll",{cName:!1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"websiteName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}var a;return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"formatDate",value:function(e){return e=e||"",w()(e).format("YYYYMMDD")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getReportAllQuery,this.getSearchCnList=this.api.getCnList,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport,this.getCnList(),this.initQueryParms()}},{key:"initQueryParms",value:function(){var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin?this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:Mn]:e.end&&!e.begin&&(this.range=[An,w()(e.end)._d]),e.contrastBegin&&(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d]);var a={filterFields:e.filterFields||this.filter.filterFields,filterValues:e.filterValues||this.filter.filterValues,dimensions:e.dimensions};this.filter=Object(v.a)({},this.filter,a)}},{key:"calContrastDate",value:function(){var e=[],t=w()(this.formatDate(this.range[1])).valueOf()-w()(this.range[0]).valueOf();this.dateRange=t/864e5,e[1]=w()(this.range[0]).valueOf()-864e5,e[0]=w()(e[1]).valueOf()-t,e[0]=this.formatDate(e[0]),e[1]=this.formatDate(e[1]),this.compareRange=[w()(e[0])._d,w()(e[1])._d]}},{key:"getCnList",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSearchCnList({productType:0});case 2:(t=e.sent)&&t.length&&t.forEach(function(e){a.cnList.push({label:e.cname,value:String(e.cid)})});case 4:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"initListData",value:function(){}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.cId)&&(t.cId=a.cId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.cId&&"all"!==this.filter.cId&&(this.filter.cId=this.filter.cId?this.filter.cId.split(","):[]),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){if(this.fillFilterFromQuery(),e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","click","clickRatio","ecpm","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(){var e=st()(this.filter);(e=na()(e,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,e.name=this.subData.name,e.attachmentType=this.subData.type,e.typeInfo=JSON.stringify({reportType:"search",cId:this.filter.cId});var t=this.subData.email.replace(/\n/g,"");return t=t.split(";"),t=this.dealTextArea(t),e.emails=t.join(";"),this.save(e)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var Ln,En=Object(u.a)(G.a,Yn,{name:"UnionReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,ListFilters:pa.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"datepicker-self":ba.a,"select-self":ea.a,"small-card":ya.a},data:function(){var e=this;return{moment:w.a,dayCount:1,isCompared:!1,cIdKey:"",cIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.cIdKey.toLowerCase())},labelForTag:{cId:"计费名"},filterItem:{cId:this.store.cnList},noemail:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},compareRange:!1,rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},created:function(){},mounted:function(){var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i={},s=0;s<e.filterValues.length;s++)a+=e.filterValues[s].join(",")+"|",i[e.filterFields[s]]=e.filterValues[s];t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),metrics:e.metrics.join(",")},e.begin&&(this.store.range=[w()(e.begin)._d,w()(e.end)._d]);var l=e.typeInfo?st()(JSON.parse(e.typeInfo)):{};l.cId&&(this.store.filter.cId=l.cId);var r=Object(v.a)({},this.store.filter,t,i);this.store.filter=st()(r),Array.isArray(r.cId)&&(this.store.filter.cId=r.cId.join())}this.refreshTable(),this.getGeneralData(t),this.getChartData(t)},computed:{chartOptions:function(){return this.store.chartData},startDate:function(){return this.store.formatDate(this.store.range[0])},endDate:function(){return this.store.formatDate(this.store.range[1])},ConStartDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[0]):null},ConEndDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[1]):null}},methods:{toDetail:function(e,t){this.global.router.push({path:"/report/search/cname/detail/".concat(e,"/").concat(t),query:{cId:e,begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterFields:"rtbTypeId,unionBizTypeId,cId",filterValues:"2|3|".concat(e)}})},formatLocal:function(e,t){return xe.a.formatLocal(e,t)},toPercent:function(e){return xe.a.toPercent(e)},format:function(e){return w()(e).format("YYYY-MM-DD")},getGeneralData:function(e){var t=this,a=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"sum",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.diffResults&&e.diffResults.length||(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getChartData:function(e){var t=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"day",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getChart(Object(v.a)({},t,e))},deleteFilters:function(e){"all"===e?this.store.filter.cId=[]:this.store.filter[e]=[],this.getGeneralData(),this.getChartData(),this.refreshTable()},getContrastDate:function(){var e={contrastBegin:null,contrastEnd:null};return"CONFIRMED"===this.store.status&&(e.contrastBegin=this.ConStartDate,e.contrastEnd=this.ConEndDate),e},getFilterFields:function(){var e=st()(this.store.filter.cId);"string"==typeof e&&"all"!==e&&(e=e?e.split(","):[]);var t={filterFields:"rtbTypeId,unionBizTypeId",filterValues:"2|3"};return e&&"all"!==e&&e.length&&(t.filterFields+=",cId",t.filterValues+="|"+e.join(",")),t},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"搜索推广报告_计费名报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"搜索推广报告_计费名报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},refreshTable:function(){var e=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"sum",metrics:this.store.commonMetrics,filterFields:"",filterValues:"",pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize},this.getFilterFields(),this.getContrastDate());this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.getGeneralData(),this.getChartData(),this.refreshTable()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},iscompare:function(e){e&&this.store.calContrastDate()},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(Ln=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return Ln.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e)},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.store.fail(e),this.$emit("submitfail",e)}}}),Pn=Object(p.a)(En,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view media-report",class:{"compare-report":!e.isCompared}},[a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("select-self",{attrs:{placeholder:"计费名",options:e.store.cnList,filter:e.cIdFilter,multi:!0},model:{value:e.store.filter.cId,callback:function(t){e.$set(e.store.filter,"cId",t)},expression:"store.filter.cId"}},[8<e.store.cnList.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-searchbox",{staticClass:"select-filter",attrs:{placeholder:"搜索",ui:"tiny"},model:{value:e.cIdKey,callback:function(t){e.cIdKey=t},expression:"cIdKey"}})],1):e._e()]),a("div",{class:{"inline-block":"CONFIRMED"!==e.store.status,block:"CONFIRMED"==e.store.status}},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{directives:[{name:"track",rawName:"v-track",value:1002,expression:"1002"}],attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("\n                        对比\n                    ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{directives:[{name:"track",rawName:"v-track",value:1003,expression:"1003"}],style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1)],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("\n                订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("\n                下载\n            ")],1)],1),a("filter-tags",{attrs:{"init-filter":e.store.tagFilter,"filter-options":e.filterItem,label:e.labelForTag},on:{deleteFilter:e.deleteFilters}})],1),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,compareData:e.store.compareData}}),a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"cName",width:"190",title:"计费名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{directives:[{name:"track",rawName:"v-track",value:1001,expression:"1001"}],staticClass:"adposition",on:{click:function(a){e.toDetail(t.cId,t.cName)}}},[a("div",[a("a",{staticClass:"app-name-text"},[e._v(e._s(t.cName))])])]),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.range[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.range[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    变化率\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"150",title:"展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):a("div",[e._v(e._s(e.formatLocal(t.view)))])]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income,2),ago:e.formatLocal(t.contrastResults.income,2),diff:e.formatLocal(t.diffResults.income,2)}})],1):a("div",[e._v(e._s(e.formatLocal(t.income,2)))])]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):a("div",[e._v(e._s(e.formatLocal(t.click)))])]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm,2),ago:e.formatLocal(t.contrastResults.ecpm,2),diff:e.formatLocal(t.diffResults.ecpm,2)}})],1):a("div",[e._v(e._s(e.formatLocal(t.ecpm,2)))])]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio,2),ago:e.toPercent(t.contrastResults.clickRatio,2),diff:e.formatLocal(t.diffResults.clickRatio,2)}})],1):a("div",[e._v(e._s(e.toPercent(t.clickRatio,2)))])]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc,2),ago:e.formatLocal(t.contrastResults.cpc,2),diff:e.formatLocal(t.diffResults.cpc,2)}})],1):a("div",[e._v(e._s(e.formatLocal(t.cpc,2)))])]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"搜索推广报告_计费名报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s)+"\n                            ")])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:function(t){e.subscribeVisible=!1}}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"搜索推广报告_计费名报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s)+"\n                ")])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null);Pn.options.__file="CNameReportView.vue";var Vn=Pn.exports,Bn=new Date((new Date).setHours(0,0,0,0)),$n=new Date(Bn-864e5),zn=new Date(Bn-0-1e3),qn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[20,50,100]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cId",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cName",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[$n,zn]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"commonMetrics","view,income,click,clickRatio,ecpm,cpc"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{pageSize:20,order:"desc",orderBy:"income",orders:"desc",orderBys:"income",cId:[],begin:a.formatDate(a.range[0]),end:a.formatDate(a.range[1]),timeGranularity:"day",metrics:a.commonMetrics,filterFields:"rtbTypeId,unionBizTypeId",filterValues:"2|3"})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"搜索推广报告_计费名报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"搜索推广报告_计费名报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"formatDate",value:function(e){return e=e||"",w()(e).format("YYYYMMDD")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.initQueryParms(),this.listRequester=this.api.getReportAllQuery,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport}},{key:"initQueryParms",value:function(){var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin?this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:zn]:e.end&&!e.begin&&(this.range=[$n,w()(e.end)._d]),e.contrastBegin&&(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d]);var a={filterFields:e.filterFields||this.filter.filterFields,filterValues:e.filterValues||this.filter.filterValues+this.cId,dimensions:e.dimensions};this.filter=Object(v.a)({},this.filter,a)}},{key:"calContrastDate",value:function(){var e=[],t=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=t/864e5,e[1]=w()(this.filter.begin).valueOf()-864e5,e[0]=w()(e[1]).valueOf()-t,e[0]=this.formatDate(e[0]),e[1]=this.formatDate(e[1]),this.compareRange=[w()(e[0])._d,w()(e[1])._d]}},{key:"initListData",value:function(){}},{key:"adaptData",value:function(e){if(this.fillFilterFromQuery(),e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.cId)&&(t.cId=a.cId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.cId&&"all"!==this.filter.cId&&(this.filter.cId=this.filter.cId?this.filter.cId.split(","):[])}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","click","clickRatio","ecpm","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify(Object(v.a)({reportType:"searchCNameDetail",cId:this.cId,cName:this.cName},this.filterSelAll));var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var Un,Wn=["view","pageview","income","click","ecpm","clickRatio","cpc"],Gn=Object(u.a)(G.a,qn,{name:"UnionReport",components:{"v-chart":M.a,"veui-table":ut.a,"veui-tabs":Sa.a,"veui-tab":F.a,"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,ListFilters:pa.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"select-self":ea.a,"select-vitual":xa.a,"datepicker-self":ba.a,"small-card":ya.a},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},data:function(){return{moment:w.a,dayCount:1,cId:"",columnFilter:["time"].concat(Wn),index:0,isCompared:!1,noemail:!1,openFilters:!0,openEditPage:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},compareRange:!1,rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},computed:{chartOptions:function(){return this.store.chartData},startDate:function(){return this.store.formatDate(this.store.range[0])},endDate:function(){return this.store.formatDate(this.store.range[1])},ConStartDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[0]):null},ConEndDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[1]):null}},beforeDestroy:function(){delete this.global.reportfilterSelectItems},created:function(){this.store.cId=this.$route.params.id,this.store.cName=this.$route.params.name},mounted:function(){this.store.filter.cId=[this.store.cId];var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i=0;i<e.filterValues.length;i++)a+=e.filterValues[i].join(",")+"|";t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),metrics:e.metrics.join(",")},e.begin&&(this.store.range=[w()(e.begin)._d,w()(e.end)._d]);var s=e.typeInfo?st()(JSON.parse(e.typeInfo)):{};s.cId&&(this.store.filter.cId=s.cId);var l=Object(v.a)({},this.store.filter,t,{});this.store.filter=st()(l)}this.refreshTable(),this.getGeneralData(t),this.getChartData(t)},methods:{tableSort:function(){var e;(e=this.store).tableSort.apply(e,arguments)},getContrastDate:function(){var e={contrastBegin:null,contrastEnd:null};return"CONFIRMED"===this.store.status&&(e.contrastBegin=this.ConStartDate,e.contrastEnd=this.ConEndDate),e},getFilterFields:function(){var e=st()(this.store.filter.cId);"string"==typeof e&&"all"!==e&&(e=e?e.split(","):[]);var t={filterFields:"rtbTypeId,unionBizTypeId",filterValues:"2|3"};return e&&"all"!==e&&0!==e.length&&(t.filterFields+=",cId",t.filterValues+="|"+e.join(",")),t},getGeneralData:function(e){var t=this,a=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"sum",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.diffResults&&e.diffResults.length||(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getState:function(e){return this.store.selectedSlot.some(function(t){return t.id===e})},formatLocal:function(e,t){return xe.a.formatLocal(e,t)},toPercent:function(e){return xe.a.toPercent(e)},formatTime:function(e){return xe.a.formatWeek(e)},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"搜索推广报告_计费名详情报告_".concat(this.store.format(this.store.filter.begin),"~").concat(this.store.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"搜索推广报告_计费名详情报告_".concat(this.store.format(this.store.filter.begin),"~").concat(this.store.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},getChartData:function(e){var t=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"day",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getChart(Object(v.a)({},t,e))},refreshTable:function(){var e=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"day",metrics:this.store.commonMetrics,pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize},this.getFilterFields(),this.getContrastDate());this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.getGeneralData(),this.getChartData(),this.refreshTable()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},iscompare:function(e){e&&this.store.calContrastDate()},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(Un=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return Un.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e)},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.store.fail(e),this.$emit("submitfail",e)}}}),Hn=(a("d3c7"),Object(p.a)(Gn,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view",class:{"compare-report":!e.isCompared}},[a("h3",{staticClass:"title"},[e._v("计费名报告 > "+e._s(e.store.cName))]),a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{directives:[{name:"track",rawName:"v-track",value:1004,expression:"1004"}],attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("\n                    对比\n                ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{directives:[{name:"track",rawName:"v-track",value:1005,expression:"1005"}],style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("\n                订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("\n                下载\n            ")],1)],1)]),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,compareData:e.store.compareData}}),a("veui-tabs",{attrs:{ui:"block",index:e.index},on:{"update:index":function(t){e.index=t}}},[a("veui-tab",{attrs:{label:"分日",name:"day"}},[a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1)],1)],1),a("template",{staticClass:"table-container",slot:"table"},[a("veui-table",{attrs:{data:e.store.tableData,"order-by":e.store.filter.orderBy,columnFilter:e.columnFilter,order:e.store.filter.order},on:{sort:e.tableSort}},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition"},[e._v(e._s(e.formatTime(t.time)))]),t.contrastResults?a("div",[e._v(e._s(e.formatTime(t.contrastResults.time)))]):e._e(),t.contrastResults?a("div",[e._v("变化率")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"130",title:"展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income,2),ago:e.formatLocal(t.contrastResults.income,2),diff:e.formatLocal(t.diffResults.income,2)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm,2),ago:e.formatLocal(t.contrastResults.ecpm,2),diff:e.formatLocal(t.diffResults.ecpm,2)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio,2),ago:e.toPercent(t.contrastResults.clickRatio,2),diff:e.formatLocal(t.diffResults.clickRatio,2)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.cpc,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc,2),ago:e.formatLocal(t.contrastResults.cpc,2),diff:e.formatLocal(t.diffResults.cpc,2)}})],1):e._e()]}}])})],1)],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"搜索推广报告_计费名详情报告_"+e.store.format(this.store.filter.begin)+"~"+e.store.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s)+"\n                            ")])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"搜索推广报告_计费名详情报告_"+e.store.format(this.store.filter.begin)+"~"+e.store.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s)+"\n                ")])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,"41837efe",null));Hn.options.__file="CNameReportDetailView.vue";var Qn=Hn.exports,Jn=new Date((new Date).setHours(0,0,0,0)),Kn=new Date(Jn-864e5),Zn=new Date(Jn-0-1e3),Xn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","渠道报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[20,50,100]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[Kn,Zn]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"commonMetrics","view,income,click,clickRatio,ecpm,cpc"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{pageSize:20,order:"desc",orderBy:"income",orders:"desc",orderBys:"income",cId:"",searchChannelId:[],begin:a.formatDate(a.range[0]),end:a.formatDate(a.range[1]),timeGranularity:"day",metrics:a.commonMetrics,filterFields:"unionBizTypeId,rtbTypeId,getSearchSoftwareChannel",filterValues:"3|2|1",dimensions:"searchChannelId,searchChannelName,cName"})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"搜索推广报告_渠道报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"搜索推广报告_渠道报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"channelList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cnList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterSelAll",{cName:!1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"websiteName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}var a,c;return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"formatDate",value:function(e){return e=e||"",w()(e).format("YYYYMMDD")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getReportAllQuery,this.getSearchChannelList=this.api.getSearchAdList,this.getSearchCnList=this.api.getCnList,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport,this.initQueryParms()}},{key:"initQueryParms",value:function(){var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin?this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:Zn]:e.end&&!e.begin&&(this.range=[Kn,w()(e.end)._d]),e.contrastBegin&&(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d]);var a={filterFields:e.filterFields||this.filter.filterFields,filterValues:e.filterValues||this.filter.filterValues,dimensions:e.dimensions};this.filter=Object(v.a)({},this.filter,a)}},{key:"calContrastDate",value:function(){var e=[],t=w()(this.formatDate(this.range[1])).valueOf()-w()(this.range[0]).valueOf();this.dateRange=t/864e5,e[1]=w()(this.range[0]).valueOf()-864e5,e[0]=w()(e[1]).valueOf()-t,e[0]=this.formatDate(e[0]),e[1]=this.formatDate(e[1]),this.compareRange=[w()(e[0])._d,w()(e[1])._d]}},{key:"getCnList",value:(c=Object(q.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSearchCnList({productType:0});case 2:(t=e.sent)&&t.length&&(this.cnList=t.map(function(e){return{label:e.cname,value:e.cid}}));case 4:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"getChannelList",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSearchChannelList({cid:this.filter.cId});case 2:(t=e.sent).customizeChannelList&&t.customizeChannelList.length&&(this.channelList.length=0,t.customizeChannelList.forEach(function(e){a.channelList.push({label:e.chName,value:String(e.chpkid)})}));case 4:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"initListData",value:function(){}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.searchChannelId)&&(t.searchChannelId=a.searchChannelId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.searchChannelId&&"all"!==this.filter.searchChannelId&&(this.filter.searchChannelId=this.filter.searchChannelId?this.filter.searchChannelId.split(","):[]),this.tagFilter=st()(this.filter),delete this.tagFilter.cId}},{key:"adaptData",value:function(e){if(this.fillFilterFromQuery(),e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","click","clickRatio","ecpm","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(){var e=st()(this.filter);(e=na()(e,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,e.name=this.subData.name,e.attachmentType=this.subData.type,e.typeInfo=JSON.stringify({reportType:"searchChannel",cId:this.filter.cId,searchChannelId:this.filter.searchChannelId});var t=this.subData.email.replace(/\n/g,"");return t=t.split(";"),t=this.dealTextArea(t),e.emails=t.join(";"),this.save(e)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var ec,tc,ac,ic=Object(u.a)(G.a,Xn,{name:"UnionReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,ListFilters:pa.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"datepicker-self":ba.a,"select-self":ea.a,"small-card":ya.a},data:function(){var e=this;return{moment:w.a,dayCount:1,isCompared:!1,searchChannelIdKey:"",searchChannelIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.searchChannelIdKey.toLowerCase())},labelForTag:{searchChannelId:"渠道"},filterItem:{searchChannelId:this.store.channelList},noemail:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},compareRange:!1,rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},created:function(){},mounted:function(){var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i={},s=0;s<e.filterValues.length;s++)a+=e.filterValues[s].join(",")+"|",i[e.filterFields[s]]=e.filterValues[s];t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),metrics:e.metrics.join(",")},e.begin&&(this.store.range=[w()(e.begin)._d,w()(e.end)._d]);var l=e.typeInfo?st()(JSON.parse(e.typeInfo)):{};l.searchChannelId&&(this.store.filter.searchChannelId=l.searchChannelId);var r=Object(v.a)({},this.store.filter,t,i);this.store.filter=st()(r),Array.isArray(r.cId)&&(this.store.filter.cId=r.cId.join())}this.setChannel(t)},computed:{chartOptions:function(){return this.store.chartData},startDate:function(){return this.store.formatDate(this.store.range[0])},endDate:function(){return this.store.formatDate(this.store.range[1])},ConStartDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[0]):null},ConEndDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[1]):null}},methods:{toDetail:function(e,t){this.global.router.push({path:"/report/search/channel/detail/".concat(e,"/").concat(t),query:{searchChannelId:e,begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterFields:"unionBizTypeId,rtbTypeId,getSearchSoftwareChannel,cId,searchChannelId",filterValues:"3|2|1|".concat(this.store.filter.cId,"|").concat(e)}})},cIdChange:(ac=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.getChannelList();case 2:case"end":return e.stop()}},e,this)})),function(){return ac.apply(this,arguments)}),setChannel:(tc=Object(q.a)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.getCnList();case 2:return this.store.filter.cId||(this.store.filter.cId=this.store.cnList[0]?this.store.cnList[0].value:""),e.next=5,this.store.getChannelList();case 5:this.refreshTable(),this.getGeneralData(t),this.getChartData(t);case 8:case"end":return e.stop()}},e,this)})),function(e){return tc.apply(this,arguments)}),formatLocal:function(e,t){return xe.a.formatLocal(e,t)},toPercent:function(e){return xe.a.toPercent(e)},format:function(e){return w()(e).format("YYYY-MM-DD")},getGeneralData:function(e){var t=this,a=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"sum",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.diffResults&&e.diffResults.length||(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getChartData:function(e){var t=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"day",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getChart(Object(v.a)({},t,e))},deleteFilters:function(e){"all"===e?this.store.filter.searchChannelId=[]:this.store.filter[e]=[],this.getGeneralData(),this.getChartData(),this.refreshTable()},getContrastDate:function(){var e={contrastBegin:null,contrastEnd:null};return"CONFIRMED"===this.store.status&&(e.contrastBegin=this.ConStartDate,e.contrastEnd=this.ConEndDate),e},getFilterFields:function(){var e=st()(this.store.filter.searchChannelId),t=this.store.filter.cId;"string"==typeof e&&"all"!==e&&(e=e?e.split(","):[]);var a={filterFields:"unionBizTypeId,rtbTypeId,getSearchSoftwareChannel",filterValues:"3|2|1"};return t&&(a.filterFields+=",cId",a.filterValues+="|"+t),e&&"all"!==e&&e.length&&(a.filterFields+=",searchChannelId",a.filterValues+="|"+e.join(",")),a},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"搜索推广报告_渠道报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"搜索推广报告_渠道报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},refreshTable:function(){var e=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"sum",metrics:this.store.commonMetrics,filterFields:"",filterValues:"",pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize},this.getFilterFields(),this.getContrastDate());this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.getGeneralData(),this.getChartData(),this.refreshTable()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},iscompare:function(e){e&&this.store.calContrastDate()},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(ec=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return ec.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e)},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.store.fail(e),this.$emit("submitfail",e)}}}),sc=Object(p.a)(ic,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view media-report",class:{"compare-report":!e.isCompared}},[a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("veui-select",{staticClass:"long-select",attrs:{placeholder:"计费名",options:e.store.cnList},on:{change:e.cIdChange},model:{value:e.store.filter.cId,callback:function(t){e.$set(e.store.filter,"cId",t)},expression:"store.filter.cId"}}),a("select-self",{attrs:{placeholder:"渠道",options:e.store.channelList,filter:e.searchChannelIdFilter,multi:!0},model:{value:e.store.filter.searchChannelId,callback:function(t){e.$set(e.store.filter,"searchChannelId",t)},expression:"store.filter.searchChannelId"}},[8<e.store.channelList.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-searchbox",{staticClass:"select-filter",attrs:{placeholder:"搜索",ui:"tiny"},model:{value:e.searchChannelIdKey,callback:function(t){e.searchChannelIdKey=t},expression:"searchChannelIdKey"}})],1):e._e()]),a("div",{class:{"inline-block":"CONFIRMED"!==e.store.status,block:"CONFIRMED"==e.store.status}},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                    ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1)],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("\n                订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("\n                下载\n            ")],1)],1),a("filter-tags",{attrs:{"init-filter":e.store.tagFilter,"filter-options":e.filterItem,label:e.labelForTag},on:{deleteFilter:e.deleteFilters}})],1),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,compareData:e.store.compareData}}),a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"searchChannelName",width:"190",title:"渠道名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition",on:{click:function(a){e.toDetail(t.searchChannelId,t.searchChannelName)}}},[a("div",[a("a",{staticClass:"app-name-text"},[e._v(e._s(t.searchChannelName))])])]),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.range[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.range[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    变化率\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cName",width:"190",title:"计费名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition"},[a("div",[e._v(e._s(t.cName))])]),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.range[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.range[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    变化率\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"150",title:"展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):a("div",[e._v(e._s(e.formatLocal(t.view)))])]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income,2),ago:e.formatLocal(t.contrastResults.income,2),diff:e.formatLocal(t.diffResults.income,2)}})],1):a("div",[e._v(e._s(e.formatLocal(t.income,2)))])]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):a("div",[e._v(e._s(e.formatLocal(t.click)))])]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm,2),ago:e.formatLocal(t.contrastResults.ecpm,2),diff:e.formatLocal(t.diffResults.ecpm,2)}})],1):a("div",[e._v(e._s(e.formatLocal(t.ecpm,2)))])]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio,2),ago:e.toPercent(t.contrastResults.clickRatio,2),diff:e.formatLocal(t.diffResults.clickRatio,2)}})],1):a("div",[e._v(e._s(e.toPercent(t.clickRatio,2)))])]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc,2),ago:e.formatLocal(t.contrastResults.cpc,2),diff:e.formatLocal(t.diffResults.cpc,2)}})],1):a("div",[e._v(e._s(e.formatLocal(t.cpc,2)))])]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"搜索推广报告_渠道报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s)+"\n                            ")])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:function(t){e.subscribeVisible=!1}}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"搜索推广报告_渠道报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s)+"\n                ")])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null);sc.options.__file="ChannelReportView.vue";var lc=sc.exports,rc=new Date((new Date).setHours(0,0,0,0)),oc=new Date(rc-864e5),nc=new Date(rc-0-1e3),cc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[20,50,100]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"searchChannelId",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"searchChannelName",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[oc,nc]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"commonMetrics","view,income,click,clickRatio,ecpm,cpc"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{pageSize:20,order:"desc",orderBy:"income",orders:"desc",orderBys:"income",searchChannelId:[],begin:a.formatDate(a.range[0]),end:a.formatDate(a.range[1]),timeGranularity:"day",metrics:a.commonMetrics,filterFields:"unionBizTypeId,rtbTypeId,getSearchSoftwareChannel",filterValues:"3|2|1"})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"搜索推广报告_渠道报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"搜索推广报告_渠道报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"formatDate",value:function(e){return e=e||"",w()(e).format("YYYYMMDD")}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.initQueryParms(),this.listRequester=this.api.getReportAllQuery,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport}},{key:"initQueryParms",value:function(){var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin?this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:nc]:e.end&&!e.begin&&(this.range=[oc,w()(e.end)._d]),e.contrastBegin&&(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d]);var a={filterFields:e.filterFields||this.filter.filterFields,filterValues:e.filterValues||this.filter.filterValues+this.searchChannelId,dimensions:e.dimensions};this.filter=Object(v.a)({},this.filter,a)}},{key:"calContrastDate",value:function(){var e=[],t=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=t/864e5,e[1]=w()(this.filter.begin).valueOf()-864e5,e[0]=w()(e[1]).valueOf()-t,e[0]=this.formatDate(e[0]),e[1]=this.formatDate(e[1]),this.compareRange=[w()(e[0])._d,w()(e[1])._d]}},{key:"initListData",value:function(){}},{key:"adaptData",value:function(e){if(this.fillFilterFromQuery(),e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.searchChannelId)&&(t.searchChannelId=a.searchChannelId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.searchChannelId&&"all"!==this.filter.searchChannelId&&(this.filter.searchChannelId=this.filter.searchChannelId?this.filter.searchChannelId.split(","):[])}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","click","clickRatio","ecpm","cpc"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify(Object(v.a)({reportType:"searchChannelDetail",searchChannelId:this.searchChannelId,searchChannelName:this.searchChannelName},this.filterSelAll));var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(J.a);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var uc,dc=["view","pageview","income","click","ecpm","clickRatio","cpc"],fc=Object(u.a)(G.a,cc,{name:"UnionReport",components:{"v-chart":M.a,"veui-table":ut.a,"veui-tabs":Sa.a,"veui-tab":F.a,"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,ListFilters:pa.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-cards":ha.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"select-self":ea.a,"select-vitual":xa.a,"datepicker-self":ba.a,"small-card":ya.a},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},data:function(){return{moment:w.a,dayCount:1,searchChannelId:"",columnFilter:["time"].concat(dc),index:0,isCompared:!1,noemail:!1,openFilters:!0,openEditPage:!1,subscribeVisible:!1,downloadVisible:!1,edit:{type:"",id:""},compareRange:!1,rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},computed:{chartOptions:function(){return this.store.chartData},startDate:function(){return this.store.formatDate(this.store.range[0])},endDate:function(){return this.store.formatDate(this.store.range[1])},ConStartDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[0]):null},ConEndDate:function(){return"CONFIRMED"===this.store.status?this.store.formatDate(this.store.compareRange[1]):null}},beforeDestroy:function(){delete this.global.reportfilterSelectItems},created:function(){this.store.searchChannelId=this.$route.params.id,this.store.searchChannelName=this.$route.params.name},mounted:function(){this.store.filter.searchChannelId=[this.store.searchChannelId];var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i=0;i<e.filterValues.length;i++)a+=e.filterValues[i].join(",")+"|";t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),metrics:e.metrics.join(",")},e.begin&&(this.store.range=[w()(e.begin)._d,w()(e.end)._d]);var s=e.typeInfo?st()(JSON.parse(e.typeInfo)):{};s.searchChannelId&&(this.store.filter.searchChannelId=s.searchChannelId);var l=Object(v.a)({},this.store.filter,t,{});this.store.filter=st()(l)}this.refreshTable(),this.getGeneralData(t),this.getChartData(t)},methods:{tableSort:function(){var e;(e=this.store).tableSort.apply(e,arguments)},getContrastDate:function(){var e={contrastBegin:null,contrastEnd:null};return"CONFIRMED"===this.store.status&&(e.contrastBegin=this.ConStartDate,e.contrastEnd=this.ConEndDate),e},getFilterFields:function(){var e=st()(this.store.filter.searchChannelId);"string"==typeof e&&"all"!==e&&(e=e?e.split(","):[]);var t={filterFields:"unionBizTypeId,rtbTypeId,getSearchSoftwareChannel",filterValues:"3|2|1"};return e&&"all"!==e&&0!==e.length&&(t.filterFields+=",searchChannelId",t.filterValues+="|"+e.join(",")),t},getGeneralData:function(e){var t=this,a=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"sum",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.diffResults&&e.diffResults.length||(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getState:function(e){return this.store.selectedSlot.some(function(t){return t.id===e})},formatLocal:function(e,t){return xe.a.formatLocal(e,t)},toPercent:function(e){return xe.a.toPercent(e)},formatTime:function(e){return xe.a.formatWeek(e)},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"搜索推广报告_渠道详情报告_".concat(this.store.format(this.store.filter.begin),"~").concat(this.store.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"搜索推广报告_渠道详情报告_".concat(this.store.format(this.store.filter.begin),"~").concat(this.store.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},getChartData:function(e){var t=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"day",metrics:this.store.commonMetrics},this.getFilterFields(),this.getContrastDate());e&&delete e.dimensions,this.store.getChart(Object(v.a)({},t,e))},refreshTable:function(){var e=Object(v.a)({begin:this.startDate,end:this.endDate,timeGranularity:"day",metrics:this.store.commonMetrics,pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize},this.getFilterFields(),this.getContrastDate());this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.getGeneralData(),this.getChartData(),this.refreshTable()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},iscompare:function(e){e&&this.store.calContrastDate()},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(uc=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return uc.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e)},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.store.fail(e),this.$emit("submitfail",e)}}}),pc=(a("d08f"),Object(p.a)(fc,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view",class:{"compare-report":!e.isCompared}},[a("h3",{staticClass:"title"},[e._v("渠道报告 > "+e._s(e.store.searchChannelName))]),a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("\n                订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("\n                下载\n            ")],1)],1)]),a("template",{slot:"batchContent"},[a("report-cards",{attrs:{compared:e.isCompared,cardData:e.store.cardData,diffCardData:e.store.diffCardData,dayCount:e.dayCount,compareData:e.store.compareData}}),a("veui-tabs",{attrs:{ui:"block",index:e.index},on:{"update:index":function(t){e.index=t}}},[a("veui-tab",{attrs:{label:"分日",name:"day"}},[a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1)],1)],1),a("template",{staticClass:"table-container",slot:"table"},[a("veui-table",{attrs:{data:e.store.tableData,"order-by":e.store.filter.orderBy,columnFilter:e.columnFilter,order:e.store.filter.order},on:{sort:e.tableSort}},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition"},[e._v(e._s(e.formatTime(t.time)))]),t.contrastResults?a("div",[e._v(e._s(e.formatTime(t.contrastResults.time)))]):e._e(),t.contrastResults?a("div",[e._v("变化率")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"130",title:"展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income,2),ago:e.formatLocal(t.contrastResults.income,2),diff:e.formatLocal(t.diffResults.income,2)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"120",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"130",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm,2),ago:e.formatLocal(t.contrastResults.ecpm,2),diff:e.formatLocal(t.diffResults.ecpm,2)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"120",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio,2),ago:e.toPercent(t.contrastResults.clickRatio,2),diff:e.formatLocal(t.diffResults.clickRatio,2)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cpc",width:"120",title:"CPC",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.cpc,2)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.cpc,2),ago:e.formatLocal(t.contrastResults.cpc,2),diff:e.formatLocal(t.diffResults.cpc,2)}})],1):e._e()]}}])})],1)],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"搜索推广报告_渠道详情报告_"+e.store.format(this.store.filter.begin)+"~"+e.store.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s)+"\n                            ")])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"搜索推广报告_渠道详情报告_"+e.store.format(this.store.filter.begin)+"~"+e.store.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s)+"\n                ")])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,"30a183db",null));pc.options.__file="ChannelReportDetailView.vue";var hc=pc.exports,mc=(a("ee1d"),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(n.a)(t,e),Object(s.a)(t,[{key:"submitSearch",value:function(){var e=this.getRouteQuery({}),t=this.prepareQuery();if(this.isQueryAndFilterEqual(e,t))return this.requestList(),void this.fillFilterFromQuery();t.pageNo&&(t.pageNo=1),this.global.redirect({url:this.getQueryUrl(t),type:"push"})}}]),t}(J.a)),vc=new Date(new Date-6048e5),bc=new Date(new Date-864e5),yc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","工具栏报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[new Date(new Date-6048e5),new Date(new Date-864e5)]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contrastRange",[new Date(new Date-12096e5),new Date(new Date-6912e5)]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateShortCut",qt.a.dateShortCut),Object(O.a)(Object(_.a)(Object(_.a)(a)),"freRule",qt.a.freRule),Object(O.a)(Object(_.a)(Object(_.a)(a)),"saveFormType",qt.a.saveFormType),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{order:"desc",orderBy:"income",orders:"desc",orderBys:"income",cId:[],dimensions:"",timeGranularity:"sum",metrics:"view,income,click,clickRatio,ecpm",filterFields:"rtbTypeId,unionBizTypeId",filterValues:"2|6",begin:a.range?w()(a.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:a.range?w()(a.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"defaultArgs",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"工具栏报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"工具栏报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cnList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filtercName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chart",{}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){zt.a.downloadReport(e,"/v2/client/report/ssp-query/download")}},{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getToolReportAllQuery,this.getToolCnList=this.api.getToolCnList,this.getReportSum=this.api.getToolReportSum,this.save=this.api.saveToolReport;var a=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,a),a.begin&&(this.range=[w()(a.begin)._d,a.end?w()(a.end)._d:bc]),a.end&&!a.begin&&(this.range=[vc,w()(a.end)._d]);var i=[],s=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=s/864e5,i[1]=w()(this.filter.begin).valueOf()-864e5,i[0]=w()(i[1]).valueOf()-s,i[0]=w()(i[0]).format("YYYYMMDD"),i[1]=w()(i[1]).format("YYYYMMDD"),a.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(a.contrastBegin)._d,w()(a.contrastEnd)._d]):this.compareRange=[w()(i[0])._d,w()(i[1])._d],this.getToolCnList().then(function(t){if(t)for(var a=st()(t),i=a.length,s=0;s<i;s++)e.cnList.push({label:a[s].cname,value:a[s].cid})}).catch(function(e){})}},{key:"initListData",value:function(){}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.cId)&&(t.cId=a.cId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;this.getRouteQuery({}),Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.cId&&(this.filter.cId=this.filter.cId?this.filter.cId.split(","):[],this.filter.cId=Ea()(this.filter.cId,function(e){return Number(e)})),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"prepareData",value:function(e){return e}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","ecpm","click","clickRatio"],"CONFIRMED"===t.status?e.contrastResults:null)}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["begin","end","timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"software",cId:this.filter.cId,filtercName:this.filtercName});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(mc),gc=a("8929");Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var _c,Oc=Object(u.a)(G.a,yc,{name:"ToolbarReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-card":gc.a,"veui-grid-container":x.a,"veui-grid-row":R.a,"veui-grid-column":T.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,"veui-searchbox":Pe.a,"select-self":ea.a,"datepicker-self":ba.a,"small-card":ya.a},data:function(){var e=this;return{dayCount:1,isCompared:!1,moment:w.a,metrics:"view,income,click,clickRatio,ecpm",defaultDimensions:"cName,cId",field:"rtbTypeId,unionBizTypeId,",value:"2|6|",cIdKey:"",cIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.cIdKey.toLowerCase())},item:[],labelForTag:{cId:"计费名"},filterItem:{cId:this.store.cnList},subscribeVisible:!1,downloadVisible:!1,compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},created:function(){this.$watch("$route.query",this.queryChange)},mounted:function(){this.initFilter()},computed:{chartOptions:function(){return this.store.chartData}},methods:{queryChange:function(){0===Object.keys(this.$route.query).length&&(this.store.status="UNCONFIRMED",this.initFilter())},formatValue:function(e,t){return null===e||Number.isNaN(e)?"--":("number"==typeof e&&[0,2].includes(t)&&(e=e.toFixed(t)),"number"==typeof e||"string"==typeof e?Number(e).toLocaleString():"--")},initFilter:function(){var e=this.global.reportfilterSelectItems,t={};if(e){for(var a="",i={dimensions:""},s=0;s<e.filterValues.length;s++)a+=e.filterValues[s].join(",")+"|",i[e.filterFields[s]]=e.filterValues[s];i.dimensions=e.dimensions.join(","),t={filterFields:e.filterFields.join(","),filterValues:a.slice(0,-1),metrics:e.metrics.join(",")},delete i.rtbTypeId,delete i.unionBizTypeId,this.store.filter=Object(v.a)({},this.store.filter,t,i);var l=st()(JSON.parse(e.typeInfo));delete l.reportType,l.cId&&(this.store.filter.cId=l.cId),this.store.filtercName=l.filtercName,this.refreshTableByFilter()}else{var r=this.store.getRouteQuery();(t={filterFields:r.filterFields?r.filterFields+"|":this.field,filterValues:r.filterValues?r.filterValues+"|":this.value,dimensions:r.dimensions}).filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,t),this.refreshTableByFilter()}this.getGeneralData(t),this.getChartData(t)},toSingleCnReport:function(e,t){this.global.router.push({path:"/report/tool-cn/".concat(e,"/").concat(t),query:{begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterValues:"2|6|".concat(t),filterFields:"rtbTypeId,unionBizTypeId,cId"}})},getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics};delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){for(var a in t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null}]),0===e.diffResults.length&&(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null}]),t.store.cardData=e.results[0]||{},t.store.compareData=e.contrastResults[0]||{},t.store.diffCardData=e.diffResults[0]||{},t.store.diffCardData)t.store.diffCardData[a]=Number(t.store.diffCardData[a])})},getChartData:function(e){var t={};"CONFIRMED"===this.store.status&&(t={contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD")});var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics};delete e.dimensions,this.store.getChart(Object(v.a)({},a,t,e))},formatLocal:function(e){return null===e?"--":"number"==typeof e||"string"==typeof e?e.toLocaleString():e},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]},format:function(e){return w()(e).format("YYYY-MM-DD")},toPercent:function(e){if(null===e)return"--";var t=Number(e);return(t=t.toFixed(2))+"%"},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"工具栏分计费名报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"工具栏分计费名报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},deleteFilters:function(e){if("all"===e)return this.store.filter.cId=[],this.store.filtercName=!1,this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),void this.refreshTableByFilter();this.store.filter[e]=[],this.store.filtercName=!1,this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},refreshGeneralDataByFilter:function(){var e=st()(this.store.filter.cId),t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics,filterFields:this.field,filterValues:this.value};0===e.length||this.store.filtercName||(t.filterFields+="cId,",t.filterValues+=e.join(",")+"|"),t.filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.getGeneralData(t)},refreshChartByFilter:function(){var e=st()(this.store.filter.cId),t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics,filterFields:this.field,filterValues:this.value};e&&0!==e.length&&!this.store.filtercName&&(t.filterFields+="cId,",t.filterValues+=e.join(",")+"|"),t.filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.store.getChart(t)},refreshTableByFilter:function(){var e=st()(this.store.filter.cId)||[],t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics,filterFields:this.field,filterValues:this.value,dimensions:this.defaultDimensions,pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};e&&0!==e.length&&!this.store.filtercName?(t.filterFields+="cId,",t.filterValues+=e.join(",")+"|",this.store.cName=!0):this.store.cName=!1,this.store.filtercName&&(this.store.cName=!0),"CONFIRMED"===this.store.status?(t.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),t.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")):(t.contrastBegin="",t.contrastEnd=""),t.filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,t),this.store.submitSearch(),this.$forceUpdate()},requestSearch:function(){this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},compareDate:function(e){},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(_c=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return _c.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),Cc=(a("8c4f0"),Object(p.a)(Oc,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"tool-report-view"},[a("template",{slot:"filterContent"},[a("select-self",{attrs:{placeholder:"计费名",isall:e.store.filtercName,options:e.store.cnList,filter:e.cIdFilter,multi:!0},on:{"update:isall":function(t){e.$set(e.store,"filtercName",t)}},model:{value:e.store.filter.cId,callback:function(t){e.$set(e.store.filter,"cId",t)},expression:"store.filter.cId"}},[e.store.cnList&&8<e.store.cnList.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-input",{staticClass:"select-filter",attrs:{ui:"tiny"},model:{value:e.cIdKey,callback:function(t){e.cIdKey=t},expression:"cIdKey"}})],1):e._e()]),a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.store.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},on:{select:e.compareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary small"},on:{click:e.requestSearch}},[e._v("查询")]),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("下载\n            ")],1)],1),a("filter-tags",{attrs:{"init-filter":e.store.tagFilter,"filter-options":e.filterItem,label:e.labelForTag},on:{deleteFilter:e.deleteFilters}})],1),a("template",{slot:"batchContent"},[a("veui-grid-container",{attrs:{columns:25}},[a("veui-grid-row",[a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"总展现量",value:e.formatValue(e.store.cardData.view),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.view)}}),a("report-card",{attrs:{title:"日均展现量",value:e.formatValue(e.store.cardData.view/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.view/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.view,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"预计总收入（元）",value:e.formatValue(e.store.cardData.income),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.income)}}),a("report-card",{attrs:{title:"预计日均收入（元）",value:e.formatValue(e.store.cardData.income/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.income/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.income,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"总点击量",value:e.formatValue(e.store.cardData.click),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.click)}}),a("report-card",{attrs:{title:"日均点击量",value:e.formatValue(e.store.cardData.click/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.click/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.click,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"eCPM（元）",value:e.formatValue(e.store.cardData.ecpm),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.ecpm)}}),a("report-card",{attrs:{title:"eCPM（元）",value:e.formatValue(e.store.cardData.ecpm),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.ecpm),radio:e.isCompared,radioValue:e.store.diffCardData.ecpm,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"点击率",value:e.toPercent(e.store.cardData.clickRatio||0),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.clickRatio||0)}}),a("report-card",{attrs:{title:"点击率",value:e.toPercent(e.store.cardData.clickRatio||0),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.clickRatio||0),radio:e.isCompared,radioValue:e.store.diffCardData.clickRatio,border:e.isCompared}})],1)])],1)],1),a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"cName",width:"160",title:"计费名",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition",on:{click:function(a){e.toSingleCnReport(t.cName,t.cId)}}},[a("div",[e._v(e._s(t.cName))]),a("div",[e._v("ID: "+e._s(t.cId))])]),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.range[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.range[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    变化率\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"160",title:"展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"180",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income),ago:e.formatLocal(t.contrastResults.income),diff:e.formatLocal(t.diffResults.income)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"150",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"160",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm),ago:e.formatLocal(t.contrastResults.ecpm),diff:e.formatLocal(t.diffResults.ecpm)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"160",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio),ago:e.toPercent(t.contrastResults.clickRatio),diff:e.formatLocal(t.diffResults.clickRatio)}})],1):e._e()]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"工具栏报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.store.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s))])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"工具栏报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(e.store.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s))])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));Cc.options.__file="ToolCnReportView.vue";var Dc=Cc.exports,wc=new K.a({alias:"IOS",text:"iOS",value:1},{alias:"ANDROID",text:"Android",value:2}),jc=new K.a({alias:"MOBILE",text:"手机",value:1},{alias:"PAD",text:"平板",value:2}),kc=new K.a({alias:"ALL_ALL",text:"全部",value:""},{alias:"ANDROID_ALL",text:"Android 全部",value:1},{alias:"ANDROID_MOBILE",text:"Android 手机",value:2},{alias:"ANDROID_PAD",text:"Android 平板",value:3},{alias:"IOS_ALL",text:"iOS 全部",value:4},{alias:"IOS_MOBILE",text:"ios iphone",value:5},{alias:"IOS_PAD",text:"ios ipad",value:6});kc.getValueFromSystemAndDevice=function(e,t){var a=wc.valueIdx[e].alias,i=jc.valueIdx[t].alias;return this.aliasIdx["".concat(a,"_").concat(i)].value},kc.getSystemAndDeviceFromValue=function(e){var t=this.valueIdx[e].alias.split("_");return{system:wc.aliasIdx[t[0]].value,device:jc.aliasIdx[t[1]].value}},kc.toOptions=function(){var e=this.entities.map(function(e){return{value:e.value,label:e.text}});return e.splice(0,1),e},new K.a({alias:"SDK",text:"SDK",value:0},{alias:"API",text:"API",value:1}),new K.a({alias:"PHONE",text:"手机应用",value:0},{alias:"S_PROGRAM",text:"小程序应用",value:1}),new K.a({alias:"REMOVED",text:"删除",value:0},{alias:"NORMAL",text:"正常",value:1},{alias:"PAUSED",text:"暂停",value:2}),new K.a({alias:"BANNER",text:"横幅",value:32},{alias:"SPLASH",text:"开屏",value:33},{alias:"INTERSTITIAL",text:"插屏",value:34},{alias:"OFFERWALL",text:"积分墙",value:35},{alias:"FEED",text:"信息流",value:36},{alias:"SPREADWALL",text:"推广墙",value:37},{alias:"APPWALL",text:"应用推荐墙",value:38},{alias:"WHEEL",text:"轮盘",value:39},{alias:"VIDEO",text:"视频贴片",value:40},{alias:"REWARD_VIDEO",text:"激励视频",value:44}),new K.a({alias:"BANNER",text:"横幅",value:32},{alias:"SPLASH",text:"开屏",value:33},{alias:"INTERSTITIAL",text:"插屏",value:34},{alias:"INFO_FLOW",text:"信息流",value:36},{alias:"PROMOTION_WALL",text:"推广墙",value:37},{alias:"APP_PROMOTION_WALL",text:"应用推荐墙",value:38},{alias:"ROTATION_PLATE",text:"轮盘",value:39},{alias:"VIDEO",text:"视频贴片",value:40},{alias:"FRONT_LINK",text:"悬浮前链",value:41},{alias:"MID_PAGE",text:"垂类中间页",value:42},{alias:"REWARD_VIDEO",text:"激励视频",value:44}),new K.a({alias:"BANNER",text:"横幅",value:"32"},{alias:"SPLASH",text:"开屏",value:"33"},{alias:"INTERSTITIAL",text:"插屏",value:"34"},{alias:"INFO_FLOW",text:"信息流",value:"36"},{alias:"VIDEO",text:"视频贴片",value:"40"},{alias:"REWARD_VIDEO",text:"激励视频",value:"44"}),new K.a({alias:"NOT_FILTER",text:"不过滤",value:0},{alias:"FILTER",text:"过滤",value:1}),new K.a({alias:"MONTH",text:"近30天有收入",value:1},{alias:"NOT_MONTH",text:"其他",value:0}),new K.a({alias:"INFO_FLOW_LEFT_PIC",text:"左图右文",value:28},{alias:"INFO_FLOW_RIGHT_PIC",text:"左文右图",value:27},{alias:"INFO_FLOW_GROUP_PIC",text:"三图",value:26},{alias:"INFO_FLOW_GROUP_PIC_LOGO",text:"三图＋logo",value:31},{alias:"INFO_FLOW_PIC_BOTTOM_TITLE",text:"大图＋底部文字",value:22},{alias:"INFO_FLOW_PIC_TOP_TITLE",text:"大图上部文字",value:21},{alias:"INFO_FLOW_PIC_LOGO",text:"大图上部文字+logo",value:30},{alias:"CAROUSEL_IMAGE_TITLE",text:"大图两行文字",value:11},{alias:"CAROUSEL_IMAGE",text:"大图无文字",value:10},{alias:"INFO_FLOW_VIDEO_TOP_TITLE",text:"视频＋文字",value:32}),new K.a({alias:"NATIVE_TITLE",text:"标题",value:1},{alias:"NATIVE_DESC",text:"描述",value:2},{alias:"NATIVE_IMAGE",text:"大图",value:4},{alias:"NATIVE_ICON",text:"图标",value:8},{alias:"NATIVE_APPSIZE",text:"App大小",value:16},{alias:"NATIVE_ACTIONTYPE",text:"跳转动作",value:32},{alias:"NATIVE_VIDEO",text:"视频",value:64},{alias:"NATIVE_INVENTORYTYPE",text:"视频+尾帧",value:256}),new K.a({alias:"APP应用",text:"手机应用",value:"0"},{alias:"小程序",text:"小程序",value:"1"});var Sc=new Date((new Date).setHours(0,0,0,0)),xc=new Date(Sc-864e5),Rc=new Date(Sc-0-1e3),Tc=function(e){function t(){var e,a,s;Object(i.a)(this,t);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return s=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(n))),Object(O.a)(Object(_.a)(Object(_.a)(s)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"range",[xc,Rc]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(s)),"axioss",Vt.a.create({responseType:"arraybuffer",paramsSerializer:function(e){return $t.a.stringify(e,{encode:!0})}})),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filter",Object(v.a)({},Q()(s.filter,"timeRange"),(a={order:"desc",orderBy:"time",orders:"desc",orderBys:"time",keyword:"",dimensions:"",timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,installs",begin:s.range?w()(s.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:s.range?w()(s.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")},Object(O.a)(a,"dimensions","cName,searchChannelId,searchChannelName"),Object(O.a)(a,"filterFields","rtbTypeId,unionBizTypeId,getSearchSoftwareChannel"),a))),Object(O.a)(Object(_.a)(Object(_.a)(s)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"subData",{name:"分渠道报告_".concat(s.format(s.filter.begin),"~").concat(s.format(s.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"downloadData",{fileName:"分渠道报告_".concat(s.format(s.filter.begin),"~").concat(s.format(s.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(s)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(s)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"selectedSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"sLotTotalCount",0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"cId",""),Object(O.a)(Object(_.a)(Object(_.a)(s)),"cName",""),Object(O.a)(Object(_.a)(Object(_.a)(s)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"chart",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"lastClickLeName",""),s}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){var t={};t.params=e,this.axioss.get("/v2/client/report/ssp-query/download",t).then(function(e){var t=e.headers["content-disposition"].match("(^|;)filename=([^;]*)(;|$)")[2],a=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),i=document.createElement("a"),s=URL.createObjectURL(a);i.href=s,t=decodeURI(t),i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}).catch(function(e){})}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getToolReportAllQuery,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport;var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin&&(this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:Rc]),e.end&&!e.begin&&(this.range=[xc,w()(e.end)._d]);var a=[],i=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=i/864e5,a[1]=w()(this.filter.begin).valueOf()-864e5,a[0]=w()(a[1]).valueOf()-i,a[0]=w()(a[0]).format("YYYYMMDD"),a[1]=w()(a[1]).format("YYYYMMDD"),e.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(a[0])._d,w()(a[1])._d])}},{key:"initListData",value:function(){}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"prepareData",value:function(e){return e}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","ecpm","click","clickRatio","installs"],"CONFIRMED"===t.status?e.contrastResults:null,{installs:"下载量"})}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"singleCn",cId:this.cId,cName:this.cName});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(mc);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var Ic,Fc=Object(u.a)(G.a,Tc,{name:"SingleToolCnReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-card":gc.a,"veui-grid-container":x.a,"veui-grid-row":R.a,"veui-grid-column":T.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"datepicker-self":ba.a,"veui-tabs":Sa.a,"veui-tab":F.a,"small-card":ya.a},data:function(){return{dayCount:1,isCompared:!1,index:0,metrics:"view,income,click,clickRatio,ecpm",defaultDimensions:"cName,cId",subscribeVisible:!1,downloadVisible:!1,field:"unionBizTypeId,rtbTypeId,",value:"6|2|",dateShortCut:[{label:"昨天",from:-1,to:-1},{label:"最近7天",from:-7,to:-1},{label:"上周",from:{startOf:"week",weeks:-1},to:{startOf:"week",days:-1}},{label:"上个月",from:{startOf:"month",months:-1},to:{startOf:"month",days:-1}},{label:"上个季度",from:{startOf:"quarter",quarters:-1},to:{startOf:"quarter",days:-1}}],freRule:[{label:"一次",value:0},{label:"每天",value:1},{label:"每周",value:2},{label:"每月",value:3},{label:"每季度",value:4}],saveFormType:[{value:0,label:"CSV"},{value:1,label:"EXCEL"}],formType:[{value:0,label:"CSV"},{value:1,label:"EXCEL"}],compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a,outside:Ra.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},created:function(){},mounted:function(){this.store.cId=this.$route.params.cId,this.store.cName=this.$route.params.cName;var e={filterFields:this.field+"cId",filterValues:this.value+"".concat(this.store.cId),dimensions:this.defaultDimensions};this.store.filter=Object(v.a)({},this.store.filter,e),this.refreshTableByFilter(),this.getGeneralData(e),this.getChartData(e)},computed:{chartOptions:function(){return this.store.chartData}},methods:{formatValue:function(e,t){return null===e||Number.isNaN(e)?"--":("number"==typeof e&&[0,2].includes(t)&&(e=e.toFixed(t)),"number"==typeof e||"string"==typeof e?Number(e).toLocaleString():"--")},getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics,filterFields:this.store.filterFields,filterValues:this.store.filterValues};delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),0===e.diffResults.length&&(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getChartData:function(e){var t={};"CONFIRMED"===this.store.status&&(t={contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD")});var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics};delete e.dimensions,this.store.getChart(Object(v.a)({},a,t,e))},refreshChartByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics,filterFields:this.field+"cId",filterValues:this.value+"".concat(this.store.cId)};this.getChartData(e)},formatLocal:function(e){return null===e?0:"number"==typeof e||"string"==typeof e?e.toLocaleString():e},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]},format:function(e){return w()(e).format("YYYY-MM-DD")},toPercent:function(e){if(null===e)return"0%";var t=Number(e);return(t=t.toFixed(2))+"%"},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"分计费名报告".concat(this.store.cId,"_").concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"分计费名报告".concat(this.store.cId,"_").concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,e.appId&&delete e.appId,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},refreshGeneralDataByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics,filterFields:this.field+"cId",filterValues:this.value+"".concat(this.store.cId)};this.getGeneralData(e)},refreshTableByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics,filterFields:this.field+"cId",filterValues:this.value+"".concat(this.store.cId),dimensions:this.defaultDimensions,pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};"CONFIRMED"===this.store.status?(e.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),e.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")):(e.contrastBegin="",e.contrastEnd=""),this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},compareDate:function(e){},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(Ic=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return Ic.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),Nc=(a("cf285"),Object(p.a)(Fc,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view"},[a("h3",{staticClass:"title"},[e._v("分计费名报告 > "+e._s(e.$route.params.cName)+"（ID: "+e._s(e.$route.params.cId)+"）")]),a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},on:{select:e.compareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("下载\n            ")],1)],1)]),a("template",{slot:"batchContent"},[a("veui-grid-container",{attrs:{columns:25}},[a("veui-grid-row",[a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"总展现量",value:e.formatValue(e.store.cardData.view),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.view)}}),a("report-card",{attrs:{title:"日均展现量",value:e.formatValue(e.store.cardData.view/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.view/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.view,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"预计总收入（元）",value:e.formatValue(e.store.cardData.income),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.income)}}),a("report-card",{attrs:{title:"预计日均收入（元）",value:e.formatValue(e.store.cardData.income/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.income/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.income,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"总点击量",value:e.formatValue(e.store.cardData.click),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.click)}}),a("report-card",{attrs:{title:"日均点击量",value:e.formatValue(e.store.cardData.click/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.click/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.click,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"eCPM（元）",value:e.formatValue(e.store.cardData.ecpm),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.ecpm)}}),a("report-card",{attrs:{title:"eCPM（元）",value:e.formatValue(e.store.cardData.ecpm),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.ecpm),radio:e.isCompared,radioValue:e.store.diffCardData.ecpm,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:5}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"点击率",value:e.toPercent(e.store.cardData.clickRatio||0),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.clickRatio||0)}}),a("report-card",{attrs:{title:"点击率",value:e.toPercent(e.store.cardData.clickRatio||0),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.clickRatio||0),radio:e.isCompared,radioValue:e.store.diffCardData.clickRatio,border:e.isCompared}})],1)])],1)],1),a("veui-tabs",{attrs:{ui:"block",index:e.index},on:{"update:index":function(t){e.index=t}}},[a("veui-tab",{attrs:{label:"分日",name:"day"}},[a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1)],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"adposition"},[e._v(e._s(e.formatTime(t.time)))]):e._e(),t.contrastResults?e._e():a("div",[e._v(e._s(e.formatTime(t.time)))]),t.contrastResults?a("div",[e._v(e._s(e.formatTime(t.contrastResults.time)))]):e._e(),t.contrastResults?a("div",[e._v("变化率")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"view",width:"130",title:"展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income),ago:e.formatLocal(t.contrastResults.income),diff:e.formatLocal(t.diffResults.income)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"150",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"160",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm),ago:e.formatLocal(t.contrastResults.ecpm),diff:e.formatLocal(t.diffResults.ecpm)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"160",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio),ago:e.toPercent(t.contrastResults.clickRatio),diff:e.formatLocal(t.diffResults.clickRatio)}})],1):e._e()]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"分渠道报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(this.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s))])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"分计费名报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(this.formType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s))])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));Nc.options.__file="SingleToolCnReportView.vue";var Ac=Nc.exports,Mc=new Date((new Date).setHours(0,0,0,0)),Yc=new Date(Mc-864e5),Lc=new Date(Mc-0-1e3),Ec=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","分渠道报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[Yc,Lc]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"contrastRange",[new Date(new Date-12096e5),new Date(new Date-6912e5)]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"axioss",Vt.a.create({responseType:"arraybuffer",paramsSerializer:function(e){return $t.a.stringify(e,{encode:!0})}})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{order:"desc",orderBy:"income",orders:"desc",orderBys:"income",cId:"",cproChannelId:[],dimensions:"",timeGranularity:"day",metrics:"view,income,click,pageview,clickRatio,ecpm,cpc",filterFields:"rtbTypeId,unionBizTypeId,getSearchSoftwareChannel",filterValues:"2|6|1",begin:a.range?w()(a.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:a.range?w()(a.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")})),Object(O.a)(Object(_.a)(Object(_.a)(a)),"defaultArgs",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"subData",{name:"分渠道报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"downloadData",{fileName:"分渠道报告_".concat(a.format(a.filter.begin),"~").concat(a.format(a.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(a)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cId",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cnList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"channelList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filterchName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(a)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"cproChannelName",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"chart",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"lastClickLeName",""),a}var a;return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){var t={};t.params=e,this.axioss.get("/v2/client/report/ssp-query/download",t).then(function(e){var t=e.headers["content-disposition"].match("(^|;)filename=([^;]*)(;|$)")[2],a=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),i=document.createElement("a"),s=URL.createObjectURL(a);i.href=s,t=decodeURI(t),i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}).catch(function(e){})}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getToolReportAllQuery,this.getToolCnList=this.api.getToolCnList,this.getToolChannelList=this.api.getToolChannelList,this.getReportSum=this.api.getToolReportSum,this.save=this.api.saveToolReport;var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin&&(this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:Lc]),e.end&&!e.begin&&(this.range=[Yc,w()(e.end)._d]);var a=[],i=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=i/864e5,a[1]=w()(this.filter.begin).valueOf()-864e5,a[0]=w()(a[1]).valueOf()-i,a[0]=w()(a[0]).format("YYYYMMDD"),a[1]=w()(a[1]).format("YYYYMMDD"),e.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d]):this.compareRange=[w()(a[0])._d,w()(a[1])._d]}},{key:"getChannel",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a,i,s,l,r,o,n,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getToolCnList();case 2:for(t=e.sent,a=st()(t),i=a.length,s=0;s<i;s++)this.cnList.push({label:a[s].cname,value:a[s].cid});if(this.filter.cId=a[0].cid||null,l={cid:this.filter.cId},this.filter.cId)return e.next=11,this.getToolChannelList(l);e.next=13;break;case 11:if((r=e.sent).customizeChannelList)for(o=st()(r.customizeChannelList),n=o.length,c=0;c<n;c++)this.channelList.push({label:o[c].chName,value:o[c].chpkid});case 13:return e.abrupt("return",this.filter.cId);case 14:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"initListData",value:function(){}},{key:"prepareQuery",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.filter,a=st()(t);return Array.isArray(a.cproChannelId)&&(t.cproChannelId=a.cproChannelId.join()),Q()(t,"timeRange")}},{key:"fillFilterFromQuery",value:function(){var e=this;this.getRouteQuery({}),Et()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)}),"string"==typeof this.filter.cproChannelId&&(this.filter.cproChannelId=this.filter.cproChannelId?this.filter.cproChannelId.split(","):[],this.filter.cproChannelId=Ea()(this.filter.cproChannelId,function(e){return Number(e)})),"string"==typeof this.filter.cId&&(this.filter.cId=Number(this.filter.cId)),this.tagFilter=st()(this.filter)}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"prepareData",value:function(e){return e}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","ecpm","click","clickRatio","installs"],"CONFIRMED"===t.status?e.contrastResults:null,{installs:"下载量"})}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"tool-channel",cId:this.filter.cId,filterchName:this.filterchName,cproChannelId:this.filter.cproChannelId});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(mc),Pc=(a("d263"),a("ec69")),Vc=a.n(Pc),Bc=a("ba84"),$c=a.n(Bc),zc=a("d173"),qc=a.n(zc),Uc=a("4835"),Wc=a("89eb"),Gc=a("92fa"),Hc=a.n(Gc),Qc={name:"veui-table-body",components:{"veui-table-row":{name:"veui-table-row",components:{"veui-checkbox":he.a,"veui-radio":je.a},mixins:[qo.a],props:{index:{type:Number,required:!0},fixed:String},computed:Object(v.a)({},qo.a.mapTableData("data",{realColumns:"columns"},"selectable","selectMode","selectedItems","keyField",{realKeys:"keys"})),render:function(e){var t=this,a=e,i=this.index,s=this.data[i],l=this.keyField?s[this.keyField]:this.keys[i],r=!!this.selectedItems[l],o=W()(this.columns,function(e){return e.field===t.keyField}),n={};return o&&(n=this.getCellSpan(o)),a("tr",{class:{"veui-table-selected-row":r}},[this.selectable&&n?a("td",Hc()([{attrs:{role:"cell"}},n]),[a("div",{class:"veui-table-cell"},["multiple"===this.selectMode?a("veui-checkbox",{attrs:{checked:r,"aria-label":r?"移除本行":"添加本行"},on:{change:function(e){t.table.select(e,i)}}}):a("veui-radio",{attrs:{checked:r,"aria-label":"选择本行"},on:{change:function(e){t.table.select(e,i)}}})])]):null,this.columns.map(function(e){var l=t.getCellSpan(e);return l?a("td",Hc()([{class:t.getBodyClass(e),attrs:{role:"cell"}},l]),[a("div",{class:"veui-table-cell"},[e.renderBody(Object(v.a)({},s,{item:s,index:i}))])]):null})])},methods:{getCellSpan:function(e){var t={attrs:{}};if("function"==typeof e.span){var a=this.data,i=this.index,s=e.span(i,a[i]),l=s.col,r=void 0===l?1:l,o=s.row,n=void 0===o?1:o;if(r<1||n<1)return null;1<r&&(t.attrs.colspan=r),1<n&&(t.attrs.rowspan=n)}return t},getBodyClass:function(e){var t=[];return e.align&&t.push("veui-table-column-".concat(e.align)),this.fixed&&!e.fixed&&t.push("is-hidden"),t.join(" ")}}}},mixins:[qo.a],computed:Object(v.a)({},qo.a.mapTableData("data","selectable",{realColumns:"columns"})),props:{fixed:String},render:function(e){var t=this,a=e;return a("tbody",[this.data.length?this.data.map(function(e,i){return a("veui-table-row",{attrs:{fixed:t.fixed,index:i}})}):a("tr",[a("td",{class:"veui-table-no-data",attrs:{colspan:(this.selectable?1:0)+this.columns.length,role:"cell"}},[a("div",{class:"veui-table-cell"},[this.$slots["no-data"]||"没有数据"])])])])}},Jc=a("f6ea"),Kc={name:"veui-table-head",components:{"veui-checkbox":he.a,"veui-button":S.a,"veui-sorter":Jc.a},props:{fixed:String},mixins:[qo.a],computed:Object(v.a)({},qo.a.mapTableData("data","selectable","selectMode","selectStatus",{realColumns:"columns"})),methods:{getHeaderClass:function(e){var t=[];return e.align&&t.push("veui-table-column-".concat(e.align)),this.fixed&&!e.fixed&&t.push("is-hidden"),t.join(" ")}},render:function(e){var t=this,a=e;return a("thead",[a("tr",[this.selectable?a("th",{attrs:{scope:"col",role:"columnheader"}},[a("div",{class:"veui-table-cell"},["multiple"===this.selectMode?a("veui-checkbox",{attrs:{checked:"none"!==this.selectStatus,disabled:!this.data.length,indeterminate:"partial"===this.selectStatus,"aria-label":this.checked?"全部移除":"全部添加"},on:{change:function(e){t.table.select(e)}}}):null])]):null,this.columns.map(function(e){return a("th",{class:t.getHeaderClass(e),attrs:{scope:"col",role:"columnheader","aria-sort":!(t.table.orderBy!==e.field||!t.table.order)&&"".concat(t.table.order,"ending")}},[a("div",{class:"veui-table-cell"},[e.renderHead()]),e.sortable?a("veui-sorter",{attrs:{order:t.table.orderBy===e.field&&t.table.order},on:{sort:function(a){t.$emit("sort",e.field,a)}}}):null])})])])}},Zc={name:"veui-table-foot",mixins:[qo.a],computed:Object(v.a)({},qo.a.mapTableData({realColumns:"columns"},"selectable","selectStatus")),render:function(e){var t=e;return t("tfoot",[t("tr",[this.$slots.default?t("th",{attrs:{colspan:this.columns.length+(this.table.selectable?1:0)}},[this.$slots.default]):(this.table.selectable?[t("th")]:[]).concat(this.columns.map(function(e){return t("th",{class:e.align?"veui-table-column-".concat(e.align):null},[e.renderFoot()])}))])])}},Xc=a("e6d1");function eu(e){return null==e?[]:Array.isArray(e)?e:[e]}var tu={name:"veui-table",uiTypes:["table"],mixins:[Wc.a],components:{"table-body":Qc,"table-head":Kc,"table-foot":Zc},props:{data:{type:Array,default:function(){return[]}},keys:[String,Array],keyField:String,selectable:Boolean,selectMode:{type:String,default:"multiple",validator:function(e){return"single"===e||"multiple"===e}},selected:{default:function(){return[]}},order:{type:[String,Boolean],default:!1,validator:function(e){return!1===e||ra()(["asc","desc"],e)}},orderBy:String,columnFilter:Array},data:function(){return{columns:[],hasFixedRight:!1,hasAddEvent:!1,localSelected:eu(this.selected)}},computed:{fixedWidth:function(){var e=0,t=this.realColumns.filter(function(e){return e.fixed});if(0<t.length){var a=!0,i=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(a=(l=r.next()).done);a=!0)e+=l.value.width}catch(e){i=!0,s=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}}return e},hasFixed:function(){return 0<this.realColumns.filter(function(e){return e.fixed}).length},columnIds:function(){return this.columns.map(function(e){return e.id})},realSelected:function(){return"multiple"===this.selectMode?this.localSelected:this.localSelected[0]||null},realColumns:function(){var e=this;return this.columnFilter?this.columns.filter(function(t){return ra()(e.columnFilter,t.field)}):this.columns},fixedColumns:function(){var e=this;return this.columnFilter?this.columns.filter(function(t){return ra()(e.columnFilter,t.field)}).filter(function(e){return!!e.fixed}):this.columns.filter(function(e){return!!e.fixed})},realKeys:function(){var e=this;if(this.keyField){var t=(W()(this.columns,function(t){return t.field===e.keyField})||{}).span;return"function"==typeof t?Vc()(this.data).map(function(e){return{index:e,span:t(e)}}).filter(function(e){var t=e.span,a=t.row,i=void 0===a?1:a,s=t.col;return 1<=i&&1<=(void 0===s?1:s)}).map(function(t){var a=t.index;return e.data[a][e.keyField]}):Ea()(this.data,this.keyField)}var a=this.keys;return"string"==typeof(a=a||Vc()(this.data))&&(a=Ea()(this.data,a)),a.map(String)},selectedItems:function(){var e=this;return this.localSelected.reduce(function(t,a){return t[a]=e.getItems(a),t},{})},selectStatus:function(){var e=this.realKeys,t=qc()(e,this.localSelected);return t.length?t.length===e.length?"all":"partial":"none"},hasFoot:function(){return this.$slots.foot||this.columns.some(function(e){return e.hasFoot()})}},methods:{add:function(e){var t=this.columns.length,a=e.index;t<=a?this.columns.push(e):this.columns.splice(a,0,e)},removeById:function(e){this.columns.splice(this.columnIds.indexOf(e),1)},select:function(e,t){var a=null;if(void 0!==t){a=this.data[t];var i=this.keyField?a[this.keyField]:this.realKeys[t];e?"multiple"===this.selectMode?this.localSelected.push(i):this.localSelected=[i]:this.localSelected.splice($c()(this.localSelected,i),1)}else this.localSelected=e?Object(Ve.a)(this.realKeys):[];this.$emit("select",e,a,this.selectedItems)},getItems:function(e){var t=this;if(this.keyField){var a=this.data.filter(function(a){return a[t.keyField]===e});return 1===a.length?a[0]:a}return this.data[$c()(this.realKeys,e)]},sort:function(e,t){this.$emit("sort",e,t)},validateSelected:function(e){return 0<arguments.length&&void 0!==e||this.selected,"single"===this.selectMode&&Array.isArray(this.selected)?(Object(Uc.a)("`selected` should not be an array when `select-mode` is `single`."),!1):!("multiple"===this.selectMode&&!Array.isArray(this.selected))||(Object(Uc.a)("`selected` should be an array when `select-mode` is `multiple`."),!1)},getOffsetLeft:function(e){for(var t=0;isNaN(e.offsetTop)||(t+=e.offsetTop),e=e.offsetParent;);return t},throttle:function(e){var t=!1;return function(){t||(t=!0,window.requestAnimationFrame(function(a){e(),t=!1}))}}},created:function(){this.validateSelected()},mounted:function(){var e=this,t=this.$refs.headerWrapper,a=this.$refs.bodyWrapper,i=document.getElementsByClassName("list-view main")[0],s=0,l=0;t.style.zIndex=1,i.addEventListener("scroll",this.throttle(function(){s=i.scrollLeft,t.style.left=i.offsetLeft-s+30-l+"px"}),!1),window.addEventListener("scroll",this.throttle(function(){var r=document.documentElement.scrollTop||document.body.scrollTop;l=document.documentElement.scrollLeft||document.body.scrollLeft;var o=e.getOffsetLeft(a)-r;t.style.left=i.offsetLeft-s+30-l+"px",o<=0?(t.style.position="fixed",t.style.top="0px"):(t.style.position="",t.style.top="")}),!1)},updated:function(){var e=this;if(!this.hasAddEvent&&this.hasFixed){var t=this.$refs.headerWrapperFixed,a=this.$refs.tableFixed,i=this.$refs.bodyWrapper,s=document.getElementsByClassName("list-view main")[0],l=0,r=0;t.style.zIndex=1,a.style.zIndex=1,s.addEventListener("scroll",this.throttle(function(){l=s.scrollLeft,t.style.left=s.offsetLeft+30+"px",a.style.left=l+r+"px"}),!1),window.addEventListener("scroll",this.throttle(function(){var o=document.documentElement.scrollTop||document.body.scrollTop;r=document.documentElement.scrollLeft||document.body.scrollLeft;var n=e.getOffsetLeft(i)-o;t.style.left=s.offsetLeft+30+"px",a.style.left=l+r+"px",n<=0?(t.style.position="fixed",t.style.top="0px"):(t.style.position="",t.style.top="")}),!1)}this.hasAddEvent=!0},watch:{selected:function(e){this.validateSelected(e)&&(this.localSelected=eu(e))},realKeys:function(e){this.localSelected=qc()(this.localSelected,e)},realSelected:function(e,t){e!==t&&Object(Xc.b)(e,t)||this.$emit("update:selected",e)},hasFixed:function(e){e&&(this.hasAddEvent=!1)}}},au=(a("044e"),a("f906"),Object(p.a)(tu,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{ref:"headerWrapper",staticClass:"table__header-wrapper"},[a("table",{staticClass:"veui-table",attrs:{ui:e.ui}},[a("colgroup",[e.selectable?a("col",{attrs:{width:"60"}}):e._e(),e._l(e.realColumns,function(e){return a("col",{key:e.id,attrs:{width:e.width}})})],2),a("table-head",{on:{sort:e.sort}})],1)]),a("div",{ref:"bodyWrapper",staticClass:"table__body-wrapper"},[a("table",{staticClass:"veui-table",attrs:{ui:e.ui}},[e._t("default"),a("colgroup",[e.selectable?a("col",{attrs:{width:"60"}}):e._e(),e._l(e.realColumns,function(e){return a("col",{key:e.id,attrs:{width:e.width}})})],2),a("table-body",[a("template",{slot:"no-data"},[e._t("no-data",[e._v("没有数据")])],2)],2),e.hasFoot?a("table-foot",[e._t("foot")],2):e._e()],2)]),e.hasFixed?a("div",{ref:"tableFixed",staticClass:"table_fixed"},[a("div",{ref:"headerWrapperFixed",staticClass:"table__header-wrapper-fixed"},[a("table",{staticClass:"veui-table",style:{width:this.fixedWidth+"px"},attrs:{ui:e.ui}},[a("colgroup",[e.selectable?a("col",{attrs:{width:"60"}}):e._e(),e._l(e.realColumns,function(e){return a("col",{key:e.id,attrs:{width:e.fixed?e.width:0}})})],2),a("table-head",{attrs:{fixed:"left"},on:{sort:e.sort}})],1)]),a("div",{ref:"bodyWrapperFixed",staticClass:"table__body-wrapper-fixed"},[a("table",{staticClass:"veui-table",style:{width:this.fixedWidth+"px"},attrs:{ui:e.ui}},[a("colgroup",[e.selectable?a("col",{attrs:{width:"60"}}):e._e(),e._l(e.realColumns,function(e){return a("col",{key:e.id,attrs:{width:e.fixed?e.width:0}})})],2),a("table-body",{attrs:{fixed:"left"}},[a("template",{slot:"no-data"},[e._t("no-data",[e._v(" ")])],2)],2),e.hasFoot?a("table-foot",[e._t("foot")],2):e._e()],1)])]):e._e()])},[],!1,null,"8e5e0658",null));au.options.__file="Table.vue";var iu=au.exports,su={name:"veui-table-column",uiTypes:["table-column"],mixins:[qo.a],props:{title:String,fixed:String,field:{type:String,required:!0},width:[String,Number],sortable:Boolean,align:{type:String,validator:function(e){return!e||"left"===e||"right"===e||"center"===e}},span:Function},data:function(){return{id:zo()("veui-table-column-")}},render:function(){return null},created:function(){var e=this,t=Object(Uo.a)(this,"table-column");this.table.add(Object(v.a)({},na.a.apply(void 0,[this].concat(["title","field","sortable","width","align","span","fixed"],["id"])),{index:t,hasFoot:function(){return!!e.$slots.foot},renderBody:function(t){return e.$scopedSlots.default?e.$scopedSlots.default(t):t[e.field]},renderHead:function(){return e.$slots.head||e.title},renderFoot:function(){return e.$slots.foot||null}}))},destroyed:function(){this.table.removeById(this.id)}},lu=Object(p.a)(su,void 0,void 0,!1,null,null,null);lu.options.__file="Column.vue";var ru=lu.exports;Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var ou,nu,cu,uu=Object(u.a)(G.a,Ec,{name:"ToolChannelReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table":iu,"veui-table-column":ru,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-card":gc.a,"veui-grid-container":x.a,"veui-grid-row":R.a,"veui-grid-column":T.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,"veui-searchbox":Pe.a,"select-self":ea.a,"datepicker-self":ba.a,"small-card":ya.a},data:function(){var e=this;return{dayCount:1,isCompared:!1,moment:w.a,metrics:"view,income,click,clickRatio,ecpm,installs",defaultDimensions:"cName,searchChannelId,searchChannelName",field:"rtbTypeId,unionBizTypeId,getSearchSoftwareChannel,",value:"2|6|1|",channelIdKey:"",channelIdFilter:function(t){return-1!==t.label.toLowerCase().indexOf(e.channelIdKey.toLowerCase())},item:[],labelForTag:{cproChannelId:"渠道"},filterItem:{cproChannelId:this.store.channelList},subscribeVisible:!1,downloadVisible:!1,dateShortCut:[{label:"昨天",from:-1,to:0},{label:"最近7天",from:-7,to:-1},{label:"上周",from:{startOf:"week",weeks:-1},to:{startOf:"week",days:-1}},{label:"上个月",from:{startOf:"month",months:-1},to:{startOf:"month",days:-1}},{label:"上个季度",from:{startOf:"quarter",quarters:-1},to:{startOf:"quarter",days:-1}}],freRule:[{label:"一次",value:0},{label:"每天",value:1},{label:"每周",value:2},{label:"每月",value:3},{label:"每季度",value:4}],saveFormType:[{value:0,label:"CSV"},{value:1,label:"EXCEL"}],formType:[{value:0,label:"CSV"},{value:1,label:"EXCEL"}],compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery},"$router.query":function(e){}},created:function(){this.$watch("$route.query",this.queryChange)},mounted:function(){this.initFilter()},computed:{chartOptions:function(){return this.store.chartData}},methods:{queryChange:function(){0===Object.keys(this.$route.query).length&&(this.store.status="UNCONFIRMED",this.initFilter())},changeCn:(cu=Object(q.a)(regeneratorRuntime.mark(function e(t){var a,i,s,l,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={cid:this.store.filter.cId},e.next=3,this.store.getToolChannelList(a);case 3:if((i=e.sent).customizeChannelList)for(this.store.channelList=[],s=st()(i.customizeChannelList),l=s.length,r=0;r<l;r++)this.store.channelList.push({label:s[r].chName,value:s[r].chName});else this.store.channelList=[];this.store.filter.cproChannelId=[],this.store.tagFilter=st()(this.store.filter);case 7:case"end":return e.stop()}},e,this)})),function(e){return cu.apply(this,arguments)}),initFilter:(nu=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a,i,s,l,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.global.reportfilterSelectItems,e.next=3,this.store.getChannel();case 3:if(this.store.filter.cId=e.sent,a={},t){for(s={dimensions:i=""},l=0;l<t.filterValues.length;l++)i+=t.filterValues[l].join(",")+"|",s[t.filterFields[l]]=t.filterValues[l];s.dimensions=t.dimensions.join(","),a={filterFields:t.filterFields.join(","),filterValues:i.slice(0,-1),metrics:t.metrics.join(",")},delete s.rtbTypeId,delete s.unionBizTypeId,delete s.getSearchSoftwareChannel,this.store.filter=Object(v.a)({},this.store.filter,a,s),delete(r=st()(JSON.parse(t.typeInfo))).reportType,r.cId&&(this.store.filter.cId=r.cId),r.cproChannelId&&(this.store.filter.cproChannelId=r.cproChannelId),this.store.filterchName=r.filterchName,this.refreshTableByFilter()}else o=this.store.getRouteQuery(),(a={filterFields:o.filterFields?o.filterFields+"|":this.field+"cId,",filterValues:o.filterValues?o.filterValues+"|":this.value+this.store.filter.cId+"|",dimensions:o.dimensions}).filterFields=a.filterFields.slice(0,-1),a.filterValues=a.filterValues.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,a),this.refreshTableByFilter();this.getGeneralData(a),this.getChartData(a);case 8:case"end":return e.stop()}},e,this)})),function(){return nu.apply(this,arguments)}),tableSelect:function(){var e;(e=this.store).tableSelect.apply(e,arguments)},tableSort:function(){var e;(e=this.store).tableSort.apply(e,arguments)},toSingleChannelReport:function(e){this.global.router.push({path:"/report/tool-channel/".concat(this.store.filter.cId,"/").concat(e),query:{begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:"CONFIRMED"===this.store.status?w()(this.store.compareRange[0]).format("YYYYMMDD"):"",contrastEnd:"CONFIRMED"===this.store.status?w()(this.store.compareRange[1]).format("YYYYMMDD"):"",filterValues:"2|6|1|".concat(this.store.filter.cId,"|").concat(e),filterFields:"unionBizTypeId,rtbTypeId,getSearchSoftwareChannel,cId,searchChannelId"}})},getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics};delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){for(var a in t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),0===e.diffResults.length&&(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0]||{},t.store.compareData=e.contrastResults[0]||{},t.store.diffCardData=e.diffResults[0]||{},t.store.diffCardData)t.store.diffCardData[a]=Number(t.store.diffCardData[a])})},formatValue:function(e,t){return null===e||Number.isNaN(e)?"--":("number"==typeof e&&[0,2].includes(t)&&(e=e.toFixed(t)),"number"==typeof e||"string"==typeof e?Number(e).toLocaleString():"--")},getChartData:function(e){var t={};"CONFIRMED"===this.store.status&&(t={contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD")});var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics};delete e.dimensions,this.store.getChart(Object(v.a)({},a,t,e))},formatLocal:function(e){return null===e?"--":"number"==typeof e||"string"==typeof e?e.toLocaleString():e},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]},format:function(e){return w()(e).format("YYYY-MM-DD")},toPercent:function(e){if(null===e)return"--";var t=Number(e);return(t=t.toFixed(2))+"%"},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"分渠道报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"分渠道报告_".concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,e.cproChannelId&&delete e.cproChannelId,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},deleteFilters:function(e){if("all"===e)return this.store.filter.cproChannelId=[],this.store.filterchName=!1,this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),void this.refreshTableByFilter();this.store.filter[e]=[],this.store.filterchName=!1,this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},refreshGeneralDataByFilter:function(){var e=st()(this.store.filter.cproChannelId),t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics,filterFields:this.field+"cId,",filterValues:this.value+this.store.filter.cId+"|"};0===e.length||this.store.filterchName||(t.filterFields+="searchChannelId,",t.filterValues+=e.join(",")+"|"),t.filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.getGeneralData(t)},refreshChartByFilter:function(){var e=st()(this.store.filter.cproChannelId),t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics,filterFields:this.field+"cId,",filterValues:this.value+this.store.filter.cId+"|"};e&&0!==e.length&&!this.store.filterchName&&(t.filterFields+="searchChannelId,",t.filterValues+=e.join(",")+"|"),t.filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.getChartData(t)},refreshTableByFilter:function(){var e=st()(this.store.filter.cproChannelId)||[],t={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics,filterFields:this.field+"cId,",filterValues:this.value+this.store.filter.cId+"|",dimensions:this.defaultDimensions,pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};e&&0!==e.length&&!this.store.filterchName?(t.filterFields+="searchChannelId,",t.filterValues+=e.join(",")+"|",this.store.cproChannelName=!0):this.store.cproChannelName=!1,this.store.filterchName&&(this.store.cproChannelName=!0),"CONFIRMED"===this.store.status?(t.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),t.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")):(t.contrastBegin="",t.contrastEnd=""),t.filterFields=t.filterFields.slice(0,-1),t.filterValues=t.filterValues.slice(0,-1),this.store.filter=Object(v.a)({},this.store.filter,t),this.store.submitSearch(),this.$forceUpdate()},requestSearch:function(){this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},compareDate:function(e){},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(ou=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return ou.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),du=(a("8bd1"),Object(p.a)(uu,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"tool-report-view"},[a("template",{slot:"filterContent"},[a("veui-select",{staticClass:"long-select",attrs:{placeholder:"计费名",options:e.store.cnList},on:{change:e.changeCn},model:{value:e.store.filter.cId,callback:function(t){e.$set(e.store.filter,"cId",t)},expression:"store.filter.cId"}}),a("select-self",{attrs:{placeholder:"渠道",isall:e.store.filterchName,options:e.store.channelList,filter:e.channelIdFilter,multi:!0},on:{"update:isall":function(t){e.$set(e.store,"filterchName",t)}},model:{value:e.store.filter.cproChannelId,callback:function(t){e.$set(e.store.filter,"cproChannelId",t)},expression:"store.filter.cproChannelId"}},[e.store.channelList&&8<e.store.channelList.length?a("div",{attrs:{slot:"before"},slot:"before"},[a("veui-input",{staticClass:"select-filter",attrs:{ui:"tiny"},model:{value:e.channelIdKey,callback:function(t){e.channelIdKey=t},expression:"channelIdKey"}})],1):e._e()]),a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},on:{select:e.compareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary small"},on:{click:e.requestSearch}},[e._v("查询")]),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("下载\n            ")],1)],1),a("filter-tags",{attrs:{"init-filter":e.store.tagFilter,"filter-options":e.filterItem,label:e.labelForTag},on:{deleteFilter:e.deleteFilters}})],1),a("template",{slot:"batchContent"},[a("veui-grid-container",{attrs:{columns:24}},[a("veui-grid-row",[a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"总展现量",value:e.formatValue(e.store.cardData.view),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.view)}}),a("report-card",{attrs:{title:"日均展现量",value:e.formatValue(e.store.cardData.view/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.view/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.view,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"预计总收入（元）",value:e.formatValue(e.store.cardData.income),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.income)}}),a("report-card",{attrs:{title:"预计日均收入（元）",value:e.formatValue(e.store.cardData.income/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.income/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.income,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"总点击量",value:e.formatValue(e.store.cardData.click),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.click)}}),a("report-card",{attrs:{title:"日均点击量",value:e.formatValue(e.store.cardData.click/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.click/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.click,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"eCPM（元）",value:e.formatValue(e.store.cardData.ecpm),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.ecpm)}}),a("report-card",{attrs:{title:"eCPM（元）",value:e.formatValue(e.store.cardData.ecpm),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.ecpm),radio:e.isCompared,radioValue:e.store.diffCardData.ecpm,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"点击率",value:e.toPercent(e.store.cardData.clickRatio||0),compared:e.isCompared,compareValue:e.toPercent(e.store.compareData.clickRatio||0)}}),a("report-card",{attrs:{title:"点击率",value:e.toPercent(e.store.cardData.clickRatio||0),compared:e.isCompared,compareValue:e.toPercent(e.store.compareData.clickRatio||0),radio:e.isCompared,radioValue:e.store.diffCardData.clickRatio,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"下载量",value:e.formatValue(e.store.cardData.installs),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.installs)}}),a("report-card",{attrs:{title:"日均下载量",value:e.formatValue(e.store.cardData.installs/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.installs/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.installs,border:e.isCompared}})],1)])],1)],1),a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1),a("template",{staticClass:"table-container",slot:"table"},[a("veui-table",{attrs:{ui:e.store.tableUI,data:e.store.tableData,"column-filter":e.store.tableColumns,keys:e.store.tableKeys,selectable:e.store.tableSelectable,"order-by":e.store.filter.orderBy,order:e.store.filter.order,selected:e.store.tableSelected},on:{select:e.tableSelect,sort:e.tableSort,"update:selected":function(t){e.$set(e.store,"tableSelected",t)}}},[a("veui-table-column",{attrs:{field:"searchChannelName",width:"190",fixed:"left",title:"渠道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"adposition",on:{click:function(a){e.toSingleChannelReport(t.searchChannelId)}}},[a("div",[e._v(e._s(t.searchChannelName))]),a("div",[e._v("ID: "+e._s(t.searchChannelId))])]),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.range[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.range[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    "+e._s(e.moment(e.store.compareRange[0]).format("YYYY-MM-DD"))+"~\n                    "+e._s(e.moment(e.store.compareRange[1]).format("YYYY-MM-DD"))+"\n                ")]):e._e(),t.contrastResults?a("div",[e._v("\n                    变化率\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cName",width:"180",title:"计费名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.cName))])]}}])}),a("veui-table-column",{attrs:{field:"view",width:"160",title:"展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"180",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income),ago:e.formatLocal(t.contrastResults.income),diff:e.formatLocal(t.diffResults.income)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"150",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"160",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm),ago:e.formatLocal(t.contrastResults.ecpm),diff:e.formatLocal(t.diffResults.ecpm)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"160",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio),ago:e.toPercent(t.contrastResults.clickRatio),diff:e.formatLocal(t.diffResults.clickRatio)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"installs",width:"160",title:"下载量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.installs)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.installs),ago:e.formatLocal(t.contrastResults.installs),diff:e.formatLocal(t.diffResults.installs)}})],1):e._e()]}}])})],1)],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"分渠道报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(this.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s))])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"分渠道报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(this.formType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s))])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));du.options.__file="ToolChannelReportView.vue";var fu=du.exports,pu=new Date((new Date).setHours(0,0,0,0)),hu=new Date(pu-864e5),mu=new Date(pu-0-1e3),vu=function(e){function t(){var e,a,s;Object(i.a)(this,t);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return s=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(n))),Object(O.a)(Object(_.a)(Object(_.a)(s)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filterRule",[]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"range",[hu,mu]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"compareRange",null),Object(O.a)(Object(_.a)(Object(_.a)(s)),"axioss",Vt.a.create({responseType:"arraybuffer",paramsSerializer:function(e){return $t.a.stringify(e,{encode:!0})}})),Object(O.a)(Object(_.a)(Object(_.a)(s)),"filter",Object(v.a)({},Q()(s.filter,"timeRange"),(a={order:"desc",orderBy:"time",orders:"desc",orderBys:"time",keyword:"",dimensions:"",timeGranularity:"day",metrics:"view,income,click,clickRatio,ecpm,installs",begin:s.range?w()(s.range[0]).format("YYYYMMDD"):w()().format("YYYYMMDD"),end:s.range?w()(s.range[1]).format("YYYYMMDD"):w()().format("YYYYMMDD")},Object(O.a)(a,"dimensions","cName,searchChannelId,searchChannelName"),Object(O.a)(a,"filterFields","rtbTypeId,unionBizTypeId,getSearchSoftwareChannel"),a))),Object(O.a)(Object(_.a)(Object(_.a)(s)),"tagFilter",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"subData",{name:"分渠道报告_".concat(s.format(s.filter.begin),"~").concat(s.format(s.filter.end)),fre:1,type:0,email:""}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"downloadData",{fileName:"分渠道报告_".concat(s.format(s.filter.begin),"~").concat(s.format(s.filter.end)),type:0}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"dateRange",6),Object(O.a)(Object(_.a)(Object(_.a)(s)),"status","UNCONFIRMED"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"canCompareRange",!1),Object(O.a)(Object(_.a)(Object(_.a)(s)),"chartData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"cardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"compareData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"diffCardData",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"reportfilterSelectItems",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"slotFliter",{pageNo:1,pageSize:30}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"selectedSlot",[]),Object(O.a)(Object(_.a)(Object(_.a)(s)),"sLotTotalCount",0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"successToast","提交成功"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"failToast","提交失败"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollToFirstError",!0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollFix",0),Object(O.a)(Object(_.a)(Object(_.a)(s)),"scrollBehavior","smooth"),Object(O.a)(Object(_.a)(Object(_.a)(s)),"cId",""),Object(O.a)(Object(_.a)(Object(_.a)(s)),"channelId",""),Object(O.a)(Object(_.a)(Object(_.a)(s)),"sum",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"chart",{}),Object(O.a)(Object(_.a)(Object(_.a)(s)),"lastClickLeName",""),s}return Object(n.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return w()(e).format("YYYY-MM-DD")}},{key:"download",value:function(e){var t={};t.params=e,this.axioss.get("/v2/client/report/ssp-query/download",t).then(function(e){var t=e.headers["content-disposition"].match("(^|;)filename=([^;]*)(;|$)")[2],a=new Blob([e.data],{type:"application/octet-stream;charset=utf-8"}),i=document.createElement("a"),s=URL.createObjectURL(a);i.href=s,t=decodeURI(t),i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}).catch(function(e){})}},{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getToolReportAllQuery,this.getReportSum=this.api.getReportSum,this.save=this.api.saveReport;var e=Object(o.a)(Object(r.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(v.a)({},this.filter,e),e.begin&&(this.range=[w()(e.begin)._d,e.end?w()(e.end)._d:mu]),e.end&&!e.begin&&(this.range=[hu,w()(e.end)._d]);var a=[],i=w()(this.filter.end).valueOf()-w()(this.filter.begin).valueOf();this.dateRange=i/864e5,a[1]=w()(this.filter.begin).valueOf()-864e5,a[0]=w()(a[1]).valueOf()-i,a[0]=w()(a[0]).format("YYYYMMDD"),a[1]=w()(a[1]).format("YYYYMMDD"),e.contrastBegin?(this.status="CONFIRMED",this.compareRange=[w()(e.contrastBegin)._d,w()(e.contrastEnd)._d],this.canCompareRange=!0):(this.canCompareRange=!0,this.compareRange=[w()(a[0])._d,w()(a[1])._d])}},{key:"initListData",value:function(){}},{key:"adaptData",value:function(e){if(e.contrastResults)for(var t=e.results.length,a=0;a<t;a++)e.results[a].contrastResults=e.contrastResults[a],e.results[a].diffResults=e.diffResults[a];return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy,orders:this.filter.orders,ordersBy:this.filter.ordersBy}}},{key:"tableSelect",value:function(e,t,a){this.selectCodeTypeMap[t.id]={type:t.appType}}},{key:"tableSort",value:function(e,t){e!==this.filter.orderBy&&(t="desc"),this.filter.orders=t,this.filter.orderBys=e,this.filter.order=t,this.filter.orderBy=e,this.global.redirect({url:this.getQueryUrl({orders:t,orderBys:e,order:t,orderBy:e}),type:"push"})}},{key:"prepareData",value:function(e){return e}},{key:"getDefaultArgs",value:function(){var e=this.id;return e?{id:e}:{}}},{key:"dealTextArea",value:function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""===e[a]?(e.splice(a,1),a-=1):-1===t.indexOf(e[a])&&t.push(e[a]);return t}},{key:"getChart",value:function(e){var t=this;this.lastClickLeName="",this.getReportSum(e).then(function(e){t.chartData=Object(j.a)(e.results,["view","income","ecpm","click","clickRatio","installs"],"CONFIRMED"===t.status?e.contrastResults:null,{installs:"下载量"})}).catch(function(e){})}},{key:"submit",value:function(e){var t=st()(this.filter);(t=na()(t,["timeGranularity","orderBys","orders","metrics","filterFields","filterValues","dimensions","contrastBegin","contrastEnd"])).emailFrequency=this.subData.fre,t.name=this.subData.name,t.attachmentType=this.subData.type,t.typeInfo=JSON.stringify({reportType:"singleChannel",cId:this.cId,channelId:this.channelId});var a=this.subData.email.replace(/\n/g,"");return a=a.split(";"),a=this.dealTextArea(a),t.emails=a.join(";"),this.save(t)}},{key:"invalid",value:function(){}},{key:"success",value:function(){}},{key:"fail",value:function(){}}]),t}(mc);Xt.a.addRule("email",{validate:function(e,t){return e=function(e){for(var t=[],a=0;a<e.length;a++)e[a]=e[a].trim(),""==e[a]?(e.splice(a,1),a-=1):-1==t.indexOf(e[a])&&t.push(e[a]);return t}(e=e.split(";")),!!At()(e)||function(e,t){for(var a=e.length,i=!0,s=0;s<a;s++)t.test(e[s])||(i=!1);return i}(e,t)},message:function(e,t){return"请输入符合标准的email地址"},priority:100});var bu,yu=Object(u.a)(G.a,vu,{name:"SingleToolChannelReport",components:{"veui-form":Kt.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-icon":y.a,"v-chart":M.a,FilterTags:va.a,"veui-date-picker":Jt.a,"veui-checkbox":he.a,"report-card":gc.a,"veui-grid-container":x.a,"veui-grid-row":R.a,"veui-grid-column":T.a,"veui-dialog":pe.a,"veui-input":ge.a,"veui-select":N.a,"veui-radio":je.a,"veui-textarea":$e.a,"veui-overlay":fe.a,pag:ma.a,"veui-searchbox":Pe.a,"datepicker-self":ba.a,"veui-tabs":Sa.a,"veui-tab":F.a,"small-card":ya.a},data:function(){return{dayCount:1,isCompared:!1,index:0,metrics:"view,income,click,clickRatio,ecpm,installs",defaultDimensions:"cName,searchChannelId,searchChannelName",subscribeVisible:!1,downloadVisible:!1,field:"unionBizTypeId,rtbTypeId,getSearchSoftwareChannel,",value:"6|2|1|",dateShortCut:[{label:"昨天",from:-1,to:-1},{label:"最近7天",from:-7,to:-1},{label:"上周",from:{startOf:"week",weeks:-1},to:{startOf:"week",days:-1}},{label:"上个月",from:{startOf:"month",months:-1},to:{startOf:"month",days:-1}},{label:"上个季度",from:{startOf:"quarter",quarters:-1},to:{startOf:"quarter",days:-1}}],freRule:[{label:"一次",value:0},{label:"每天",value:1},{label:"每周",value:2},{label:"每月",value:3},{label:"每季度",value:4}],saveFormType:[{value:0,label:"CSV"},{value:1,label:"EXCEL"}],formType:[{value:0,label:"CSV"},{value:1,label:"EXCEL"}],compareRange:!1,status:"UNCONFIRMED",rule:[{name:"required",value:!0,triggers:"blur,input"}],emailRule:[{name:"required",value:!0,priority:100},{triggers:"blur",name:"email",value:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}]}},directives:{autosubmit:Ee.a,outside:Ra.a},beforeDestroy:function(){delete this.global.reportfilterSelectItems},watch:{"store.status":function(e){this.store.listRequester="CONFIRMED"===e?this.store.api.getReportAdpCompare:this.store.api.getReportAllQuery}},created:function(){},mounted:function(){this.store.cId=this.$route.params.cId,this.store.channelId=this.$route.params.channelId;var e={filterFields:this.field+"cId,searchChannelId",filterValues:this.value+"".concat(this.store.cId,"|").concat(this.store.channelId),dimensions:this.defaultDimensions};this.store.filter=Object(v.a)({},this.store.filter,e),this.refreshTableByFilter(),this.getGeneralData(e),this.getChartData(e)},computed:{chartOptions:function(){return this.store.chartData}},methods:{formatValue:function(e,t){return null===e||Number.isNaN(e)?"--":("number"==typeof e&&[0,2].includes(t)&&(e=e.toFixed(t)),"number"==typeof e||"string"==typeof e?Number(e).toLocaleString():"--")},getGeneralData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics,filterFields:this.store.filterFields,filterValues:this.store.filterValues};delete e.dimensions,this.store.getReportSum(Object(v.a)({},a,e)).then(function(e){t.isCompared="CONFIRMED"===t.store.status,t.dayCount=w()(t.store.range[1]).diff(w()(t.store.range[0]),"day")+1,0===e.results.length&&(e.results=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),0===e.diffResults.length&&(e.diffResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),e.contrastResults&&e.contrastResults.length||(e.contrastResults=[{click:null,clickRatio:null,ecpm:null,income:null,view:null,cpc:null}]),t.store.cardData=e.results[0],t.store.diffCardData=e.diffResults[0],t.store.compareData=e.contrastResults[0]})},getChartData:function(e){var t={};"CONFIRMED"===this.store.status&&(t={contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD")});var a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics};delete e.dimensions,this.store.getChart(Object(v.a)({},a,t,e))},refreshChartByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics,filterFields:this.field+"cId,searchChannelId",filterValues:this.value+"".concat(this.store.cId,"|").concat(this.store.channelId)};this.getChartData(e)},formatLocal:function(e){return null===e?0:"number"==typeof e||"string"==typeof e?e.toLocaleString():e},formatTime:function(e){var t=w()(e),a=t.day();return t.format("YYYY-MM-DD")+" "+["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][a]},format:function(e){return w()(e).format("YYYY-MM-DD")},toPercent:function(e){if(null===e)return"0%";var t=Number(e);return(t=t.toFixed(2))+"%"},subClick:function(){this.subscribeVisible=!0,this.store.subData={name:"分渠道报告".concat(this.store.channelId,"_").concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),fre:1,type:0,email:""}},downClick:function(){this.downloadVisible=!0,this.store.downloadData={fileName:"分渠道报告".concat(this.store.channelId,"_").concat(this.format(this.store.filter.begin),"~").concat(this.format(this.store.filter.end)),type:0}},subCancel:function(){this.subscribeVisible=!1},downloadReport:function(){var e=st()(this.store.filter);e.fileName=this.store.downloadData.fileName+"."+(this.store.downloadData.type?"xls":"csv"),e.fileType=this.store.downloadData.type,e.appId&&delete e.appId,delete e.pageNo,delete e.pageSize,delete e.contrastBegin,delete e.contrastEnd,this.store.download(e),this.downloadVisible=!1},cancelDownload:function(){this.downloadVisible=!1},refreshGeneralDataByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),contrastBegin:w()(this.store.compareRange[0]).format("YYYYMMDD"),contrastEnd:w()(this.store.compareRange[1]).format("YYYYMMDD"),timeGranularity:"sum",metrics:this.metrics,filterFields:this.field+"cId,searchChannelId",filterValues:this.value+"".concat(this.store.cId,"|").concat(this.store.channelId)};this.getGeneralData(e)},refreshTableByFilter:function(){var e={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),timeGranularity:"day",metrics:this.metrics,filterFields:this.field+"cId,searchChannelId",filterValues:this.value+"".concat(this.store.cId,"|").concat(this.store.channelId),dimensions:this.defaultDimensions,pageNo:this.store.filter.pageNo,pageSize:this.store.filter.pageSize};"CONFIRMED"===this.store.status?(e.contrastBegin=w()(this.store.compareRange[0]).format("YYYYMMDD"),e.contrastEnd=w()(this.store.compareRange[1]).format("YYYYMMDD")):(e.contrastBegin="",e.contrastEnd=""),this.store.filter=Object(v.a)({},this.store.filter,e),this.store.submitSearch(),this.$forceUpdate()},disabledDate:function(e){return e.valueOf()>(new Date).valueOf()-864e5},disabledCompareDate:function(e){return e.valueOf()>(new Date).valueOf()-24*(this.store.dateRange+2)*3600*1e3},requestSearch:function(){this.refreshGeneralDataByFilter(),this.refreshChartByFilter(),this.refreshTableByFilter()},choseDate:function(e){if(e){var t=e[1].valueOf()-e[0].valueOf();t/=864e5,this.store.dateRange=t,this.store.compareRange=[new Date(this.store.range[0].valueOf()-24*(this.store.dateRange+1)*3600*1e3),new Date(this.store.range[0].valueOf()-864e5)]}},compareDate:function(e){},iscompare:function(e){if(!e){this.store.compareRange=[];var t=w()(this.store.range[1]).valueOf()-w()(this.store.range[0]).valueOf();this.dateRange=t/864e5,this.store.compareRange[1]=w()(this.store.range[0]).valueOf()-864e5,this.store.compareRange[0]=w()(this.store.compareRange[1]).valueOf()-t,this.store.compareRange[0]=new Date(this.store.compareRange[0]),this.store.compareRange[1]=new Date(this.store.compareRange[1])}},legendChange:function(e){var t=Object(j.b)(e,this.store.chartData,this.store.lastClickLeName);this.store.chartData=t.chartOp,this.store.lastClickLeName=t.lastClickLeName},submit:function(){this.$refs.form.submit()},validate:function(){var e;return(e=this.$refs.form).validate.apply(e,arguments)},reset:function(){var e;(e=this.$refs.form).reset.apply(e,arguments)},handleSubmit:(bu=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,this.store.submit();case 4:e.t1=e.sent,e.t0.handleSuccess.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),this.handleError(e.t2);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return bu.apply(this,arguments)}),findChildField:function(e,t){var a,i=this;if(e.$children&&e.$children.length)return e.$children.some(function(e){if(Object(Zt.i)(e,"field")&&ra()(t,e.name))return a=e,!0;var s=i.findChildField(e,t);return!!s&&(a=s,!0)}),a},findFirstErrorField:function(e,t){var a,i=this;return e.some(function(e){return e.componentInstance?a=Object(Zt.i)(e.componentInstance,"field")?e.componentInstance:i.findChildField(e.componentInstance,t):e.children&&(a=i.findFirstErrorField(e.children,t)),!!a&&0<a.validities.length&&(!t||ra()(t,a.name))}),a},scrollToErrorField:function(e){var t=(e=e.$el||e).getBoundingClientRect().top,a=this.store,i=a.scrollFix,s=a.scrollBehavior,l=document.documentElement.scrollTop+t+i;getComputedStyle(document.documentElement).scrollBehavior?window.scroll({top:l,behavior:s}):window.scroll(0,l)},handleErrorScroll:function(e){if(this.store.scrollToFirstError){var t=this.$refs.form.$slots.default||[],a=this.findFirstErrorField(t,e);a&&this.scrollToErrorField(a)}},handleInvalid:function(e){this.store.invalid(e),this.$emit("invalid",e),this.handleErrorScroll(Object.keys(e))},handleSuccess:function(e){this.store.successToast&&this.showToast(this.store.successToast,{type:"success"}),this.$refs.form.fields.forEach(function(e){return e.hideValidity()}),this.store.success(e),this.subscribeVisible=!1,this.$emit("submitsuccess",e)},handleError:function(e){var t=this;this.store.failToast&&this.showToast(this.store.failToast,{type:"error"});var a=e.fields||e.field;a&&(Et()(a,function(e,a){var i=Yt()(t,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:e,fields:"backend:field"})}),this.handleErrorScroll(Object.keys(a))),this.store.fail(e),this.$emit("submitfail",e)}}}),gu=(a("67f0"),Object(p.a)(yu,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"union-report-view"},[a("h3",{staticClass:"title"},[e._v("分渠道报告 > "+e._s(e.$route.params.channelId)+"（ID: "+e._s(e.$route.params.cId)+"）")]),a("template",{slot:"filterContent"},[a("div",{staticClass:"left"},[a("veui-field",[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.dateShortCut},on:{select:e.choseDate},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),a("veui-field",[a("veui-checkbox",{attrs:{"true-value":"CONFIRMED","false-value":"UNCONFIRMED"},on:{change:e.iscompare},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}},[e._v("对比\n                ")])],1),a("veui-field",["CONFIRMED"===e.store.status?a("datepicker-self",{ref:"compare",attrs:{range:"",compare:e.store.dateRange,"disabled-date":e.disabledCompareDate},on:{select:e.compareDate},model:{value:e.store.compareRange,callback:function(t){e.$set(e.store,"compareRange",t)},expression:"store.compareRange"}}):e._e()],1),a("veui-button",{style:{width:"96px"},attrs:{ui:"primary"},on:{click:e.requestSearch}},[e._v("查询")])],1),a("div",{staticClass:"right"},[a("veui-button",{staticClass:"report-button-right",on:{click:e.subClick}},[a("veui-icon",{attrs:{name:"subscribe"}}),e._v("订阅\n            ")],1),a("veui-button",{staticClass:"report-button-right",on:{click:e.downClick}},[a("veui-icon",{attrs:{name:"download"}}),e._v("下载\n            ")],1)],1)]),a("template",{slot:"batchContent"},[a("veui-grid-container",{attrs:{columns:24}},[a("veui-grid-row",[a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"总展现量",value:e.formatValue(e.store.cardData.view),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.view)}}),a("report-card",{attrs:{title:"日均展现量",value:e.formatValue(e.store.cardData.view/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.view/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.view,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"预计总收入（元）",value:e.formatValue(e.store.cardData.income),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.income)}}),a("report-card",{attrs:{title:"预计日均收入（元）",value:e.formatValue(e.store.cardData.income/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.income/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.income,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"总点击量",value:e.formatValue(e.store.cardData.click),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.click)}}),a("report-card",{attrs:{title:"日均点击量",value:e.formatValue(e.store.cardData.click/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.click/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.click,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"eCPM（元）",value:e.formatValue(e.store.cardData.ecpm),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.ecpm)}}),a("report-card",{attrs:{title:"eCPM（元）",value:e.formatValue(e.store.cardData.ecpm),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.ecpm),radio:e.isCompared,radioValue:e.store.diffCardData.ecpm,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"点击率",value:e.toPercent(e.store.cardData.clickRatio||0),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.clickRatio||0)}}),a("report-card",{attrs:{title:"点击率",value:e.toPercent(e.store.cardData.clickRatio||0),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.clickRatio||0),radio:e.isCompared,radioValue:e.store.diffCardData.clickRatio,border:e.isCompared}})],1)]),a("veui-grid-column",{attrs:{span:4}},[a("div",{staticClass:"content"},[a("report-card",{attrs:{title:"下载量",value:e.formatValue(e.store.cardData.installs),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.installs)}}),a("report-card",{attrs:{title:"日均下载量",value:e.formatValue(e.store.cardData.installs/e.dayCount,2),compared:e.isCompared,compareValue:e.formatValue(e.store.compareData.installs/e.dayCount,2),radio:e.isCompared,radioValue:e.store.diffCardData.installs,border:e.isCompared}})],1)])],1)],1),a("veui-tabs",{attrs:{ui:"block",index:e.index},on:{"update:index":function(t){e.index=t}}},[a("veui-tab",{attrs:{label:"分日",name:"day"}},[a("v-chart",{attrs:{options:e.chartOptions},on:{legendselectchanged:e.legendChange}})],1)],1)],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"time",width:"152",title:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?a("div",{staticClass:"adposition"},[e._v(e._s(e.formatTime(t.time)))]):e._e(),t.contrastResults?e._e():a("div",[e._v(e._s(e.formatTime(t.time)))]),t.contrastResults?a("div",[e._v(e._s(e.formatTime(t.contrastResults.time)))]):e._e(),t.contrastResults?a("div",[e._v("变化率")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"cName",width:"180",title:"计费名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.cName))])]}}])}),a("veui-table-column",{attrs:{field:"view",width:"130",title:"展现量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.view)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.view),ago:e.formatLocal(t.contrastResults.view),diff:e.formatLocal(t.diffResults.view)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"income",width:"160",title:"预计收入",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.income)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.income),ago:e.formatLocal(t.contrastResults.income),diff:e.formatLocal(t.diffResults.income)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"click",width:"150",title:"点击量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.click)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.click),ago:e.formatLocal(t.contrastResults.click),diff:e.formatLocal(t.diffResults.click)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",width:"160",title:"eCPM",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.ecpm)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.ecpm),ago:e.formatLocal(t.contrastResults.ecpm),diff:e.formatLocal(t.diffResults.ecpm)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"clickRatio",width:"160",title:"点击率",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.toPercent(t.clickRatio)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.toPercent(t.clickRatio),ago:e.toPercent(t.contrastResults.clickRatio),diff:e.formatLocal(t.diffResults.clickRatio)}})],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"installs",width:"160",title:"下载量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.contrastResults?e._e():a("div",[e._v(e._s(e.formatLocal(t.installs)))]),t.contrastResults?a("div",{staticClass:"table-cell"},[a("small-card",{attrs:{now:e.formatLocal(t.installs),ago:e.formatLocal(t.contrastResults.installs),diff:e.formatLocal(t.diffResults.installs)}})],1):e._e()]}}])})],1),a("veui-dialog",{attrs:{open:e.subscribeVisible,"overlay-class":"report-subscribe-set special-footer",title:"订阅设置"},on:{"update:open":function(t){e.subscribeVisible=t}}},[e.subscribeVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("veui-form",{ref:"form",attrs:{data:e.store.subData},on:{submit:e.handleSubmit,invalid:e.handleInvalid}},[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"名称:",name:"name",field:"name",rules:e.rule}},[a("veui-input",{attrs:{placeholder:"分渠道报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.subData.name,callback:function(t){e.$set(e.store.subData,"name",t)},expression:"store.subData.name"}})],1)],1),a("div",[a("div",{staticClass:"name"},[a("veui-field",{attrs:{label:"发送频率：",name:"fre",field:"fre",rules:e.rule}},[a("veui-select",{attrs:{options:e.freRule},model:{value:e.store.subData.fre,callback:function(t){e.$set(e.store.subData,"fre",t)},expression:"store.subData.fre"}})],1)],1),a("div",{staticClass:"name small"},[a("veui-field",{attrs:{label:"附件类型：",name:"type",field:"type",rules:e.rule}},e._l(this.saveFormType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.subData.type,callback:function(t){e.$set(e.store.subData,"type",t)},expression:"store.subData.type"}},[e._v(e._s(s))])}))],1),a("div",{staticClass:"text"},[a("veui-field",{attrs:{label:"收件人：",name:"email",field:"email",rules:e.emailRule}},[a("veui-textarea",{attrs:{placeholder:"邮箱地址以分号“;”隔开，最多支持10个",rows:"2"},model:{value:e.store.subData.email,callback:function(t){e.$set(e.store.subData,"email",t)},expression:"store.subData.email"}})],1)],1)]),a("div",{staticClass:"form-operation"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"overlay-button",on:{click:e.subCancel}},[e._v("取消")])],1)])],1):e._e(),a("template",{slot:"foot"},[a("div")])],2),a("veui-dialog",{attrs:{open:e.downloadVisible,"overlay-class":"report-subscribe-set",title:"下载设置"},on:{"update:open":function(t){e.downloadVisible=t}}},[e.downloadVisible?a("div",{staticClass:"inner"},[a("div",{staticClass:"gray-line"}),a("div",{staticClass:"name"},[a("span",{staticClass:"label"},[e._v("名称：")]),a("veui-input",{attrs:{placeholder:"分渠道报告_"+this.format(this.store.filter.begin)+"~"+this.format(this.store.filter.begin)},model:{value:e.store.downloadData.fileName,callback:function(t){e.$set(e.store.downloadData,"fileName",t)},expression:"store.downloadData.fileName"}})],1),a("div",{staticClass:"name small"},[a("span",{staticClass:"label"},[e._v("附件类型：")]),e._l(this.formType,function(t){var i=t.value,s=t.label;return a("veui-radio",{key:i,attrs:{value:i},model:{value:e.store.downloadData.type,callback:function(t){e.$set(e.store.downloadData,"type",t)},expression:"store.downloadData.type"}},[e._v(e._s(s))])})],2)]):e._e(),a("template",{slot:"foot"},[a("veui-button",{staticClass:"overlay-button",attrs:{ui:"primary small"},on:{click:e.downloadReport}},[e._v("保存")]),a("veui-button",{staticClass:"overlay-button",attrs:{ui:"small"},on:{click:e.cancelDownload}},[e._v("取消")])],1)],2)],2)},[],!1,null,null,null));gu.options.__file="SingleToolChannelReportView.vue";var _u=gu.exports,Ou=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","预警报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"bizType",{net:0,content:1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{pageNo:1,pageSize:20,mediumtype:0}),a}var a;return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getAdpListWarn,this.getAccountWarn=this.api.getAccountWarn,this.getAdpWarn=this.api.getAdpWarn;case 4:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})}]),t}(C.a),Cu=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{pageNo:1,pageSize:30,mediumtype:0}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getAdpListWarn}},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.results,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),Du=(a("c874"),a("a3f8"),Object(u.a)(G.a,Cu,{name:"slotwarn",components:{"list-view":G.a,"veui-table":ut.a,"veui-table-column":de.a,"veui-icon":y.a,"veui-pager":dt.a},data:function(){return{}},methods:{getSymbol:function(e,t){return 1*t==0?"":1===(e*=1)?"+":"-"},getCompare:function(e,t){return 1*e<1*t?"+":1*t==1*e?"":"-"},billionFormat:function(e,t){return xe.a.billionFormat(e,t)}}})),wu=(a("f066"),Object(p.a)(Du,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"slot-warn-list-view"},[a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"tuName",title:"代码位名称",width:"250"}}),a("veui-table-column",{attrs:{field:"tu",title:"代码位ID",width:"100"}}),a("veui-table-column",{attrs:{field:"adTypeName",title:"广告类型",width:"90"}}),a("veui-table-column",{attrs:{field:"yesterdayDivide",title:"预估收入（元）",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("昨日："+e._s(e.billionFormat(t.item.yesterdayDivide,2)))]),a("p",[e._v("前日："+e._s(e.billionFormat(t.item.evedayDivide,2)))])]}}])}),a("veui-table-column",{attrs:{field:"divideRatio",title:"预估收入环比",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e.getCompare(t.item.evedayDivide,t.item.yesterdayDivide))+e._s(t.item.divideRatio)+"％")])]}}])}),a("veui-table-column",{attrs:{field:"yesterdayViews",title:"广告展现量",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("昨日："+e._s(e.billionFormat(t.item.yesterdayViews)))]),a("p",[e._v("前日："+e._s(e.billionFormat(t.item.evedayViews)))])]}}])}),a("veui-table-column",{attrs:{field:"viewsRatio",title:"广告展现量环比",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e.getCompare(t.item.evedayViews,t.item.yesterdayViews))+e._s(t.item.viewsRatio)+"％")])]}}])}),a("veui-table-column",{attrs:{field:"cpm",title:"CPM",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("昨日："+e._s(e.billionFormat(t.item.yesterdayCpm)))]),a("p",[e._v("前日："+e._s(e.billionFormat(t.item.evedayCpm)))])]}}])}),a("veui-table-column",{attrs:{field:"diffEcpm",title:"CPM环比",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"num-left-margin"},[e._v(e._s(e.getCompare(t.item.evedayCpm,t.item.yesterdayCpm))+e._s(t.item.cpmRatio)+"％")]),a("p",{staticClass:"sub-content"},[e._v("（CTR "+e._s(e.getSymbol(t.item.ctrFluxType,t.item.ctrRatio))+e._s(t.item.ctrRatio)+"%,\n                    ACP "+e._s(e.getSymbol(t.item.acpFluxType,t.item.acpRatio))+e._s(t.item.acpRatio)+"%）")])]}}])})],1)],2)},[],!1,null,null,null));wu.options.__file="SlotwarnReportView.vue";var ju=wu.exports,ku=Object(u.a)(g.a,Ou,{name:"subscribe",components:{"base-view":g.a,"slot-view":ju,"veui-icon":y.a,"veui-table-column":de.a},data:function(){return{netPrewarn:{},contentPrewarn:{},adpWan:{}}},methods:{getSymbol:function(e){return 0===(e*=1)?"+":"-"},getCompare:function(e,t){return 1*e<1*t?"+":1*t==1*e?"":"-"},billionFormat:function(e,t){return xe.a.billionFormat(e,t)},getAbsolute:function(e,t){return e=parseFloat(e).toFixed(2),t?0<e?"+"+e:"-"+Math.abs(e):Math.abs(e)},formatDate:function(e){return e?w()(e).format("YYYY-MM-DD"):w()(e).add(-1,"days").format("YYYY-MM-DD")},getBiztypeWarn:function(){var e=this;this.store.getAccountWarn({mediumtype:this.store.filter.mediumtype,biztype:this.store.bizType.net}).then(function(t){e.netPrewarn=t||{}}),this.store.getAccountWarn({mediumtype:this.store.filter.mediumtype,biztype:this.store.bizType.content}).then(function(t){e.contentPrewarn=t||{}})},getAdpWarnInfo:function(){var e=this;this.store.getAdpWarn({mediumtype:this.store.filter.mediumtype}).then(function(t){e.adpWan=t})},getDiffAbs:function(e,t,a){a=a||0===a?a:2,e=e||0,t=t||0;var i=parseFloat(e)-parseFloat(t);return Math.abs(i).toFixed(a)},getDiff:function(e,t){return e=e||0,t=t||0,(parseFloat(t)-parseFloat(e)).toLocaleString()}},mounted:function(){this.getBiztypeWarn(),this.getAdpWarnInfo()}}),Su=(a("45c3"),Object(p.a)(ku,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-view",{staticClass:"prewarn-view"},[a("div",{staticClass:"user-warn-block"},[a("h4",{staticClass:"warn-title"},[e._v("业务波动预警")]),a("div",{staticClass:"warn-list-wrapper first"},[a("p",{staticClass:"list-title"},[e._v("网盟合作")]),a("div",{staticClass:"desc"},[e._v(e._s(e.formatDate(e.netPrewarn.countdate))+"，\n                "),e.netPrewarn&&1===e.netPrewarn.isExceed?a("span",[e._v("您的网盟业务发生幅度>"+e._s(e.netPrewarn.accountThreshold)+"%的数据波动预警，波动数据如下：")]):a("span",[e._v("您的网盟业务未发生较大波动，请继续关注。")])]),e.netPrewarn.countdate?a("div",{staticClass:"warn-results"},[a("div",{staticClass:"result-list left"},[a("p",{staticClass:"result-list-title"},[e._v("广告展现量")]),a("ul",{staticClass:"result-data"},[a("li",[a("span",[e._v("昨日：")]),a("span",[e._v(e._s(e.billionFormat(e.netPrewarn.yesterdayViews)))])]),a("li",[a("span",[e._v("前日：")]),a("span",[e._v(e._s(e.billionFormat(e.netPrewarn.evedayViews)))])]),a("li",[a("p",{staticClass:"result-list-data"},[e._v("环比：\n                                "),e.netPrewarn.evedayViews<e.netPrewarn.yesterdayViews?a("span",[a("veui-icon",{attrs:{name:"increase"}}),a("span",{staticClass:"up"},[e._v(e._s(e.netPrewarn.viewsRatio)+"%")])],1):e.netPrewarn.evedayViews>e.netPrewarn.yesterdayViews?a("span",[a("veui-icon",{attrs:{name:"decrease"}}),a("span",{staticClass:"down"},[e._v(e._s(e.netPrewarn.viewsRatio)+"%")])],1):a("span",[e._v("\n                                    "+e._s(e.netPrewarn.viewsRatio)+"%\n                                ")])])])]),1===e.netPrewarn.isExceed?a("div",[a("p",{staticClass:"result-list-title reason"},[e._v("波动原因")]),a("ul",{staticClass:"result-reson"},[a("li",[e._v("网盟"+e._s(e.adpWan.viewUpNum||"0")+"个竞价代码位上浮波动，环比"+e._s(e.adpWan.viewSumUpRatio?"+"+e.adpWan.viewSumUpRatio:"0")+"%")]),a("li",[e._v("网盟"+e._s(e.adpWan.viewDownNum||"0")+"个竞价代码位下浮波动，环比"+e._s(e.adpWan.viewSumDownRatio||"0")+"%")])])]):e._e()]),a("div",{staticClass:"result-list"},[a("p",{staticClass:"result-list-title"},[e._v("预估收入（元）")]),a("ul",{staticClass:"result-data"},[a("li",[a("span",[e._v("昨日：")]),a("span",[e._v(e._s(e.billionFormat(e.netPrewarn.yesterdayDivide,2)))])]),a("li",[a("span",[e._v("前日：")]),a("span",[e._v(e._s(e.billionFormat(e.netPrewarn.evedayDivide,2)))])]),a("li",[a("span",{staticClass:"result-list-data"},[a("span",[e._v("环比：")]),e.netPrewarn.evedayDivide<e.netPrewarn.yesterdayDivide?a("span",[a("veui-icon",{attrs:{name:"increase"}}),a("span",{staticClass:"up"},[e._v(e._s(e.netPrewarn.divideRatio)+"%")])],1):e.netPrewarn.evedayDivide>e.netPrewarn.yesterdayDivide?a("span",[a("veui-icon",{attrs:{name:"decrease"}}),a("span",{staticClass:"down"},[e._v(e._s(e.netPrewarn.divideRatio)+"%")])],1):a("span",[e._v("\n                                    "+e._s(e.netPrewarn.divideRatio)+"%\n                                ")])])])]),1===e.netPrewarn.isExceed?a("div",[a("p",{staticClass:"result-list-title reason"},[e._v("波动原因")]),a("ul",{staticClass:"result-reson"},[a("li",[a("span",[e._v("CPM环比")]),e.netPrewarn.evedayCpm<e.netPrewarn.yesterdayCpm?a("span",[e._v("上升")]):a("span",[e._v("下降")]),a("span",[e._v(e._s(e.billionFormat(e.getDiffAbs(e.netPrewarn.evedayCpm,e.netPrewarn.yesterdayCpm)))+"元")]),a("span",[e._v("，环比")]),a("span",[e._v(e._s(e.getCompare(e.netPrewarn.evedayCpm,e.netPrewarn.yesterdayCpm))+e._s(e.netPrewarn.cpmRatio)+"%")])]),a("li",[a("span",[e._v("展现量环比")]),e.netPrewarn.evedayViews<e.netPrewarn.yesterdayViews?a("span",[e._v("上升")]):a("span",[e._v("下降")]),a("span",[e._v(e._s(e.billionFormat(e.getDiffAbs(e.netPrewarn.evedayViews,e.netPrewarn.yesterdayViews))))]),a("span",[e._v("，环比")]),a("span",[e._v(e._s(e.getCompare(e.netPrewarn.evedayViews,e.netPrewarn.yesterdayViews))+e._s(e.netPrewarn.viewsRatio)+"%")])])])]):e._e()])]):e._e()]),a("div",{staticClass:"warn-list-wrapper"},[a("p",{staticClass:"list-title"},[e._v("内容联盟合作")]),a("div",{staticClass:"desc"},[e._v(e._s(e.formatDate(e.contentPrewarn.countdate))+"，\n                "),1===e.contentPrewarn.isExceed?a("span",[e._v("您的内容联盟业务发生幅度>"+e._s(e.contentPrewarn.accountThreshold)+"%的数据波动预警，波动数据如下：")]):a("span",[e._v("您的内容联盟业务未发生较大波动，请继续关注。")])]),1===e.contentPrewarn.isExceed?a("div",{staticClass:"warn-results"},[a("div",{staticClass:"result-list left"},[a("p",{staticClass:"result-list-title"},[e._v("广告展现量")]),a("ul",{staticClass:"result-data"},[a("li",[a("span",[e._v("昨日：")]),a("span",[e._v(e._s(e.billionFormat(e.contentPrewarn.yesterdayViews)))])]),a("li",[a("span",[e._v("前日：")]),a("span",[e._v(e._s(e.billionFormat(e.contentPrewarn.evedayViews)))])]),a("li",[a("p",{staticClass:"result-list-data"},[e._v("环比：\n                                "),e.contentPrewarn.evedayViews<e.contentPrewarn.yesterdayViews?a("span",[a("veui-icon",{attrs:{name:"increase"}}),a("span",{staticClass:"up"},[e._v(e._s(e.contentPrewarn.viewsRatio)+"%")])],1):e.contentPrewarn.evedayViews>e.contentPrewarn.yesterdayViews?a("span",[a("veui-icon",{attrs:{name:"decrease"}}),a("span",{staticClass:"down"},[e._v(e._s(e.contentPrewarn.viewsRatio)+"%")])],1):a("span",[e._v("\n                                    "+e._s(e.contentPrewarn.viewsRatio)+"%\n                                ")])])])]),a("p",{staticClass:"result-list-title reason"},[e._v("波动原因")]),a("ul",{staticClass:"result-reson"},[a("li",[a("span",[e._v("总到访PV")]),e.contentPrewarn.evedayVisitPv<e.contentPrewarn.yesterdayVisitPv?a("span",[e._v("上浮")]):a("span",[e._v("下浮")]),a("span",[e._v("波动"+e._s(e.billionFormat(e.getDiffAbs(e.contentPrewarn.evedayVisitPv,e.contentPrewarn.yesterdayVisitPv,0))))]),a("span",[e._v("，波动")]),a("span",[e._v(e._s(e.getCompare(e.contentPrewarn.evedayVisitPv,e.contentPrewarn.yesterdayVisitPv))+e._s(e.contentPrewarn.visitPvRatio)+"%")])]),a("li",[a("span",[e._v("总详情页PV")]),e.contentPrewarn.evedayDetailPv<e.contentPrewarn.yesterdayDetailPv?a("span",[e._v("上浮")]):a("span",[e._v("下浮")]),a("span",[e._v("波动"+e._s(e.billionFormat(e.getDiffAbs(e.contentPrewarn.evedayDetailPv,e.contentPrewarn.yesterdayDetailPv,0))))]),a("span",[e._v("，波动")]),a("span",[e._v(e._s(e.getCompare(e.contentPrewarn.evedayDetailPv,e.contentPrewarn.yesterdayDetailPv))+e._s(e.contentPrewarn.detailPvRatio)+"%")])])])]),a("div",{staticClass:"result-list"},[a("p",{staticClass:"result-list-title"},[e._v("预估收入（元）")]),a("ul",{staticClass:"result-data"},[a("li",[a("span",[e._v("昨日：")]),a("span",[e._v(e._s(e.billionFormat(e.contentPrewarn.yesterdayDivide,2)))])]),a("li",[a("span",[e._v("前日：")]),a("span",[e._v(e._s(e.billionFormat(e.contentPrewarn.evedayDivide,2)))])]),a("li",[a("span",{staticClass:"result-list-data"},[a("span",[e._v("环比：")]),e.contentPrewarn.evedayDivide<e.contentPrewarn.yesterdayDivide?a("span",[a("veui-icon",{attrs:{name:"increase"}}),a("span",{staticClass:"up"},[e._v(e._s(e.contentPrewarn.divideRatio)+"%")])],1):e.contentPrewarn.evedayDivide>e.contentPrewarn.yesterdayDivide?a("span",[a("veui-icon",{attrs:{name:"decrease"}}),a("span",{staticClass:"down"},[e._v(e._s(e.contentPrewarn.divideRatio)+"%")])],1):a("span",[e._v("\n                                    "+e._s(e.contentPrewarn.divideRatio)+"%\n                                ")])])])]),a("p",{staticClass:"result-list-title reason"},[e._v("波动原因")]),a("ul",{staticClass:"result-reson"},[a("li",[a("span",[e._v("CPM环比")]),e.contentPrewarn.evedayCpm<e.contentPrewarn.yesterdayCpm?a("span",[e._v("上升")]):a("span",[e._v("下降")]),a("span",[e._v(e._s(e.billionFormat(e.getDiffAbs(e.contentPrewarn.evedayCpm,e.contentPrewarn.yesterdayCpm)))+"元")]),a("span",[e._v("，环比")]),a("span",[e._v(e._s(e.getCompare(e.contentPrewarn.evedayCpm,e.contentPrewarn.yesterdayCpm))+e._s(e.contentPrewarn.cpmRatio)+"%")])]),a("li",[a("span",[e._v("展现量环比")]),e.contentPrewarn.evedayViews<e.contentPrewarn.yesterdayViews?a("span",[e._v("上升")]):a("span",[e._v("下降")]),a("span",[e._v(e._s(e.billionFormat(e.getDiffAbs(e.contentPrewarn.evedayViews,e.contentPrewarn.yesterdayViews))))]),a("span",[e._v("，环比")]),a("span",[e._v(e._s(e.getCompare(e.contentPrewarn.evedayViews,e.contentPrewarn.yesterdayViews))+e._s(e.contentPrewarn.viewsRatio)+"%")])])])])]):e._e()])]),a("div",{staticClass:"user-warn-block adp-warn-block"},[a("h4",{staticClass:"warn-title"},[e._v("代码位波动预警")]),0<e.adpWan.adNum?a("p",{staticClass:"desc"},[e._v(e._s(e.formatDate(e.adpWan.time))+"，有"+e._s(e.adpWan.adNum)+"个代码位发生幅度>"+e._s(e.adpWan.adThreshold)+"%的数据波动预警:")]):a("p",{staticClass:"desc"},[e._v(e._s(e.formatDate(e.adpWan.time))+"，您的竞价代码位未发生较大波动，请继续关注。")]),0<e.adpWan.adNum?a("div",[a("div",{staticClass:"slot-warn-list left"},[a("div",{staticClass:"slot-warn-title"},[e._v("广告展现量")]),a("ul",[a("li",{staticClass:"up"},[a("veui-icon",{attrs:{name:"arrow-up"}}),a("span",{staticClass:"name"},[e._v("上浮波动代码位：")]),a("span",{staticClass:"num"},[e._v(e._s(e.adpWan.viewUpNum||"0"))])],1),a("li",{staticClass:"down"},[a("veui-icon",{attrs:{name:"arrow-down"}}),a("span",{staticClass:"name"},[e._v("下浮波动代码位：")]),a("span",{staticClass:"num"},[e._v(e._s(e.adpWan.viewDownNum||"0"))])],1)])]),a("div",{staticClass:"slot-warn-list"},[a("div",{staticClass:"slot-warn-title"},[e._v("预估收入")]),a("ul",[a("li",{staticClass:"up"},[a("veui-icon",{attrs:{name:"arrow-up"}}),a("span",{staticClass:"name"},[e._v("上浮波动代码位：")]),a("span",{staticClass:"num"},[e._v(e._s(e.adpWan.incomeUpNum||"0"))])],1),a("li",{staticClass:"down"},[a("veui-icon",{attrs:{name:"arrow-down"}}),a("span",{staticClass:"name"},[e._v("下浮波动代码位：")]),a("span",{staticClass:"num"},[e._v(e._s(e.adpWan.incomeDownNum||"0"))])],1)])])]):e._e()]),a("div",{staticClass:"slot-warn-block"},[a("slot-view",{attrs:{adThreshold:e.adpWan}})],1)])},[],!1,null,null,null));Su.options.__file="PrewarnReportView.vue";var xu=Su.exports,Ru=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","实验报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"groupData",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[5,10,20]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{status:"2,5",pageNo:1,pageSize:5,order:"desc",orderBy:"exptStartTime"}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getSupExpReportList,this.modifySupExpAdp=this.api.modifySupExpAdp,this.switchSupExpAdp=this.api.switchSupExpAdp}},{key:"adaptData",value:function(e){var t=[];return this.groupData=e.results,e.results.map(function(e,a){return e.map(function(i,s){return t.push(Object(v.a)({groupLength:e.length,index:s,group:a},i)),i}),e}),{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:t,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),Tu=Object(u.a)(G.a,Ru,{name:"SuperExpLabSlotListView",components:{"veui-icon":y.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-button":S.a,"veui-table-column":de.a,"veui-option":jt.a},directives:{autosubmit:Ee.a},data:function(){return{}},methods:{redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},toDetail:function(e){this.redirectTo("/superExp/report/detail?adPositionId=".concat(e))},getSpan:function(e){for(var t=arguments.length,a=new Array(1<t?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return 0===a[0].index?{row:a[0].groupLength}:{row:0}},billionFormat:function(e){return xe.a.billionFormat(e)},dateDash:function(e){return Object(V.a)(e)},recoverSets:function(e){var t=this;this.store.modifySupExpAdp({expInfo:[{tuid:e.adPositionId,autoSwitch:0}],fromStatus:e.expStatus,toStatus:1}).then(function(e){t.store.submitSearch()})},validateAll:function(e){var t=this,a=this.store.groupData[e.group],i=[];a.map(function(e,t){return 0!==t&&i.push({tuid:e.adPositionId,income:e.income}),e}),this.store.switchSupExpAdp({switchAdpInfosList:[{userDefinedTuid:e.adPositionId,expAdpInfos:i}]}).then(function(e){t.store.submitSearch()})}}}),Iu=(a("6d23"),Object(p.a)(Tu,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("list-view",{staticClass:"super-exp-slot-list"},[i("template",{slot:"tableColumns"},[i("veui-table-column",{attrs:{field:"实验室代码",title:"实验室代码",span:e.getSpan,width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"sefdefined-td td-title"},[e._v("\n            "+e._s(t.item.adPositionName)),i("br"),e._v("\n            ("+e._s(t.item.adPositionId)+")\n          ")])]}}])}),i("veui-table-column",{attrs:{field:"样式",title:"样式"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(t.item.expAdStyle))])]}}])}),i("veui-table-column",{attrs:{field:"views",title:"日均展现量"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(e.billionFormat(t.item.avgView)))])]}}])}),i("veui-table-column",{attrs:{field:"click",title:"日均点击量",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(e.billionFormat(t.item.avgClick)))])]}}])}),i("veui-table-column",{attrs:{field:"income",title:"日均收入"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(e.billionFormat(t.item.avgIncome)))])]}}])}),i("veui-table-column",{attrs:{field:"ecpm",title:"eCPM"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v("\n          "+e._s(e.billionFormat(t.item.ecpm))+"\n          "),0<t.item.ecpmFluxRatio?i("span",{staticClass:"add"},[i("img",{staticClass:"trend",attrs:{src:a("38b2")}}),e._v("\n            "+e._s(t.item.ecpmFluxRatio)+"%\n          ")]):t.item.ecpmFluxRatio<0?i("span",{staticClass:"reduce"},[i("img",{staticClass:"trend",attrs:{src:a("3ad7")}}),e._v("\n            "+e._s(Math.abs(t.item.ecpmFluxRatio))+"%\n          ")]):e._e()])]}}])}),i("veui-table-column",{attrs:{field:"ctr",title:"CTR"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v("\n          "+e._s(e.billionFormat(t.item.clickRatio))+"\n          "),0<t.item.clickFluxRatio?i("span",{staticClass:"add"},[i("img",{staticClass:"trend",attrs:{src:a("38b2")}}),e._v("\n            "+e._s(t.item.clickFluxRatio)+"%\n          ")]):t.item.clickFluxRatio<0?i("span",{staticClass:"reduce"},[i("img",{staticClass:"trend",attrs:{src:a("3ad7")}}),e._v("\n            "+e._s(Math.abs(t.item.clickFluxRatio))+"%\n          ")]):e._e()])]}}])}),i("veui-table-column",{attrs:{field:"state",title:"实验状态",span:e.getSpan},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"sefdefined-td"},[i("div",{staticClass:"waiting"},[1===t.item.expStatus?i("span",[e._v("待优化")]):2===t.item.expStatus?i("span",[e._v("优化中")]):5===t.item.expStatus?i("span",[e._v("优化完成")]):e._e()]),2===t.item.expStatus?i("div",[e._v("\n            开始时间："),i("div",[e._v(e._s(e.dateDash(t.item.expStartTime)))])]):5===t.item.expStatus?i("div",[e._v("\n            完成时间："),i("div",[e._v(e._s(e.dateDash(t.item.expEndTime)))])]):e._e()])]}}])}),i("veui-table-column",{attrs:{field:"operation",title:"操作",span:e.getSpan,width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"sefdefined-td op-column"},[5==t.item.expStatus?i("veui-button",{attrs:{ui:"link"},on:{click:function(a){e.recoverSets(t.item)}}},[e._v("恢复初始设置")]):e._e(),2==t.item.expStatus?i("veui-button",{attrs:{ui:"link"},on:{click:function(a){e.validateAll(t.item)}}},[e._v("切换全流量")]):e._e(),2==t.item.expStatus?i("veui-button",{attrs:{ui:"link"},on:{click:function(a){e.recoverSets(t.item)}}},[e._v("取消优化")]):e._e(),i("veui-button",{attrs:{ui:"link"},on:{click:function(a){e.toDetail(t.item.adPositionId)}}},[e._v("查看报告")])],1)]}}])})],1)],2)},[],!1,null,null,null));Iu.options.__file="SuperExpLabSlotListView.vue";var Fu=Iu.exports,Nu=a("c707"),Au=a.n(Nu),Mu={origin:"#3998FC",recommend1:"#5BC49F",recommend2:"#9cdc82",recommend3:"#d4ec59"};function Yu(e,t,a,i,s){var l;return l=function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var l,r=e[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var o=l.value,n=Object(v.a)({type:"line",showSymbol:!1,hoverAnimation:!1,smooth:!0,itemStyle:{normal:{color:Mu[o.colorIndex],lineStyle:{width:1}},emphasis:{borderWidth:1}},yAxisIndex:0},o);t.push(n)}}catch(e){i=!0,s=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}return t}(e),Object(v.a)({},function(e,t){return{grid:{left:0,right:20,top:70,bottom:40,containLabel:!1},tooltip:{trigger:"axis",formatter:function(e){return e[0].name+"<br/>"+e.map(function(e){return"点击率"===e.seriesName?['<span style="display:inline-block;width:9px;height:9px;background-color: '+e.color+';margin-right:5px;"></span>',e.seriesName+':<span style="padding-right:5px"></span>'+e.value+"%<br/>"].join(""):['<span style="display:inline-block;width:9px;height:9px;background-color: '+e.color+';margin-right:5px;"></span>',e.seriesName+':<span style="padding-right:5px"></span>'+e.value+"<br/>"].join("")}).join("")}},title:{show:!0,text:t,left:0,top:20,right:40,textAlign:"left",padding:0,textStyle:{color:"#333",fontSize:14}},xAxis:{type:"category",data:e,axisTick:{show:!1},axisLine:{lineStyle:{color:"#dbdbdb",width:1}},axisLabel:{textStyle:{color:"#666",fontSize:12}},nameTextStyle:{color:"#666"}},yAxis:[{type:"value",name:"",axisLabel:{show:!0,inside:!0,textStyle:{color:"#666",fontSize:12,verticalAlign:"top",padding:[6,0,0,0]}},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:["#dbdbdb"],type:"dotted"}},nameTextStyle:{color:"#666"}},{type:"value",name:"",axisLabel:{show:!0,inside:!0,textStyle:{color:"#666",fontSize:12,verticalAlign:"top",padding:[6,0,0,0]}},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:["#dbdbdb"],type:"dotted"}},nameTextStyle:{color:"#666"}}]}}(t,a),{legend:{icon:"rect",itemWidth:12,itemHeight:12,top:16,right:10,data:i,type:"scroll",selected:s,itemGap:20},color:Mu,series:l})}var Lu=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","查看报告"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"range",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slot",{}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"adPositionId",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{adPositionId:"",begin:"",end:"",pageNo:1,pageSize:30}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getSupExpSlotDetailList,this.getChatDataRequester=this.api.getSupExpReportDetail,this.getSupExpSlotDetail=this.api.getSupExpSlotDetail;var e=this.getRouteQuery();this.adPositionId=e.adPositionId,this.getSlotDetail()}},{key:"getSlotDetail",value:function(){var e=this;this.getSupExpSlotDetail({adPositionId:this.adPositionId}).then(function(t){e.slot=t})}},{key:"prepareParams",value:function(e){return Object(v.a)({},e,{adPositionId:this.adPositionId,begin:w()(this.range[0]).format("YYYYMMDD"),end:w()(this.range[1]).format("YYYYMMDD")})}},{key:"adaptData",value:function(e){var t=[];return e.results.map(function(e,a){return e.map(function(i,s){return t.push(Object(v.a)({groupLength:e.length,index:s,group:a},i)),i}),e}),{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:t}}}]),t}(J.a),Eu=Object(u.a)(G.a,Lu,{name:"SuperExpLabReportView",components:{"veui-icon":y.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-button":S.a,"veui-table-column":de.a,"veui-option":jt.a,"veui-select":N.a,"veui-date-picker":Jt.a,"v-chart":M.a},directives:{autosubmit:Ee.a},data:function(){return{readyRender:!1,dimensions:[{value:"view",label:"日均展现量"},{value:"click",label:"日均点击量"},{value:"income",label:"日均收入"},{value:"ecpm",label:"eCPM"},{value:"clickRatio",label:"CTR"}],selectDimension:"view",dateShortCut:[],originChartData:{},selected:{},chartSeries:[],dateList:[],chartLegend:[],options:{}}},methods:{redirectTo:function(e){this.global.redirect({url:{path:e},type:"push"})},goBack:function(){this.redirectTo("/superExp/report")},getSpan:function(e){for(var t=arguments.length,a=new Array(1<t?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return 0===a[0].index?{row:a[0].groupLength}:{row:0}},billionFormat:function(e){return xe.a.billionFormat(e)},dateDash:function(e){return Object(V.a)(e)},getChartData:function(e){var t=this,a={begin:w()(this.store.range[0]).format("YYYYMMDD"),end:w()(this.store.range[1]).format("YYYYMMDD"),adPositionId:this.store.adPositionId};this.store.getChatDataRequester(Object(v.a)({},a,e)).then(function(e){t.transChartData(e,t.selectDimension),t.readyRender=!0}),this.store.submitSearch()},transChartData:function(e,t){var a=e;for(var i in this.originChartData={},this.chartLegend=[],this.dateList=[],this.chartSeries=[],a)this.originChartData[i]=Au()(a[i],function(e){return parseInt(e.time,10)});for(var s in this.originChartData){this.chartLegend.push(s),this.selected[s]=!0;var l="";-1<s.indexOf("原样式")?l="origin":-1<s.indexOf("推荐样式")&&(l="recommend"+s.substring(s.length-1));var r=[],o=!0,n=!1,c=void 0;try{for(var u,d=this.originChartData[s][Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var f=u.value;-1<s.indexOf("原样式")&&this.dateList.push(this.dateDash(f.time)),r.push(f[t])}}catch(e){n=!0,c=e}finally{try{o||null==d.return||d.return()}finally{if(n)throw c}}this.chartSeries.push({name:s,colorIndex:l,data:st()(r)})}this.options=Yu(this.chartSeries,this.dateList,"趋势图",this.chartLegend,this.selected)},changeDimension:function(){this.transChartData(this.originChartData,this.selectDimension)},disabledDate:function(e){return e.valueOf()>new Date(this.store.slot.expEndTime).valueOf()||e.valueOf()<new Date(this.store.slot.expStartTime).valueOf()-864e5}},mounted:function(){xe.a.hideHeaderDom(),this.getChartData()},beforeDestroy:function(){xe.a.addHeaderDom()}}),Pu=(a("7f3d"),Object(p.a)(Eu,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"super-exp-lab-report edit-form-common"},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("template",{slot:"summaryContent"},[a("div",[a("span",{staticClass:"summary-title"},[e._v(e._s(e.store.slot.adPositionName)+"（ID:"+e._s(e.store.slot.adPositionId)+")")]),a("span",{staticClass:"summary-status"},[2==e.store.slot.expStatus?a("span",[e._v("优化中")]):e._e(),5==e.store.slot.expStatus?a("span",[e._v("优化完成")]):e._e()]),2==e.store.slot.expStatus?a("span",{staticClass:"summary-startTime"},[e._v("（开始时间："+e._s(e.dateDash(e.store.slot.expStartTime))+"）")]):e._e(),5==e.store.slot.expStatus?a("span",{staticClass:"summary-startTime"},[e._v("（完成时间："+e._s(e.dateDash(new Date(e.store.slot.expEndTime)))+"）")]):e._e()])]),a("template",{slot:"filterContent"},[a("veui-field",[a("veui-select",{staticClass:"input200",attrs:{options:e.dimensions,"overlay-class":"single-selection"},on:{change:e.changeDimension},model:{value:e.selectDimension,callback:function(t){e.selectDimension=t},expression:"selectDimension"}})],1),a("veui-field",{staticClass:"veui-date-picker"},[a("veui-date-picker",{attrs:{range:"","disabled-date":e.disabledDate,shortcuts:e.dateShortCut},on:{select:function(t){e.getChartData()}},model:{value:e.store.range,callback:function(t){e.$set(e.store,"range",t)},expression:"store.range"}})],1),0<e.chartSeries.length?a("div",{staticClass:"v-chart-assession"},[e.readyRender?a("v-chart",{attrs:{options:e.options}}):e._e()],1):e._e()],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"日期",title:"日期",span:e.getSpan,width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"sefdefined-td"},[e._v(e._s(e.dateDash(t.item.time)))])]}}])}),a("veui-table-column",{attrs:{field:"样式",title:"样式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(t.item.expAdStyle))])]}}])}),a("veui-table-column",{attrs:{field:"views",title:"日均展现量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(e.billionFormat(t.item.view)))])]}}])}),a("veui-table-column",{attrs:{field:"click",title:"日均点击量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(e.billionFormat(t.item.click)))])]}}])}),a("veui-table-column",{attrs:{field:"income",title:"日均收入"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(e.billionFormat(t.item.income)))])]}}])}),a("veui-table-column",{attrs:{field:"ecpm",title:"eCPM"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(e.billionFormat(t.item.ecpm)))])]}}])}),a("veui-table-column",{attrs:{field:"ctr",title:"CTR"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"sefdefined-td",class:{"first-line":0===t.item.index}},[e._v(e._s(e.billionFormat(t.item.clickRatio))+"%")])]}}])})],1)],2)},[],!1,null,null,null));Pu.options.__file="SuperExpLabReportView.vue";var Vu=Pu.exports,Bu=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"findSlot",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageReady",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{status:1,order:"desc",orderBy:"deltaRatio",pageSize:10,pageNo:1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[5,10,20]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"tuChecked",{}),a}var a;return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getOptimalExpAdp=this.api.getOptimalExpAdp,this.modifySupExpAdp=this.api.modifySupExpAdp,this.findSlot=this.getRouteQuery().slot}},{key:"requestList",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOptimalExpAdp(this.filter);case 2:for(t=e.sent,a=this.adaptData(t),this.filter.pageNo=a.pageNo,this.filter.pageSize=a.pageSize,this.totalCount=a.totalCount,this.tableData=a.result,this.filter.order=a.order,this.filter.orderBy=a.orderBy,i=0;i<this.filter.pageSize;i++)s=this.tableData[i].userDefineAdp.tuid,this.tuChecked[s]=!1;case 11:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"adaptData",value:function(e){var t={pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.expList,order:this.filter.order,orderBy:this.filter.orderBy};return this.pageReady=!0,t}}]),t}(J.a);a("f911"),y.a.register({super_exp_preview_icon:{raw:'<title>&#x5206;&#x7EC4;</title><g fill="#666" fill-rule="evenodd"><path d="M10.022 6.505C10.022 4.602 8.417 3 6.51 3 4.605 3 3 4.602 3 6.505c0 1.903 1.605 3.505 3.51 3.505.803 0 1.566-.327 2.168-.727.994 1.006 1.532 1.543 1.613 1.61.098.081.716-.48.628-.596-.059-.077-.612-.628-1.659-1.65.402-.6.762-1.34.762-2.142zm-6.019 0A2.481 2.481 0 0 1 6.511 4a2.481 2.481 0 0 1 2.508 2.504A2.481 2.481 0 0 1 6.51 9.008a2.481 2.481 0 0 1-2.508-2.503z" fill-rule="nonzero"/><path d="M10.5 0h-8C1.1 0 0 1.1 0 2.5v8C0 11.9 1.1 13 2.5 13h5c.2 0 .5-.2.5-.5s-.3-.5-.5-.5h-5c-.8 0-1.5-.7-1.5-1.5v-8C1 1.7 1.7 1 2.5 1h8c.8 0 1.5.7 1.5 1.5v5c0 .3.2.5.5.5s.5-.2.5-.5v-5C13 1.1 11.9 0 10.5 0z"/></g>',width:13,height:13}});var $u={name:"previewIframe",components:{},props:["adInfo"],data:function(){return{}},created:function(){},watch:{},computed:{querySrc:function(){if(0!==Object.keys(this.adInfo).length)return"./preview.html"+this.getQuery(this.adInfo)},width:function(){var e=this.adInfo.container&&JSON.parse(this.adInfo.container);return e?2===e.sizeType||3===e.sizeType||201===this.adInfo.adType||202===this.adInfo.adType||3===this.type||5===e.sizeType?320:e.width:null},height:function(){var e=this.adInfo.container&&JSON.parse(this.adInfo.container);return e?2===e.sizeType||201===this.adInfo.adType||202===this.adInfo.adType||5===e.sizeType?this.width*(e.height/(e.width||320)):e.height:null}},mounted:function(){},methods:{getQuery:function(e){try{var t="string"==typeof e.basic&&JSON.parse(e.basic);t.cname="baiducprostyle_cpr";var a={cid:e.cid,basic:t,adType:e.adType,container:JSON.parse(e.container),complement:JSON.parse(e.complement),fillStyle:JSON.parse(e.fillStyle),bidLevel:JSON.parse(e.bidLevel),context:e.context&&JSON.parse(e.context)},i=e.cproParam.indexOf("cpro_client"),s=e.cproParam.slice(0,i)+"cpro_client=baiducprostyle_cpr",l=a.container.width,r=a.container.height,o=a.container.sizeType,n=JSON.parse(e.extra).shape;return 2===t.flowType&&(3===o&&(l=320,o=1,r=this.getUserdefineHeight(a.context)||r),201!==a.adType&&202!==a.adType&&2!==o&&5!==o||(o=1,r=(l=320)*(a.container.height/(a.container.width||l)))),"?cpro_id="+encodeURIComponent(s)+"&adInfo="+encodeURIComponent(JSON.stringify(a))+"&width="+l+"&height="+r+"&sizeType="+o+"&shape="+n}catch(e){throw new Error(e)}},getUserdefineHeight:function(e){if(!e)return 0;var t,a=e.userDefine.split("|"),i=a.length;for(t=0;t<i;t++){var s=a[t].split("="),l=void 0;for(l=0;l<=s.length;l++){var r=s[0],o=s[1];if("cpro_psheight"===r)return o}}}}},zu=(a("3dd0"),Object(p.a)($u,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"super-exp-slot-preview-container"},[t("iframe",{attrs:{id:"slot-preview-iframe",src:this.querySrc,width:this.width,height:this.height,scrolling:"no"}},[this._v(">")]),t("div",{staticClass:"super-exp-slot-preview-layer",attrs:{id:"slot-preview-mask"}})])},[],!1,null,"cd2b46ac",null));zu.options.__file="superExpPreviewIframe.vue";var qu=zu.exports,Uu=Object(u.a)(G.a,Bu,{name:"super-exp-todo-view",components:{"veui-tabs":Sa.a,"veui-tab":F.a,"veui-icon":y.a,"veui-button":S.a,"veui-checkbox":he.a,"veui-table":ut.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-table-column":de.a,"veui-overlay":fe.a,"preview-iframe":qu,"veui-dialog":pe.a},directives:{outside:Ra.a},data:function(){return{open:!1,openTU:"aaa",previewAdinfo:{},check:!1,isAutoSwitch:!1,expInfoArr:new Set,expInfoArrSize:0,optimizeDisabled:!0,tuChecked:{},modalOpen:!1,singleOptModalOpen:!1,optimizeTuid:null}},mounted:function(){},watch:{expInfoArrSize:{handler:function(e){this.canOptimize(e)},deep:!0},"store.pageReady":function(){var e=this;1==this.store.filter.pageNo&&this.store.findSlot&&setTimeout(function(){e.goAnchor("#"+e.store.findSlot)},100)}},computed:{},methods:{previewClass:function(e){var t="preview-61108-pat21-ptdesc1",a=e.context&&JSON.parse(e.context).userDefine,i=e.cproParam;(-1<a.indexOf("cpro_template=template_inlay_all_mobile|")||-1<a.indexOf("template_inlay_all_mobile_lu_tabcloud")||-1<a.indexOf("text_default"))&&(t="template_inlay_all_mobile_text",-1<i.indexOf("cpro_at=text")?t="template_inlay_all_mobile_text":-1<i.indexOf("cpro_at=tuwen")?t="template_inlay_all_mobile_tuwen":-1<i.indexOf("cpro_at=image")?t="template_inlay_all_mobile_image":-1<i.indexOf("cpro_at=linkunit")&&-1<i.indexOf("cpro_layout_filter=rank,image")?t="template_inlay_all_mobile_rank":-1<i.indexOf("cpro_at=linkunit")&&-1<i.indexOf("cpro_layout_filter=tabcloud,image")&&(t="template_inlay_all_mobile_tabcloud"));var s=e.fillStyle&&JSON.parse(e.fillStyle).styleTemplateId;if(s)switch(s[0]){case 50039:t="preview-50039";break;case 50040:t="preview-50040";break;case 50041:t="preview-50041";break;case 50042:t="preview-50042";break;case 50043:t="preview-50043";break;case 50044:t="preview-50044";break;case 60101:t="preview-60101";break;case 60102:t="preview-60102";break;case 60103:t="preview-60103";break;case 60104:t="preview-60104";break;case 71001:t="template_inlay_all_mobile_lu_search_recom";break;case 61104:-1<a.indexOf("pat=8")&&(t="preview-61104-pat8");break;case 61107:-1<a.indexOf("pat=6")&&(t="preview-61107-pat6");break;case 61108:-1<a.indexOf("pat=15")&&(-1<a.indexOf("ptDesc=1")&&(-1<a.indexOf("ptp=1")&&(t="preview-61108-pat15-ptdesc1-ptp1"),-1<a.indexOf("ptp=0")&&(t="preview-61108-pat15-ptdesc1-ptp0")),-1<a.indexOf("ptDesc=2")&&(-1<a.indexOf("ptp=1")&&(t="preview-61108-pat15-ptdesc2-ptp1"),-1<a.indexOf("ptp=0")&&(t="preview-61108-pat15-ptdesc2-ptp0")),-1<a.indexOf("ptDesc=0")&&(-1<a.indexOf("ptp=1")&&(t="preview-61108-pat15-ptdesc0-ptp1"),-1<a.indexOf("ptp=0")&&(t="preview-61108-pat15-ptdesc0-ptp0"))),-1<a.indexOf("pat=21")&&(-1<a.indexOf("ptDesc=1")&&(t="preview-61108-pat21-ptdesc1"),-1<a.indexOf("ptDesc=2")&&(t="preview-61108-pat21-ptdesc2")),-1<a.indexOf("pat=30")&&(t="preview-61108-pat30");break;default:t="preview-61108-pat21-ptdesc1"}return t},getAdpTypeName:function(e){var t="图文广告-嵌入-普通样式",a=e.context&&JSON.parse(e.context).userDefine;e.cproParam,(-1<a.indexOf("cpro_template=template_inlay_all_mobile|")||-1<a.indexOf("template_inlay_all_mobile_lu_tabcloud")||-1<a.indexOf("text_default"))&&(t="图文广告-嵌入-普通样式");var i=e.fillStyle&&JSON.parse(e.fillStyle).styleTemplateId;if(i)switch(i[0]){case 50039:t="信息流-图文信息流";break;case 50040:t="信息流-全图信息流";break;case 50041:t="信息流-图文信息流-标题居上";break;case 50042:t="信息流-图文信息流-无描述";break;case 50043:t="信息流-图文信息流-标题居下";break;case 50044:t="信息流-图文信息流-大图";break;case 60101:t="嵌入-横幅-原生多图";break;case 60102:t="嵌入-矩形-原生橱窗";break;case 60103:t="嵌入-横幅-原生图文";break;case 60104:t="嵌入-横幅-原生文字";break;case 71001:t="搜索推荐";break;case 61104:-1<a.indexOf("pat=8")&&(t="原生文字链");break;case 61107:-1<a.indexOf("pat=6")&&(t="原生缩略图");break;case 61108:-1<a.indexOf("pat=15")&&(-1<a.indexOf("ptDesc=1")&&(-1<a.indexOf("ptp=1")&&(t="右图左文-时间描述"),-1<a.indexOf("ptp=0")&&(t="左图右文-时间描述")),-1<a.indexOf("ptDesc=2")&&(-1<a.indexOf("ptp=1")&&(t="右图左文-无描述"),-1<a.indexOf("ptp=0")&&(t="左图右文-无描述")),-1<a.indexOf("ptDesc=0")&&(-1<a.indexOf("ptp=1")&&(t="右图左文-一般描述"),-1<a.indexOf("ptp=0")&&(t="左图右文-一般描述"))),-1<a.indexOf("pat=21")&&(-1<a.indexOf("ptDesc=1")&&(t="原生三图-时间描述"),-1<a.indexOf("ptDesc=2")&&(t="原生三图-无描述")),-1<a.indexOf("pat=30")&&(t="原生大图");break;default:t="原生缩略图"}return t},canOptimize:function(e){this.optimizeDisabled=0===e},checkedAll:function(e){var t=this;if(!0===e){var a=this.store.tableData;for(var i in this.expInfoArr=new Set,a.forEach(function(e){t.expInfoArr.add({tuid:e.userDefineAdp.tuid,autoSwitch:Number(t.isAutoSwitch)})}),this.store.tuChecked)this.store.tuChecked[i]=!0}else for(var s in this.expInfoArr=new Set,this.store.tuChecked)this.store.tuChecked[s]=!1;this.expInfoArrSize=this.expInfoArr.size,this.tuChecked=st()(this.store.tuChecked)},checkExpTu:function(e,t){var a=this;!0===t?this.expInfoArr.add({tuid:e,autoSwitch:Number(this.isAutoSwitch)}):this.expInfoArr.forEach(function(t){t.tuid===e&&a.expInfoArr.delete(t)}),this.expInfoArrSize=this.expInfoArr.size},optimizeAdps:function(){var e=this,t=[],a=!0,i=!1,s=void 0;try{for(var l,r=this.expInfoArr.keys()[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var o=l.value;t.push(o)}}catch(t){i=!0,s=t}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}this.store.modifySupExpAdp({expInfo:t,fromStatus:1,toStatus:2}).then(function(t){e.store.submitSearch()})},optimizeOneAdp:function(e){this.singleOptModalOpen=!0,this.optimizeTuid=e},previewCurrAd:function(e){this.open=!0,this.previewAdinfo=e},hide:function(){this.open=!1},goAnchor:function(e){var t=this.$el.querySelector(e).parentNode.parentNode;t?window.scrollTo({top:t.offsetTop,behavior:"smooth"}):window.scrollTo({top:0,behavior:"auto"})},handleModalClose:function(e,t){var a=this;if(!0===t){var i=this.store.tableData.length,s=this.store.getRouteQuery({}).pageNo;this.singleOptModalOpen=!1,e&&this.store.modifySupExpAdp({expInfo:[{tuid:this.optimizeTuid,autoSwitch:0}],fromStatus:1,toStatus:2}).then(function(e){a.store.filter.pageNo=a.getPageNo(i,s),a.store.submitSearch()})}else this.modalOpen=!1,e&&this.optimizeAdps()},getPageNo:function(e,t){var a=t||1;return 1!==a&&1===e&&(a-=1),a}}}),Wu=(a("f650"),Object(p.a)(Uu,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"super-exp-todo-view"},[a("h3",{staticClass:"media-list-title"},[e._v("启优实验室")]),a("veui-tabs",{attrs:{active:e.$route.path}},[a("veui-tab",{attrs:{label:"待优化",to:"/superExp/todo"}},[a("list-view",{staticClass:"super-exp-todo-view"},[a("template",{staticClass:"edit-form-content",slot:"before"},[a("div",{staticClass:"superExp-tips-remind"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("经检测，您的账户下有 "),a("span",[e._v(e._s(e.store.totalCount||0))]),e._v(" 个代码位收益偏低。"),a("br"),a("span",[e._v("体验启优实验室挖掘的推荐样式进行代码位收益优化，这将很有可能取得出色效果，如效果不理想可立即取消，请合作媒体承担实验中可能产生的收益折损。")])])],1)]),a("template",{slot:"filterContent"},[a("veui-field",{staticClass:"filter-content",attrs:{field:"expInfo",name:"expInfo"}},[a("div",{staticClass:"optimize-op"},[a("veui-checkbox",{on:{change:function(t){e.checkedAll(t)}}},[e._v("全选")]),a("veui-button",{attrs:{ui:"primary",disabled:e.optimizeDisabled},on:{click:function(t){e.modalOpen=!0}}},[e._v("\n                                立即优化\n                            ")]),a("veui-checkbox",{model:{value:e.isAutoSwitch,callback:function(t){e.isAutoSwitch=t},expression:"isAutoSwitch"}},[e._v("允许优化期结束后，如实验组优于对照组，系统自动切换全流量 ")])],1),a("div",{staticClass:"table-header"},[a("div",{staticClass:"header1"},[e._v("当前样式")]),a("div",{staticClass:"header1"},[e._v("推荐样式1")]),a("div",{staticClass:"header1"},[e._v("推荐样式2")]),a("div",{staticClass:"header1"},[e._v("推荐样式3")])])])],1),a("template",{slot:"table"},[a("veui-table",{staticClass:"super-exp-todo-table",attrs:{data:e.store.tableData}},[a("veui-table-column",{attrs:{title:"",field:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"exp-group",attrs:{id:t.userDefineAdp.tuid}},[a("div",{staticClass:"exp-group-title"},[a("veui-checkbox",{on:{change:function(a){e.checkExpTu(t.userDefineAdp.tuid,a)}},model:{value:e.tuChecked[t.userDefineAdp.tuid],callback:function(a){e.$set(e.tuChecked,t.userDefineAdp.tuid,a)},expression:"tuChecked[props.userDefineAdp.tuid]"}},[a("span",{staticClass:"exp-tu-name"},[e._v(e._s(t.userDefineAdp.name)+"（ID:"+e._s(t.userDefineAdp.tuid)+"）")])]),a("span",{staticClass:"exp-tu-op",on:{click:function(a){e.optimizeOneAdp(t.userDefineAdp.tuid)}}},[e._v("立即优化")])],1),a("div",{staticClass:"exp-tu"},[a("div",{staticClass:"current-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(t.userDefineAdp)))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(t.userDefineAdp.container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                    "+e._s(t.userDefineAdp.width)+":"+e._s(t.userDefineAdp.height)+"\n                                                ")]):e._e(),1===JSON.parse(t.userDefineAdp.container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                    "+e._s(t.userDefineAdp.width)+"*"+e._s(t.userDefineAdp.height)+"\n                                                ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(a){e.previewCurrAd(t.userDefineAdp)}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),a("span",[e._v("预览样式")])],1)]),a("div",{class:e.previewClass(t.userDefineAdp)})]),a("div",{staticClass:"calapse-arrow"},[a("veui-icon",{attrs:{name:"angle-right"}})],1),t.expAdp&&0<t.expAdp.length?a("div",{staticClass:"tuijian-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(t.expAdp[0])))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(t.expAdp[0].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                    "+e._s(t.expAdp[0].width)+":"+e._s(t.expAdp[0].height)+"\n                                                ")]):e._e(),1===JSON.parse(t.expAdp[0].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                    "+e._s(t.expAdp[0].width)+"*"+e._s(t.expAdp[0].height)+"\n                                                ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(a){e.previewCurrAd(t.expAdp[0])}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),a("span",[e._v("预览样式")])],1)]),a("div",{class:e.previewClass(t.expAdp[0])}),a("div",{staticClass:"tuijian-desc"},[e._v("同行业媒体使用该样式,CPM\n                                                "),a("em",{staticClass:"increase-cpm"},[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v(e._s(t.expAdp[0].deltaRatio)+"%\n                                                ")],1)])]):e._e(),t.expAdp&&1<t.expAdp.length?a("div",{staticClass:"tuijian-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(t.expAdp[1])))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(t.expAdp[1].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                    "+e._s(t.expAdp[1].width)+":"+e._s(t.expAdp[1].height)+"\n                                                ")]):e._e(),1===JSON.parse(t.expAdp[1].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                    "+e._s(t.expAdp[1].width)+"*"+e._s(t.expAdp[1].height)+"\n                                                ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(a){e.previewCurrAd(t.expAdp[1])}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),a("span",[e._v("预览样式")])],1)]),a("div",{class:e.previewClass(t.expAdp[1])}),a("div",{staticClass:"tuijian-desc"},[e._v("同行业媒体使用了该样式，CPM\n                                                "),a("em",{staticClass:"increase-cpm"},[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v(e._s(t.expAdp[1].deltaRatio)+"%\n                                                ")],1)])]):e._e(),t.expAdp&&2<t.expAdp.length?a("div",{staticClass:"tuijian-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(t.expAdp[2])))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(t.expAdp[2].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                    "+e._s(t.expAdp[2].width)+":"+e._s(t.expAdp[2].height)+"\n                                                ")]):e._e(),1===JSON.parse(t.expAdp[2].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                    "+e._s(t.expAdp[2].width)+"*"+e._s(t.expAdp[2].height)+"\n                                                ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(a){e.previewCurrAd(t.expAdp[2])}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),a("span",[e._v("预览样式")])],1)]),a("div",{class:e.previewClass(t.expAdp[2])}),a("div",{staticClass:"tuijian-desc"},[e._v("同行业媒体使用了该样式，CPM\n                                                "),a("em",{staticClass:"increase-cpm"},[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v(e._s(t.expAdp[2].deltaRatio)+"%\n                                                ")],1)])]):e._e()])])]}}])}),a("template",{slot:"no-data"},[e.store.initLoading?[e._t("tableDataLoading",[e._v("数据加载中")])]:[e._t("tableNoData",[e._v("没有数据")])]],2)],2),a("veui-overlay",{attrs:{target:e.openTU,options:{attachment:"top left",targetAttachment:"top left",offset:"-40px 0px"},open:e.open,"overlay-class":"relative-overlay"},on:{"update:open":function(t){e.open=t}}},[a("div",{directives:[{name:"outside",rawName:"v-outside:toggle",value:e.hide,expression:"hide",arg:"toggle"}]},[a("preview-iframe",{attrs:{adInfo:e.previewAdinfo}})],1)]),a("veui-dialog",{attrs:{title:"立即优化",open:e.modalOpen},on:{"update:open":function(t){e.modalOpen=t},ok:function(t){e.handleModalClose(!0,e.singleOpti=!1)},cancel:e.handleModalClose}},[e._v("\n                        确定要开启优化实验?\n                    ")]),a("veui-dialog",{attrs:{title:"立即优化",open:e.singleOptModalOpen},on:{"update:open":function(t){e.singleOptModalOpen=t},ok:function(t){e.handleModalClose(!0,e.singleOpti=!0)},cancel:e.handleModalClose}},[e._v("\n                        确定要开启优化实验?\n                    ")])],1)],2)],1),a("veui-tab",{attrs:{label:"优化中",to:"/superExp/doing"}}),a("veui-tab",{attrs:{label:"已完成",to:"/superExp/done"}})],1)],1)},[],!1,null,"38036f65",null));Wu.options.__file="SuperExpTodoView.vue";var Gu=Wu.exports,Hu=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[5,10,20]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{status:2,order:"desc",orderBy:"exptStartTime",pageSize:10,pageNo:1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[5,10,20]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotData",[]),a}var a;return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getOptimalExpAdp=this.api.getOptimalExpAdp,this.getOptimalAdData=this.api.getOptimalAdData,this.modifySupExpAdp=this.api.modifySupExpAdp,this.switchSupExpAdp=this.api.switchSupExpAdp}},{key:"requestList",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.getOptimalExpAdp(this.filter),a=this.getOptimalAdData(this.filter),Promise.all([t,a]).then(function(e){var t=i.adaptData(e[0]);i.filter.pageNo=t.pageNo,i.filter.pageSize=t.pageSize,i.totalCount=t.totalCount,i.slotData=t.result,i.filter.order=t.order,i.filter.orderBy=t.orderBy;var a=i.adaptData(e[1]);i.filter.pageNo=a.pageNo,i.filter.pageSize=a.pageSize,i.totalCount=a.totalCount,i.tableData=a.result,i.filter.order=a.order,i.filter.orderBy=a.orderBy});case 3:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.expList||e.results,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),Qu=Object(u.a)(G.a,Hu,{name:"super-exp-doing-view",components:{"veui-tabs":Sa.a,"veui-tab":F.a,"veui-icon":y.a,"veui-button":S.a,"veui-checkbox":he.a,"veui-table":ut.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-table-column":de.a,"veui-overlay":fe.a,"preview-iframe":qu,"veui-dialog":pe.a},directives:{outside:Ra.a},data:function(){return{open:!1,openTU:"aaa",previewAdinfo:{},expInfoArr:new Set,expInfoArrSize:0,optimizeDisabled:!0,cancelOptModalOpen:!1,switchOptimizeAllModalOpen:!1,cancelOptTuid:null,autoSwitch:null,switchOptAllTuid:null,expTableData:[]}},mounted:function(){},computed:{slotData:function(){return this.store.slotData}},watch:{},methods:{previewClass:function(e){var t="preview-61108-pat21-ptdesc1",a=e.context&&JSON.parse(e.context).userDefine,i=e.cproParam;(-1<a.indexOf("cpro_template=template_inlay_all_mobile|")||-1<a.indexOf("template_inlay_all_mobile_lu_tabcloud")||-1<a.indexOf("text_default"))&&(t="template_inlay_all_mobile_text",-1<i.indexOf("cpro_at=text")?t="template_inlay_all_mobile_text":-1<i.indexOf("cpro_at=tuwen")?t="template_inlay_all_mobile_tuwen":-1<i.indexOf("cpro_at=image")?t="template_inlay_all_mobile_image":-1<i.indexOf("cpro_at=linkunit")&&-1<i.indexOf("cpro_layout_filter=rank,image")?t="template_inlay_all_mobile_rank":-1<i.indexOf("cpro_at=linkunit")&&-1<i.indexOf("cpro_layout_filter=tabcloud,image")&&(t="template_inlay_all_mobile_tabcloud"));var s=e.fillStyle&&JSON.parse(e.fillStyle).styleTemplateId;if(s)switch(s[0]){case 50039:t="preview-50039";break;case 50040:t="preview-50040";break;case 50041:t="preview-50041";break;case 50042:t="preview-50042";break;case 50043:t="preview-50043";break;case 50044:t="preview-50044";break;case 60101:t="preview-60101";break;case 60102:t="preview-60102";break;case 60103:t="preview-60103";break;case 60104:t="preview-60104";break;case 71001:t="template_inlay_all_mobile_lu_search_recom";break;case 61104:-1<a.indexOf("pat=8")&&(t="preview-61104-pat8");break;case 61107:-1<a.indexOf("pat=6")&&(t="preview-61107-pat6");break;case 61108:-1<a.indexOf("pat=15")&&(-1<a.indexOf("ptDesc=1")&&(-1<a.indexOf("ptp=1")&&(t="preview-61108-pat15-ptdesc1-ptp1"),-1<a.indexOf("ptp=0")&&(t="preview-61108-pat15-ptdesc1-ptp0")),-1<a.indexOf("ptDesc=2")&&(-1<a.indexOf("ptp=1")&&(t="preview-61108-pat15-ptdesc2-ptp1"),-1<a.indexOf("ptp=0")&&(t="preview-61108-pat15-ptdesc2-ptp0")),-1<a.indexOf("ptDesc=0")&&(-1<a.indexOf("ptp=1")&&(t="preview-61108-pat15-ptdesc0-ptp1"),-1<a.indexOf("ptp=0")&&(t="preview-61108-pat15-ptdesc0-ptp0"))),-1<a.indexOf("pat=21")&&(-1<a.indexOf("ptDesc=1")&&(t="preview-61108-pat21-ptdesc1"),-1<a.indexOf("ptDesc=2")&&(t="preview-61108-pat21-ptdesc2")),-1<a.indexOf("pat=30")&&(t="preview-61108-pat30");break;default:t="preview-61108-pat21-ptdesc1"}return t},getAdpTypeName:function(e){var t="图文广告-嵌入-普通样式",a=e.context&&JSON.parse(e.context).userDefine;e.cproParam,(-1<a.indexOf("cpro_template=template_inlay_all_mobile|")||-1<a.indexOf("template_inlay_all_mobile_lu_tabcloud")||-1<a.indexOf("text_default"))&&(t="图文广告-嵌入-普通样式");var i=e.fillStyle&&JSON.parse(e.fillStyle).styleTemplateId;if(i)switch(i[0]){case 50039:t="信息流-图文信息流";break;case 50040:t="信息流-全图信息流";break;case 50041:t="信息流-图文信息流-标题居上";break;case 50042:t="信息流-图文信息流-无描述";break;case 50043:t="信息流-图文信息流-标题居下";break;case 50044:t="信息流-图文信息流-大图";break;case 60101:t="嵌入-横幅-原生多图";break;case 60102:t="嵌入-矩形-原生橱窗";break;case 60103:t="嵌入-横幅-原生图文";break;case 60104:t="嵌入-横幅-原生文字";break;case 71001:t="搜索推荐";break;case 61104:-1<a.indexOf("pat=8")&&(t="原生文字链");break;case 61107:-1<a.indexOf("pat=6")&&(t="原生缩略图");break;case 61108:-1<a.indexOf("pat=15")&&(-1<a.indexOf("ptDesc=1")&&(-1<a.indexOf("ptp=1")&&(t="右图左文-时间描述"),-1<a.indexOf("ptp=0")&&(t="左图右文-时间描述")),-1<a.indexOf("ptDesc=2")&&(-1<a.indexOf("ptp=1")&&(t="右图左文-无描述"),-1<a.indexOf("ptp=0")&&(t="左图右文-无描述")),-1<a.indexOf("ptDesc=0")&&(-1<a.indexOf("ptp=1")&&(t="右图左文-一般描述"),-1<a.indexOf("ptp=0")&&(t="左图右文-一般描述"))),-1<a.indexOf("pat=21")&&(-1<a.indexOf("ptDesc=1")&&(t="原生三图-时间描述"),-1<a.indexOf("ptDesc=2")&&(t="原生三图-无描述")),-1<a.indexOf("pat=30")&&(t="原生大图");break;default:t="原生缩略图"}return t},cancelOptimize:function(e,t){this.cancelOptTuid=e,this.autoSwitch=t,this.cancelOptModalOpen=!0},switchOptimizeAll:function(e,t){this.switchOptimizeAllModalOpen=!0,this.switchOptAllTuid=e,this.expTableData=t},previewCurrAd:function(e){this.open=!0,this.previewAdinfo=e},hide:function(){this.open=!1},gotoReport:function(e){var t=this.global.router.resolve({path:"/superExp/report/detail",query:{adPositionId:e}});window.open(t.href,"_blank")},handleModalClose:function(e,t){var a=this;if(!0===t){this.cancelOptModalOpen=!1;var i=this.store.tableData.length,s=this.store.getRouteQuery({}).pageNo;e&&this.store.modifySupExpAdp({expInfo:[{tuid:this.cancelOptTuid,autoSwitch:this.autoSwitch}],fromStatus:2,toStatus:1}).then(function(e){a.store.filter.pageNo=a.getPageNo(i,s),a.store.submitSearch()})}else if(this.switchOptimizeAllModalOpen=!1,e){for(var l=[],r=1;r<this.expTableData.length;r++){var o={};o.tuid=this.expTableData[r].adPositionId,o.income=this.expTableData[r].income,l.push(o)}this.store.switchSupExpAdp({switchAdpInfosList:[{userDefinedTuid:this.switchOptAllTuid,expAdpInfos:l}]}).then(function(e){a.store.submitSearch()})}},getPageNo:function(e,t){var a=t||1;return 1!==a&&1===e&&(a-=1),a}}}),Ju=(a("c061"),Object(p.a)(Qu,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"super-exp-doing-view"},[a("h3",{staticClass:"media-list-title"},[e._v("启优实验室")]),a("veui-tabs",{attrs:{active:e.$route.path}},[a("veui-tab",{attrs:{label:"待优化",to:"/superExp/todo"}}),a("veui-tab",{attrs:{label:"优化中",to:"/superExp/doing"}},[a("list-view",{staticClass:"super-exp-doing-view"},[a("template",{staticClass:"edit-form-content",slot:"before"},[a("div",{staticClass:"superExp-tips-remind"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("启优实验室：您的 "),a("span",[e._v(e._s(e.store.totalCount||0))]),e._v(" 个代码位正在优化中。")])],1)]),a("template",{slot:"filterContent"},[a("veui-field",{staticClass:"filter-content",attrs:{field:"id"}},[a("div",{staticClass:"table-header"},[a("div",{staticClass:"header1"},[e._v("当前样式")]),a("div",{staticClass:"header1"},[e._v("推荐样式1")]),a("div",{staticClass:"header1"},[e._v("推荐样式2")]),a("div",{staticClass:"header1"},[e._v("推荐样式3")])])])],1),a("template",{slot:"table"},[a("veui-table",{staticClass:"super-exp-doing-table",attrs:{data:e.slotData}},[a("veui-table-column",{attrs:{title:"",field:"id"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.userDefineAdp,s=t.expAdp,l=t.exptStartTime,r=t.autoSwitch,o=t.index;return[a("div",{staticClass:"exp-group"},[a("div",{staticClass:"exp-group-title"},[a("span",{staticClass:"exp-tu-name"},[e._v(e._s(i.name)+"（ID:"+e._s(i.tuid)+"）")]),a("span",[e._v("优化开始日期："+e._s(l))]),a("span",{staticClass:"exp-tu-op"},[a("span",{staticClass:"exp-tu-op-cancel",on:{click:function(t){e.cancelOptimize(i.tuid,r)}}},[e._v("取消优化")]),a("span",{staticClass:"exp-tu-op-all",on:{click:function(t){e.switchOptimizeAll(i.tuid,e.store.tableData[o])}}},[e._v("切换全流量")]),a("span",{staticClass:"exp-tu-goto-report",on:{click:function(t){e.gotoReport(i.tuid)}}},[e._v("查看报告")])])]),a("div",{staticClass:"exp-tu"},[a("div",{staticClass:"current-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(i)))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(i.container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(i.width)+":"+e._s(i.height)+"\n                                                    ")]):e._e(),1===JSON.parse(i.container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(i.width)+"*"+e._s(i.height)+"\n                                                    ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(t){e.previewCurrAd(i)}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),e._v("预览样式\n                                                    ")],1)]),a("div",{class:e.previewClass(i)})]),a("div",{staticClass:"calapse-arrow"},[a("veui-icon",{attrs:{name:"angle-right"}})],1),s&&0<s.length?a("div",{staticClass:"tuijian-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(s[0])))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(s[0].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[0].width)+":"+e._s(s[0].height)+"\n                                                    ")]):e._e(),1===JSON.parse(s[0].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[0].width)+"*"+e._s(s[0].height)+"\n                                                    ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(t){e.previewCurrAd(s[0])}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),e._v("预览样式")],1)]),a("div",{class:e.previewClass(s[0])}),a("div",{staticClass:"tuijian-desc"},[e._v("同行业媒体使用该样式,CPM\n                                                    "),a("em",{staticClass:"increase-cpm"},[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v(e._s(s[0].deltaRatio)+"%\n                                                    ")],1)])]):e._e(),s&&1<s.length?a("div",{staticClass:"tuijian-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(s[1])))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(s[1].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[1].width)+":"+e._s(s[1].height)+"\n                                                    ")]):e._e(),1===JSON.parse(s[1].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[1].width)+"*"+e._s(s[1].height)+"\n                                                    ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(t){e.previewCurrAd(s[1])}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),e._v("预览样式")],1)]),a("div",{class:e.previewClass(s[1])}),a("div",{staticClass:"tuijian-desc"},[e._v("同行业媒体使用了该样式，CPM\n                                                    "),a("em",{staticClass:"increase-cpm"},[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v(e._s(s[1].deltaRatio)+"%\n                                                    ")],1)])]):e._e(),s&&2<s.length?a("div",{staticClass:"tuijian-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(s[2])))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(s[2].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[2].width)+":"+e._s(s[2].height)+"\n                                                    ")]):e._e(),1===JSON.parse(s[2].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[2].width)+"*"+e._s(s[2].height)+"\n                                                    ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(t){e.previewCurrAd(s[2])}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),e._v("预览样式")],1)]),a("div",{class:e.previewClass(s[2])}),a("div",{staticClass:"tuijian-desc"},[e._v("同行业媒体使用了该样式，CPM\n                                                    "),a("em",{staticClass:"increase-cpm"},[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v(e._s(s[2].deltaRatio)+"%\n                                                    ")],1)])]):e._e()])]),a("veui-table",{staticClass:"exp-report",attrs:{data:e.store.tableData[o],scroll:"360","key-field":"adPositionId"}},[a("veui-table-column",{attrs:{field:"expAdStyle",title:"样式"}}),a("veui-table-column",{attrs:{field:"avgView",title:"日均展现量"}}),a("veui-table-column",{attrs:{field:"avgClick",title:"日均点击量"}}),a("veui-table-column",{attrs:{field:"avgIncome",title:"日均预估收入"}}),a("veui-table-column",{attrs:{field:"clickRatio",title:"点击率"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t\t\t\t    "+e._s(t.clickRatio)+"%\n\t\t\t\t\t\t\t\t\t\t\t    "),0<t.clickFluxRatio-0?a("span",[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t        "+e._s(t.clickFluxRatio)+"%\n\t\t\t\t\t\t\t\t\t\t\t    ")],1):t.clickFluxRatio-0<0?a("span",[a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t        "+e._s(Math.abs(t.clickFluxRatio))+"%\n\t\t\t\t\t\t\t\t\t\t\t    ")],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",title:"千次展现收益"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t\t\t\t    "+e._s(t.ecpm)+"\n\t\t\t\t\t\t\t\t\t\t\t    "),0<1*t.ecpmFluxRatio?a("span",[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t        "+e._s(t.ecpmFluxRatio)+"%\n\t\t\t\t\t\t\t\t\t\t\t    ")],1):1*t.ecpmFluxRatio<0?a("span",[a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t        "+e._s(Math.abs(t.ecpmFluxRatio))+"%\n\t\t\t\t\t\t\t\t\t\t\t    ")],1):e._e()]}}])})],1)]}}])}),a("template",{slot:"no-data"},[e.store.initLoading?[e._t("tableDataLoading",[e._v("数据加载中")])]:[e._t("tableNoData",[e._v("没有数据")])]],2),a("veui-overlay",{attrs:{target:e.openTU,options:{attachment:"top left",targetAttachment:"top left",offset:"-40px 0px"},open:e.open,"overlay-class":"relative-overlay"},on:{"update:open":function(t){e.open=t}}},[a("div",{directives:[{name:"outside",rawName:"v-outside:toggle",value:e.hide,expression:"hide",arg:"toggle"}]},[a("preview-iframe",{attrs:{adInfo:e.previewAdinfo}})],1)])],2),a("veui-dialog",{attrs:{title:"取消优化",open:e.cancelOptModalOpen},on:{"update:open":function(t){e.cancelOptModalOpen=t},ok:function(t){e.handleModalClose(!0,e.cancelOpti=!0)},cancel:e.handleModalClose}},[e._v("\n\t\t\t\t\t\t    确定要取消优化实验?\n\t\t\t\t\t\t")]),a("veui-dialog",{attrs:{title:"切换全流量",open:e.switchOptimizeAllModalOpen},on:{"update:open":function(t){e.switchOptimizeAllModalOpen=t},ok:function(t){e.handleModalClose(!0,e.cancelOpti=!1)},cancel:e.handleModalClose}},[e._v("\n\t\t\t\t\t\t    确定要将实验切换为全流量?\n\t\t\t\t\t\t")])],1)],2)],1),a("veui-tab",{attrs:{label:"已完成",to:"/superExp/done"}})],1)],1)},[],!1,null,"1c690b22",null));Ju.options.__file="SuperExpDoingView.vue";var Ku=Ju.exports,Zu=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{status:5,order:"desc",orderBy:"allSwitchTime",pageSize:10,pageNo:1}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"pageSizes",[5,10,20]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"slotData",[]),a}var a;return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getOptimalExpAdp=this.api.getOptimalExpAdp,this.getOptimalAdData=this.api.getOptimalAdData,this.modifySupExpAdp=this.api.modifySupExpAdp}},{key:"requestList",value:(a=Object(q.a)(regeneratorRuntime.mark(function e(){var t,a,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOptimalExpAdp(this.filter);case 2:return t=e.sent,e.next=5,this.getOptimalAdData(this.filter);case 5:a=e.sent,Promise.all([t,a]).then(function(e){var t=i.adaptData(e[0]);i.filter.pageNo=t.pageNo,i.filter.pageSize=t.pageSize,i.totalCount=t.totalCount,i.slotData=t.result,i.filter.order=t.order,i.filter.orderBy=t.orderBy;var a=i.adaptData(e[1]);i.filter.pageNo=a.pageNo,i.filter.pageSize=a.pageSize,i.totalCount=a.totalCount,i.tableData=a.result,i.filter.order=a.order,i.filter.orderBy=a.orderBy});case 7:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"adaptData",value:function(e){return{pageNo:this.filter.pageNo,pageSize:this.filter.pageSize,totalCount:e.totalCount,result:e.expList||e.results,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),Xu=Object(u.a)(G.a,Zu,{name:"super-exp-done-view",components:{"veui-tabs":Sa.a,"veui-tab":F.a,"veui-icon":y.a,"veui-button":S.a,"veui-checkbox":he.a,"veui-table":ut.a,"veui-field":ce.a,"veui-fieldset":ue.a,"veui-table-column":de.a,"veui-overlay":fe.a,"preview-iframe":qu,"veui-dialog":pe.a},directives:{outside:Ra.a},data:function(){return{open:!1,openTU:"aaa",previewAdinfo:{},expInfoArr:new Set,expInfoArrSize:0,optimizeDisabled:!0,resetTuid:null,resetAutoSwitch:null,resetOptimizeModalOpen:!1}},mounted:function(){},computed:{slotData:function(){return this.store.slotData}},methods:{previewClass:function(e){var t="preview-61108-pat21-ptdesc1",a=e.context&&JSON.parse(e.context).userDefine,i=e.cproParam;(-1<a.indexOf("cpro_template=template_inlay_all_mobile|")||-1<a.indexOf("template_inlay_all_mobile_lu_tabcloud")||-1<a.indexOf("text_default"))&&(t="template_inlay_all_mobile_text",-1<i.indexOf("cpro_at=text")?t="template_inlay_all_mobile_text":-1<i.indexOf("cpro_at=tuwen")?t="template_inlay_all_mobile_tuwen":-1<i.indexOf("cpro_at=image")?t="template_inlay_all_mobile_image":-1<i.indexOf("cpro_at=linkunit")&&-1<i.indexOf("cpro_layout_filter=rank,image")?t="template_inlay_all_mobile_rank":-1<i.indexOf("cpro_at=linkunit")&&-1<i.indexOf("cpro_layout_filter=tabcloud,image")&&(t="template_inlay_all_mobile_tabcloud"));var s=e.fillStyle&&JSON.parse(e.fillStyle).styleTemplateId;if(s)switch(s[0]){case 50039:t="preview-50039";break;case 50040:t="preview-50040";break;case 50041:t="preview-50041";break;case 50042:t="preview-50042";break;case 50043:t="preview-50043";break;case 50044:t="preview-50044";break;case 60101:t="preview-60101";break;case 60102:t="preview-60102";break;case 60103:t="preview-60103";break;case 60104:t="preview-60104";break;case 71001:t="template_inlay_all_mobile_lu_search_recom";break;case 61104:-1<a.indexOf("pat=8")&&(t="preview-61104-pat8");break;case 61107:-1<a.indexOf("pat=6")&&(t="preview-61107-pat6");break;case 61108:-1<a.indexOf("pat=15")&&(-1<a.indexOf("ptDesc=1")&&(-1<a.indexOf("ptp=1")&&(t="preview-61108-pat15-ptdesc1-ptp1"),-1<a.indexOf("ptp=0")&&(t="preview-61108-pat15-ptdesc1-ptp0")),-1<a.indexOf("ptDesc=2")&&(-1<a.indexOf("ptp=1")&&(t="preview-61108-pat15-ptdesc2-ptp1"),-1<a.indexOf("ptp=0")&&(t="preview-61108-pat15-ptdesc2-ptp0")),-1<a.indexOf("ptDesc=0")&&(-1<a.indexOf("ptp=1")&&(t="preview-61108-pat15-ptdesc0-ptp1"),-1<a.indexOf("ptp=0")&&(t="preview-61108-pat15-ptdesc0-ptp0"))),-1<a.indexOf("pat=21")&&(-1<a.indexOf("ptDesc=1")&&(t="preview-61108-pat21-ptdesc1"),-1<a.indexOf("ptDesc=2")&&(t="preview-61108-pat21-ptdesc2")),-1<a.indexOf("pat=30")&&(t="preview-61108-pat30");break;default:t="preview-61108-pat21-ptdesc1"}return t},getAdpTypeName:function(e){var t="图文广告-嵌入-普通样式",a=e.context&&JSON.parse(e.context).userDefine;e.cproParam,(-1<a.indexOf("cpro_template=template_inlay_all_mobile")||-1<a.indexOf("template_inlay_all_mobile_lu_tabcloud")||-1<a.indexOf("text_default"))&&(t="图文广告-嵌入-普通样式");var i=e.fillStyle&&JSON.parse(e.fillStyle).styleTemplateId;if(i)switch(i[0]){case 50039:t="信息流-图文信息流";break;case 50040:t="信息流-全图信息流";break;case 50041:t="信息流-图文信息流-标题居上";break;case 50042:t="信息流-图文信息流-无描述";break;case 50043:t="信息流-图文信息流-标题居下";break;case 50044:t="信息流-图文信息流-大图";break;case 60101:t="嵌入-横幅-原生多图";break;case 60102:t="嵌入-矩形-原生橱窗";break;case 60103:t="嵌入-横幅-原生图文";break;case 60104:t="嵌入-横幅-原生文字";break;case 71001:t="搜索推荐";break;case 61104:-1<a.indexOf("pat=8")&&(t="原生文字链");break;case 61107:-1<a.indexOf("pat=6")&&(t="原生缩略图");break;case 61108:-1<a.indexOf("pat=15")&&(-1<a.indexOf("ptDesc=1")&&(-1<a.indexOf("ptp=1")&&(t="右图左文-时间描述"),-1<a.indexOf("ptp=0")&&(t="左图右文-时间描述")),-1<a.indexOf("ptDesc=2")&&(-1<a.indexOf("ptp=1")&&(t="右图左文-无描述"),-1<a.indexOf("ptp=0")&&(t="左图右文-无描述")),-1<a.indexOf("ptDesc=0")&&(-1<a.indexOf("ptp=1")&&(t="右图左文-一般描述"),-1<a.indexOf("ptp=0")&&(t="左图右文-一般描述"))),-1<a.indexOf("pat=21")&&(-1<a.indexOf("ptDesc=1")&&(t="原生三图-时间描述"),-1<a.indexOf("ptDesc=2")&&(t="原生三图-无描述")),-1<a.indexOf("pat=30")&&(t="原生大图");break;default:t="原生缩略图"}return t},resetOptimize:function(e,t){this.resetTuid=e,this.resetAutoSwitch=t,this.resetOptimizeModalOpen=!0},previewCurrAd:function(e){this.open=!0,this.previewAdinfo=e},hide:function(){this.open=!1},gotoReport:function(e){var t=this.global.router.resolve({path:"/superExp/report/detail",query:{adPositionId:e}});window.open(t.href,"_blank")},handleModalClose:function(e){var t=this;this.resetOptimizeModalOpen=!1;var a=this.store.tableData.length,i=this.store.getRouteQuery({}).pageNo;e&&this.store.modifySupExpAdp({expInfo:[{tuid:this.resetTuid,autoSwitch:this.resetAutoSwitch}],fromStatus:5,toStatus:1}).then(function(e){t.store.filter.pageNo=t.getPageNo(a,i),t.store.submitSearch()})},getPageNo:function(e,t){var a=t||1;return 1!==a&&1===e&&(a-=1),a}}}),ed=(a("3b60"),Object(p.a)(Xu,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"super-exp-done-view"},[a("h3",{staticClass:"media-list-title"},[e._v("启优实验室")]),a("veui-tabs",{attrs:{active:e.$route.path}},[a("veui-tab",{attrs:{label:"待优化",to:"/superExp/todo"}}),a("veui-tab",{attrs:{label:"优化中",to:"/superExp/doing"}}),a("veui-tab",{attrs:{label:"已完成",to:"/superExp/done"}},[a("list-view",{staticClass:"super-exp-done-view"},[a("template",{staticClass:"edit-form-content",slot:"before"},[a("div",{staticClass:"superExp-tips-remind"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("启优实验室：您的 "),a("span",[e._v(e._s(e.store.totalCount||0))]),e._v(" 个代码位已完成优化。")])],1)]),a("template",{slot:"filterContent"},[a("veui-field",{staticClass:"filter-content",attrs:{field:"id"}},[a("div",{staticClass:"table-header"},[a("div",{staticClass:"header1"},[e._v("原样式")]),a("div",{staticClass:"header1"},[e._v("优化后")]),a("div",{staticClass:"header1"}),a("div",{staticClass:"header1"})])])],1),a("template",{slot:"table"},[a("veui-table",{staticClass:"super-exp-done-table",attrs:{data:e.slotData}},[a("veui-table-column",{attrs:{title:"",field:"id"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.userDefineAdp,s=t.expAdp,l=t.exptFullTime,r=t.autoSwitch,o=t.index;return[a("div",{staticClass:"exp-group"},[a("div",{staticClass:"exp-group-title"},[a("span",{staticClass:"exp-tu-name"},[e._v(e._s(i.name)+"（ID:"+e._s(i.tuid)+"）")]),a("span",[e._v("优化完成日期："+e._s(l))]),a("span",{staticClass:"exp-tu-op"},[a("span",{staticClass:"exp-tu-op-all",on:{click:function(t){e.resetOptimize(i.tuid,r)}}},[e._v("恢复初始设置")]),a("span",{staticClass:"exp-tu-goto-report",on:{click:function(t){e.gotoReport(i.tuid)}}},[e._v("查看报告")])])]),a("div",{staticClass:"exp-tu"},[a("div",{staticClass:"current-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(i)))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(i.container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(i.width)+":"+e._s(i.height)+"\n                                                    ")]):e._e(),1===JSON.parse(i.container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(i.width)+"*"+e._s(i.height)+"\n                                                    ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(t){e.previewCurrAd(i)}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),e._v("预览样式\n                                                    ")],1)]),a("div",{class:e.previewClass(i)})]),a("div",{staticClass:"calapse-arrow"},[a("veui-icon",{attrs:{name:"angle-right"}})],1),s&&0<s.length?a("div",{staticClass:"tuijian-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(s[0])))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(s[0].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[0].width)+":"+e._s(s[0].height)+"\n                                                    ")]):e._e(),1===JSON.parse(s[0].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[0].width)+"*"+e._s(s[0].height)+"\n                                                    ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(t){e.previewCurrAd(s[0])}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),e._v("预览样式")],1)]),a("div",{class:e.previewClass(s[0])}),a("div",{staticClass:"tuijian-desc"},[e._v("同行业媒体使用该样式,CPM\n                                                    "),a("em",{staticClass:"increase-cpm"},[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v(e._s(s[0].deltaRatio)+"%\n                                                    ")],1)])]):e._e(),s&&1<s.length?a("div",{staticClass:"tuijian-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(s[1])))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(s[1].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[1].width)+":"+e._s(s[1].height)+"\n                                                    ")]):e._e(),1===JSON.parse(s[1].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[1].width)+"*"+e._s(s[1].height)+"\n                                                    ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(t){e.previewCurrAd(s[1])}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),e._v("预览样式")],1)]),a("div",{class:e.previewClass(s[1])}),a("div",{staticClass:"tuijian-desc"},[e._v("同行业媒体使用了该样式，CPM\n                                                    "),a("em",{staticClass:"increase-cpm"},[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v(e._s(s[1].deltaRatio)+"%\n                                                    ")],1)])]):e._e(),s&&2<s.length?a("div",{staticClass:"tuijian-tu"},[a("h1",{staticClass:"slot-type-name"},[e._v(e._s(e.getAdpTypeName(s[2])))]),a("div",{staticClass:"slot-desc"},[2===JSON.parse(s[2].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[2].width)+":"+e._s(s[2].height)+"\n                                                    ")]):e._e(),1===JSON.parse(s[2].container).sizeType?a("div",{staticClass:"slot-size"},[e._v("\n                                                        "+e._s(s[2].width)+"*"+e._s(s[2].height)+"\n                                                    ")]):e._e(),a("div",{staticClass:"preview-button",on:{click:function(t){e.previewCurrAd(s[2])}}},[a("veui-icon",{ref:e.openTU,staticClass:"super_exp_preview_icon",attrs:{name:"super_exp_preview_icon"}}),e._v("预览样式")],1)]),a("div",{class:e.previewClass(s[2])}),a("div",{staticClass:"tuijian-desc"},[e._v("同行业媒体使用了该样式，CPM\n                                                    "),a("em",{staticClass:"increase-cpm"},[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v(e._s(s[2].deltaRatio)+"%\n                                                    ")],1)])]):e._e()])]),a("veui-table",{staticClass:"exp-report",attrs:{data:e.store.tableData[o],scroll:"360","key-field":"adPositionId"}},[a("veui-table-column",{attrs:{field:"expAdStyle",title:"样式"}}),a("veui-table-column",{attrs:{field:"avgView",title:"日均展现量"}}),a("veui-table-column",{attrs:{field:"avgClick",title:"日均点击量"}}),a("veui-table-column",{attrs:{field:"avgIncome",title:"日均预估收入"}}),a("veui-table-column",{attrs:{field:"clickRatio",title:"点击率"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t\t\t\t    "+e._s(t.clickRatio)+"%\n\t\t\t\t\t\t\t\t\t\t\t    "),0<t.clickFluxRatio-0?a("span",[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t        "+e._s(t.clickFluxRatio)+"%\n\t\t\t\t\t\t\t\t\t\t\t    ")],1):t.clickFluxRatio-0<0?a("span",[a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t        "+e._s(Math.abs(t.clickFluxRatio))+"%\n\t\t\t\t\t\t\t\t\t\t\t    ")],1):e._e()]}}])}),a("veui-table-column",{attrs:{field:"ecpm",title:"千次展现收益"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t\t\t\t    "+e._s(t.ecpm)+"\n\t\t\t\t\t\t\t\t\t\t\t    "),0<1*t.ecpmFluxRatio?a("span",[a("veui-icon",{staticClass:"increase-icon",attrs:{name:"increase"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t        "+e._s(t.ecpmFluxRatio)+"%\n\t\t\t\t\t\t\t\t\t\t\t    ")],1):1*t.ecpmFluxRatio<0?a("span",[a("veui-icon",{staticClass:"decrease-icon",attrs:{name:"decrease"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t        "+e._s(Math.abs(t.ecpmFluxRatio))+"%\n\t\t\t\t\t\t\t\t\t\t\t    ")],1):e._e()]}}])})],1)]}}])}),a("template",{slot:"no-data"},[e.store.initLoading?[e._t("tableDataLoading",[e._v("数据加载中")])]:[e._t("tableNoData",[e._v("没有数据")])]],2),a("veui-overlay",{attrs:{target:e.openTU,options:{attachment:"top left",targetAttachment:"top left",offset:"-40px 0px"},open:e.open,"overlay-class":"relative-overlay"},on:{"update:open":function(t){e.open=t}}},[a("div",{directives:[{name:"outside",rawName:"v-outside:toggle",value:e.hide,expression:"hide",arg:"toggle"}]},[a("preview-iframe",{attrs:{adInfo:e.previewAdinfo}})],1)])],2),a("veui-dialog",{attrs:{title:"恢复初始设置",open:e.resetOptimizeModalOpen},on:{"update:open":function(t){e.resetOptimizeModalOpen=t},ok:function(t){e.handleModalClose(!0)},cancel:e.handleModalClose}},[e._v("\n\t\t\t\t\t\t    确定取消全流量并恢复初始设置?\n\t\t\t\t\t\t")])],1)],2)],1)],1)],1)},[],!1,null,"3e852eee",null));ed.options.__file="SuperExpDoneView.vue";var td=ed.exports,ad=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",{pageNo:1,pageSize:30,domain:"",orderBy:"createTime",order:"asc",name:""}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"rightAutoAds","editable"===a.global.user.authMap["mssp.auto.ads"]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"domainsLists",[]),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getAutoSlotList,this.modifyAutoInfo=this.api.modifyAutoInfo,this.websitesList=this.api.websitesList,this.modifyStatus=this.api.modifyStatus,this.websitesList().then(function(t){var a=[];t.map(function(e){var t={};t.label=e.domain,t.value=e.id,a.push(t)}),e.domainsLists=[{value:"",label:"全部网站"}].concat(a)})}},{key:"adaptData",value:function(e){return{pageNo:e.pageNo,pageSize:e.pageSize,totalCount:e.total,result:e.data,order:this.filter.order}}}]),t}(J.a),id=Object(u.a)(G.a,ad,{name:"autoAdList",components:{"veui-fieldset":ue.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-searchbox":Pe.a,"veui-button":S.a,"veui-select":N.a,"veui-icon":y.a,"veui-overlay":fe.a,"veui-dropdown":wt.a,"veui-link":Ji.a,"veui-textarea":$e.a,"veui-tooltip":I.a,"veui-checkbox":he.a,"veui-input":ge.a},data:function(){return{name:""}},computed:{},methods:{formatTime:function(e){return w()(e).format("YYYY-MM-DD")},goToEdit:function(e){this.global.router.push({path:"/union/autoAd/".concat(e,"/edit")})},goToCreate:function(){this.global.router.push({path:"/union/autoAd/create"})},search:function(){this.store.filter.name=this.name,this.store.submitSearch()},gotoReport:function(e){var t=this.global.router.resolve({path:"/report/bidding",query:{adPositionId:e,dimensions:"adPositionName",filterFields:"rtbTypeId,sellTypeId,getAdType,adPositionId",filterValues:"0|1|1|".concat(e)}});window.open(t.href,"_blank")},getSlotType:function(e){var t=[];return e.includes(1)&&t.push("嵌入"),e.includes(2)&&t.push("信息流"),e.includes(3)&&t.push("文章内"),e.includes(4)&&t.push("悬浮"),t.join(",")},setItemStatus:function(e,t){var a=this;this.store.modifyStatus({autoAdId:e.autoAdId,isAuto:t}).then(function(e){a.store.submitSearch()})},selectDomain:function(e){this.store.filter.domain=e,this.store.submitSearch()}}}),sd=(a("d18e"),Object(p.a)(id,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("list-view",{staticClass:"autoad-slot-list-view"},[[i("h3",{staticClass:"autoad-list-title"},[e._v("智能广告位")]),i("veui-icon",{ref:"time-ratio",staticClass:"title-notice-icon",attrs:{name:"question-circle-o"}}),i("veui-tooltip",{attrs:{position:"top-start",target:"time-ratio",trigger:"hover","overlay-class":"notice-tooltip"}},[e._v("\n                智能广告通过机器学习动态分析您的网站页面，在兼顾用户体验的前提下，挖掘页面变现潜力、提高网站主收入。\n        ")])],i("template",{slot:"filterContent"},[i("veui-field",[i("veui-button",{attrs:{ui:"primary",disabled:!e.store.rightAutoAds},on:{click:e.goToCreate}},[e._v("新建智能广告位")]),i("veui-select",{staticClass:"domain-search",attrs:{options:e.store.domainsLists,placeholder:"全部网站"},on:{change:e.selectDomain}})],1),i("veui-field",{staticClass:"message-search",attrs:{field:"key"}},[i("veui-searchbox",{attrs:{placeholder:"搜索智能广告位名称"},on:{search:e.search},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),i("template",{slot:"tableColumns"},[i("veui-table-column",{attrs:{field:"name",width:"152",title:"广告位名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{attrs:{title:t.name}},[e._v(e._s(t.name))])]}}])}),i("veui-table-column",{attrs:{field:"tuids",width:"150",title:"代码位ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.tuids.split(",")&&1==t.tuids.split(",").length?i("div",[i("div",[e._v(e._s(t.tuids))])]):e._e(),t.tuids.split(",")&&1<t.tuids.split(",").length?i("div",[i("div",{ref:"tuids"+t.id,staticClass:"tuids"},[i("veui-icon",{attrs:{name:"plus-circle-o"}}),i("span",[e._v(e._s(t.tuids.split(",").length)+"个tuid")])],1)]):e._e(),!t.tuids||t.tuids.split(",")&&0===t.tuids.split(",").length?i("div",[e._v("\n                    --\n                ")]):e._e(),t.tuids.split(",")&&1<=t.tuids.split(",").length?i("veui-tooltip",{attrs:{position:"bottom-start",target:"tuids"+t.id,trigger:"click","overlay-class":"filter-hover-overlay"}},e._l(t.tuids.split(","),function(t,a){return i("div",{key:a},[e._v("\n                        "+e._s(t)+"\n                    ")])})):e._e()]}}])}),i("veui-table-column",{attrs:{field:"slotType",width:"150",title:"所选样式"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(e.getSlotType(t.slotType)))])]}}])}),i("veui-table-column",{attrs:{field:"groupPath",width:"250",title:"URL分组"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"group-path-cell"},[t.groupPath.split(",")&&1==t.groupPath.split(",").length?i("div",{attrs:{title:t.groupPath}},[e._v(e._s(t.groupPath))]):e._e()]),t.groupPath.split(",")&&1<t.groupPath.split(",").length?i("div",[i("div",{ref:"groupPath"+t.id,staticClass:"groupPath"},[i("veui-icon",{staticClass:"plus-circle-o",attrs:{name:"plus-circle-o"}}),i("span",[e._v(e._s(t.groupPath.split(",").length)+"个页面规则")])],1)]):e._e(),!t.groupPath||t.groupPath.split(",")&&0===t.groupPath.split(",").length?i("div",[e._v("\n                    --\n                ")]):e._e(),t.groupPath.split(",")&&1<=t.groupPath.split(",").length?i("veui-tooltip",{attrs:{position:"bottom-start",target:"groupPath"+t.id,trigger:"click","overlay-class":"filter-hover-overlay"}},e._l(t.groupPath.split(","),function(t,a){return i("div",{key:a},[e._v("\n                        "+e._s(t)+"\n                    ")])})):e._e()]}}])}),i("veui-table-column",{attrs:{field:"domainName",title:"所属网站",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"group-path-cell"},[e._v(e._s(t.domainName))])]}}])}),i("veui-table-column",{attrs:{field:"cname",title:"计费名",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"group-path-cell"},[e._v(e._s(t.cname))])]}}])}),i("veui-table-column",{attrs:{field:"isAuto",width:"100",title:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.item.isAuto?i("span",{on:{click:function(a){e.setItemStatus(t.item,2)}}},[e._v("\n                    已启用\n                    "),i("veui-icon",{staticClass:"column-img start-icon",attrs:{name:"pause"}})],1):2==t.item.isAuto?i("span",{staticClass:"paused-status",on:{click:function(a){e.setItemStatus(t.item,1)}}},[e._v("\n                    已暂停\n                    "),i("img",{staticClass:"start-icon",attrs:{src:a("7694")}})]):i("span",{staticClass:"null-status"},[e._v("\n                    配置中\n                ")])]}}])}),i("veui-table-column",{attrs:{field:"op",title:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"op"},[i("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.goToEdit(t.autoAdId)}}},[e._v("\n                        修改\n                    ")]),t.tuids&&t.tuids.split(",")&&1==t.tuids.split(",").length?i("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.gotoReport(t.tuids)}}},[e._v("\n                        查看报告\n                    ")]):e._e(),t.tuids&&t.tuids.split(",")&&1<t.tuids.split(",").length?i("span",{ref:"tuidsreport"+t.id,staticClass:"op-button",attrs:{ui:"link"}},[e._v("\n                        查看报告\n                    ")]):e._e(),t.tuids.split(",")&&1<t.tuids.split(",").length?i("veui-tooltip",{attrs:{position:"bottom-start",target:"tuidsreport"+t.id,trigger:"hover","overlay-class":"filter-hover-overlay"}},e._l(t.tuids.split(","),function(t,a){return i("div",{key:a},[i("a",{staticClass:"tu-report",on:{click:function(a){e.gotoReport(t)}}},[e._v(e._s(t)+"数据报告")])])})):e._e()],1)]}}])})],1)],2)},[],!1,null,"03ebe9ab",null));sd.options.__file="AutoAdListView.vue";var ld=sd.exports,rd=(a("7514"),a("1c4c"),function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title","新建智能广告位"),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{name:"智能广告_",domain:null,domainName:null,groupPath:[],groupPathIds:[],isAuto:!1,slotType:new Set,isInnovate:!0,isOptimize:!0,cid:"",ruleId:null}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"domainsLists",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"autoAdId",null),Object(O.a)(Object(_.a)(Object(_.a)(a)),"rules",{name:[{name:"required",value:!0},{name:"pattern",value:/^(?!(\s+$))/,triggers:"input",message:"名称不能为全空格"}],domain:[{name:"required",value:!0}],cid:[{name:"required",value:!0}],slotType:[{name:"required",value:!0}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formSetting",{validators:[{fields:["slotType"],validate:function(e){return 0!==e.size||{slotType:"请至少选择一种广告样式"}}},{fields:["domain"],validate:function(e){return void 0!==e||{domain:"请至少选择一个网站"}}},{fields:["cid"],validate:function(e){return void 0!==e||{cid:"请至少选择一个计费名"}}}]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"successToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=this;Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.websitesList=this.api.websitesList,this.getPathList=this.api.getPathList,this.saveGroupPath=this.api.saveGroupPath,this.updateAutoAdSlot=this.api.modifyAutoInfo,this.createAutoAdSlot=this.api.saveAutoInfo,this.autoAdposDetail=this.api.autoAdposDetail,this.getWebSlotCnList=this.api.getWebSlotCnList,this.getFilter=this.api.getFilter,this.websitesList().then(function(t){var a=[];t.map(function(e){var t={};t.label=e.domain,t.value=e.id,a.push(t)}),e.domainsLists=a}),"edit"===this.pageType&&(this.title="修改智能广告位")}},{key:"submit",value:function(){var e={};return e.name=this.formData.name,e.domain=this.formData.domain,e.cid=this.formData.cid,e.domainName=this.formData.domainName,e.devType=2,e.groupPath=this.formData.groupPath,e.slotType=Array.from(this.formData.slotType),e.isInnovate=!0===this.formData.isInnovate?1:0,e.isOptimize=!0===this.formData.isOptimize?1:0,e.ruleId=this.formData.ruleId,"create"===this.pageType&&(e.isAuto=1),"edit"===this.pageType?(e.autoAdId=this.autoAdId,this.updateAutoAdSlot(e)):this.createAutoAdSlot(e)}},{key:"invalid",value:function(e){}},{key:"success",value:function(e){}},{key:"fail",value:function(e){}}]),t}(ve.a)),od=a("6d82");Xt.a.addRule("saveGroupPath",{validate:function(e,t){return new RegExp(t).test(e)},message:function(e,t){return"请输入符合标准的规则地址"},priority:100});var nd=Object(u.a)(ye.a,rd,{name:"AutoAdForm",components:{"veui-field":ce.a,"veui-button":S.a,"veui-input":ge.a,"veui-select":N.a,"veui-form":Kt.a,"veui-checkbox":he.a,"veui-fieldset":ue.a,"veui-tooltip":I.a,"veui-icon":y.a,"veui-dialog":pe.a,"veui-transfer":Se.a,"veui-alert":od.a},data:function(){return{addRulesPop:!1,alertPop:!1,groupsDatasource:[],slotType1:!1,slotType2:!1,slotType3:!1,slotType4:!1,tabs:[{value:1,label:"嵌入"},{value:2,label:"信息流"},{value:3,label:"文章内"},{value:4,label:"悬浮"}],layout:1,previewImage:"autoad_inlay",httpUrlRule:[{triggers:"blur",name:"saveGroupPath",value:/^(?:https?):\/\/.*\..+$/}],subData:{addRule:""},advanceConfig:!1,cnList:[],ruleIdList:[]}},created:function(){var e=this;this.isEdit="edit"===this.store.pageType,this.store.autoAdId=this.$route.params.tuId,this.isEdit&&this.store.autoAdposDetail({autoAdId:this.store.autoAdId}).then(function(t){e.store.formData.name=t.name,e.store.formData.domain=t.domain,e.store.formData.cid=t.cid,e.store.formData.domainName=t.domainName,e.store.formData.groupPath=t.groupPath.split(","),e.store.formData.groupPathIds=t.groupPathIds,e.store.formData.isInnovate=!!t.isInnovate,e.store.formData.isOptimize=!!t.isOptimize,e.store.formData.ruleId=t.ruleId,t.groupPath&&(e.advanceConfig=!0),e.store.getPathList({domain:e.store.formData.domain}).then(function(t){var a=t.data,i=[];a.map(function(e){var t={};t.value=e.id,t.label=e.value,i.push(t)}),e.groupsDatasource=i}),e.getSelectedGroup(e.store.formData.groupPath,e.store.formData.groupPathIds),e.renderSlotType(t.slotType)}),this.getCnList(),this.getFilter()},mounted:function(){xe.a.hideHeaderDom()},computed:{domainsLists:function(){return this.store.domainsLists},slotType:function(){return!0===this.slotType1&&this.store.formData.slotType.add(1),!1===this.slotType1&&this.store.formData.slotType.delete(1),!0===this.slotType2&&this.store.formData.slotType.add(2),!1===this.slotType2&&this.store.formData.slotType.delete(2),!0===this.slotType3&&this.store.formData.slotType.add(3),!1===this.slotType3&&this.store.formData.slotType.delete(3),!0===this.slotType4&&this.store.formData.slotType.add(4),!1===this.slotType4&&this.store.formData.slotType.delete(4),this.store.formData.slotType}},methods:{goBack:function(){this.global.router.push({path:"/union/autoAd"})},addRules:function(){this.addRulesPop=!0},selectDomain:function(){var e=this;this.domainsLists.find(function(t){t.value===e.store.formData.domain&&(e.store.formData.domainName=t.label)}),this.store.getPathList({domain:this.store.formData.domain}).then(function(t){var a=t.data,i=[];a&&a.map(function(e){var t={};t.value=e.id,t.label=e.value,i.push(t)}),e.groupsDatasource=i})},reqAddRules:function(){var e=this;if(new RegExp(/^(?:https?):\/\/.*\..+$/).test(this.subData.saveGroupPath)){var t=new Array;t=st()(this.groupsDatasource),this.store.saveGroupPath({value:this.subData.saveGroupPath,type:2,domain:this.store.formData.domain,status:1}).then(function(a){a.id?(e.store.successToast&&e.showToast(e.store.successToast,{type:"success"}),t.push({value:a.id,label:a.value}),e.groupsDatasource=t,e.addRulesPop=!1):e.store.successToast&&e.showToast(e.store.successToast,{type:"error"})}).catch(function(t){var a=t.fields||t.field;a&&(Et()(a,function(t,a){var i=Yt()(e,"$refs.form.fieldsMap['".concat(a,"']"));i&&i.validities.unshift({valid:!1,message:t,fields:"backend:field"})}),e.handleErrorScroll(Object.keys(a))),e.$emit("submitfail",field)})}},handleInvalid:function(e){this.$emit("invalid",e)},reqAddRulesCancel:function(){this.addRulesPop=!1},renderSlotType:function(e){this.store.formData.slotType=new Set(e),e.includes(1)&&(this.slotType1=!0),e.includes(2)&&(this.slotType2=!0),e.includes(3)&&(this.slotType3=!0),e.includes(4)&&(this.slotType4=!0)},getSelectedGroup:function(e,t){for(var a=[],i=e.length,s=0;s<i;s++)a.push(t[s]);this.store.formData.groupPath=a},changePreview:function(e){1===e&&(this.previewImage="autoad_inlay"),2===e&&(this.previewImage="autoad_infoflow"),3===e&&(this.previewImage="autoad_article"),4===e&&(this.previewImage="autoad_float"),this.layout=e},getLabelLength:function(e){return!!(e&&35<e.length)},showAdvanceConfig:function(){this.store.formData.domain?this.advanceConfig=!this.advanceConfig:this.alertPop=!0},getCnList:function(){var e=this;this.store.getWebSlotCnList().then(function(t){e.store.formData.cid=t.cnList.filter(function(e){return e.isfirst})[0].cid,e.cnList=t.cnList.map(function(e){return{label:e.cname,value:e.cid}})})},getFilter:function(){var e=this;this.store.getFilter({appId:1}).then(function(t){var a=[];a.push({label:"不限制",value:""});var i=!0,s=!1,l=void 0;try{for(var r,o=t.results[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var n=r.value;n.name&&n.id&&a.push({label:n.name,value:n.id})}}catch(t){s=!0,l=t}finally{try{i||null==o.return||o.return()}finally{if(s)throw l}}e.ruleIdList=a})}},beforeDestroy:function(){xe.a.addHeaderDom()}}),cd=(a("0de6"),Object(p.a)(nd,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form-view",{staticClass:"edit-form-common slot-form autoad-form",on:{submitsuccess:e.goBack}},[a("template",{slot:"before"},[a("div",{staticClass:"close-icon",on:{click:e.goBack}},[a("veui-icon",{staticClass:"close",attrs:{name:"cross"}})],1)]),a("template",{slot:"field"},[a("article",{staticClass:"slot-form-left"},[a("section",[a("veui-alert",{staticClass:"warining-alert",attrs:{type:"warning",open:e.alertPop,closable:!0},on:{"update:open":function(t){e.alertPop=t}}},[e._v("\n                    请先选择网站\n                ")]),a("veui-field",{attrs:{name:"name",field:"name",label:"智能广告位名称：",tip:"最多可输入40个字符",rules:e.store.rules.name}},[a("veui-input",{staticClass:"input300",attrs:{placeholder:"为你的智能代码位起个名字吧～",maxLength:"40"},model:{value:e.store.formData.name,callback:function(t){e.$set(e.store.formData,"name",t)},expression:"store.formData.name"}})],1),a("veui-field",{attrs:{label:"所属网站：",field:"domain",name:"domain",rules:e.store.rules.domain}},[a("veui-select",{staticClass:"input300",attrs:{disabled:!0===this.isEdit,options:e.domainsLists,placeholder:"请选择网站","overlay-class":"web-slot-cn"},on:{change:e.selectDomain},model:{value:e.store.formData.domain,callback:function(t){e.$set(e.store.formData,"domain",t)},expression:"store.formData.domain"}}),a("span",{staticClass:"add-advance-config",on:{click:e.showAdvanceConfig}},[e._v("高级设置")])],1),1<e.cnList.length?a("veui-field",{attrs:{label:"计费名：",field:"cid",name:"cid",rules:e.store.rules.cid}},[a("veui-select",{staticClass:"input300",attrs:{disabled:!0===this.isEdit,"overlay-class":"web-slot-cn",options:e.cnList},model:{value:e.store.formData.cid,callback:function(t){e.$set(e.store.formData,"cid",t)},expression:"store.formData.cid"}})],1):e._e(),1<e.ruleIdList.length?a("veui-field",{attrs:{label:"过滤设置",field:"ruleId",name:"ruleId",tip:"如需编辑清移步至代码位列表"}},[a("veui-select",{staticClass:"input300",attrs:{disabled:!0===this.isEdit,"overlay-class":"web-slot-cn",options:e.ruleIdList},model:{value:e.store.formData.ruleId,callback:function(t){e.$set(e.store.formData,"ruleId",t)},expression:"store.formData.ruleId"}})],1):e._e(),a("veui-field",{staticClass:"auto-ad-trasnfer",attrs:{field:"modifyAutoInfo",name:"modifyAutoInfo"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceConfig,expression:"advanceConfig"}],staticClass:"card-right"},[a("veui-transfer",{attrs:{datasource:e.groupsDatasource},scopedSlots:e._u([{key:"candidate-item-label",fn:function(t){return[a("span",{ref:"span-label-left"},[e._v(e._s(t.item.label))]),a("veui-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.getLabelLength(t.item.label),expression:"getLabelLength(props.item.label)"}],attrs:{position:"bottom-start",target:"span-label-left",trigger:"hover","overlay-class":"filter-hover-overlay"}},[a("div",[e._v(e._s(t.item.label))])])]}},{key:"selected-item-label",fn:function(t){return[a("span",{ref:"span-label-right"},[e._v(e._s(t.item.label))]),a("veui-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.getLabelLength(t.item.label),expression:"getLabelLength(props.item.label)"}],attrs:{position:"bottom-start",target:"span-label-right",trigger:"hover","overlay-class":"filter-hover-overlay"}},[a("div",[e._v(e._s(t.item.label))])])]}}]),model:{value:e.store.formData.groupPath,callback:function(t){e.$set(e.store.formData,"groupPath",t)},expression:"store.formData.groupPath"}},[a("template",{slot:"candidate-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                    URL分组设置列表\n                                    "),a("span",{staticClass:"number"},[e._v(e._s(e.groupsDatasource.length))])])]),a("template",{slot:"selected-title"},[a("span",{staticClass:"transfer-head"},[e._v("\n                                    已选列表\n                                    "),a("span",{staticClass:"number"},[e._v(e._s(e.store.formData.groupPath.length+"/"+e.groupsDatasource.length))])])])],2),a("veui-button",{staticClass:"add-new-group",attrs:{ui:"primary"},on:{click:e.addRules}},[e._v("添加URL分组设置\n                        ")])],1)]),a("veui-field",{attrs:{label:"选择广告样式：",field:"slotType",name:"slotType",rules:e.store.rules.slotType}},[a("div",{staticClass:"slot-type-group",model:{value:e.slotType,callback:function(t){e.slotType=t},expression:"slotType"}},[a("div",{staticClass:"slot-type"},[a("veui-checkbox",{staticClass:"check-box",model:{value:e.slotType1,callback:function(t){e.slotType1=t},expression:"slotType1"}},[a("div",{staticClass:"slot-type-title"},[e._v("嵌入广告")]),a("div",{staticClass:"slot-type-desc"},[e._v("嵌入广告是最常见的广告格式，可灵活投放于各种版位。百度会根据您的页面为您选择合适广告尺寸和展示位置和样式，并在认为能取得优秀展示效果时展示在您的广告。")])])],1),a("div",{staticClass:"clapse"}),a("div",{staticClass:"slot-type"},[a("veui-checkbox",{staticClass:"check-box",model:{value:e.slotType2,callback:function(t){e.slotType2=t},expression:"slotType2"}},[a("div",{staticClass:"slot-type-title"},[e._v("信息流广告")]),a("div",{staticClass:"slot-type-desc"},[e._v("信息流广告属于原生广告，旨在与网站上的内容自然融合。改善用户体验并最大限度的提升页面创收能力。此类广告通常放置在首页信息流或者详情页相关推荐信息流中。")])])],1),a("div",{staticClass:"hl"}),a("div",{staticClass:"slot-type"},[a("veui-checkbox",{staticClass:"check-box",model:{value:e.slotType3,callback:function(t){e.slotType3=t},expression:"slotType3"}},[a("div",{staticClass:"slot-type-title"},[e._v("文章内广告")]),a("div",{staticClass:"slot-type-desc"},[e._v("在网页的段落之间插入的原生广告，该广告格式使用高品质的广告客户素材资源，能完美融入文章段落之间，并为您的读者带来更出色的整体阅读体验。")])])],1),a("div",{staticClass:"clapse"}),a("div",{staticClass:"slot-type"},[a("veui-checkbox",{staticClass:"check-box",model:{value:e.slotType4,callback:function(t){e.slotType4=t},expression:"slotType4"}},[a("div",{staticClass:"slot-type-title"},[e._v("悬浮广告")]),a("div",{staticClass:"slot-type-desc"},[e._v("悬浮是一种固定显示在用户屏幕边缘的移动广告，有顶部悬浮和底部悬浮两种格式，用户观看过程中可选择收起。")])])],1),a("div",{staticClass:"allow-innovation-checkbox"},[a("veui-checkbox",{attrs:{ui:"small"},model:{value:e.store.formData.isInnovate,callback:function(t){e.$set(e.store.formData,"isInnovate",t)},expression:"store.formData.isInnovate"}},[a("span",{staticClass:"isAuto-text"},[e._v("允许创新样式")]),a("veui-icon",{ref:"tag-tip",staticClass:"filter-radio-icon",attrs:{name:"question-circle-o"}})],1)],1),a("veui-tooltip",{attrs:{position:"bottom-start",target:"tag-tip",trigger:"hover","overlay-class":"notice-tooltip"}},[e._v("\n                            自动获取智能代码位新样式。\n                        ")])],1)])],1),e.addRulesPop?a("veui-dialog",{attrs:{open:e.addRulesPop,title:"添加规则"},on:{"update:open":function(t){e.addRulesPop=t}}},[a("veui-form",{ref:"form",attrs:{data:e.subData},on:{submit:e.reqAddRules,invalid:e.handleInvalid}},[a("veui-field",{attrs:{label:"",field:"saveGroupPath",name:"saveGroupPath",rules:e.httpUrlRule,tip:"一次只能添加1个规则，最多可添加10个"}},[a("veui-input",{staticClass:"add-rule-input",attrs:{placeholder:"http://www.b.com/a/1.html 或 http://www.b.com/a/"},model:{value:e.subData.saveGroupPath,callback:function(t){e.$set(e.subData,"saveGroupPath",t)},expression:"subData.saveGroupPath"}})],1),a("div",{staticClass:"http-url-operation"},[a("veui-button",{staticClass:"http-url-operation-button",attrs:{ui:"primary",type:"submit"}},[e._v("确认")]),a("veui-button",{staticClass:"http-url-operation-button",on:{click:e.reqAddRulesCancel}},[e._v("取消")])],1)],1),a("template",{slot:"foot"},[a("div")])],2):e._e()],1)]),a("div",{staticClass:"slot-form-right"},[a("div",{staticClass:"auto-ad-preview"},e._l(this.tabs,function(t){return a("veui-button",{key:t.value,class:{active:e.layout===t.value},on:{click:function(a){e.changePreview(t.value)}}},[e._v("\n                "+e._s(t.label)+"\n            ")])})),a("div",{class:e.previewImage})]),a("template",{staticClass:"slotForm-submit",slot:"operation"},[a("veui-button",{attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{on:{click:e.goBack}},[e._v("取消")])],1)],2)},[],!1,null,"ea808918",null));cd.options.__file="AutoAdFormView.vue";var ud=cd.exports,dd=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"showWebsite",!1),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getMediaSiteList()}},{key:"getMediaSiteList",value:function(){var e=this;Vt.a.get("/v2/client/medium/website/list",{params:{isHao123:1,pageNo:1,pageSize:30}}).then(function(t){e.showWebsite=0===t.data.status&&t.data.data.result.length})}}]),t}(C.a),fd=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"filter",Object(v.a)({},Q()(a.filter,"timeRange"),{orderBy:"createTime"})),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getMediaSiteList}},{key:"prepareParams",value:function(e){return e.isHao123=1,e}},{key:"adaptData",value:function(e){return{pageNo:e.pageNo,pageSize:e.pageSize,totalCount:e.totalCount,result:e.result,order:this.filter.order,orderBy:this.filter.orderBy}}}]),t}(J.a),pd=Object(u.a)(G.a,fd,{name:"slotList",components:{"veui-tabs":Sa.a,"veui-tab":F.a,"veui-fieldset":ue.a,"veui-field":ce.a,"veui-table-column":de.a,"veui-button":S.a,"veui-overlay":fe.a,"veui-tooltip":I.a,"veui-icon":y.a},data:function(){return{WebQuality:Ki,Business:Zi,SiteStatus:Xi}},methods:{format:function(e){return w()(e).format("YYYY-MM-DD")}}}),hd=(a("8cd2"),Object(p.a)(pd,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"website-list-view"},[a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"domain",width:"150",title:"网站域名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{ref:"domain"+t.domain,staticClass:"filter-cell"},[e._v(e._s(t.domain))]),a("div",{staticClass:"tableID filter-cell"},[e._v("ID:"+e._s(t.id))]),t.domain&&15<t.domain.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"domain"+t.domain,"overlay-class":"media-hover-overlay"}},[a("span",[e._v(e._s(t.domain))])]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"name",width:"150",title:"网站名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{ref:"name"+t.name,staticClass:"filter-cell"},[e._v(e._s(t.name))]),t.name&&10<t.name.length?a("veui-tooltip",{attrs:{position:"bottom-start",trigger:"hover",target:"name"+t.name,"overlay-class":"media-hover-overlay"}},[a("span",[e._v(e._s(t.name))])]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"bizStatus",width:"120",title:"已开通业务"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.bizStatus&&0<t.bizStatus.length?a("div",{staticClass:"business"},e._l(t.bizStatus,function(t,i){return a("span",{key:i},[e._v("\n                        "+e._s(e.Business.getTextFromAlias(t.toUpperCase()))+"   \n                    ")])})):e._e(),!t.bizStatus||t.bizStatus&&0===t.bizStatus.length?a("div",{staticClass:"business"},[e._v("\n                    --\n                ")]):e._e()]}}])}),a("veui-table-column",{attrs:{field:"createTime",width:"150",title:"创建日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"url"},[e._v(e._s(e.format(t.createTime)))])]}}])}),a("veui-table-column",{attrs:{field:"state",width:"100",title:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"url"},[a("span",{class:{orange:1===t.state,red:2===t.state}},[e._v("\n                        "+e._s(e.SiteStatus.getTextFromValue(t.state))+"\n                    ")]),1===t.state||2===t.state?a("veui-icon",{ref:"state-tip"+t.id,staticClass:"title-notice-icon",attrs:{name:"question-circle-o"}}):e._e(),1===t.state?a("veui-tooltip",{attrs:{position:"bottom-end",target:"state-tip"+t.id,trigger:"hover","overlay-class":"media-state-tooltip"}},[e._v("\n                        审核需要1-2个工作日的时间，请耐心等待。\n                    ")]):e._e(),2===t.state?a("veui-tooltip",{attrs:{position:"bottom-end",target:"state-tip"+t.id,trigger:"hover","overlay-class":"media-state-tooltip"}},[a("span",{staticClass:"table-question-mark-detail"},[e._v("\n                            您未通过的原因为："+e._s(t.refuseReason)+"。"),a("br"),e._v("如果后续需要重新申请，请点击“修改”并重新保存即可。\n                        ")])]):e._e()],1)]}}])})],1)],2)},[],!1,null,"54bd58ce",null));hd.options.__file="WebsiteView.vue";var md=hd.exports,vd=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(o))),Object(O.a)(Object(_.a)(Object(_.a)(a)),"title",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"failToast",""),Object(O.a)(Object(_.a)(Object(_.a)(a)),"formData",{name:"",description:"",rootType:null,downloadLink:"",userLevel:"",downloadLevel:"",remark:"",promotionType:1,bizType:[]}),Object(O.a)(Object(_.a)(Object(_.a)(a)),"showModify",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"isCreate",!1),Object(O.a)(Object(_.a)(Object(_.a)(a)),"typeList",[]),Object(O.a)(Object(_.a)(Object(_.a)(a)),"rules",{name:[{name:"required",value:!0,triggers:"change, blur, input",priority:99},{triggers:"change, blur, input",name:"maxLength",value:40,validate:function(e,t){return e.length<t},message:function(e,t){return"字符长度不能多于".concat(e,"，当前长度").concat(t.length)},priority:100}],bizType:[{name:"required",value:!0,triggers:"change",message:"请选择"}]}),a}return Object(n.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){Object(o.a)(Object(r.a)(t.prototype),"init",this).call(this),this.getSiteType=this.api.getSiteType,this.createHao123Software=this.api.createHao123Software,this.modifyHao123Software=this.api.modifyHao123Software,this.getSoftInfo(),this.getSiteTypeList()}},{key:"getSoftInfo",value:function(){var e=this;Vt.a.get("/v2/client/medium/software/gethao123").then(function(t){0===t.data.status?(Object.assign(e.formData,t.data.data),e.showModify=!1,e.isCreate=!1):1===t.data.status&&(e.showModify=!0,e.isCreate=!0)})}},{key:"getSiteTypeList",value:function(){var e=this;this.getSiteType({type:2}).then(function(t){e.typeList=t.map(function(e){return{label:e.name,value:e.id}})})}},{key:"submit",value:function(){var e={name:this.formData.name,description:this.formData.description,downloadLink:this.formData.downloadLink,rootType:this.formData.rootType,userLevel:this.formData.userLevel,downloadLevel:this.formData.downloadLevel,promotionType:this.formData.promotionType,bizType:this.formData.bizType,remark:this.formData.remark};return this.isCreate?this.createHao123Software(e):(e.id=this.formData.id,this.modifyHao123Software(e))}}]),t}(ve.a),bd=Object(u.a)(ye.a,vd,{name:"media-soft-form",components:{"veui-field":ce.a,"veui-input":ge.a,"veui-tabs":Sa.a,"veui-tab":F.a,"veui-button":S.a,"veui-radio-group":Ce.a,"veui-icon":y.a,"veui-tooltip":I.a,"veui-select":N.a,"veui-textarea":$e.a,"veui-option-group":ls.a,"veui-checkbox-group":Qt.a,"veui-option":jt.a},data:function(){return{PVLevel:es,softwareTypeItems:[{label:"PC",value:1}],bizTypeItems:[{label:"设hao123为首页",value:1},{label:"第三方浏览器合作",value:5},{label:"桌面快捷方式",value:3}]}},methods:{modifySoftware:function(){this.store.showModify=!0},cancel:function(){this.store.showModify=!1},handleSuccess:function(){this.store.getSoftInfo()}}}),yd=(a("7622"),Object(p.a)(bd,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"media-soft"},[e.store.showModify?e._e():a("form-view",{staticClass:"edit-form-common media-soft-form"},[a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title soft-info-card"},[1===e.store.formData.state?a("div",{staticClass:"soft-tips-remind"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("您已经修改了该信息，修改请求正在审核中，审核结束后才能再次修改。")])],1):e._e(),2===e.store.formData.state?a("div",{staticClass:"soft-tips-warning"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("审核未通过，原因是"+e._s(e.store.formData.refuseReason))])],1):e._e(),a("veui-field",{attrs:{label:"软件名称:",name:"name",field:"name"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.name))]),1!==e.store.formData.state?a("div",{staticClass:"blue soft-modify",on:{click:e.modifySoftware}},[e._v("修改")]):e._e()]),a("veui-field",{attrs:{label:"软件描述:",name:"description",field:"description"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.description))])]),a("veui-field",{attrs:{label:"软件类型:",name:"rootType",field:"rootType"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.rootTypeDesc))])]),a("veui-field",{attrs:{label:"下载地址:",name:"downloadLink",field:"downloadLink"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.downloadLink))])]),a("veui-field",{attrs:{label:"软件使用人数:",name:"userLevel",field:"userLevel"}},[a("div",{staticClass:"card-right soft-info"},[e._v("\n                            "+e._s(e.PVLevel.getTextFromValue(e.store.formData.userLevel))+"\n                        ")])]),a("veui-field",{attrs:{label:"软件下载总量:",name:"downloadLevel",field:"downloadLevel"}},[a("div",{staticClass:"card-right soft-info"},[e._v("\n                            "+e._s(e.PVLevel.getTextFromValue(e.store.formData.downloadLevel))+"\n                        ")])]),a("veui-field",{attrs:{label:"其他信息:",name:"remark",field:"remark"}},[a("div",{staticClass:"card-right soft-info"},[e._v(e._s(e.store.formData.remark))])])],1)])])],2),e.store.showModify?a("form-view",{staticClass:"edit-form-common media-soft-form",on:{submitsuccess:e.handleSuccess}},[a("template",{slot:"field"},[a("div",{staticClass:"edit-form-content"},[a("div",{staticClass:"edit-form-card has-no-card-title"},[a("div",{staticClass:"soft-tips-remind"},[a("veui-icon",{attrs:{name:"exclamation-circle-o"}}),a("span",[e._v("如果您的修改包括下载地址、软件类型，则需要审核，审核通过才会生效。")])],1),a("veui-field",{attrs:{label:"合作形式:",name:"bizType",field:"bizType",rules:e.store.rules.bizType}},[a("div",{staticClass:"card-right"},[a("veui-checkbox-group",{attrs:{items:e.bizTypeItems},model:{value:e.store.formData.bizType,callback:function(t){e.$set(e.store.formData,"bizType",t)},expression:"store.formData.bizType"}})],1)]),a("veui-field",{attrs:{label:"软件名称:",name:"name",field:"name",rules:e.store.rules.name,tip:"最多可输入40个字符"}},[a("div",{staticClass:"card-right"},[a("veui-input",{model:{value:e.store.formData.name,callback:function(t){e.$set(e.store.formData,"name","string"==typeof t?t.trim():t)},expression:"store.formData.name"}})],1)]),a("veui-field",{attrs:{label:"软件描述:",name:"description",field:"description",rules:"required"}},[a("div",{staticClass:"card-right"},[a("div",{staticClass:"card-line"},[a("veui-textarea",{staticClass:"edit-textarea-large",attrs:{autoresize:"",rows:"8"},model:{value:e.store.formData.description,callback:function(t){e.$set(e.store.formData,"description",t)},expression:"store.formData.description"}})],1)])]),a("veui-field",{attrs:{label:"软件类型:",name:"rootType",field:"rootType",rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-select",{attrs:{placeholder:"选择软件类型",options:e.store.typeList},model:{value:e.store.formData.rootType,callback:function(t){e.$set(e.store.formData,"rootType",t)},expression:"store.formData.rootType"}})],1)]),a("veui-field",{attrs:{label:"下载地址:",name:"downloadLink",field:"downloadLink",rules:"required",tip:"请提供在天空软件站或华军软件园的下载地址，下载页面需含有您注册百度联盟所使用的联系邮箱"}},[a("div",{staticClass:"card-right"},[a("veui-input",{model:{value:e.store.formData.downloadLink,callback:function(t){e.$set(e.store.formData,"downloadLink",t)},expression:"store.formData.downloadLink"}})],1)]),a("veui-field",{attrs:{label:"软件使用人数:",name:"userLevel",field:"userLevel",rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-radio-group",{attrs:{items:e.PVLevel.toOptions()},model:{value:e.store.formData.userLevel,callback:function(t){e.$set(e.store.formData,"userLevel",t)},expression:"store.formData.userLevel"}})],1)]),a("veui-field",{attrs:{label:"软件下载总量:",name:"downloadLevel",field:"downloadLevel",rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-radio-group",{attrs:{items:e.PVLevel.toOptions()},model:{value:e.store.formData.downloadLevel,callback:function(t){e.$set(e.store.formData,"downloadLevel",t)},expression:"store.formData.downloadLevel"}})],1)]),a("veui-field",{attrs:{label:"其他信息:",name:"remark",field:"remark"}},[a("div",{staticClass:"card-right"},[a("veui-input",{model:{value:e.store.formData.remark,callback:function(t){e.$set(e.store.formData,"remark",t)},expression:"store.formData.remark"}})],1)]),a("veui-field",{attrs:{label:"软件类型:",rules:"required"}},[a("div",{staticClass:"card-right"},[a("veui-radio-group",{attrs:{items:e.softwareTypeItems},model:{value:e.store.formData.promotionType,callback:function(t){e.$set(e.store.formData,"promotionType",t)},expression:"store.formData.promotionType"}})],1)])],1)])]),a("template",{slot:"operation"},[a("veui-button",{staticClass:"form-button",attrs:{ui:"primary",type:"submit"}},[e._v("确定")]),a("veui-button",{staticClass:"form-button",on:{click:e.cancel}},[e._v("取消")])],1)],2):e._e()],1)},[],!1,null,"cf44fa9a",null));yd.options.__file="SoftwareFormView.vue";var gd=yd.exports,_d=Object(u.a)(g.a,dd,{name:"hao123-home",components:{"veui-tabs":Sa.a,"veui-tab":F.a,"veui-icon":y.a,"veui-tooltip":I.a,"website-list":md,"software-form":gd}}),Od=(a("3241"),Object(p.a)(_d,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hao123-home-container"},[t("h3",{staticClass:"hao123-title"},[this._v("\n        hao123推广\n        "),t("veui-icon",{ref:"title-question",staticClass:"title-notice-icon",attrs:{name:"question-circle-o"}}),t("veui-tooltip",{attrs:{position:"top-start",target:"title-question",trigger:"hover","overlay-class":"notice-tooltip"}},[this._v("\n            需要新建一个软件进行合作\n        ")])],1),t("veui-tabs",{attrs:{active:this.$route.path}},[t("veui-tab",{attrs:{label:"软件",to:"/union/hao123"}},[t("software-form")],1),this.store.showWebsite?t("veui-tab",{attrs:{label:"网站",to:"/union/hao123/website"}},[t("website-list")],1):this._e()],1)],1)},[],!1,null,"38ebfc82",null));Od.options.__file="Hao123HomeView.vue";var Cd=Od.exports,Dd=[{path:"/",component:z},{path:"/union/media",component:is,auth:"mssp.coop.control"},{path:"/union/media/create",component:vs,auth:"mssp.medium.new"},{path:"/union/media/edit",component:vs,auth:"mssp.medium.modify"},{path:"/union/media/unlock",name:"union/media/unlock",component:Cs},{path:"/union/media/soft",component:cs},{path:"/direct/slot",component:z},{path:"/union/domainMg",component:yt,auth:"mssp.coop.cpro"},{path:"/union/domainMg/create",component:Ct,auth:"mssp.coop.cpro"},{path:"/union/domainMg/edit",component:Ct,auth:"mssp.coop.cpro"},{path:"/union/domainMg/detail",component:Ct,auth:"mssp.coop.cpro"},{path:"/union/channelMg",component:xt,auth:"mssp.coop.cpro"},{path:"/union/channelMg/create",component:Ft,auth:"mssp.coop.cpro"},{path:"/union/channelMg/edit",component:Ft,auth:"mssp.coop.cpro"},{path:"/union/channelMg/detail",component:Ft,auth:"mssp.coop.cpro"},{path:"/report/union",component:z},{path:"/report/content",component:sa,auth:"mssp.coop.cpro"},{path:"/report/media",component:Ca,auth:"mssp.coop.cpro"},{path:"/report/adPosition",component:ji},{path:"/report/adPosition/:id",component:Ni},{path:"/report/media/detail/:id/:name",component:Aa,auth:"mssp.coop.cpro"},{path:"/report/cname",component:Wa},{path:"/report/cname/detail/:cName/:cId",component:ti},{path:"/report/whole",component:ci},{path:"/union/protect",component:Hi,auth:"mssp.coop.cpro"},{path:"/union/filterStrategy/create",component:Ui},{path:"/union/filterStrategy/edit",component:Ui},{path:"/union/filterStrategy/detail",component:Ui},{path:"/union/content/access",component:Ye,auth:"mssp.coop.cpro"},{path:"/union/content/access/create",component:Ne,auth:"mssp.coop.cpro"},{path:"/union/content/protect",component:He,auth:"mssp.coop.cpro"},{path:"/union/content/protect/create",component:Ue,auth:"mssp.coop.cpro"},{path:"/union/content/protect/edit",component:Ue,auth:"mssp.coop.cpro"},{path:"/union/content/protect/detail",component:Ue,auth:"mssp.coop.cpro"},{path:"/union/search/advertise",component:ks,auth:"mssp.coop.search"},{path:"/union/search/advertise/create",component:Ts,auth:"mssp.coop.search"},{path:"/union/search/advertise/edit",component:Ts,auth:"mssp.coop.search"},{path:"/union/tool/advertise",component:As,auth:"mssp.coop.software"},{path:"/union/tool/advertise/create",component:Es,auth:"mssp.coop.software"},{path:"/union/tool/advertise/edit",component:Es,auth:"mssp.coop.software"},{path:"/report/prewarn",component:xu,auth:"mssp.coop.cpro"},{path:"/report/warning",component:at,auth:"mssp.coop.cpro"},{path:"/report/warning/edit",component:ht,auth:"mssp.coop.cpro"},{path:"/report/search/cname",component:Vn,auth:"mssp.coop.search"},{path:"/report/search/cname/detail/:id/:name",component:Qn,auth:"mssp.coop.search"},{path:"/report/search/channel",component:lc},{path:"/report/search/channel/detail/:id/:name",component:hc},{path:"/report/hao123",component:Fn,auth:"mssp.coop.hao123"},{path:"/report/tool-cn",component:Dc,auth:"mssp.coop.software"},{path:"/report/tool-cn/:cName/:cId",component:Ac,auth:"mssp.coop.software"},{path:"/report/tool-channel",component:fu,auth:"mssp.coop.software"},{path:"/report/tool-channel/:cId/:channelId",component:_u,auth:"mssp.coop.software"},{path:"/index",beforeEnter:function(){window.location="./index.html"}},{path:"/union/slot",component:function(){return a.e("website-bundle").then(a.bind(null,"f1e5"))},auth:"mssp.coop.cpro"},{path:"/union/slot/new",component:qs,auth:"mssp.coop.cpro"},{path:"/union/slot/create",component:To,auth:"mssp.coop.cpro"},{path:"/union/slot/:tuId/edit",component:To,auth:"mssp.coop.cpro"},{path:"/modules",beforeEnter:function(){window.location="./modules.html"}},{path:"/message",beforeEnter:function(){window.location="./modules.html#/message"}},{path:"/message/detail",beforeEnter:function(e,t,a){window.location="./modules.html#"+e.fullPath}},{path:"/exceptionRecord",beforeEnter:function(){window.location="./modules.html#/exceptionRecord"}},{path:"/financial/manage",beforeEnter:function(){window.location="./modules.html#/financial/manage"}},{path:"/report/bidding",component:Xo},{path:"/report/channel",component:un,auth:"mssp.coop.cpro"},{path:"/report/subscribe",component:function(){return a.e("website-bundle").then(a.bind(null,"d3be"))}},{path:"/superExp/report",component:Fu,auth:"ssp.exp.lib"},{path:"/superExp/report/detail",component:Vu,auth:"ssp.exp.lib"},{path:"/superExp/todo",component:Gu,auth:"ssp.exp.lib"},{path:"/superExp/doing",component:Ku,auth:"ssp.exp.lib"},{path:"/superExp/done",component:td,auth:"ssp.exp.lib"},{path:"/union/autoAd",component:ld,auth:"mssp.auto.ads"},{path:"/union/autoAd/create",component:ud,auth:"mssp.auto.ads"},{path:"/union/autoAd/:tuId/edit",component:ud,auth:"mssp.auto.ads"},{path:"/union/hao123",component:Cd},{path:"/union/hao123/website",component:Cd}],wd={api:Object(v.a)({},b.a,{geUserInfo:"get|/v2/client/account/init-account/get-info",getQualityPoint:"get|/v2/client/report/billion-gold-query/account/score/now",getIncome:"get|/v2/client/report/new-ssp-query/batch",getBizIncomeByDay:"get|/v2/client/report/new-ssp-query",getBizIncome:"get|/v2/client/report/ssp-query/batch",getWarningText:"get|/v2/client/report/early-warning-report/queryearlywarning",getDomainBizStatus:"get|/v2/client/report/new-ssp-query/getdomainbizstatus",getIncomeByDay:"get|/v2/client/report/ssp-query",getDomainMgList:"get|/v2/client/protect/rescue-strategy/get",updateDomainMg:"post|/v2/client/protect/rescue-strategy/edit/json",createDomainMg:"post|/v2/client/protect/rescue-strategy/save/json",getCnListRequester:"get|/v2/client/channel/cpro-channel/cn-list",getChannelMgList:"get|/v2/client/channel/cpro-channel/query-list",deleteChannelMg:"post|/v2/client/channel/cpro-channel/delete/json",createChannelMg:"post|/v2/client/channel/cpro-channel/save-url-channel/json",channelMgDetail:"get|/v2/client/channel/cpro-channel/query-detail",getContentList:"get|/v2/client/sspcpu/ssp-cpu/page",getChannel:"get|/v2/client/sspcpu/ssp-cpu/channel-list",getCategory:"get|/v2/client/sspcpu/ssp-cpu/category-list",getBlockType:"get|/v2/client/sspcpu/ssp-cpu/block-style-type-list",getContentWebsites:"get|/v2/client/medium/website/listall",createContentAccess:"post|/v2/client/sspcpu/ssp-cpu/save/json",getAgreement:"get|/v2/client/cpu/app-cpu/agreement/show",signAgreement:"post|/v2/client/cpu/app-cpu/agreement/sign",getSearchAdList:"get|/v2/client/channel/search-software-channel/query-list",getCnList:"get|/v2/client/channel/search-software-channel/get-cn-list",saveSearchAd:"post|/v2/client/channel/search-software-channel/save/json",modifySearchAd:"post|/v2/client/channel/search-software-channel/modify/json",deleteSearchAd:"post|/v2/client/channel/search-software-channel/delete/json",getSearchAdDetail:"get|/v2/client/channel/search-software-channel/query-detail",getReportAllQuery:"get|/v2/client/report/ssp-query/page-query",getReportSum:"get|/v2/client/report/ssp-query",getReportAdpCompare:"get|/v2/client/report/ssp-query/page-contrast-query",contentReportSum:"get|/v2/client/report/app-query-cpu1",contentReportChart:"get|/v2/client/report/app-query-cpu2",contentReportList:"get|/v2/client/report/app-query-cpu2",saveReport:"post|/v2/client/report/ssp-template/save",downloadReport:"post|/v2/client/report/app-query/download",getApp:"get|/v2/client/medium/app/list",getWarningSettings:"get|/v2/client/report/early-warning-report/get",setWarningSettings:"post|/v2/client/report/early-warning-report/save/json",adPositionsRequest:"get|/v2/client/adpos/adpos/detail",adPostiionsDetails:"get|/v2/client/adpos/adpos/batchAdposaBaseInfo",getSlotList:"get|/v2/client/adpos/adpos/page-list",getProAdposList:"get|/v2/client/protect/setting/adpos-list",getProAppList:"get|/v2/client/protect/setting/app-list",getProList:"get|/v2/client/protect/rule",createFilter:"post|/v2/client/protect/rule/json",filterDitail:"get|/v2/client/protect/rule/detail",editFilter:"post|/v2/client/protect/rule/modify/json",deleteFilter:"post|/v2/client/protect/rule/status/json",getDsp:"get|/v2/client/common/dsp",getIndustry:"get|/v2/client/common/industry",getWebSlotList:"get|/v2/client/adpos/adpos/get-page-list",getWebSlotNewList:"get|/v2/client/adpos/adpos/get-adpos-baseinfo-page",deleteWebSlotList:"post|/v2/client/adpos/adpos/delete/json",openWebSlotList:"post|/v2/client/adpos/adpos/open/json",closeWebSlotList:"post|/v2/client/adpos/adpos/close/json",getAdpTags:"get|/v2/client/tag/tag/get-adp-tags?type=1",getFilter:"get|/v2/client/protect/rule/pageforadpos",setFilter:"post|/v2/client/protect/rule/bandingRule/json",canCopyCode:"get|/v2/client/adpos/adpos/can-batch-copy",copyCode:"post|/v2/client/adpos/adpos/batch-copy/json",getCodeRelation:"get|/v2/client/protect/rescue-strategy/get-relaton",getCodeRescueStrategy:"get|/v2/client/protect/rescue-strategy/get",matchRescueStrategy:"post|/v2/client/protect/rescue-strategy/match/json",getWebSlotDetail:"get|/v2/client/adpos/adpos/detail",getWebSlotDup:"get|/v2/client/protect/rescue-strategy/get-dup-dynamic-path",getWebSlotCnList:"get|/v2/client/adpos/adpos/cn-list",getWebSlotChannelList:"get|/v2/client/adpos/adpos/channel-bind-list",createWebSlot:"post|/v2/client/adpos/adpos/save/json",updateWebSlot:"post|/v2/client/adpos/adpos/modify/json",accountInitInfo:"get|/v2/client/account/customer-info/init",getNewWebSlotList:"get|/v2/client/adpos/experiment-adpos/page-list",createNewWebSlot:"post|/v2/client/adpos/experiment-adpos/save/json",updateNewWebSlot:"post|/v2/client/adpos/experiment-adpos/modify/json",getNewWebSlotDetail:"get|/v2/client/adpos/experiment-adpos/detail",openNewWebSlotList:"post|/v2/client/adpos/experiment-adpos/open/json",closeNewWebSlotList:"post|/v2/client/adpos/experiment-adpos/close/json",contentProtectList:"get|/v2/client/protect/ssp-cpu-protect-rule",deleteContentProtect:"post|/v2/client/protect/ssp-cpu-protect-rule/status/json",createContentProtect:"post|/v2/client/protect/ssp-cpu-protect-rule/json",updateContentProtect:"post|/v2/client/protect/ssp-cpu-protect-rule/modify/json",contentSiteList:"get|/v2/client/protect/ssp-cpu-protect",contentProtectDetail:"get|/v2/client/protect/ssp-cpu-protect-rule/detail",canCreate:"get|/v2/client/app/app-new/cancreate",getMediaSiteList:"get|/v2/client/medium/website/list",getMediaDetail:"get|/v2/client/medium/website/get",deleteMediaSite:"get|/v2/client/medium/website/delete",verifySite:"get|/v2/client/medium/website/validates",verifySite2:"get|/v2/client/medium/website/verify",getSiteType:"get|/v2/client/medium/website/types",createSite:"post|/v2/client/medium/website/create/json",isFraudUrl:"get|/v2/client/unanti/domain-unlock/is-fraud-url",verifyDomain:"get|/v2/client/unanti/domain-unlock/verify-domain",getUnlockInfo:"get|/v2/client/unanti/domain-unlock/get-unlock-apply-info",submitUnlock:"post|/v2/client/unanti/domain-unlock/apply-unlock-domain/json",forceCreateSite:"post|/v2/client/medium/website/forcecreate/json",modifySite:"post|/v2/client/medium/website/modify/json",getSoft:"get|/v2/client/medium/software/get",modifySoft:"post|/v2/client/medium/software/modify/json",createHao123Software:"post|/v2/client/medium/software/create/json",modifyHao123Software:"post|/v2/client/medium/software/modifyhao123/json",getHao123Tnames:"get|/v2/client/channel/hao123-tn/cn-list",getHao123ReportSum:"get|/v2/client/report/ssp-query",getSearchReport:"get|/v2/client/report/ssp-query",getSearchCnList:"get|/v2/client/cn/cn/get-search-report-cn-list",getAdpCnlist:"get|/v2/client/adpos/adpos/cn-list",getAllMedia:"get|/v2/client/medium/website/listall",getAuctionReportAllQuery:"get|/v2/client/report/ssp-query/page-query",getAuctionReportSum:"get|/v2/client/report/ssp-query",saveAuctionReport:"post|/v2/client/report/ssp-template/save",getToolReportAllQuery:"get|/v2/client/report/ssp-query/page-query",getToolReportSum:"get|/v2/client/report/ssp-query",saveToolReport:"post|/v2/client/report/ssp-template/save",getToolCnList:"get|/v2/client/cn/cn/get-software-report-cn-list",getToolChannelList:"get|/v2/client/channel/search-software-channel/query-list",getAccountWarn:"get|/v2/client/report/early-warning-report/getaccountreport",getAdpListWarn:"get|/v2/client/report/early-warning-report/getadreport",getAdpWarn:"get|/v2/client/report/early-warning-report/queryfluxad",getSubscribeList:"get|/v2/client/report/ssp-template/pagedomain",modifySubReport:"get|/v2/client/report/ssp-template/modify",getSubscribeById:"get|/v2/client/report/ssp-template",getSupExpReportList:"get|/v2/client/experiment/optimal-exp-adp-report/optimal-ad-data",getOptimalExpAdp:"get|/v2/client/experiment/optimal-exp-adp/page",getSupExpReportDetail:"get|/v2/client/experiment/optimal-exp-adp-report/query-ad-data",getSupExpSlotDetail:"get|/v2/client/experiment/optimal-exp-adp-report/ad-info",getSupExpSlotDetailList:"get|/v2/client/experiment/optimal-exp-adp-report/page-ad-data",getAutoSlotList:"post|/v2/client/autoadpos/auto-adpos/autoAdposPage/json",saveAutoInfo:"post|/v2/client/autoadpos/auto-adpos/saveAutoInfo/json",modifyAutoInfo:"post|/v2/client/autoadpos/auto-adpos/modifyAutoInfo/json",websitesList:"get|/v2/client/autoadpos/auto-adpos/websitesList",getPathList:"get|/v2/client/autoadpos/auto-adpos/getPathList",saveGroupPath:"post|/v2/client/autoadpos/auto-adpos/saveGroupPath/json",modifyStatus:"post|/v2/client/autoadpos/auto-adpos/modifyStatus/json",autoAdposDetail:"get|/v2/client/autoadpos/auto-adpos/autoAdposDetail",modifySupExpAdp:"post|/v2/client/experiment/optimal-exp-adp/modify/json",switchSupExpAdp:"post|/v2/client/experiment/optimal-exp-adp/switch/json",getOptimalAdData:"get|/v2/client/experiment/optimal-exp-adp-report/optimal-ad-data"}),nav:{items:[{text:"概览",url:"/",include:/^\/$/},{text:"合作管理",include:/^\/union\//,url:"/union/media",auth:"mssp.coop.control",items:[{text:"媒体管理",url:"/union/media",icon:"media-manage",include:/^\/union\/media\//},{text:"网盟推广",icon:"sidebar-union-icon",url:"/union/slot",auth:"mssp.coop.cpro",items:[{text:"代码位管理",url:"/union/slot"},{text:"智能广告位",url:"/union/autoAd",auth:"mssp.auto.ads",class:"nav-subItem-new"},{text:"过滤策略",url:"/union/protect"},{text:"渠道管理",url:"/union/channelMg"},{text:"反屏蔽设置",url:"/union/domainMg"}]},{text:"内容联盟",url:"/union/content/access",icon:"sidebar-content-union-icon",auth:"mssp.coop.cpro",items:[{text:"内容联盟接入",url:"/union/content/access"},{text:"内容屏蔽",url:"/union/content/protect"}]},{text:"直投管理",externalUrl:"https://ssp.baidu.com/static/main.html/delivery/list",target:"_blank",auth:"mssp.coop.cpro",icon:"ssp-advertise-icon"},{text:"搜索推广",url:"/union/search/advertise",icon:"search-advertise",auth:"mssp.coop.search"},{text:"工具栏推广",url:"/union/tool/advertise",icon:"tool-advertise-icon",auth:"mssp.coop.software"},{text:"hao123推广",url:"/union/hao123",icon:"desktop"}]},{text:"数据报告",url:"/report/bidding",include:/^\/report\//,items:[{text:"网盟推广报告",url:"/report/whole",icon:"report_union_icon",auth:"mssp.coop.cpro",items:[{text:"整体报告",url:"/report/whole"},{text:"计费名报告",url:"/report/cname",include:/^\/report\/cname\/detail\/*/},{text:"媒体报告",url:"/report/media",include:/^\/report\/media\/*/},{text:"代码位报告",url:"/report/adPosition",include:/^\/report\/adPosition\/*/},{text:"分渠道报告",url:"/report/channel"},{text:"自定义报告",url:"/report/bidding"}]},{text:"内容联盟报告",url:"/report/content",icon:"report_content_icon",auth:"mssp.coop.cpro"},{text:"搜索推广报告",url:"/report/search/cname",icon:"report-search-icon",auth:"mssp.coop.search",items:[{text:"分计费名",url:"/report/search/cname",include:/^\/report\/search\/cname\/*/},{text:"分渠道",url:"/report/search/channel",include:/^\/report\/search\/channel\/*/}]},{text:"工具栏报告",url:"/report/tool",icon:"tool-report-icon",auth:"mssp.coop.software",items:[{text:"分计费名",url:"/report/tool-cn",include:/^\/report\/tool-cn\/*/},{text:"分渠道",url:"/report/tool-channel",include:/^\/report\/tool-channel\/*/}]},{text:"hao123报告",url:"/report/hao123",icon:"hao123-report-icon",auth:"mssp.coop.hao123"},{text:"预警报告",url:"/report/prewarn",icon:"pre_warn_icon",auth:"mssp.coop.cpro"},{text:"报告设置",url:"/report/subscribe",icon:"report_setup_icon",items:[{text:"订阅设置",url:"/report/subscribe"},{text:"预警设置",url:"/report/warning",auth:"mssp.coop.cpro"}]}]},{text:"启优实验室",url:"/superExp/todo",include:/^\/superExp\//,auth:"ssp.exp.lib",items:[{text:"启优实验室",url:"/superExp/todo",icon:"report_union_icon"},{text:"实验报告",url:"/superExp/report",icon:"report_content_icon"}]}]},routes:Dd,user:{idKey:"proxyId",authMergeStrategy:"CEILING"}},jd=a("df0a");a("23fe5"),a("75fc"),new jd.a(wd,Mi.a,m).start()},"8bd1":function(e,t,a){"use strict";var i=a("7a7b");a.n(i).a},"8bdb":function(e,t,a){"use strict";(function(e){a("a481"),a("3b2b");var i=a("53ca"),s=(a("6b54"),/^\s+/),l=/\s+$/,r=0,o=Math.round,n=Math.min,c=Math.max,u=Math.random;function d(e,t){if(t=t||{},(e=e||"")instanceof d)return e;if(!(this instanceof d))return new d(e,t);var a=function(e){var t={r:0,g:0,b:0},a=1,r=null,o=null,u=null,d=!1,f=!1;return"string"==typeof e&&(e=function(e){e=e.replace(s,"").replace(l,"").toLowerCase();var t,a=!1;if(R[e])e=R[e],a=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=$.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=$.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=$.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=$.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=$.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=$.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=$.hex8.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),a:E(t[4]),format:a?"name":"hex8"}:(t=$.hex6.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),format:a?"name":"hex"}:(t=$.hex4.exec(e))?{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),a:E(t[4]+""+t[4]),format:a?"name":"hex8"}:!!(t=$.hex3.exec(e))&&{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),format:a?"name":"hex"}}(e)),"object"==Object(i.a)(e)&&(z(e.r)&&z(e.g)&&z(e.b)?(t=function(e,t,a){return{r:255*F(e,255),g:255*F(t,255),b:255*F(a,255)}}(e.r,e.g,e.b),d=!0,f="%"===String(e.r).substr(-1)?"prgb":"rgb"):z(e.h)&&z(e.s)&&z(e.v)?(r=Y(e.s),o=Y(e.v),t=function(e,t,a){e=6*F(e,360),t=F(t,100),a=F(a,100);var i=Math.floor(e),s=e-i,l=a*(1-t),r=a*(1-s*t),o=a*(1-(1-s)*t),n=i%6;return{r:255*[a,r,l,l,o,a][n],g:255*[o,a,a,r,l,l][n],b:255*[l,l,o,a,a,r][n]}}(e.h,r,o),d=!0,f="hsv"):z(e.h)&&z(e.s)&&z(e.l)&&(r=Y(e.s),u=Y(e.l),t=function(e,t,a){var i,s,l;function r(e,t,a){return a<0&&(a+=1),1<a&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e}if(e=F(e,360),t=F(t,100),a=F(a,100),0===t)i=s=l=a;else{var o=a<.5?a*(1+t):a+t-a*t,n=2*a-o;i=r(n,o,e+1/3),s=r(n,o,e),l=r(n,o,e-1/3)}return{r:255*i,g:255*s,b:255*l}}(e.h,r,u),d=!0,f="hsl"),e.hasOwnProperty("a")&&(a=e.a)),a=I(a),{ok:d,format:e.format||f,r:n(255,c(t.r,0)),g:n(255,c(t.g,0)),b:n(255,c(t.b,0)),a:a}}(e);this._originalInput=e,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=o(100*this._a)/100,this._format=t.format||a.format,this._gradientType=t.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=a.ok,this._tc_id=r++}function f(e,t,a){e=F(e,255),t=F(t,255),a=F(a,255);var i,s,l=c(e,t,a),r=n(e,t,a),o=(l+r)/2;if(l==r)i=s=0;else{var u=l-r;switch(s=.5<o?u/(2-l-r):u/(l+r),l){case e:i=(t-a)/u+(t<a?6:0);break;case t:i=(a-e)/u+2;break;case a:i=(e-t)/u+4}i/=6}return{h:i,s:s,l:o}}function p(e,t,a){e=F(e,255),t=F(t,255),a=F(a,255);var i,s,l=c(e,t,a),r=n(e,t,a),o=l,u=l-r;if(s=0===l?0:u/l,l==r)i=0;else{switch(l){case e:i=(t-a)/u+(t<a?6:0);break;case t:i=(a-e)/u+2;break;case a:i=(e-t)/u+4}i/=6}return{h:i,s:s,v:o}}function h(e,t,a,i){var s=[M(o(e).toString(16)),M(o(t).toString(16)),M(o(a).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function m(e,t,a,i){return[M(L(i)),M(o(e).toString(16)),M(o(t).toString(16)),M(o(a).toString(16))].join("")}function v(e,t){t=0===t?0:t||10;var a=d(e).toHsl();return a.s-=t/100,a.s=N(a.s),d(a)}function b(e,t){t=0===t?0:t||10;var a=d(e).toHsl();return a.s+=t/100,a.s=N(a.s),d(a)}function y(e){return d(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;var a=d(e).toHsl();return a.l+=t/100,a.l=N(a.l),d(a)}function _(e,t){t=0===t?0:t||10;var a=d(e).toRgb();return a.r=c(0,n(255,a.r-o(-t/100*255))),a.g=c(0,n(255,a.g-o(-t/100*255))),a.b=c(0,n(255,a.b-o(-t/100*255))),d(a)}function O(e,t){t=0===t?0:t||10;var a=d(e).toHsl();return a.l-=t/100,a.l=N(a.l),d(a)}function C(e,t){var a=d(e).toHsl(),i=(a.h+t)%360;return a.h=i<0?360+i:i,d(a)}function D(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function w(e){var t=d(e).toHsl(),a=t.h;return[d(e),d({h:(a+120)%360,s:t.s,l:t.l}),d({h:(a+240)%360,s:t.s,l:t.l})]}function j(e){var t=d(e).toHsl(),a=t.h;return[d(e),d({h:(a+90)%360,s:t.s,l:t.l}),d({h:(a+180)%360,s:t.s,l:t.l}),d({h:(a+270)%360,s:t.s,l:t.l})]}function k(e){var t=d(e).toHsl(),a=t.h;return[d(e),d({h:(a+72)%360,s:t.s,l:t.l}),d({h:(a+216)%360,s:t.s,l:t.l})]}function S(e,t,a){t=t||6,a=a||30;var i=d(e).toHsl(),s=360/a,l=[d(e)];for(i.h=(i.h-(s*t>>1)+720)%360;--t;)i.h=(i.h+s)%360,l.push(d(i));return l}function x(e,t){t=t||6;for(var a=d(e).toHsv(),i=a.h,s=a.s,l=a.v,r=[],o=1/t;t--;)r.push(d({h:i,s:s,v:l})),l=(l+o)%1;return r}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,a,i=this.toRgb();return e=i.r/255,t=i.g/255,a=i.b/255,.2126*(e<=.03928?e/12.92:Math.pow((.055+e)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((.055+t)/1.055,2.4))+.0722*(a<=.03928?a/12.92:Math.pow((.055+a)/1.055,2.4))},setAlpha:function(e){return this._a=I(e),this._roundA=o(100*this._a)/100,this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b),t=o(360*e.h),a=o(100*e.s),i=o(100*e.v);return 1==this._a?"hsv("+t+", "+a+"%, "+i+"%)":"hsva("+t+", "+a+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=f(this._r,this._g,this._b),t=o(360*e.h),a=o(100*e.s),i=o(100*e.l);return 1==this._a?"hsl("+t+", "+a+"%, "+i+"%)":"hsla("+t+", "+a+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return h(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,a,i,s){var l=[M(o(e).toString(16)),M(o(t).toString(16)),M(o(a).toString(16)),M(L(i))];return s&&l[0].charAt(0)==l[0].charAt(1)&&l[1].charAt(0)==l[1].charAt(1)&&l[2].charAt(0)==l[2].charAt(1)&&l[3].charAt(0)==l[3].charAt(1)?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*F(this._r,255))+"%",g:o(100*F(this._g,255))+"%",b:o(100*F(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*F(this._r,255))+"%, "+o(100*F(this._g,255))+"%, "+o(100*F(this._b,255))+"%)":"rgba("+o(100*F(this._r,255))+"%, "+o(100*F(this._g,255))+"%, "+o(100*F(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a),a=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=d(e);a="#"+m(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+a+")"},toString:function(e){var t=!!e;e=e||this._format;var a=!1,i=this._a<1&&0<=this._a;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(a=this.toRgbString()),"prgb"===e&&(a=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(a=this.toHexString()),"hex3"===e&&(a=this.toHexString(!0)),"hex4"===e&&(a=this.toHex8String(!0)),"hex8"===e&&(a=this.toHex8String()),"name"===e&&(a=this.toName()),"hsl"===e&&(a=this.toHslString()),"hsv"===e&&(a=this.toHsvString()),a||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(e,t){var a=e.apply(null,[this].concat([].slice.call(t)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(O,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(D,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(j,arguments)}},d.fromRatio=function(e,t){if("object"==Object(i.a)(e)){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]="a"===s?e[s]:Y(e[s]));e=a}return d(e,t)},d.equals=function(e,t){return!(!e||!t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:u(),g:u(),b:u()})},d.mix=function(e,t,a){a=0===a?0:a||50;var i=d(e).toRgb(),s=d(t).toRgb(),l=a/100;return d({r:(s.r-i.r)*l+i.r,g:(s.g-i.g)*l+i.g,b:(s.b-i.b)*l+i.b,a:(s.a-i.a)*l+i.a})},d.readability=function(e,t){var a=d(e),i=d(t);return(Math.max(a.getLuminance(),i.getLuminance())+.05)/(Math.min(a.getLuminance(),i.getLuminance())+.05)},d.isReadable=function(e,t,a){var i,s,l=d.readability(e,t);switch(s=!1,(i=function(e){var t,a;return t=((e=e||{level:"AA",size:"small"}).level||"AA").toLowerCase(),a=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==a&&"large"!==a&&(a="small"),{level:t,size:a}}(a)).level+i.size){case"AAsmall":case"AAAlarge":s=4.5<=l;break;case"AAlarge":s=3<=l;break;case"AAAsmall":s=7<=l}return s},d.mostReadable=function(e,t,a){var i,s,l,r,o=null,n=0;s=(a=a||{}).includeFallbackColors,l=a.level,r=a.size;for(var c=0;c<t.length;c++)n<(i=d.readability(e,t[c]))&&(n=i,o=d(t[c]));return d.isReadable(e,o,{level:l,size:r})||!s?o:(a.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],a))};var R=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=d.hexNames=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}(R);function I(e){return e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=1),e}function F(e,t){!function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}(e)||(e="100%");var a=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=n(t,c(0,parseFloat(e))),a&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function N(e){return n(1,c(0,e))}function A(e){return parseInt(e,16)}function M(e){return 1==e.length?"0"+e:""+e}function Y(e){return e<=1&&(e=100*e+"%"),e}function L(e){return Math.round(255*parseFloat(e)).toString(16)}function E(e){return A(e)/255}var P,V,B,$=(V="[\\s|\\(]+("+(P="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",B="[\\s|\\(]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",{CSS_UNIT:new RegExp(P),rgb:new RegExp("rgb"+V),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+V),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+V),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function z(e){return!!$.CSS_UNIT.exec(e)}e.exports?e.exports=d:"function"==typeof define&&a("3c35")?define(function(){return d}):window.tinycolor=d,t.a=d}).call(this,a("dd40")(e))},"8c4f0":function(e,t,a){"use strict";var i=a("d83c");a.n(i).a},"8cd2":function(e,t,a){"use strict";var i=a("2243");a.n(i).a},"8d40":function(e,t,a){},"8e77":function(e,t,a){"use strict";var i=a("11fa");a.n(i).a},"91db":function(e,t,a){},"938a":function(e,t,a){"use strict";var i=a("2472");a.n(i).a},"947f":function(e,t,a){"use strict";var i=a("0efc");a.n(i).a},"95ee":function(e,t,a){"use strict";var i=a("3abb");a.n(i).a},"97b9":function(e,t,a){"use strict";var i=a("53dd");a.n(i).a},9830:function(e,t,a){},9833:function(e,t,a){},"9ad1":function(e,t,a){},"9ba8":function(e,t,a){},"9c5b":function(e,t,a){},"9ef5":function(e,t,a){},a01b:function(e,t,a){"use strict";var i=a("a925");a.n(i).a},a59f:function(e,t,a){},a600:function(e,t,a){},a609:function(e,t,a){"use strict";var i=a("87e9");a.n(i).a},a78a:function(e,t,a){},a925:function(e,t,a){},a978:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var i=a("d4ec"),s=a("99de"),l=a("7e84"),r=a("262e"),o=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(r.a)(t,e),t}(a("ef51").a)},a992:function(e,t,a){"use strict";var i=a("cbbc");a.n(i).a},ac74:function(e,t,a){},ac80:function(e,t,a){"use strict";var i=a("cc32");a.n(i).a},ad22:function(e,t,a){"use strict";var i=a("4d80");a.n(i).a},aef1:function(e,t,a){"use strict";var i=a("a59f");a.n(i).a},b2f1:function(e,t,a){},b372:function(e,t,a){},b87c:function(e,t,a){},ba23:function(e,t,a){"use strict";var i=a("df56");a.n(i).a},bcb1:function(e,t,a){"use strict";a("6762"),a("2fdb"),a("28a5"),a("f751"),a("386d"),a("7f7f"),a("96cf");var i,s=a("1da1"),l=a("c1df"),r=a.n(l),o=a("1119"),n=a("be94"),c=a("d4ec"),u=a("bee2"),d=a("99de"),f=a("7e84"),p=a("45eb"),h=a("262e"),m=a("257e"),v=a("ade3"),b=a("c641"),y=a.n(b),g=a("3eea"),_=a.n(g),O=a("91ff"),C=a("bc3a"),D=a.n(C),w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s))),Object(v.a)(Object(m.a)(Object(m.a)(a)),"title",""),Object(v.a)(Object(m.a)(Object(m.a)(a)),"axioss",D.a.create({responseType:"arraybuffer"})),Object(v.a)(Object(m.a)(Object(m.a)(a)),"filter",Object(n.a)({},_()(a.filter,"timeRange"),{orderBy:"modifyTime",orderBys:"modifyTime",statusBqt:"",keyword:"",search:""})),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"init",value:function(){Object(p.a)(Object(f.a)(t.prototype),"init",this).call(this),this.listRequester=this.api.getNewWebSlotList,this.openNewWebSlotList=this.api.openNewWebSlotList,this.closeNewWebSlotList=this.api.closeNewWebSlotList,this.getCodeRelation=this.api.getCodeRelation,this.getCodeRescueStrategy=this.api.getCodeRescueStrategy,this.matchRescueStrategy=this.api.matchRescueStrategy,this.getWebSlotDetail=this.api.getWebSlotDetail,this.getWebSlotDup=this.api.getWebSlotDup;var e=Object(p.a)(Object(f.a)(t.prototype),"getRouteQuery",this).call(this);this.filter=Object(n.a)({},this.filter,e)}},{key:"fillFilterFromQuery",value:function(){var e=this;y()(this.filter,function(t,a){"timeRange"!==a&&e.convertQuery(t,a)})}},{key:"prepareParams",value:function(e){return delete e.orderBy,e}},{key:"adaptData",value:function(e){return{pageNo:e.pageNo,pageSize:e.pageSize,totalCount:e.totalCount,result:e.result,order:this.filter.order,orderBy:this.filter.orderBy}}},{key:"getCodeParams",value:function(e){return this.getWebSlotDetail({tuIdList:e})}}]),t}(O.a),j=a("94c6"),k=a("2e2d"),S=a("6bab"),x=a("927d"),R=a("3a6d"),T=a("7898"),I=a("c9ac"),F=a("5e6e"),N=a("af34"),A=a("6235"),M=a("e469"),Y=a("9434"),L=a("dd9a"),E=a("5b30"),P=a("ab80"),V=a("4681"),B=a("543b"),$=a("8631"),z=a("9a9a"),q=a("b8c7"),U=a("f64b"),W=a("7fd1"),G=Object(j.a)(o.a,w,{name:"slotList",components:{"veui-tabs":k.a,"veui-tab":S.a,"veui-fieldset":R.a,"veui-field":x.a,"veui-table-column":N.a,"veui-searchbox":F.a,"veui-button":T.a,"veui-select":I.a,"veui-icon":A.a,"veui-selecthor":q.a,"veui-dialog":M.a,"veui-overlay":Y.a,"veui-dropdown":L.a,"veui-link":E.a,"veui-textarea":P.a,"veui-tooltip":V.a,"veui-checkbox":B.a,"veui-input":$.a,ListFilters:U.a},data:function(){return{statusObj:W.q,Status:W.k,modalVisible:!1,openFilters:!1,rescueVisible:!1,checkedRescue:!1,adInfo:{},filterOptions:[{label:"状态",name:"statusBqt",items:W.k,selected:this.store.filter.statusBqt}],jsUrl:"",dupPath:"",setId:"",edit:{type:"",id:""},operations:[]}},directives:{autosubmit:z.a},computed:{},methods:{search:function(){this.global.searchList(this)},goToEdit:function(e){this.global.router.push({path:"/union/slot/".concat(e,"/edit"),query:{new:1}})},goToCreate:function(){this.global.router.push({path:"/union/slot/create",query:{new:1}})},getCodeParams:(i=Object(s.a)(regeneratorRuntime.mark(function e(t,a){var i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.getCodeParams(t);case 2:i=e.sent,s=i[0].adPosDetail,this.adInfo={name:s.name,tuId:s.tuStr,tu:s.tu,psid:s.psid||""},411===s.adType?this.adInfo.script="http://cpro.baidustatic.com/cpro/ui/c.js":this.adInfo.script="http://cpro.baidustatic.com/cpro/ui/cm.js",this.createCode(),this.modalVisible=!0;case 8:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)}),createCode:function(){var e,t=this.adInfo.tu,a=this.adInfo.script,i=this.adInfo.psid?"cpro_psid":"cpro_id",s=this.adInfo.name;e='<script type="text/javascript">\n        /*'.concat(s,"*/\n        var ").concat(i,' = "').concat(t,'";\n<\/script>\n<script type="text/javascript" src="').concat(a,'"><\/script>'),document.getElementById("code").value=e},copyCode:function(){document.getElementById("code").select(),document.execCommand("copy")&&document.execCommand("copy")},operate:function(e){switch(e){case"stop":this.batchClose(this.store.tableSelected);break;case"start":this.batchOpen(this.store.tableSelected)}},batchOpen:function(e){var t=this;this.store.openNewWebSlotList({tuIdList:e}).then(function(e){t.store.submitSearch(),t.showToast("启用成功",{type:"success"})})},batchClose:function(e){var t=this;this.store.closeNewWebSlotList({tuIdList:e}).then(function(e){t.store.submitSearch(),t.showToast("停用成功",{type:"success"})})},refreshPageList:function(e){"edit"===e?(this.store.submitSearch(),this.store.prepareFilter()):"create"===e&&this.store.submitSearch()},toggleFilters:function(){this.openFilters=!0!==this.openFilters},requestAfterFilter:function(e){this.store.filter.search&&(this.store.filter.keyword=this.store.filter.search),this.store.filter.search="",this.store.filter=Object.assign(this.store.filter,e),this.openFilters=!1,this.store.submitSearch(),this.$forceUpdate()},formatSize:function(e){var t=e.split(/[*:.]/g);return""!==t[1]&&"0"!==t[1]||(e="自适应"),""!==t[0]&&"0"!==t[0]||"0"===t[1]||""===t[1]||(e="通栏"),e},formatTime:function(e){return r()(e).format("YYYY-MM-DD")},gotoReport:function(e){var t=this.global.router.resolve({path:"/report/bidding",query:{adPositionId:e,dimensions:"adPositionName",filterFields:"rtbTypeId,sellTypeId,getAdType,adPositionId",filterValues:"0|1|1|".concat(e)}});window.open(t.href,"_blank")},toRescueCode:function(){this.createRescueCode(),this.rescueVisible=!0},getRescueParam:function(e){var t=this;this.jsUrl="",this.store.getCodeRescueStrategy().then(function(a){var i=a[0];t.jsUrl=i.jsUrl,t.setId=i.id,t.store.getWebSlotDup({shotId:e,posUrl:i.posUrl}).then(function(e){t.dupPath=e})}),this.store.getCodeRelation({tu:this.adInfo.tuId}).then(function(e){t.checkedRescue=Boolean(e&&e.rescueStrategy)})},createRescueCode:function(){var e=this.jsUrl,t=this.dupPath;t.includes(".js?")||(t="".concat(t,".js"));var a='<script type="text/javascript" src="//'.concat(e,"/").concat(t,'"><\/script>');document.getElementById("rescueCode").value=a},copyRescueCode:function(){document.getElementById("rescueCode").select(),document.execCommand("copy")&&document.execCommand("copy")},setRescueStatus:function(e){var t={id:this.setId,tu:this.adInfo.tuId,type:e?1:0};this.store.matchRescueStrategy(t).then()}}}),H=(a("e3c5"),a("2877")),Q=Object(H.a)(G,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("list-view",{staticClass:"web-slot-list-view"},[a("template",{slot:"filterContent"},[a("veui-field",[a("veui-button",{attrs:{ui:"primary"},on:{click:e.goToCreate}},[e._v("新建代码位")])],1),a("veui-button",{staticClass:"filters",staticStyle:{"margin-left":"20px"},on:{click:e.toggleFilters}},[e._v("\n            筛选\n            "),a("veui-icon",{staticClass:"filters-angle",class:{open:e.openFilters},attrs:{name:"angle-down"}})],1),a("veui-field",{staticClass:"message-search",attrs:{field:"key"}},[a("veui-searchbox",{attrs:{placeholder:"搜索代码位名称或ID"},on:{search:e.search},model:{value:e.store.filter.search,callback:function(t){e.$set(e.store.filter,"search",t)},expression:"store.filter.search"}})],1),a("list-filters",{attrs:{"init-filter":e.store.filter,"filter-options":e.filterOptions,"show-filters":e.openFilters},on:{filterChange:e.requestAfterFilter,closeFilter:e.toggleFilters}})],1),a("template",{slot:"tableColumns"},[a("veui-table-column",{attrs:{field:"name",width:"250",title:"代码位名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{attrs:{title:t.name}},[e._v(e._s(t.name))]),a("div",{staticClass:"tableID filter-cell"},[e._v("ID:"+e._s(t.tu))])]}}])}),a("veui-table-column",{attrs:{field:"size",width:"120",title:"尺寸"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e.formatSize(t.size)))])]}}])}),a("veui-table-column",{attrs:{field:"modifyTime",width:"150",title:"更新时间",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.formatTime(t.modifyTime)))])]}}])}),a("veui-table-column",{attrs:{field:"status",width:"100",title:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.statusObj[t.status]))])]}}])}),a("veui-table-column",{attrs:{field:"op",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"op"},[a("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.getCodeParams(t.tuStr,t.tu)}}},[e._v("\n                        获取代码\n                    ")]),a("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.goToEdit(t.tuStr)}}},[e._v("\n                        修改\n                    ")]),a("veui-button",{staticClass:"op-button",attrs:{ui:"link"},on:{click:function(a){e.gotoReport(t.tu)}}},[e._v("\n                        查看报告\n                    ")])],1)]}}])})],1),a("veui-dialog",{attrs:{"overlay-class":"web-code-dialog new-web-code-dialog",open:e.modalVisible,title:"获取代码位"},on:{"update:open":function(t){e.modalVisible=t}}},[a("template",{slot:"title"},[a("h3",[e._v("获取代码位")])]),a("article",{directives:[{name:"show",rawName:"v-show",value:!e.rescueVisible,expression:"!rescueVisible"}]},[a("p",{staticClass:"sub-title"},[e._v("将此段代码粘贴到您希望放置的网页中。")]),a("textarea",{ref:"code",staticClass:"code",attrs:{id:"code",readonly:"readonly"}})]),a("article",{directives:[{name:"show",rawName:"v-show",value:e.rescueVisible,expression:"rescueVisible"}]},[a("p",[e._v("\n                设置反屏蔽：\n                "),a("veui-checkbox",{on:{change:e.setRescueStatus},model:{value:e.checkedRescue,callback:function(t){e.checkedRescue=t},expression:"checkedRescue"}}),e._v("\n                (设置后可获取投放代码)\n            ")],1),a("p",[e._v("反屏蔽投放代码："),a("span",{staticClass:"rescue-notice"},[e._v("（注：请完整粘贴如下代码，不要做修改。）")])]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:e.checkedRescue,expression:"checkedRescue"}],staticClass:"code",attrs:{id:"rescueCode",readonly:"readonly"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:e.checkedRescue,expression:"checkedRescue"}]},[e._v("说明：请使用此JS代码投放至页面上以完成广告反屏蔽功能。")])]),a("template",{slot:"foot"},[a("veui-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescueVisible,expression:"!rescueVisible"}],attrs:{ui:"primary"},on:{click:e.copyCode}},[e._v("复制")]),a("veui-button",{directives:[{name:"show",rawName:"v-show",value:!e.rescueVisible,expression:"!rescueVisible"}],on:{click:function(t){e.modalVisible=!1}}},[e._v("关闭")]),a("veui-button",{directives:[{name:"show",rawName:"v-show",value:e.rescueVisible&&e.checkedRescue,expression:"rescueVisible && checkedRescue"}],attrs:{ui:"primary"},on:{click:e.copyRescueCode}},[e._v("复制\n            ")]),a("veui-button",{directives:[{name:"show",rawName:"v-show",value:e.rescueVisible,expression:"rescueVisible"}],on:{click:function(t){e.rescueVisible=!1}}},[e._v("返回")])],1)],2)],2)},[],!1,null,null,null);Q.options.__file="NewListView.vue",t.a=Q.exports},bea5:function(e,t,a){},c015:function(e,t,a){},c061:function(e,t,a){"use strict";var i=a("b87c");a.n(i).a},c687:function(e,t,a){},c99a:function(e,t,a){},cbbc:function(e,t,a){},cbe6:function(e,t,a){},cc32:function(e,t,a){},cdb7:function(e,t,a){},cde3:function(e,t,a){"use strict";var i=a("46db");a.n(i).a},cf285:function(e,t,a){"use strict";var i=a("1f92");a.n(i).a},cf53:function(e,t,a){},d0006:function(e,t,a){e.exports=a.p+"050309cdb5beeb25ffcc1d5189e8811b.svg"},d011:function(e,t,a){"use strict";var i=a("1d4a");a.n(i).a},d08f:function(e,t,a){"use strict";var i=a("cdb7");a.n(i).a},d0c1:function(e,t,a){},d18e:function(e,t,a){"use strict";var i=a("6459");a.n(i).a},d294:function(e,t,a){},d2e62:function(e,t,a){"use strict";var i=a("fd5c");a.n(i).a},d3c7:function(e,t,a){"use strict";var i=a("1491");a.n(i).a},d47f:function(e,t,a){},d57c:function(e,t,a){"use strict";var i=a("b372");a.n(i).a},d581:function(e,t,a){"use strict";var i=a("e530");a.n(i).a},d6e8:function(e,t,a){"use strict";var i=a("6c32");a.n(i).a},d715:function(e,t,a){},d83c:function(e,t,a){},dbb9:function(e,t,a){"use strict";var i=a("edda");a.n(i).a},dc44:function(e,t,a){},dc91:function(e,t,a){"use strict";var i=a("cbe6");a.n(i).a},deb9:function(e,t,a){"use strict";var i=a("888d");a.n(i).a},df56:function(e,t,a){},dfde:function(e,t,a){"use strict";var i=a("9ba8");a.n(i).a},e0c3:function(e,t,a){"use strict";var i=a("09d3");a.n(i).a},e25a:function(e,t,a){"use strict";var i=a("4d5d");a.n(i).a},e2a4:function(e,t,a){},e340:function(e,t,a){},e35e:function(e,t,a){},e3c5:function(e,t,a){"use strict";var i=a("2053");a.n(i).a},e530:function(e,t,a){},e694:function(e,t,a){"use strict";var i=a("dc44");a.n(i).a},e6e4:function(e,t,a){"use strict";var i=a("bea5");a.n(i).a},e795:function(e,t,a){"use strict";var i=a("36c6");a.n(i).a},e8e7:function(e,t,a){"use strict";var i=a("d715");a.n(i).a},ea70:function(e,t,a){},eae6:function(e,t,a){"use strict";var i=a("f916");a.n(i).a},eb15:function(e,t,a){"use strict";var i=a("43cf");a.n(i).a},eb9c:function(e,t,a){},ebad:function(e,t,a){"use strict";var i=a("91db");a.n(i).a},ebae:function(e,t,a){},edda:function(e,t,a){},f066:function(e,t,a){"use strict";var i=a("ebae");a.n(i).a},f197:function(e,t,a){"use strict";var i=a("d0c1");a.n(i).a},f1c6:function(e,t,a){},f1e5:function(e,t,a){"use strict";a.r(t);var i=a("f030"),s=a("94c6"),l=a("a978"),r=a("2e2d"),o=a("6bab"),n=a("bcb1"),c=a("3abc"),u=Object(s.a)(i.a,l.a,{name:"slot-home",components:{"veui-tabs":r.a,"veui-tab":o.a,"new-list":n.a,"slot-list":c.a}}),d=(a("5d7b"),a("2877")),f=Object(d.a)(u,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"slot-home-container"},[t("h3",{staticClass:"media-list-title"},[this._v("代码位管理")]),t("veui-tabs",{attrs:{active:this.$route.path}},[t("veui-tab",{attrs:{label:"代码位管理",to:"/union/slot"}},[t("slot-list")],1),t("veui-tab",{attrs:{label:"创新样式管理",to:"/union/slot/new"}},[t("new-list")],1)],1)],1)},[],!1,null,"ee0e8f52",null);f.options.__file="SlotHomeView.vue",t.default=f.exports},f30f:function(e,t,a){"use strict";var i=a("e340");a.n(i).a},f3c4:function(e,t,a){},f650:function(e,t,a){"use strict";var i=a("8091");a.n(i).a},f906:function(e,t,a){"use strict";var i=a("c015");a.n(i).a},f916:function(e,t,a){},f9f0:function(e,t,a){},fd5c:function(e,t,a){},fda1:function(e,t,a){"use strict";var i=a("7701");a.n(i).a},ffdb:function(e,t,a){}});
//# sourceMappingURL=websiteco.350de50a.js.map